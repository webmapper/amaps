{"version":3,"file":"multiselect.iife.js","sources":["../../node_modules/whatwg-fetch/fetch.js","../../node_modules/easytype/index.js","../../node_modules/hard-prop/index.js","../../node_modules/tress/index.js","../../nlmaps/dist/nlmaps.es.js","../../node_modules/proj4/lib/global.js","../../node_modules/proj4/lib/constants/values.js","../../node_modules/proj4/lib/constants/PrimeMeridian.js","../../node_modules/proj4/lib/constants/units.js","../../node_modules/proj4/lib/match.js","../../node_modules/proj4/lib/projString.js","../../node_modules/wkt-parser/parser.js","../../node_modules/wkt-parser/process.js","../../node_modules/wkt-parser/index.js","../../node_modules/proj4/lib/defs.js","../../node_modules/proj4/lib/parseCode.js","../../node_modules/proj4/lib/extend.js","../../node_modules/proj4/lib/common/msfnz.js","../../node_modules/proj4/lib/common/sign.js","../../node_modules/proj4/lib/common/adjust_lon.js","../../node_modules/proj4/lib/common/tsfnz.js","../../node_modules/proj4/lib/common/phi2z.js","../../node_modules/proj4/lib/projections/merc.js","../../node_modules/proj4/lib/projections/longlat.js","../../node_modules/proj4/lib/projections.js","../../node_modules/proj4/lib/constants/Ellipsoid.js","../../node_modules/proj4/lib/deriveConstants.js","../../node_modules/proj4/lib/constants/Datum.js","../../node_modules/proj4/lib/datum.js","../../node_modules/proj4/lib/nadgrid.js","../../node_modules/proj4/lib/Proj.js","../../node_modules/proj4/lib/datumUtils.js","../../node_modules/proj4/lib/datum_transform.js","../../node_modules/proj4/lib/adjust_axis.js","../../node_modules/proj4/lib/common/toPoint.js","../../node_modules/proj4/lib/checkSanity.js","../../node_modules/proj4/lib/transform.js","../../node_modules/proj4/lib/core.js","../../node_modules/mgrs/mgrs.js","../../node_modules/proj4/lib/Point.js","../../node_modules/proj4/lib/common/pj_enfn.js","../../node_modules/proj4/lib/common/pj_mlfn.js","../../node_modules/proj4/lib/common/pj_inv_mlfn.js","../../node_modules/proj4/lib/projections/tmerc.js","../../node_modules/proj4/lib/common/sinh.js","../../node_modules/proj4/lib/common/hypot.js","../../node_modules/proj4/lib/common/log1py.js","../../node_modules/proj4/lib/common/asinhy.js","../../node_modules/proj4/lib/common/gatg.js","../../node_modules/proj4/lib/common/clens.js","../../node_modules/proj4/lib/common/cosh.js","../../node_modules/proj4/lib/common/clens_cmplx.js","../../node_modules/proj4/lib/projections/etmerc.js","../../node_modules/proj4/lib/common/adjust_zone.js","../../node_modules/proj4/lib/projections/utm.js","../../node_modules/proj4/lib/common/srat.js","../../node_modules/proj4/lib/projections/gauss.js","../../node_modules/proj4/lib/projections/sterea.js","../../node_modules/proj4/lib/projections/stere.js","../../node_modules/proj4/lib/projections/somerc.js","../../node_modules/proj4/lib/projections/omerc.js","../../node_modules/proj4/lib/projections/lcc.js","../../node_modules/proj4/lib/projections/krovak.js","../../node_modules/proj4/lib/common/mlfn.js","../../node_modules/proj4/lib/common/e0fn.js","../../node_modules/proj4/lib/common/e1fn.js","../../node_modules/proj4/lib/common/e2fn.js","../../node_modules/proj4/lib/common/e3fn.js","../../node_modules/proj4/lib/common/gN.js","../../node_modules/proj4/lib/common/adjust_lat.js","../../node_modules/proj4/lib/common/imlfn.js","../../node_modules/proj4/lib/projections/cass.js","../../node_modules/proj4/lib/common/qsfnz.js","../../node_modules/proj4/lib/projections/laea.js","../../node_modules/proj4/lib/common/asinz.js","../../node_modules/proj4/lib/projections/aea.js","../../node_modules/proj4/lib/projections/gnom.js","../../node_modules/proj4/lib/common/iqsfnz.js","../../node_modules/proj4/lib/projections/cea.js","../../node_modules/proj4/lib/projections/eqc.js","../../node_modules/proj4/lib/projections/poly.js","../../node_modules/proj4/lib/projections/nzmg.js","../../node_modules/proj4/lib/projections/mill.js","../../node_modules/proj4/lib/projections/sinu.js","../../node_modules/proj4/lib/projections/moll.js","../../node_modules/proj4/lib/projections/eqdc.js","../../node_modules/proj4/lib/projections/vandg.js","../../node_modules/proj4/lib/projections/aeqd.js","../../node_modules/proj4/lib/projections/ortho.js","../../node_modules/proj4/lib/projections/qsc.js","../../node_modules/proj4/lib/projections/robin.js","../../node_modules/proj4/lib/projections/geocent.js","../../node_modules/proj4/lib/projections/tpers.js","../../node_modules/proj4/lib/projections/geos.js","../../node_modules/proj4/projs.js","../../node_modules/proj4/lib/index.js","../../src/lib.js","../../node_modules/leaflet.markercluster/dist/leaflet.markercluster-src.js","../../node_modules/emitonoff/index.js","../../src/multiselect.js"],"sourcesContent":["(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","const type = v => ({}).toString.call(v).slice(8, -1);\n\ntype.isUndefined = v => type(v) === 'Undefined';\ntype.isDefined = v => type(v) !== 'Undefined';\ntype.isNull = v => type(v) === 'Null';\ntype.isString = v => type(v) === 'String';\ntype.isBoolean = v => type(v) === 'Boolean';\ntype.isNumber = v => type(v) === 'Number';\ntype.isArray = v => type(v) === 'Array';\ntype.isObject = v => type(v) === 'Object';\ntype.isFunction = v => type(v) === 'Function';\ntype.isRegExp = v => type(v) === 'RegExp';\ntype.isDate = v => type(v) === 'Date';\ntype.isSet = v => type(v) === 'Set';\ntype.isMap = v => type(v) === 'Map';\ntype.isWeakSet = v => type(v) === 'WeakSet';\ntype.isWeakMap = v => type(v) === 'WeakMap';\ntype.isSymbol = v => type(v) === 'Symbol';\ntype.isError = v => type(v) === 'Error';\ntype.isPromise = v => type(v) === 'Promise';\n\ntype.isNumber.finite = v => Number.isFinite(v);\n\ntype.isNaN = v => v !== v;\n\ntype.isObject.pure = v => type.isObject(v) && Reflect.getPrototypeOf(v) === null;\ntype.isObject.plain = v => type.isObject(v) && [null, Reflect.getPrototypeOf({})].includes(Reflect.getPrototypeOf(v));\ntype.isPrimitive = v => v !== Object(v);\ntype.isEasy = v => ['Boolean', 'Null', 'Number', 'String'].includes(type(v));\n\ntype.isArray.ofNumbers = v => type.isArray(v) && v.every(e => type.isNumber(e));\ntype.isArray.ofStrings = v => type.isArray(v) && v.every(e => type.isString(e));\ntype.isArray.ofBooleans = v => type.isArray(v) && v.every(e => type.isBoolean(e));\ntype.isArray.ofFunctions = v => type.isArray(v) && v.every(e => type.isFunction(e));\ntype.isArray.ofObjects = v => type.isArray(v) && v.every(e => type.isObject(e));\ntype.isArray.ofArrays = v => type.isArray(v) && v.every(e => type.isArray(e));\ntype.isArray.ofPrimitives = v => type.isArray(v) && v.every(e => type.isPrimitive(e));\ntype.isArray.ofEasies = v => type.isArray(v) && v.every(e => type.isEasy(e));\ntype.isArray.empty = v => type.isArray(v) && v.length === 0;\n\ntype.isSerializable = v => type.isEasy(v) || type.isArray.ofEasies(v);\n\nmodule.exports = type;\n","module.exports = object => (name, ...args) => {\n    if(typeof name !== 'string') throw new Error('name must be a string');\n    if(args.length === 0) throw new Error('need getter or setter function');\n\n    const ad = {\n        get(){ throw new Error(`unable to get property: ${name}`); },\n        set(v){ throw new Error(`unable to set property: ${name}`); },\n    };\n\n    if(typeof args[0] === 'object'){\n        if(args.length > 1) throw new Error('too many arguments');\n        ad.get = args[0].get || ad.get;\n        ad.set = args[0].set || ad.set;\n    } else {\n        args.forEach(f => {\n            if(typeof f !== 'function') throw new Error('bad argument');\n            ad[f.length === 0 ? 'get' : 'set'] = f;\n        });\n    }\n\n    Object.defineProperty(object, name, ad);\n};\n","const type = require('easytype');\nconst hardProp = require('hard-prop');\nconst noop = () => undefined;\nconst safeSet = (v = noop) => {\n    if(type.isFunction(v)) return v;\n    throw new TypeError('Function expected');\n};\n\nmodule.exports = (worker, _concurrency = 1) => { // function worker(job, done)\n    if(_concurrency === 0) throw new RangeError('Concurrency can not be 0');\n    if(!type.isNumber(_concurrency)) throw new TypeError('Concurrency must be a number');\n    if(!type.isFunction(worker)) throw new TypeError('Worker must be a function');\n\n    let delay = _concurrency < 0 ? -_concurrency : 0;\n    let concurrency = _concurrency > 0 ? _concurrency : 1;\n    let buffer = concurrency / 4;\n    let paused = false;\n    let started = false;\n    let saturated = false;\n    let queue = {\n        waiting: [],\n        active: [],\n        failed: [],\n        finished: [],\n    };\n\n    let onDrain = noop;\n    let onEmpty = noop;\n    let onSaturated = noop;\n    let onUnsaturated = noop;\n    let onError = noop;\n    let onSuccess = noop;\n    let onRetry = noop;\n\n    const startJob = delayable => {\n        if(queue.waiting.length === 0 && queue.active.length === 0) onDrain();\n\n        if(paused || queue.active.length >= concurrency || queue.waiting.length === 0) return;\n\n        const job = queue.waiting.shift();\n        queue.active.push(job);\n\n        if(queue.waiting.length === 0) onEmpty();\n        if(queue.active.length === concurrency && !saturated){\n            saturated = true;\n            onSaturated();\n        }\n\n        let doneCalled = false;\n\n        setTimeout(worker, delayable ? delay : 0, job.data, (err, ...args) => {\n            if(doneCalled){\n                throw new Error('Too many callback calls in worker');\n            } else {\n                doneCalled = true;\n            }\n            queue.active = queue.active.filter(v => v !== job);\n            if(typeof err === 'boolean'){\n                queue.waiting[err ? 'unshift' : 'push'](job);\n                onRetry.call(job.data, ...args);\n            } else {\n                queue[err ? 'failed' : 'finished'].push(job);\n                job.callback.call(job.data, err, ...args);\n                if(err) onError.call(job.data, err, ...args);\n                if(!err) onSuccess.call(job.data, ...args);\n            }\n            if(queue.active.length <= concurrency - buffer && saturated){\n                saturated = false;\n                onUnsaturated();\n            }\n            startJob(true);\n        });\n\n        startJob();\n    };\n\n    const addJob = (job, callback, prior) => {\n        started = true;\n        if(type.isFunction(job) || type.isUndefined(job)) throw new TypeError(`Unable to add ${type(job)} to queue`);\n        if(type.isArray(job)){\n            job.forEach(j => addJob(j, callback, prior));\n            return;\n        }\n        const jobObject = {\n            data: job,\n            callback: safeSet(callback),\n        };\n        queue.waiting[prior ? 'unshift' : 'push'](jobObject);\n\n        setTimeout(startJob, 0);\n    };\n\n    const push = (job, callback) => addJob(job, callback);\n    const unshift = (job, callback) => addJob(job, callback, true);\n    const length = () => queue.waiting.length;\n    const running = () => queue.active.length;\n    const workersList = () => queue.active;\n    const idle = () => queue.waiting.length + queue.active.length === 0;\n    const pause = () => {\n        paused = true;\n    };\n    const resume = () => {\n        paused = false;\n        startJob();\n    };\n    const kill = () => {\n        onDrain = noop;\n        queue.waiting = [];\n    };\n    const remove = task => {\n        queue.waiting = queue.waiting.filter(v => v.data === task);\n    };\n    const save = callback => callback({\n        waiting: queue.waiting.slice().concat(queue.active).map(v => v.data),\n        failed: queue.failed.slice().map(v => v.data),\n        finished: queue.finished.slice().map(v => v.data),\n    });\n    const load = data => {\n        if(started) throw new Error('Unable to load data after queue started');\n        started = true;\n        const mapper = v => ({data: v, callback: safeSet()});\n        queue = {\n            waiting: (data.waiting || []).map(mapper),\n            active: [],\n            failed: (data.failed || []).map(mapper),\n            finished: (data.finished || []).map(mapper),\n        };\n        if(!paused) startJob();\n    };\n    const status = job => queue.waiting.map(v => v.data).includes(job) ? 'waiting' :\n        queue.active.map(v => v.data).includes(job) ? 'active' :\n            queue.finished.map(v => v.data).includes(job) ? 'finished' :\n                queue.failed.map(v => v.data).includes(job) ? 'failed' :\n                    'missing';\n\n    // queue object:\n    const tress = {};\n    const hp = hardProp(tress);\n\n    // callbacks:\n    hp('drain', f => {\n        onDrain = safeSet(f);\n    });\n    hp('empty', f => {\n        onEmpty = safeSet(f);\n    });\n    hp('saturated', f => {\n        onSaturated = safeSet(f);\n    });\n    hp('unsaturated', f => {\n        onUnsaturated = safeSet(f);\n    });\n    hp('error', f => {\n        onError = safeSet(f);\n    });\n    hp('success', f => {\n        onSuccess = safeSet(f);\n    });\n    hp('retry', f => {\n        onRetry = safeSet(f);\n    });\n\n    // properties:\n    hp('concurrency', () => delay > 0 ? -delay : concurrency, v => {\n        if(v === 0) throw new RangeError('Concurrency can not be 0');\n        if(!type.isNumber(v)) throw new TypeError('Concurrency must be a number');\n        concurrency = v > 0 ? v : 1;\n        delay = v < 0 ? -v : 0;\n    });\n    hp('buffer', () => buffer, v => {\n        if(!type.isNumber(v)) throw new TypeError('Buffer must be a number');\n        buffer = v;\n    });\n    hp('paused', () => paused);\n    hp('started', () => started);\n    hp('waiting', () => queue.waiting);\n    hp('active', () => queue.active);\n    hp('failed', () => queue.failed);\n    hp('finished', () => queue.finished);\n\n    // methods:\n    hp('push', () => push);\n    hp('unshift', () => unshift);\n    hp('length', () => length);\n    hp('running', () => running);\n    hp('workersList', () => workersList);\n    hp('idle', () => idle);\n    hp('pause', () => pause);\n    hp('resume', () => resume);\n    hp('kill', () => kill);\n    hp('remove', () => remove);\n    hp('save', () => save);\n    hp('load', () => load);\n    hp('status', () => status);\n\n    return tress;\n};\n","function createCommonjsModule(e,o){return o={exports:{}},e(o,o.exports),o.exports}function err(e){throw e}function mergeConfig(e,o){return _extends({},e,o)}function parseBase(e){var o=mergeConfig(CONFIG.BASE_DEFAULTS,e.defaults);(!e.layers||e.layers.length<0)&&err(\"no basemap defined, please define a basemap in the configuration\"),e.layers.forEach(function(e){e.name&&void 0===CONFIG.BASEMAP_PROVIDERS[e.name]||err(\"basemap names need to be defined and unique: \"+e.name),CONFIG.BASEMAP_PROVIDERS[e.name]=formatBasemapUrl(mergeConfig(o,e))})}function parseWMS(e){var o=mergeConfig(CONFIG.WMS_DEFAULTS,e.defaults);e.layers&&e.layers.forEach(function(e){e.name&&void 0===CONFIG.WMS_PROVIDERS[e.name]||err(\"wms names need to be defined and unique: \"+e.name),CONFIG.WMS_PROVIDERS[e.name]=applyTemplate(mergeConfig(o,e))})}function parseGeocoder(e){CONFIG.GEOCODER.lookupUrl=e.lookupUrl,CONFIG.GEOCODER.suggestUrl=e.suggestUrl,CONFIG.GEOCODER.placeholder=e.placeholder}function parseMap(e){CONFIG.MAP=mergeConfig(CONFIG.MAP,e)}function formatBasemapUrl(e){switch(e.type){case\"wmts\":e.url=e.url+\"/\"+e.type+\"/\"+e.layerName+\"/\"+e.crs+\"/{z}/{x}/{y}.\"+e.format;break;case\"tms\":e.url=e.url+\"/\"+e.layerName+\"/{z}/{x}/{y}.\"+e.format;break;default:e.url=e.url+\"/\"+e.type+\"/\"+e.layerName+\"/\"+e.crs+\"/{z}/{x}/{y}.\"+e.format}return e}function applyTemplate(e){var o=e.url.indexOf(\"{\");if(o>-1){var t=e.url.indexOf(\"}\");\"workspacename\"===e.url.slice(o+1,t).toLowerCase()?e.url=e.url.slice(0,o)+e.workSpaceName+e.url.slice(t+1,-1):err(\"only workspacename templates are supported for now\")}return e}function parseFeatureQuery(e){CONFIG.FEATUREQUERYBASEURL=e}function parseClasses(e){CONFIG.CLASSNAMES=mergeConfig(CONFIG.CLASSNAMES,e)}function parseMarker(e){CONFIG.MARKER=e}function httpGetAsync(e){return new Promise(function(o,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&o(JSON.parse(r.responseText))},r.open(\"GET\",e,!0),r.send(null)})}function wktPointToGeoJson(e){if(!e.includes(\"POINT\"))throw TypeError(\"Provided WKT geometry is not a point.\");var o=e.split(\"(\")[1].split(\")\")[0];return{type:\"Point\",coordinates:[parseFloat(o.split(\" \")[0]),parseFloat(o.split(\" \")[1])]}}function parseClasses$1(e,o){o.forEach(function(o){e.classList.add(o)})}function getMarker(){return CONFIG.MARKER}function getExtent(){return CONFIG.MAP.extent}function getProvider(e){if(e in CONFIG.BASEMAP_PROVIDERS){var o=CONFIG.BASEMAP_PROVIDERS[e];return o.deprecated&&console&&console.warn&&console.warn(e+\" is a deprecated style; it will be redirected to its replacement. For performance improvements, please change your reference.\"),o}console.error(\"NL Maps error: You asked for a style which does not exist! Available styles: \"+Object.keys(PROVIDERS).join(\", \"))}function getWmsProvider(e,o){var t=void 0;return e in CONFIG.WMS_PROVIDERS?(t=CONFIG.WMS_PROVIDERS[e]).deprecated&&console&&console.warn&&console.warn(e+\" is a deprecated wms; it will be redirected to its replacement. For performance improvements, please change your reference.\"):(t=_extends({},CONFIG.WMS_DEFAULTS,o),console.log(\"NL Maps: You asked for a wms which does not exist! Available wmses: \"+Object.keys(CONFIG.WMS_PROVIDERS).join(\", \")+\". Provide an options object to make your own WMS.\")),t}function mapPointerStyle(e){e._container.classList.add(\"nlmaps-marker-cursor\")}function extentLeafletFormat(){var e=getExtent(),o=L.latLng(e[0],e[1]),t=L.latLng(e[2],e[3]);return L.latLngBounds(o,t)}function markerLayer(e){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L))){var o=void 0,t=void 0;if(void 0===e){var r=getMapCenter(map);o=r.latitude,t=r.longitude}else o=e.latitude,t=e.longitude;return new L.marker([o,t],{alt:\"marker\",icon:new L.icon({iconUrl:getMarker().url,iconSize:getMarker().iconSize,iconAnchor:getMarker().iconAnchor})})}}function bgLayer(e){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L)))return L.nlmapsBgLayer(e)}function overlayLayer(e,o){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L)))return L.nlmapsOverlayLayer(e,o)}function geoLocatorControl(e){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L)))return L.geoLocatorControl(e)}function zoomTo(e,o){o.fitBounds(L.geoJSON(e).getBounds(),{maxZoom:18})}function geocoderControl(e,o){var t=geocoder.createControl(zoomTo,e,o);e.getContainer().parentElement.insertBefore(t,e.getContainer().parentElement[0])}function getMapCenter(e){var o=e.getCenter();return{latitude:o.lat,longitude:o.lng}}function bgLayer$1(){var e=getProvider(arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"standaard\");if(e.subdomains){var o=e.subdomains;e.url=e.url.replace(\"{s}\",\"{\"+o.slice(0,1)+\"-\"+o.slice(-1)+\"}\")}if(\"object\"===(\"undefined\"==typeof ol?\"undefined\":_typeof(ol)))return new ol.layer.Tile({source:new ol.source.XYZ({url:e.url,attributions:[new ol.Attribution({html:e.attribution})]})});throw\"openlayers is not defined\"}function markerLayer$1(e){var o=new ol.style.Style({image:new ol.style.Icon({anchor:[32,63],anchorXUnits:\"pixels\",anchorYUnits:\"pixels\",src:getMarker().url,scale:1})}),t=void 0,r=void 0;if(void 0===e){var n=getMapCenter$1(map);t=n.latitude,r=n.longitude}else t=e.latitude,r=e.longitude;var a=ol.proj.fromLonLat([r,t]),s=new ol.Feature({geometry:new ol.geom.Point(a),name:\"marker\"});s.setStyle(o);var i=new ol.source.Vector({features:[s]});return new ol.layer.Vector({source:i})}function overlayLayer$1(e,o){var t=getWmsProvider(e,o);if(\"object\"===(\"undefined\"==typeof ol?\"undefined\":_typeof(ol)))return new ol.layer.Tile({source:new ol.source.TileWMS({url:t.url,serverType:\"geoserver\",params:{LAYERS:t.layerName,VERSION:t.version,STYLES:t.styleName}})});throw\"openlayers is not defined\"}function geoLocatorControl$1(e,o){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,t=o.getView().getZoom(),r=new ol.View({center:ol.proj.fromLonLat([e.coords.longitude,e.coords.latitude]),zoom:t});o.setView(r)}var r=document.createElement(\"div\");return r.className=\"nlmaps-geolocator-control ol-control\",r.addEventListener(\"click\",function(){e.start()}),e.on(\"position\",function(e){t(e,o)}),new ol.control.Control({element:r})}function zoomTo$1(e,o){var t=ol.proj.fromLonLat(e.coordinates);o.getView().setCenter(t),o.getView().setZoom(18)}function getMapCenter$1(e){var o=e.getView().getCenter(),t=ol.proj.toLonLat(o);return{longitude:t[0],latitude:t[1]}}function geocoderControl$1(e){var o=geocoder.createControl(zoomTo$1,e);o=new ol.control.Control({element:o}),e.addControl(o)}function AttributionControl(e,o){if(\"object\"===(\"undefined\"==typeof google?\"undefined\":_typeof(google))&&\"object\"===_typeof(google.maps)){var t=document.createElement(\"div\");t.style.backgroundColor=\"#fff\",t.style.opacity=\"0.7\",t.style.border=\"2px solid #fff\",t.style.cursor=\"pointer\",e.appendChild(t);var r=document.createElement(\"div\");return r.style.color=\"rgb(25,25,25)\",r.style.fontFamily=\"Roboto,Arial,sans-serif\",r.style.fontSize=\"10px\",r.innerHTML=o,t.appendChild(r),e.index=1,e}throw\"google is not defined\"}function geoLocatorControl$2(e,o){var t=document.createElement(\"div\");return t.id=\"nlmaps-geolocator-control\",t.style.backgroundColor=\"#fff\",t.style.cursor=\"pointer\",t.style.boxShadow=\"0 1px 5px rgba(0, 0, 0, 0.65)\",t.style.height=\"26px\",t.style.width=\"26px\",t.style.borderRadius=\"26px 26px\",t.style.margin=\".5em\",t.addEventListener(\"click\",function(){e.start()},this),e.on(\"position\",function(e){o.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})}),t}function zoomTo$2(e,o){o.setCenter({lat:e.coordinates[1],lng:e.coordinates[0]}),o.setZoom(18)}function indexOfMapControl(e,o){return e.getArray().indexOf(o)}function toggleAttrControl(e,o){var t=o.getMapTypeId(),r=o.controls[google.maps.ControlPosition.BOTTOM_RIGHT],n=indexOfMapControl(r,e);\"roadmap\"===t||\"hybrid\"===t||\"sattelite\"===t?n>-1&&r.removeAt(n):-1===n&&r.push(e)}function makeGoogleAttrControl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=arguments[1],t=new AttributionControl(document.createElement(\"div\"),o);e.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(t),e.addListener(\"maptypeid_changed\",function(){return toggleAttrControl(t,e)})}function makeGoogleLayerOpts(e){return{getTileUrl:function(o,t){return e.bare_url+\"/\"+t+\"/\"+o.x+\"/\"+o.y+\".png\"},tileSize:new google.maps.Size(256,256),isPng:!0,name:e.name,maxZoom:e.maxZoom,minZoom:e.minZoom}}function getWmsTiledOptions(e){return{baseUrl:e.url,layers:e.layers,styles:e.styles,format:e.format,transparent:e.transparent,opacity:.7}}function bgLayer$2(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"standaard\";if(\"object\"===(\"undefined\"==typeof google?\"undefined\":_typeof(google))&&\"object\"===_typeof(google.maps)){var t=getProvider(o),r=makeGoogleLayerOpts(t),n=new google.maps.ImageMapType(r),a=e||this.map||\"undefined\";return void 0!==a&&makeGoogleAttrControl(a,t.attribution),n}throw\"google is not defined\"}function toMercator(e){var o=e.lat(),t=e.lng();if(!(Math.abs(t)>180||Math.abs(o)>90)){var r=.017453292519943295*o;return{x:6378137*(.017453292519943295*t),y:3189068.5*Math.log((1+Math.sin(r))/(1-Math.sin(r)))}}}function WMSTiled(e,o){var t={getTileUrl:function(t,r){var n=e.getProjection(),a=Math.pow(2,r),s=n.fromPointToLatLng(new google.maps.Point(256*t.x/a,256*t.y/a)),i=n.fromPointToLatLng(new google.maps.Point(256*(t.x+1)/a,256*(t.y+1)/a)),l=toMercator(s),c=toMercator(i),u=l.x+\",\"+c.y+\",\"+c.x+\",\"+l.y,d=o.baseUrl;return d+=\"SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&SRS=EPSG:3857\",d+=\"&WIDTH=256\",d+=\"&HEIGHT=256\",d+=\"&LAYERS=\"+o.layers,d+=\"&STYLES=\"+o.styles,d+=\"&BBOX=\"+u,d+=\"&FORMAT=\"+o.format,d+=\"&TRANSPARENT=\"+o.transparent},tileSize:new google.maps.Size(256,256),isPng:!0},r=new google.maps.ImageMapType(t);return r.setOpacity(o.opacity),e.overlayMapTypes.push(r)}function overlayLayer$2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=new WMSTiled(e,getWmsTiledOptions(getWmsProvider(arguments[1],arguments[2])));return o.name=\"wms\",o}function markerLayer$2(e){var o=void 0,t=void 0;if(void 0===e){var r=getMapCenter$2(map);o=r.latitude,t=r.longitude}else o=e.latitude,t=e.longitude;var n=new google.maps.LatLng(o,t);return new google.maps.Marker({title:\"marker\",position:n,icon:getMarker().url})}function getMapCenter$2(e){return{latitude:e.getCenter().lat(),longitude:e.getCenter().lng()}}function geocoderControl$2(e){var o=geocoder.createControl(zoomTo$2,e);e.getDiv().appendChild(o)}function positionHandler(e){this.emit(\"position\",e)}function positionErrorHandler(e){this.emit(\"error\",e)}function geoLocator(e){var o=\"undefined\"!=typeof window?window.navigator||{}:{};if(void 0!==o&&\"geolocation\"in o){var t=emitonoff$1(GeoLocator(e));return t.on(\"position\",function(){this.stop()}),t}throw\"geolocation is not available in your browser.\"}function query(e){return new Promise(function(o,t){fetch(e).then(function(e){return o(e.json())}).catch(function(e){return t(e)})})}function createAndAddMarker(e,o,t,r){var n=L.marker([o.latlng.lat,o.latlng.lng],{alt:\"marker\",icon:new L.icon({iconUrl:getMarker().url,iconSize:getMarker().iconSize,iconAnchor:getMarker().iconAnchor})});if(n.addTo(e),t){var a=t.call(markerStore,o,n),s=L.popup({offset:[0,-50]}).setContent(a);n.bindPopup(s).openPopup(),markerStore.addMarker(n)}else r?markerStore.addMarker(n):markerStore.addMarker(n,!0)}function singleMarker(e,o,t){return mapPointerStyle(e),function(t,r,n,a){1===t&&(markerStore.markers[0]&&markerStore.removeMarker(markerStore.markers[0]),createAndAddMarker(e,r,o,a))}}function multiMarker(e,o,t){return mapPointerStyle(e),function(r,n){1===r&&createAndAddMarker(e,n,o,t)}}function testWhichLib(){var e=[];return\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L))&&e.push(\"leaflet\"),\"object\"===(\"undefined\"==typeof google?\"undefined\":_typeof(google))&&\"object\"===_typeof(google.maps)&&e.push(\"googlemaps\"),\"object\"===(\"undefined\"==typeof ol?\"undefined\":_typeof(ol))&&e.push(\"openlayers\"),e.length>1?\"too many libs\":0===e.length?\"too few libs\":e[0]}function initMap(e,o){var t=void 0,r=void 0,n=void 0,a=void 0;switch(e){case\"leaflet\":(r=document.getElementById(o.target)).style.position=\"relative\",r.style.padding=\"0px\",r.style.margin=\"0px\",a={},o.attribution||(a.attributionControl=!1),(n=L.DomUtil.create(\"div\")).style.height=\"100%\",r.appendChild(n),a.maxBounds=extentLeafletFormat(),t=L.map(n,a).setView([o.center.latitude,o.center.longitude],o.zoom),o.attribution&&t.attributionControl.setPrefix(!1),t.zoomControl.setPosition(CONFIG.MAP.zoomposition);break;case\"googlemaps\":t=new google.maps.Map(document.getElementById(o.target),{center:{lat:o.center.latitude,lng:o.center.longitude},zoom:o.zoom,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},fullscreenControl:!1});break;case\"openlayers\":(t=new ol.Map({view:new ol.View({center:ol.proj.fromLonLat([o.center.longitude,o.center.latitude]),zoom:o.zoom}),target:n})).getTargetElement().getElementsByClassName(\"ol-zoom\")[0].style.cssText=\"left: 5px !important; bottom: 5px !important\",t.getTargetElement().getElementsByClassName(\"ol-zoom\")[0].classList.remove(\"ol-zoom\")}return t}function addGoogleLayer(e,o){if(\"marker\"===e.title)return void e.setMap(o);var t=[e.name,\"roadmap\"];if(\"wms\"===e.name)return void o.setOptions({mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:t,position:google.maps.ControlPosition.BOTTOM_LEFT}});o.setOptions({mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:t,position:google.maps.ControlPosition.BOTTOM_LEFT}}),o.mapTypes.set(e.name,e),o.setMapTypeId(e.name)}function addLayerToMap(e,o,t){switch(e){case\"leaflet\":t.addLayer(o);break;case\"googlemaps\":addGoogleLayer(o,t);break;case\"openlayers\":t.addLayer(o)}}function createBackgroundLayer(e,o,t){var r=void 0;switch(e){case\"leaflet\":r=nlmaps.leaflet.bgLayer(t);break;case\"googlemaps\":r=nlmaps.googlemaps.bgLayer(o,t);break;case\"openlayers\":r=nlmaps.openlayers.bgLayer(t)}return r}function createOverlayLayer(e,o,t){var r=void 0;switch(e){case\"leaflet\":r=nlmaps.leaflet.overlayLayer(t);break;case\"googlemaps\":r=nlmaps.googlemaps.overlayLayer(o,t);break;case\"openlayers\":r=nlmaps.openlayers.overlayLayer(t)}return r}function createMarkerLayer(e,o,t){var r=void 0;switch(e){case\"leaflet\":r=nlmaps.leaflet.markerLayer(t);break;case\"googlemaps\":r=nlmaps.googlemaps.markerLayer(t);break;case\"openlayers\":r=nlmaps.openlayers.markerLayer(t)}return r}function getMapCenter$3(e,o){var t=void 0;switch(e){case\"leaflet\":t=getMapCenter(o);break;case\"googlemaps\":t=getMapCenter$2(o);break;case\"openlayers\":t=getMapCenter$1(o)}return t}function mergeOpts(e,o){return _extends({},e,o)}function addGeoLocControlToMap(e,o,t){var r=void 0;switch(e){case\"leaflet\":nlmaps[e].geoLocatorControl(o).addTo(t);break;case\"googlemaps\":r=nlmaps[e].geoLocatorControl(o,t),t.controls[google.maps.ControlPosition.TOP_RIGHT].push(r);break;case\"openlayers\":r=nlmaps[e].geoLocatorControl(o,t),t.addControl(r)}}function addGeocoderControlToMap(e,o){nlmaps[e].geocoderControl(o,nlmaps)}var emitonoff=createCommonjsModule(function(e){e.exports=function(e){return e||(e={}),e._subs=[],e._paused=!1,e._pending=[],e.on=function(o,t){e._subs[o]=e._subs[o]||[],e._subs[o].push(t)},e.off=function(o,t){if(e._subs[o])for(var r in e._subs[o])if(e._subs[o][r]===t){e._subs[o].splice(r);break}},e.emit=function(o){if(e._subs[o]){var t=Array.prototype.slice.call(arguments,1);if(e._paused)return e._pending[o]=e._pending[o]||[],void e._pending[o].push(t);for(var r in e._subs[o])e._subs[o][r].apply(e,t)}},e.pause=function(){e._paused=!0},e.resume=function(){e._paused=!1;for(var o in e._pending)for(var t=0;t<e._pending[o].length;t++)e.emit(o,e._pending[o][t])},e}}),config={version:.2,basemaps:{defaults:{attribution:\"Kaartgegevens CC-BY-4.0 Gemeente Amsterdam\",minZoom:12,maxZoom:21,type:\"tms\",format:\"png\",url:\"https://t1.data.amsterdam.nl\"},layers:[{name:\"standaard\",layerName:\"topo_wm\"},{name:\"zwartwit\",layerName:\"topo_wm_zw\"},{name:\"licht\",layerName:\"topo_wm_light\"},{name:\"donker\",layerName:\"topo_wm\"}]},wms:{defaults:{url:\"https://map.data.amsterdam.nl/maps\",version:\"1.1.0\",transparent:!0,format:\"image/png\",minZoom:0,maxZoom:24,styleName:\"\"},layers:[{name:\"tram\",layerName:\"trm\",url:\"https://map.data.amsterdam.nl/maps/trm?\"}]},geocoder:{suggestUrl:\"https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?fq=gemeentenaam:amsterdam&fq=type:adres&\",lookupUrl:\"https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?fq=gemeentenaam:amsterdam&fq=type:adres&\",placeholder:\"Kies adres...\"},featureQuery:{baseUrl:\"https://api.data.amsterdam.nl/bag/v1.1/nummeraanduiding/?format=json&locatie=\"},marker:{url:\"/dist/images/svg/marker.svg\",iconSize:[40,40],iconAnchor:[20,39]},map:{style:\"standaard\",center:{latitude:52.37,longitude:4.8952},zoom:14,attribution:!0,extent:[52.25168,4.64034,52.50536,5.10737],zoomposition:\"bottomright\"},classnames:{geocoderContainer:[\"embed-search\"],geocoderSearch:[\"embed-search__form\"],geocoderButton:[\"primary\",\"action\",\"embed-search__button\"],geocoderResultList:[\"embed-search__auto-suggest\"],geocoderResultItem:[\"embed-search__auto-suggest__item\"],geocoderResultSelected:[\"embed-search__auto-suggest__item--active\"]}},_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},_extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},CONFIG={};CONFIG.BASE_DEFAULTS={crs:\"EPSG:3857\",attr:\"\",minZoom:0,maxZoom:19,type:\"wmts\",format:\"png\",url:\"\"},CONFIG.WMS_DEFAULTS={url:\"\",version:\"1.1.1\",transparent:!0,format:\"image/png\",minZoom:0,maxZoom:24,styleName:\"\"},CONFIG.BASEMAP_PROVIDERS={},CONFIG.WMS_PROVIDERS={},CONFIG.GEOCODER={},CONFIG.MAP={zoomposition:\"bottomleft\"},CONFIG.MARKER={},CONFIG.CLASSNAMES={geocoderContainer:[\"nlmaps-geocoder-control-container\"],geocoderSearch:[\"nlmaps-geocoder-control-search\"],geocoderButton:[\"nlmaps-geocoder-control-button\"],geocoderResultList:[\"nlmaps-geocoder-result-list\"],geocoderResultItem:[\"nlmaps-geocoder-result-item\"]},.2!==config.version&&err(\"unsupported config version\"),void 0!==config.featureQuery&&parseFeatureQuery(config.featureQuery.baseUrl),void 0!==config.map&&parseMap(config.map),parseBase(config.basemaps),void 0!==config.wms&&parseWMS(config.wms),void 0!==config.geocoder&&parseGeocoder(config.geocoder),void 0!==config.marker&&parseMarker(config.marker),void 0!==config.classnames&&parseClasses(config.classnames);var geocoder=CONFIG.GEOCODER;geocoder.resultList=[],geocoder.selectedResult=-1,geocoder.doSuggestRequest=function(e){return httpGetAsync(this.suggestUrl+\"q=\"+encodeURIComponent(e))},geocoder.doLookupRequest=function(e){return httpGetAsync(this.lookupUrl+\"id=\"+encodeURIComponent(e)).then(function(e){var o=e.response.docs[0];return o.centroide_ll=wktPointToGeoJson(o.centroide_ll),o.centroide_rd=wktPointToGeoJson(o.centroide_rd),o})},geocoder.createControl=function(e,o,t){var r=this;this.zoomTo=e,this.map=o,this.nlmaps=t;var n=document.createElement(\"div\"),a=document.createElement(\"form\"),s=document.createElement(\"input\"),i=document.createElement(\"button\"),l=document.createElement(\"div\");return parseClasses$1(n,CONFIG.CLASSNAMES.geocoderContainer),parseClasses$1(a,CONFIG.CLASSNAMES.geocoderSearch),n.addEventListener(\"click\",function(e){return e.stopPropagation()}),n.addEventListener(\"dblclick\",function(e){return e.stopPropagation()}),s.id=\"nlmaps-geocoder-control-input\",s.placeholder=geocoder.placeholder,s.setAttribute(\"aria-label\",geocoder.placeholder),s.setAttribute(\"type\",\"text\"),s.setAttribute(\"autocapitalize\",\"off\"),s.setAttribute(\"autocomplete\",\"off\"),s.setAttribute(\"autocorrect\",\"off\"),s.setAttribute(\"spellcheck\",\"false\"),s.addEventListener(\"keydown\",function(e){var o=r.resultList;r.resultList.length>0&&(\"ArrowDown\"!==e.code&&40!==e.keyCode||(r.selectedResult<r.resultList.length-1&&r.selectedResult++,r.showLookupResult(o[r.selectedResult])),\"ArrowUp\"!==e.code&&38!==e.keyCode||(r.selectedResult>0&&r.selectedResult--,r.showLookupResult(o[r.selectedResult])),\"Escape\"===e.code&&r.clearSuggestResults(!0))}),s.addEventListener(\"input\",function(e){r.suggest(e.target.value)}),s.addEventListener(\"focus\",function(e){r.suggest(e.target.value)}),i.setAttribute(\"type\",\"submit\"),a.addEventListener(\"submit\",function(e){e.preventDefault(),r.resultList.length>0&&r.lookup(r.resultList[r.selectedResult<0?0:r.selectedResult].id)}),i.setAttribute(\"aria-label\",geocoder.placeholder),parseClasses$1(i,CONFIG.CLASSNAMES.geocoderButton),l.id=\"nlmaps-geocoder-control-results\",parseClasses$1(l,CONFIG.CLASSNAMES.geocoderResultList),l.classList.add(\"nlmaps-hidden\"),n.appendChild(a),a.appendChild(s),a.appendChild(i),n.appendChild(l),n},geocoder.suggest=function(e){var o=this;if(e.length<3)return void this.clearSuggestResults();this.doSuggestRequest(e).then(function(e){o.resultList=e.response.docs,o.showSuggestResults(o.resultList)})},geocoder.lookup=function(e){var o=this;this.doLookupRequest(e).then(function(e){o.zoomTo(e.centroide_ll,o.map),o.nlmaps.emit(\"search-select\",{location:e.weergavenaam,latlng:e.centroide_ll,resultObject:e}),o.showLookupResult(e),o.clearSuggestResults()})},geocoder.clearSuggestResults=function(e){this.selectedResult=-1,e&&(document.getElementById(\"nlmaps-geocoder-control-input\").value=\"\"),document.getElementById(\"nlmaps-geocoder-control-results\").innerHTML=\"\",document.getElementById(\"nlmaps-geocoder-control-results\").classList.add(\"nlmaps-hidden\")},geocoder.showLookupResult=function(e){var o=document.getElementsByClassName(CONFIG.CLASSNAMES.geocoderResultItem);Array.prototype.map.call(o,function(e){return e.classList.remove(CONFIG.CLASSNAMES.geocoderResultSelected)});var t=document.getElementById(e.id);t&&t.classList.add(CONFIG.CLASSNAMES.geocoderResultSelected),document.getElementById(\"nlmaps-geocoder-control-input\").value=e.weergavenaam},geocoder.showSuggestResults=function(e){var o=this;if(this.clearSuggestResults(),e.length>0){var t=document.createElement(\"ul\");e.forEach(function(e){var r=document.createElement(\"li\"),n=document.createElement(\"a\");n.innerHTML=e.weergavenaam,n.id=e.id,parseClasses$1(n,CONFIG.CLASSNAMES.geocoderResultItem),n.setAttribute(\"href\",\"#\"),n.addEventListener(\"click\",function(e){e.preventDefault(),o.lookup(e.target.id)}),r.appendChild(n),t.appendChild(r)}),document.getElementById(\"nlmaps-geocoder-control-results\").classList.remove(\"nlmaps-hidden\"),document.getElementById(\"nlmaps-geocoder-control-results\").appendChild(t)}},\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L))&&(L.NlmapsBgLayer=L.TileLayer.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"standaard\",o=arguments[1],t=getProvider(e),r=L.Util.extend({},o,{minZoom:t.minZoom,maxZoom:t.maxZoom,scheme:\"xyz\",attribution:t.attribution,subdomains:t.subdomains?t.subdomains:\"abc\",sa_id:e});L.TileLayer.prototype.initialize.call(this,t.url,r)}}),L.nlmapsBgLayer=function(e,o){return new L.NlmapsBgLayer(e,o)},L.NlmapsOverlayLayer=L.TileLayer.WMS.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",o=arguments[1],t=getWmsProvider(e,o),r=t.url;delete t.url;var n=L.Util.extend({},o,{layers:t.layerName,maxZoom:24,minZoom:1,styles:t.styleName,version:t.version,transparent:t.transparent,format:t.format});L.TileLayer.WMS.prototype.initialize.call(this,r,n)}}),L.nlmapsOverlayLayer=function(e,o){return new L.NlmapsOverlayLayer(e,o)},L.Control.GeoLocatorControl=L.Control.extend({options:{position:\"topright\"},initialize:function(e){for(var o in e)\"object\"===_typeof(this.options[o])?L.extend(this.options[o],e[o]):this.options[o]=e[o]},onAdd:function(e){function o(o){e.panTo([o.coords.latitude,o.coords.longitude])}var t=L.DomUtil.create(\"div\");t.id=\"nlmaps-geolocator-control\",t.className=\"nlmaps-geolocator-control\";var r=document.createElement(\"img\");return t.append(r),this.options.geolocator.isStarted()&&L.DomUtil.addClass(t,\"started\"),L.DomEvent.on(t,\"click\",function(){this.options.geolocator.start(),L.DomUtil.addClass(t,\"started\")},this),this.options.geolocator.on(\"position\",function(e){L.DomUtil.removeClass(t,\"started\"),L.DomUtil.addClass(t,\"has-position\"),o(e)}),t},onRemove:function(e){return e}}),L.geoLocatorControl=function(e){return new L.Control.GeoLocatorControl({geolocator:e})});var emitonoff$1=createCommonjsModule(function(e){e.exports=function(e){return e||(e={}),e._subs=[],e._paused=!1,e._pending=[],e.on=function(o,t){e._subs[o]=e._subs[o]||[],e._subs[o].push(t)},e.off=function(o,t){if(e._subs[o])for(var r in e._subs[o])if(e._subs[o][r]===t){e._subs[o].splice(r);break}},e.emit=function(o){if(e._subs[o]){var t=Array.prototype.slice.call(arguments,1);if(e._paused)return e._pending[o]=e._pending[o]||[],void e._pending[o].push(t);for(var r in e._subs[o])e._subs[o][r].apply(e,t)}},e.pause=function(){e._paused=!0},e.resume=function(){e._paused=!1;for(var o in e._pending)for(var t=0;t<e._pending[o].length;t++)e.emit(o,e._pending[o][t])},e}}),geoLocateDefaultOpts={follow:!1},GeoLocator=function(e){var o=_extends({},geoLocateDefaultOpts,e);return{start:function(){return o.started=!0,navigator.geolocation.getCurrentPosition(positionHandler.bind(this),positionErrorHandler.bind(this),{maximumAge:6e4}),this},stop:function(){return o.started=!1,this},isStarted:function(){return o.started},log:function(){return console.log(o),this}}},pointToQuery=function(e,o,t){return function(r){return function(n,a){0===n&&r(0,function(r,n){1===r?query(o(e,{x:n.latlng.lng,y:n.latlng.lat})).then(function(e){var o={queryResult:t(e),latlng:n.latlng};a(1,o)}):a(r,n)})}}},queryFeatures=function(e,o,t,r){var n=pointToQuery(o,t,r)(e);return n.subscribe=function(e){n(0,e)},n},markerStore={markers:[],removeMarker:function(e){var o=markerStore.markers.findIndex(function(o){return o===e});markerStore.markers[o].remove(),markerStore.markers.splice(o,1)},addMarker:function(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];markerStore.markers.push(e),o&&e.on(\"click\",function(){markerStore.removeMarker(e)})}},nlmaps={leaflet:{bgLayer:bgLayer,overlayLayer:overlayLayer,markerLayer:markerLayer,geocoderControl:geocoderControl,geoLocatorControl:geoLocatorControl},openlayers:{bgLayer:bgLayer$1,overlayLayer:overlayLayer$1,markerLayer:markerLayer$1,geocoderControl:geocoderControl$1,geoLocatorControl:geoLocatorControl$1},googlemaps:{bgLayer:bgLayer$2,overlayLayer:overlayLayer$2,markerLayer:markerLayer$2,geoLocatorControl:geoLocatorControl$2,geocoderControl:geocoderControl$2}};emitonoff(nlmaps);var geoLocateDefaultOpts$1={};nlmaps.lib=testWhichLib(),nlmaps.createMap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=mergeOpts(CONFIG.MAP,e);try{if(\"too many libs\"==nlmaps.lib||\"too few libs\"===nlmaps.lib)throw{message:\"one and only one map library can be defined. Please Refer to the documentation to see which map libraries are supported.\"}}catch(e){console.error(e.message)}var t=initMap(nlmaps.lib,o),r=createBackgroundLayer(nlmaps.lib,t,o.style);if(addLayerToMap(nlmaps.lib,r,t,o.style),o.search&&addGeocoderControlToMap(nlmaps.lib,t),o.marker){var n=o.marker;\"boolean\"==typeof o.marker&&(n=getMapCenter$3(nlmaps.lib,t));var a=createMarkerLayer(nlmaps.lib,t,n);markerStore.addMarker(a,!0),addLayerToMap(nlmaps.lib,a,t)}if(o.overlay&&\"false\"!==o.overlay){var s=createOverlayLayer(nlmaps.lib,t,o.overlay);addLayerToMap(nlmaps.lib,s,t)}return void 0!==t&&t.on(\"click\",function(e){nlmaps.emit(\"mapclick\",e)}),t},nlmaps.geoLocate=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=geoLocator(mergeOpts(geoLocateDefaultOpts$1,o));addGeoLocControlToMap(nlmaps.lib,t,e)},nlmaps.clickProvider=function(e){mapPointerStyle(e);var o=function(o,t){0===o&&(e.on(\"click\",function(e){t(1,e)}),t(0,function(e,o){}))};return o.subscribe=function(e){o(0,e)},o},nlmaps.queryFeatures=queryFeatures,nlmaps.singleMarker=singleMarker,nlmaps.multiMarker=multiMarker;export{nlmaps};\n//# sourceMappingURL=nlmaps.es.js.map\n","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_GRIDSHIFT = 3;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SRS_WGS84_SEMIMAJOR = 6378137.0;  // only used in grid shift transforms\nexport var SRS_WGS84_SEMIMINOR = 6356752.314;  // only used in grid shift transforms\nexport var SRS_WGS84_ESQUARED = 0.0066943799901413165; // only used in grid shift transforms\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    gamma: function(v) {\n      self.rectified_grid_angle = parseFloat(v);\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    },\n    approx: function() {\n      self.approx = true;\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84_]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n    obj[key].push(v);\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.AXIS) {\n    var axisOrder = '';\n    for (var i = 0, ii = wkt.AXIS.length; i < ii; ++i) {\n      var axis = [wkt.AXIS[i][0].toLowerCase(), wkt.AXIS[i][1].toLowerCase()];\n      if (axis[0].indexOf('north') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'north')) {\n        axisOrder += 'n';\n      } else if (axis[0].indexOf('south') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'south')) {\n        axisOrder += 's';\n      } else if (axis[0].indexOf('east') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'east')) {\n        axisOrder += 'e';\n      } else if (axis[0].indexOf('west') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'west')) {\n        axisOrder += 'w';\n      }\n    }\n    if (axisOrder.length === 2) {\n      axisOrder += 'u';\n    }\n    if (axisOrder.length === 3) {\n      wkt.axis = axisOrder;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984' || wkt.datumCode === 'world_geodetic_system_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_1', 'Latitude of 1st standard parallel'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['standard_parallel_2', 'Latitude of 2nd standard parallel'],\n    ['false_easting', 'False_Easting'],\n    ['false_easting', 'False easting'],\n    ['false-easting', 'Easting at false origin'],\n    ['false_northing', 'False_Northing'],\n    ['false_northing', 'False northing'],\n    ['false_northing', 'Northing at false origin'],\n    ['central_meridian', 'Central_Meridian'],\n    ['central_meridian', 'Longitude of natural origin'],\n    ['central_meridian', 'Longitude of false origin'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['latitude_of_origin', 'Latitude of natural origin'],\n    ['latitude_of_origin', 'Latitude of false origin'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  } else if (!wkt.lat_ts && wkt.lat0 && wkt.projName === 'Polar_Stereographic') {\n    wkt.lat_ts = wkt.lat0;\n    wkt.lat0 = d2r(wkt.lat0 > 0 ? 90 : -90);\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\nvar codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk80ign = {\n  a: 6378249.2,\n  b: 6356515,\n  rf: 293.4660213,\n  ellipseName: \"Clarke 1880 (IGN)\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"598.1,73.7,418.2,0.202,0.045,-2.455,6.7\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.militargeographische_institut = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Militar-Geographische Institut\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2, nadgrids) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  if (nadgrids) {\n    out.datum_type = PJD_GRIDSHIFT;\n    out.grids = nadgrids;\n  }\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","/**\n * Resources for details of NTv2 file formats:\n * - https://web.archive.org/web/20140127204822if_/http://www.mgs.gov.on.ca:80/stdprodconsume/groups/content/@mgs/@iandit/documents/resourcelist/stel02_047447.pdf\n * - http://mimaka.com/help/gs/html/004_NTV2%20Data%20Format.htm\n */\n\nvar loadedNadgrids = {};\n\n/**\n * Load a binary NTv2 file (.gsb) to a key that can be used in a proj string like +nadgrids=<key>. Pass the NTv2 file\n * as an ArrayBuffer.\n */\nexport default function nadgrid(key, data) {\n  var view = new DataView(data);\n  var isLittleEndian = detectLittleEndian(view);\n  var header = readHeader(view, isLittleEndian);\n  var subgrids = readSubgrids(view, header, isLittleEndian);\n  var nadgrid = {header: header, subgrids: subgrids};\n  loadedNadgrids[key] = nadgrid;\n  return nadgrid;\n}\n\n/**\n * Given a proj4 value for nadgrids, return an array of loaded grids\n */\nexport function getNadgrids(nadgrids) {\n  // Format details: http://proj.maptools.org/gen_parms.html\n  if (nadgrids === undefined) { return null; }\n  var grids = nadgrids.split(',');\n  return grids.map(parseNadgridString);\n}\n\nfunction parseNadgridString(value) {\n  if (value.length === 0) {\n    return null;\n  }\n  var optional = value[0] === '@';\n  if (optional) {\n    value = value.slice(1);\n  }\n  if (value === 'null') {\n    return {name: 'null', mandatory: !optional, grid: null, isNull: true};\n  }\n  return {\n    name: value,\n    mandatory: !optional,\n    grid: loadedNadgrids[value] || null,\n    isNull: false\n  };\n}\n\nfunction secondsToRadians(seconds) {\n  return (seconds / 3600) * Math.PI / 180;\n}\n\nfunction detectLittleEndian(view) {\n  var nFields = view.getInt32(8, false);\n  if (nFields === 11) {\n    return false;\n  }\n  nFields = view.getInt32(8, true);\n  if (nFields !== 11) {\n    console.warn('Failed to detect nadgrid endian-ness, defaulting to little-endian');\n  }\n  return true;\n}\n\nfunction readHeader(view, isLittleEndian) {\n  return {\n    nFields: view.getInt32(8, isLittleEndian),\n    nSubgridFields: view.getInt32(24, isLittleEndian),\n    nSubgrids: view.getInt32(40, isLittleEndian),\n    shiftType: decodeString(view, 56, 56 + 8).trim(),\n    fromSemiMajorAxis: view.getFloat64(120, isLittleEndian),\n    fromSemiMinorAxis: view.getFloat64(136, isLittleEndian),\n    toSemiMajorAxis: view.getFloat64(152, isLittleEndian),\n    toSemiMinorAxis: view.getFloat64(168, isLittleEndian),\n  };\n}\n\nfunction decodeString(view, start, end) {\n  return String.fromCharCode.apply(null, new Uint8Array(view.buffer.slice(start, end)));\n}\n\nfunction readSubgrids(view, header, isLittleEndian) {\n  var gridOffset = 176;\n  var grids = [];\n  for (var i = 0; i < header.nSubgrids; i++) {\n    var subHeader = readGridHeader(view, gridOffset, isLittleEndian);\n    var nodes = readGridNodes(view, gridOffset, subHeader, isLittleEndian);\n    var lngColumnCount = Math.round(\n      1 + (subHeader.upperLongitude - subHeader.lowerLongitude) / subHeader.longitudeInterval);\n    var latColumnCount = Math.round(\n      1 + (subHeader.upperLatitude - subHeader.lowerLatitude) / subHeader.latitudeInterval);\n    // Proj4 operates on radians whereas the coordinates are in seconds in the grid\n    grids.push({\n      ll: [secondsToRadians(subHeader.lowerLongitude), secondsToRadians(subHeader.lowerLatitude)],\n      del: [secondsToRadians(subHeader.longitudeInterval), secondsToRadians(subHeader.latitudeInterval)],\n      lim: [lngColumnCount, latColumnCount],\n      count: subHeader.gridNodeCount,\n      cvs: mapNodes(nodes)\n    });\n    gridOffset += 176 + subHeader.gridNodeCount * 16;\n  }\n  return grids;\n}\n\nfunction mapNodes(nodes) {\n  return nodes.map(function (r) {return [secondsToRadians(r.longitudeShift), secondsToRadians(r.latitudeShift)];});\n}\n\nfunction readGridHeader(view, offset, isLittleEndian) {\n  return {\n    name: decodeString(view, offset + 8, offset + 16).trim(),\n    parent: decodeString(view, offset + 24, offset + 24 + 8).trim(),\n    lowerLatitude: view.getFloat64(offset + 72, isLittleEndian),\n    upperLatitude: view.getFloat64(offset + 88, isLittleEndian),\n    lowerLongitude: view.getFloat64(offset + 104, isLittleEndian),\n    upperLongitude: view.getFloat64(offset + 120, isLittleEndian),\n    latitudeInterval: view.getFloat64(offset + 136, isLittleEndian),\n    longitudeInterval: view.getFloat64(offset + 152, isLittleEndian),\n    gridNodeCount: view.getInt32(offset + 168, isLittleEndian)\n  };\n}\n\nfunction readGridNodes(view, offset, gridHeader, isLittleEndian) {\n  var nodesOffset = offset + 176;\n  var gridRecordLength = 16;\n  var gridShiftRecords = [];\n  for (var i = 0; i < gridHeader.gridNodeCount; i++) {\n    var record = {\n      latitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength, isLittleEndian),\n      longitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength + 4, isLittleEndian),\n      latitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 8, isLittleEndian),\n      longitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 12, isLittleEndian),\n    };\n    gridShiftRecords.push(record);\n  }\n  return gridShiftRecords;\n}\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\nimport {getNadgrids} from \"./nadgrid\";\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = json.datum_params || (datumDef.towgs84 ? datumDef.towgs84.split(',') : null);\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  json.lat1 = json.lat1 || json.lat0; // Lambert_Conformal_Conic_1SP, for example, needs this\n\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var nadgrids = getNadgrids(json.nadgrids);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2,\n    nadgrids);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calculated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","import {\n  PJD_3PARAM,\n  PJD_7PARAM,\n  PJD_GRIDSHIFT,\n  PJD_NODATUM,\n  R2D,\n  SRS_WGS84_ESQUARED,\n  SRS_WGS84_SEMIMAJOR, SRS_WGS84_SEMIMINOR\n} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nimport adjust_lon from \"./common/adjust_lon\";\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n  var source_a = source.a;\n  var source_es = source.es;\n  if (source.datum_type === PJD_GRIDSHIFT) {\n    var gridShiftCode = applyGridShift(source, false, point);\n    if (gridShiftCode !== 0) {\n      return undefined;\n    }\n    source_a = SRS_WGS84_SEMIMAJOR;\n    source_es = SRS_WGS84_ESQUARED;\n  }\n\n  var dest_a = dest.a;\n  var dest_b = dest.b;\n  var dest_es = dest.es;\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    dest_a = SRS_WGS84_SEMIMAJOR;\n    dest_b = SRS_WGS84_SEMIMINOR;\n    dest_es = SRS_WGS84_ESQUARED;\n  }\n\n  // Do we need to go through geocentric coordinates?\n  if (source_es === dest_es && source_a === dest_a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source_es, source_a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  point = geocentricToGeodetic(point, dest_es, dest_a, dest_b);\n\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    var destGridShiftResult = applyGridShift(dest, true, point);\n    if (destGridShiftResult !== 0) {\n      return undefined;\n    }\n  }\n\n  return point;\n}\n\nexport function applyGridShift(source, inverse, point) {\n  if (source.grids === null || source.grids.length === 0) {\n    console.log('Grid shift grids not found');\n    return -1;\n  }\n  var input = {x: -point.x, y: point.y};\n  var output = {x: Number.NaN, y: Number.NaN};\n  var onlyMandatoryGrids = false;\n  var attemptedGrids = [];\n  outer:\n  for (var i = 0; i < source.grids.length; i++) {\n    var grid = source.grids[i];\n    attemptedGrids.push(grid.name);\n    if (grid.isNull) {\n      output = input;\n      break;\n    }\n    onlyMandatoryGrids = grid.mandatory;\n    if (grid.grid === null) {\n      if (grid.mandatory) {\n        console.log(\"Unable to find mandatory grid '\" + grid.name + \"'\");\n        return -1;\n      }\n      continue;\n    }\n    var subgrids = grid.grid.subgrids;\n    for (var j = 0, jj = subgrids.length; j < jj; j++) {\n      var subgrid = subgrids[j];\n      // skip tables that don't match our point at all\n      var epsilon = (Math.abs(subgrid.del[1]) + Math.abs(subgrid.del[0])) / 10000.0;\n      var minX = subgrid.ll[0] - epsilon;\n      var minY = subgrid.ll[1] - epsilon;\n      var maxX = subgrid.ll[0] + (subgrid.lim[0] - 1) * subgrid.del[0] + epsilon;\n      var maxY = subgrid.ll[1] + (subgrid.lim[1] - 1) * subgrid.del[1] + epsilon;\n      if (minY > input.y || minX > input.x || maxY < input.y || maxX < input.x ) {\n        continue;\n      }\n      output = applySubgridShift(input, inverse, subgrid);\n      if (!isNaN(output.x)) {\n        break outer;\n      }\n    }\n  }\n  if (isNaN(output.x)) {\n    console.log(\"Failed to find a grid shift table for location '\"+\n      -input.x * R2D + \" \" + input.y * R2D + \" tried: '\" + attemptedGrids + \"'\");\n    return -1;\n  }\n  point.x = -output.x;\n  point.y = output.y;\n  return 0;\n}\n\nfunction applySubgridShift(pin, inverse, ct) {\n  var val = {x: Number.NaN, y: Number.NaN};\n  if (isNaN(pin.x)) { return val; }\n  var tb = {x: pin.x, y: pin.y};\n  tb.x -= ct.ll[0];\n  tb.y -= ct.ll[1];\n  tb.x = adjust_lon(tb.x - Math.PI) + Math.PI;\n  var t = nadInterpolate(tb, ct);\n  if (inverse) {\n    if (isNaN(t.x)) {\n      return val;\n    }\n    t.x = tb.x - t.x;\n    t.y = tb.y - t.y;\n    var i = 9, tol = 1e-12;\n    var dif, del;\n    do {\n      del = nadInterpolate(t, ct);\n      if (isNaN(del.x)) {\n        console.log(\"Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.\");\n        break;\n      }\n      dif = {x: tb.x - (del.x + t.x), y: tb.y - (del.y + t.y)};\n      t.x += dif.x;\n      t.y += dif.y;\n    } while (i-- && Math.abs(dif.x) > tol && Math.abs(dif.y) > tol);\n    if (i < 0) {\n      console.log(\"Inverse grid shift iterator failed to converge.\");\n      return val;\n    }\n    val.x = adjust_lon(t.x + ct.ll[0]);\n    val.y = t.y + ct.ll[1];\n  } else {\n    if (!isNaN(t.x)) {\n      val.x = pin.x + t.x;\n      val.y = pin.y + t.y;\n    }\n  }\n  return val;\n}\n\nfunction nadInterpolate(pin, ct) {\n  var t = {x: pin.x / ct.del[0], y: pin.y / ct.del[1]};\n  var indx = {x: Math.floor(t.x), y: Math.floor(t.y)};\n  var frct = {x: t.x - 1.0 * indx.x, y: t.y - 1.0 * indx.y};\n  var val= {x: Number.NaN, y: Number.NaN};\n  var inx;\n  if (indx.x < 0 || indx.x >= ct.lim[0]) {\n    return val;\n  }\n  if (indx.y < 0 || indx.y >= ct.lim[1]) {\n    return val;\n  }\n  inx = (indx.y * ct.lim[0]) + indx.x;\n  var f00 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx++;\n  var f10= {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx += ct.lim[0];\n  var f11 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx--;\n  var f01 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  var m11 = frct.x * frct.y, m10 = frct.x * (1.0 - frct.y),\n    m00 = (1.0 - frct.x) * (1.0 - frct.y), m01 = (1.0 - frct.x) * frct.y;\n  val.x = (m00 * f00.x + m10 * f10.x + m01 * f01.x + m11 * f11.x);\n  val.y = (m00 * f00.y + m10 * f10.y + m01 * f01.y + m11 * f11.y);\n  return val;\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      if (\"ew\".indexOf(crs.axis[i]) !== -1) {\n        t = 'x';\n      } else {\n        t = 'y';\n      }\n\n    }\n    else if (i === 1) {\n      v = yin;\n      if (\"ns\".indexOf(crs.axis[i]) !== -1) {\n        t = 'y';\n      } else {\n        t = 'x';\n      }\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return (\n    (source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM || source.datum.datum_type === PJD_GRIDSHIFT) && dest.datumCode !== 'WGS84') ||\n    ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM || dest.datum.datum_type === PJD_GRIDSHIFT) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point, enforceAxis) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  } else {\n    // Clone the point object so inputs don't get modified\n    point = {\n      x: point.x,\n      y: point.y,\n      z: point.z,\n      m: point.m\n    };\n  }\n  var hasZ = point.z !== undefined;\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point, enforceAxis);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (enforceAxis && source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R,\n      z: point.z || 0\n    };\n  } else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter,\n        z: point.z || 0\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n    if (!point) {\n      return;\n    }\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n  if (!point) {\n    return;\n  }\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y,\n      z: point.z || 0\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D,\n      z: point.z || 0\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter,\n        z: point.z || 0\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (enforceAxis && dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  if (point && !hasZ) {\n    delete point.z;\n  }\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords, enforceAxis) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords, enforceAxis) || {x: NaN, y: NaN};\n    if (coords.length > 2) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (typeof transformedArray.z === 'number') {\n          return [transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.splice(3));\n        } else {\n          return [transformedArray.x, transformedArray.y, coords[2]].concat(coords.splice(3));\n        }\n      } else {\n        return [transformedArray.x, transformedArray.y].concat(coords.splice(2));\n      }\n    } else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  } else {\n    out = transform(from, to, coords, enforceAxis);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (key === 'x' || key === 'y' || key === 'z') {\n          return;\n        }\n      } else {\n        if (key === 'x' || key === 'y') {\n          return;\n        }\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\n\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  } else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  } else {\n    obj = {\n      forward: function (coords, enforceAxis) {\n        return transformer(fromProj, toProj, coords, enforceAxis);\n      },\n      inverse: function (coords, enforceAxis) {\n        return transformer(toProj, fromProj, coords, enforceAxis);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Fast_Transverse_Mercator\", \"Fast Transverse Mercator\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport tmerc from '../projections/tmerc';\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (!this.approx && (isNaN(this.es) || this.es <= 0)) {\n    throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION[\"Fast_Transverse_Mercator\"] in the WKT.');\n  }\n  if (this.approx) {\n    // When '+approx' is set, use tmerc instead\n    tmerc.init.apply(this);\n    this.forward = tmerc.forward;\n    this.inverse = tmerc.inverse;\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\", \"Transverse_Mercator\", \"Transverse Mercator\", \"Gauss Kruger\", \"Gauss_Kruger\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\nimport hypot from '../common/hypot';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = hypot(p.x, p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n\n  // setting default parameters\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN && Math.abs(Math.cos(this.lat_ts)) > EPSLN) {\n      // When k0 is 1 (default value) and lat_ts is a vaild number and lat0 is at a pole and lat_ts is not at a pole\n      // Recalculate k0 using formula 21-35 from p161 of Snyder, 1987\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\", \"Polar_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme  axe oblique et pour la transformation entre\n    des systmes de rfrence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { D2R, EPSLN, HALF_PI, TWO_PI, FORTPI } from '../constants/values';\n\nvar TOL = 1e-7;\n\nfunction isTypeA(P) {\n  var typeAProjections = ['Hotine_Oblique_Mercator','Hotine_Oblique_Mercator_Azimuth_Natural_Origin'];\n  var projectionName = typeof P.PROJECTION === \"object\" ? Object.keys(P.PROJECTION)[0] : P.PROJECTION;\n  \n  return 'no_uoff' in P || 'no_off' in P || typeAProjections.indexOf(projectionName) !== -1;\n}\n\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {  \n  var con, com, cosph0, D, F, H, L, sinph0, p, J, gamma = 0,\n    gamma0, lamc = 0, lam1 = 0, lam2 = 0, phi1 = 0, phi2 = 0, alpha_c = 0, AB;\n  \n  // only Type A uses the no_off or no_uoff property\n  // https://github.com/OSGeo/proj.4/issues/104\n  this.no_off = isTypeA(this);\n  this.no_rot = 'no_rot' in this;\n  \n  var alp = false;\n  if (\"alpha\" in this) {\n    alp = true;\n  }\n\n  var gam = false;\n  if (\"rectified_grid_angle\" in this) {\n    gam = true;\n  }\n\n  if (alp) {\n    alpha_c = this.alpha;\n  }\n  \n  if (gam) {\n    gamma = (this.rectified_grid_angle * D2R);\n  }\n  \n  if (alp || gam) {\n    lamc = this.longc;\n  } else {\n    lam1 = this.long1;\n    phi1 = this.lat1;\n    lam2 = this.long2;\n    phi2 = this.lat2;\n    \n    if (Math.abs(phi1 - phi2) <= TOL || (con = Math.abs(phi1)) <= TOL ||\n        Math.abs(con - HALF_PI) <= TOL || Math.abs(Math.abs(this.lat0) - HALF_PI) <= TOL ||\n        Math.abs(Math.abs(phi2) - HALF_PI) <= TOL) {\n      throw new Error();\n    }\n  }\n  \n  var one_es = 1.0 - this.es;\n  com = Math.sqrt(one_es);\n  \n  if (Math.abs(this.lat0) > EPSLN) {\n    sinph0 = Math.sin(this.lat0);\n    cosph0 = Math.cos(this.lat0);\n    con = 1 - this.es * sinph0 * sinph0;\n    this.B = cosph0 * cosph0;\n    this.B = Math.sqrt(1 + this.es * this.B * this.B / one_es);\n    this.A = this.B * this.k0 * com / con;\n    D = this.B * com / (cosph0 * Math.sqrt(con));\n    F = D * D -1;\n    \n    if (F <= 0) {\n      F = 0;\n    } else {\n      F = Math.sqrt(F);\n      if (this.lat0 < 0) {\n        F = -F;\n      }\n    }\n    \n    this.E = F += D;\n    this.E *= Math.pow(tsfnz(this.e, this.lat0, sinph0), this.B);\n  } else {\n    this.B = 1 / com;\n    this.A = this.k0;\n    this.E = D = F = 1;\n  }\n  \n  if (alp || gam) {\n    if (alp) {\n      gamma0 = Math.asin(Math.sin(alpha_c) / D);\n      if (!gam) {\n        gamma = alpha_c;\n      }\n    } else {\n      gamma0 = gamma;\n      alpha_c = Math.asin(D * Math.sin(gamma0));\n    }\n    this.lam0 = lamc - Math.asin(0.5 * (F - 1 / F) * Math.tan(gamma0)) / this.B;\n  } else {\n    H = Math.pow(tsfnz(this.e, phi1, Math.sin(phi1)), this.B);\n    L = Math.pow(tsfnz(this.e, phi2, Math.sin(phi2)), this.B);\n    F = this.E / H;\n    p = (L - H) / (L + H);\n    J = this.E * this.E;\n    J = (J - L * H) / (J + L * H);\n    con = lam1 - lam2;\n    \n    if (con < -Math.pi) {\n      lam2 -=TWO_PI;\n    } else if (con > Math.pi) {\n      lam2 += TWO_PI;\n    }\n    \n    this.lam0 = adjust_lon(0.5 * (lam1 + lam2) - Math.atan(J * Math.tan(0.5 * this.B * (lam1 - lam2)) / p) / this.B);\n    gamma0 = Math.atan(2 * Math.sin(this.B * adjust_lon(lam1 - this.lam0)) / (F - 1 / F));\n    gamma = alpha_c = Math.asin(D * Math.sin(gamma0));\n  }\n  \n  this.singam = Math.sin(gamma0);\n  this.cosgam = Math.cos(gamma0);\n  this.sinrot = Math.sin(gamma);\n  this.cosrot = Math.cos(gamma);\n  \n  this.rB = 1 / this.B;\n  this.ArB = this.A * this.rB;\n  this.BrA = 1 / this.ArB;\n  AB = this.A * this.B;\n  \n  if (this.no_off) {\n    this.u_0 = 0;\n  } else {\n    this.u_0 = Math.abs(this.ArB * Math.atan(Math.sqrt(D * D - 1) / Math.cos(alpha_c)));\n    \n    if (this.lat0 < 0) {\n      this.u_0 = - this.u_0;\n    }  \n  }\n    \n  F = 0.5 * gamma0;\n  this.v_pole_n = this.ArB * Math.log(Math.tan(FORTPI - F));\n  this.v_pole_s = this.ArB * Math.log(Math.tan(FORTPI + F));\n}\n\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var coords = {};\n  var S, T, U, V, W, temp, u, v;\n  p.x = p.x - this.lam0;\n  \n  if (Math.abs(Math.abs(p.y) - HALF_PI) > EPSLN) {\n    W = this.E / Math.pow(tsfnz(this.e, p.y, Math.sin(p.y)), this.B);\n    \n    temp = 1 / W;\n    S = 0.5 * (W - temp);\n    T = 0.5 * (W + temp);\n    V = Math.sin(this.B * p.x);\n    U = (S * this.singam - V * this.cosgam) / T;\n        \n    if (Math.abs(Math.abs(U) - 1.0) < EPSLN) {\n      throw new Error();\n    }\n    \n    v = 0.5 * this.ArB * Math.log((1 - U)/(1 + U));\n    temp = Math.cos(this.B * p.x);\n    \n    if (Math.abs(temp) < TOL) {\n      u = this.A * p.x;\n    } else {\n      u = this.ArB * Math.atan2((S * this.cosgam + V * this.singam), temp);\n    }    \n  } else {\n    v = p.y > 0 ? this.v_pole_n : this.v_pole_s;\n    u = this.ArB * p.y;\n  }\n     \n  if (this.no_rot) {\n    coords.x = u;\n    coords.y = v;\n  } else {\n    u -= this.u_0;\n    coords.x = v * this.cosrot + u * this.sinrot;\n    coords.y = u * this.cosrot - v * this.sinrot;\n  }\n  \n  coords.x = (this.a * coords.x + this.x0);\n  coords.y = (this.a * coords.y + this.y0);\n  \n  return coords;\n}\n\nexport function inverse(p) {\n  var u, v, Qp, Sp, Tp, Vp, Up;\n  var coords = {};\n  \n  p.x = (p.x - this.x0) * (1.0 / this.a);\n  p.y = (p.y - this.y0) * (1.0 / this.a);\n\n  if (this.no_rot) {\n    v = p.y;\n    u = p.x;\n  } else {\n    v = p.x * this.cosrot - p.y * this.sinrot;\n    u = p.y * this.cosrot + p.x * this.sinrot + this.u_0;\n  }\n  \n  Qp = Math.exp(-this.BrA * v);\n  Sp = 0.5 * (Qp - 1 / Qp);\n  Tp = 0.5 * (Qp + 1 / Qp);\n  Vp = Math.sin(this.BrA * u);\n  Up = (Vp * this.cosgam + Sp * this.singam) / Tp;\n  \n  if (Math.abs(Math.abs(Up) - 1) < EPSLN) {\n    coords.x = 0;\n    coords.y = Up < 0 ? -HALF_PI : HALF_PI;\n  } else {\n    coords.y = this.E / Math.sqrt((1 + Up) / (1 - Up));\n    coords.y = phi2z(this.e, Math.pow(coords.y, 1 / this.B));\n    \n    if (coords.y === Infinity) {\n      throw new Error();\n    }\n        \n    coords.x = -this.rB * Math.atan2((Sp * this.cosgam - Vp * this.singam), Math.cos(this.BrA * u));\n  }\n  \n  coords.x += this.lam0;\n  \n  return coords;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Two_Point_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"Oblique_Mercator\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n  \n  //double lat0;                    /* the reference latitude               */\n  //double long0;                   /* the reference longitude              */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n  \n  //the above value can be set with proj4.defs\n  //example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\n  \"Lambert Tangential Conformal Conic Projection\",\n  \"Lambert_Conformal_Conic\",\n  \"Lambert_Conformal_Conic_1SP\",\n  \"Lambert_Conformal_Conic_2SP\",\n  \"lcc\",\n  \"Lambert Conic Conformal (1SP)\",\n  \"Lambert Conic Conformal (2SP)\"\n];\n\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.lat0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.lat0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c ? c / Math.sin(c) : 1;\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F, sinpsi;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      sinpsi = Math.sin(psi);\n      lat = Math.atan2((sinpsi - this.es * F * this.sin_p12) * Math.tan(psi), sinpsi * (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {\n    geodeticToGeocentric,\n    geocentricToGeodetic\n} from '../datumUtils';\n\nexport function init() {\n    this.name = 'geocent';\n\n}\n\nexport function forward(p) {\n    var point = geodeticToGeocentric(p, this.es, this.a);\n    return point;\n}\n\nexport function inverse(p) {\n    var point = geocentricToGeodetic(p, this.es, this.a, this.b);\n    return point;\n}\n\nexport var names = [\"Geocentric\", 'geocentric', \"geocent\", \"Geocent\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names\n};","\nvar mode = {\n  N_POLE: 0,\n  S_POLE: 1,\n  EQUIT: 2,\n  OBLIQ: 3\n};\n\nimport { D2R, HALF_PI, EPSLN } from \"../constants/values\";\nimport hypot from \"../common/hypot\";\n\nvar params = {\n  h:     { def: 100000, num: true },           // default is Karman line, no default in PROJ.7\n  azi:   { def: 0, num: true, degrees: true }, // default is North\n  tilt:  { def: 0, num: true, degrees: true }, // default is Nadir\n  long0: { def: 0, num: true },                // default is Greenwich, conversion to rad is automatic\n  lat0:  { def: 0, num: true }                 // default is Equator, conversion to rad is automatic\n};\n\nexport function init() {\n  Object.keys(params).forEach(function (p) {\n    if (typeof this[p] === \"undefined\") {\n      this[p] = params[p].def;\n    } else if (params[p].num && isNaN(this[p])) {\n      throw new Error(\"Invalid parameter value, must be numeric \" + p + \" = \" + this[p]);\n    } else if (params[p].num) {\n      this[p] = parseFloat(this[p]);\n    }\n    if (params[p].degrees) {\n      this[p] = this[p] * D2R;\n    }\n  }.bind(this));\n\n  if (Math.abs((Math.abs(this.lat0) - HALF_PI)) < EPSLN) {\n    this.mode = this.lat0 < 0 ? mode.S_POLE : mode.N_POLE;\n  } else if (Math.abs(this.lat0) < EPSLN) {\n    this.mode = mode.EQUIT;\n  } else {\n    this.mode = mode.OBLIQ;\n    this.sinph0 = Math.sin(this.lat0);\n    this.cosph0 = Math.cos(this.lat0);\n  }\n\n  this.pn1 = this.h / this.a;  // Normalize relative to the Earth's radius\n\n  if (this.pn1 <= 0 || this.pn1 > 1e10) {\n    throw new Error(\"Invalid height\");\n  }\n  \n  this.p = 1 + this.pn1;\n  this.rp = 1 / this.p;\n  this.h1 = 1 / this.pn1;\n  this.pfact = (this.p + 1) * this.h1;\n  this.es = 0;\n\n  var omega = this.tilt;\n  var gamma = this.azi;\n  this.cg = Math.cos(gamma);\n  this.sg = Math.sin(gamma);\n  this.cw = Math.cos(omega);\n  this.sw = Math.sin(omega);\n}\n\nexport function forward(p) {\n  p.x -= this.long0;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var coslam = Math.cos(p.x);\n  var x, y;\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y = this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y = cosphi * coslam;\n      break;\n    case mode.S_POLE:\n      y = -sinphi;\n      break;\n    case mode.N_POLE:\n      y = sinphi;\n      break;\n  }\n  y = this.pn1 / (this.p - y);\n  x = y * cosphi * Math.sin(p.x);\n\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y *= this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y *= sinphi;\n      break;\n    case mode.N_POLE:\n      y *= -(cosphi * coslam);\n      break;\n    case mode.S_POLE:\n      y *= cosphi * coslam;\n      break;\n  }\n\n  // Tilt \n  var yt, ba;\n  yt = y * this.cg + x * this.sg;\n  ba = 1 / (yt * this.sw * this.h1 + this.cw);\n  x = (x * this.cg - y * this.sg) * this.cw * ba;\n  y = yt * ba;\n\n  p.x = x * this.a;\n  p.y = y * this.a;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x /= this.a;\n  p.y /= this.a;\n  var r = { x: p.x, y: p.y };\n\n  // Un-Tilt\n  var bm, bq, yt;\n  yt = 1 / (this.pn1 - p.y * this.sw);\n  bm = this.pn1 * p.x * yt;\n  bq = this.pn1 * p.y * this.cw * yt;\n  p.x = bm * this.cg + bq * this.sg;\n  p.y = bq * this.cg - bm * this.sg;\n\n  var rh = hypot(p.x, p.y);\n  if (Math.abs(rh) < EPSLN) {\n    r.x = 0;\n    r.y = p.y;\n  } else {\n    var cosz, sinz;\n    sinz = 1 - rh * rh * this.pfact;\n    sinz = (this.p - Math.sqrt(sinz)) / (this.pn1 / rh + rh / this.pn1);\n    cosz = Math.sqrt(1 - sinz * sinz);\n    switch (this.mode) {\n      case mode.OBLIQ:\n        r.y = Math.asin(cosz * this.sinph0 + p.y * sinz * this.cosph0 / rh);\n        p.y = (cosz - this.sinph0 * Math.sin(r.y)) * rh;\n        p.x *= sinz * this.cosph0;\n        break;\n      case mode.EQUIT:\n        r.y = Math.asin(p.y * sinz / rh);\n        p.y = cosz * rh;\n        p.x *= sinz;\n        break;\n      case mode.N_POLE:\n        r.y = Math.asin(cosz);\n        p.y = -p.y;\n        break;\n      case mode.S_POLE:\n        r.y = -Math.asin(cosz);\n        break;\n    }\n    r.x = Math.atan2(p.x, p.y);\n  }\n\n  p.x = r.x + this.long0;\n  p.y = r.y;\n  return p;\n}\n\nexport var names = [\"Tilted_Perspective\", \"tpers\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import hypot from '../common/hypot';\n\nexport function init() {\n    this.flip_axis = (this.sweep === 'x' ? 1 : 0);\n    this.h = Number(this.h);\n    this.radius_g_1 = this.h / this.a;\n\n    if (this.radius_g_1 <= 0 || this.radius_g_1 > 1e10) {\n        throw new Error();\n    }\n\n    this.radius_g = 1.0 + this.radius_g_1;\n    this.C = this.radius_g * this.radius_g - 1.0;\n\n    if (this.es !== 0.0) {\n        var one_es = 1.0 - this.es;\n        var rone_es = 1 / one_es;\n\n        this.radius_p = Math.sqrt(one_es);\n        this.radius_p2 = one_es;\n        this.radius_p_inv2 = rone_es;\n\n        this.shape = 'ellipse'; // Use as a condition in the forward and inverse functions.\n    } else {\n        this.radius_p = 1.0;\n        this.radius_p2 = 1.0;\n        this.radius_p_inv2 = 1.0;\n\n        this.shape = 'sphere';  // Use as a condition in the forward and inverse functions.\n    }\n\n    if (!this.title) {\n        this.title = \"Geostationary Satellite View\";\n    }\n}\n\nfunction forward(p) {\n    var lon = p.x;\n    var lat = p.y;\n    var tmp, v_x, v_y, v_z;\n    lon = lon - this.long0;\n\n    if (this.shape === 'ellipse') {\n        lat = Math.atan(this.radius_p2 * Math.tan(lat));\n        var r = this.radius_p / hypot(this.radius_p * Math.cos(lat), Math.sin(lat));\n\n        v_x = r * Math.cos(lon) * Math.cos(lat);\n        v_y = r * Math.sin(lon) * Math.cos(lat);\n        v_z = r * Math.sin(lat);\n\n        if (((this.radius_g - v_x) * v_x - v_y * v_y - v_z * v_z * this.radius_p_inv2) < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        tmp = this.radius_g - v_x;\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    } else if (this.shape === 'sphere') {\n        tmp = Math.cos(lat);\n        v_x = Math.cos(lon) * tmp;\n        v_y = Math.sin(lon) * tmp;\n        v_z = Math.sin(lat);\n        tmp = this.radius_g - v_x;\n\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    }\n    p.x = p.x * this.a;\n    p.y = p.y * this.a;\n    return p;\n}\n\nfunction inverse(p) {\n    var v_x = -1.0;\n    var v_y = 0.0;\n    var v_z = 0.0;\n    var a, b, det, k;\n\n    p.x = p.x / this.a;\n    p.y = p.y / this.a;\n\n    if (this.shape === 'ellipse') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * hypot(1.0, v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * hypot(1.0, v_y);\n        }\n\n        var v_zp = v_z / this.radius_p;\n        a = v_y * v_y + v_zp * v_zp + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n        p.y = Math.atan(this.radius_p_inv2 * Math.tan(p.y));\n    } else if (this.shape === 'sphere') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * Math.sqrt(1.0 + v_z * v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * Math.sqrt(1.0 + v_y * v_y);\n        }\n\n        a = v_y * v_y + v_z * v_z + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n    }\n    p.x = p.x + this.long0;\n    return p;\n}\n\nexport var names = [\"Geostationary Satellite View\", \"Geostationary_Satellite\", \"geos\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names,\n};\n\n","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nimport geocent from './lib/projections/geocent';\nimport tpers from './lib/projections/tpers';\nimport geos from './lib/projections/geos';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n  proj4.Proj.projections.add(geocent);\n  proj4.Proj.projections.add(tpers);\n  proj4.Proj.projections.add(geos);\n}","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport nadgrid from \"./nadgrid\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.nadgrid = nadgrid;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = '__VERSION__';\nincludedProjections(proj4);\nexport default proj4;\n","//helper functions shared between different amaps wrapper apps\n\nimport proj4 from \"proj4\";\n/* eslint-disable-next-line max-len */\nproj4.defs(\n  \"EPSG:28992\",\n  \"+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs\"\n);\nconst transformCoords = proj4(\n  proj4.defs(\"EPSG:4326\"),\n  proj4.defs(\"EPSG:28992\")\n);\n\n//utility function\nfunction query(url) {\n  const promise = new Promise((resolve, reject) => {\n    fetch(url)\n      .then(res => resolve(res.json()))\n      .catch(err => reject(err));\n  });\n  return promise;\n}\n\n//chain of API requests for single-click\n//1. get BAG information.\n//2. after that, we need to get the full object data.\n//3. get omgevingsinfo\nasync function getBagInfo(click) {\n  const xy = {\n    x: click.latlng.lng,\n    y: click.latlng.lat\n  };\n  let nummeraanduidingId = false;\n  if (click.resultObject && click.resultObject.nummeraanduiding_id)\n    nummeraanduidingId = click.resultObject.nummeraanduiding_id;\n  const url = requestFormatter(\n    \"https://api.data.amsterdam.nl/bag/v1.1/nummeraanduiding/?format=json&locatie=\",\n    xy\n  );\n  return await query(url).then(res => {\n    let output = {\n      queryResult: responseFormatter(res, nummeraanduidingId),\n      latlng: click.latlng\n    };\n    return output;\n  });\n}\n\nasync function getFullObjectData(data) {\n  //d: {\n  //  latlng: {},\n  //  queryResult: {},\n  //}\n  let dichtstbijzijnd_adres = {};\n  if (data.queryResult !== null) {\n    try {\n      const res = await query(data.queryResult._links.self.href);\n      dichtstbijzijnd_adres = {\n        openbare_ruimte: res.openbare_ruimte._display,\n        huisnummer: res.huisnummer,\n        huisletter: res.huisletter,\n        huisnummer_toevoeging: res.huisnummer_toevoeging,\n        postcode: res.postcode,\n        woonplaats: res.woonplaats._display\n      };\n    } catch (e) {\n      /* eslint-disable no-console */\n      console.log(\"error!\");\n      console.log(e);\n      /* eslint-enable no-console */\n    }\n  } else {\n    dichtstbijzijnd_adres = null;\n  }\n  return {\n    query: {\n      latitude: data.latlng.lat,\n      longitude: data.latlng.lng\n    },\n    dichtstbijzijnd_adres: dichtstbijzijnd_adres,\n    object: null //no object for an address search\n  };\n}\n\nfunction findOmgevingFeature(features, type) {\n  let feature = features.find(feat => feat.properties.type === type);\n  if (feature === undefined) return null;\n  return feature.properties;\n}\n\nasync function getOmgevingInfo(data) {\n  const res = await query(\n    `https://api.data.amsterdam.nl/geosearch/bag/?lat=${data.query.latitude}&lon=${data.query.longitude}&radius=50`\n  );\n  let buurtinfo = findOmgevingFeature(res.features, \"gebieden/buurt\");\n  let wijkinfo = findOmgevingFeature(res.features, \"gebieden/buurtcombinatie\");\n  let stadsdeelinfo = findOmgevingFeature(res.features, \"gebieden/stadsdeel\");\n  if (buurtinfo !== null && wijkinfo !== null && stadsdeelinfo !== null) {\n    data.omgevingsinfo = {\n      buurtnaam: buurtinfo !== undefined ? buurtinfo.display : null,\n      buurtcode: buurtinfo !== undefined ? buurtinfo.vollcode : null,\n      wijknaam: wijkinfo !== undefined ? wijkinfo.display : null,\n      wijkcode: wijkinfo !== undefined ? wijkinfo.vollcode : null,\n      stadsdeelnaam: stadsdeelinfo !== undefined ? stadsdeelinfo.display : null,\n      stadsdeelcode: stadsdeelinfo !== undefined ? stadsdeelinfo.code : null\n    };\n  } else {\n    data.omgevingsinfo = null;\n  }\n\n  return data;\n}\n\nfunction requestFormatter(baseUrl, xy) {\n  let xyRD = transformCoords.forward(xy);\n  return `${baseUrl}${xyRD.x},${xyRD.y},50`;\n}\n\nfunction responseFormatter(res, search_id) {\n  let filtered;\n  search_id =\n    search_id === false ? false : search_id === undefined ? false : search_id; //make sure that search_id is properly set to false\n  if (res.results) {\n    filtered =\n      search_id !== false\n        ? res.results.filter(x => x.landelijk_id === search_id)\n        : res.results.filter(x => x.type_adres === \"Hoofdadres\");\n  } else {\n    throw {\n      error: \"no results property found on query response.\",\n      response: res\n    };\n  }\n  return filtered.length > 0 ? filtered[0] : null;\n}\n\nasync function pointQueryChain(click) {\n  try {\n    const result = await getBagInfo(click)\n      .then(getFullObjectData)\n      .then(getOmgevingInfo);\n    return result;\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport {\n  pointQueryChain,\n  getBagInfo,\n  getFullObjectData,\n  getOmgevingInfo,\n  requestFormatter,\n  responseFormatter,\n  query\n};\n","/*\n * Leaflet.markercluster 1.5.3+master.e5124b2,\n * Provides Beautiful Animated Marker Clustering functionality for Leaflet, a JS library for interactive maps.\n * https://github.com/Leaflet/Leaflet.markercluster\n * (c) 2012-2017, Dave Leaver, smartrak\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(global = global || self, factory((global.Leaflet = global.Leaflet || {}, global.Leaflet.markercluster = {})));\n}(this, function (exports) { 'use strict';\n\n\t/*\n\t * L.MarkerClusterGroup extends L.FeatureGroup by clustering the markers contained within\n\t */\n\n\tvar MarkerClusterGroup = L.MarkerClusterGroup = L.FeatureGroup.extend({\n\n\t\toptions: {\n\t\t\tmaxClusterRadius: 80, //A cluster will cover at most this many pixels from its center\n\t\t\ticonCreateFunction: null,\n\t\t\tclusterPane: L.Marker.prototype.options.pane,\n\n\t\t\tspiderfyOnEveryZoom: false,\n\t\t\tspiderfyOnMaxZoom: true,\n\t\t\tshowCoverageOnHover: true,\n\t\t\tzoomToBoundsOnClick: true,\n\t\t\tsingleMarkerMode: false,\n\n\t\t\tdisableClusteringAtZoom: null,\n\n\t\t\t// Setting this to false prevents the removal of any clusters outside of the viewpoint, which\n\t\t\t// is the default behaviour for performance reasons.\n\t\t\tremoveOutsideVisibleBounds: true,\n\n\t\t\t// Set to false to disable all animations (zoom and spiderfy).\n\t\t\t// If false, option animateAddingMarkers below has no effect.\n\t\t\t// If L.DomUtil.TRANSITION is falsy, this option has no effect.\n\t\t\tanimate: true,\n\n\t\t\t//Whether to animate adding markers after adding the MarkerClusterGroup to the map\n\t\t\t// If you are adding individual markers set to true, if adding bulk markers leave false for massive performance gains.\n\t\t\tanimateAddingMarkers: false,\n\n\t\t\t// Make it possible to provide custom function to calculate spiderfy shape positions\n\t\t\tspiderfyShapePositions: null,\n\n\t\t\t//Increase to increase the distance away that spiderfied markers appear from the center\n\t\t\tspiderfyDistanceMultiplier: 1,\n\n\t\t\t// Make it possible to specify a polyline options on a spider leg\n\t\t\tspiderLegPolylineOptions: { weight: 1.5, color: '#222', opacity: 0.5 },\n\n\t\t\t// When bulk adding layers, adds markers in chunks. Means addLayers may not add all the layers in the call, others will be loaded during setTimeouts\n\t\t\tchunkedLoading: false,\n\t\t\tchunkInterval: 200, // process markers for a maximum of ~ n milliseconds (then trigger the chunkProgress callback)\n\t\t\tchunkDelay: 50, // at the end of each interval, give n milliseconds back to system/browser\n\t\t\tchunkProgress: null, // progress callback: function(processed, total, elapsed) (e.g. for a progress indicator)\n\n\t\t\t//Options to pass to the L.Polygon constructor\n\t\t\tpolygonOptions: {}\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tL.Util.setOptions(this, options);\n\t\t\tif (!this.options.iconCreateFunction) {\n\t\t\t\tthis.options.iconCreateFunction = this._defaultIconCreateFunction;\n\t\t\t}\n\n\t\t\tthis._featureGroup = L.featureGroup();\n\t\t\tthis._featureGroup.addEventParent(this);\n\n\t\t\tthis._nonPointGroup = L.featureGroup();\n\t\t\tthis._nonPointGroup.addEventParent(this);\n\n\t\t\tthis._inZoomAnimation = 0;\n\t\t\tthis._needsClustering = [];\n\t\t\tthis._needsRemoving = []; //Markers removed while we aren't on the map need to be kept track of\n\t\t\t//The bounds of the currently shown area (from _getExpandedVisibleBounds) Updated on zoom/move\n\t\t\tthis._currentShownBounds = null;\n\n\t\t\tthis._queue = [];\n\n\t\t\tthis._childMarkerEventHandlers = {\n\t\t\t\t'dragstart': this._childMarkerDragStart,\n\t\t\t\t'move': this._childMarkerMoved,\n\t\t\t\t'dragend': this._childMarkerDragEnd,\n\t\t\t};\n\n\t\t\t// Hook the appropriate animation methods.\n\t\t\tvar animate = L.DomUtil.TRANSITION && this.options.animate;\n\t\t\tL.extend(this, animate ? this._withAnimation : this._noAnimation);\n\t\t\t// Remember which MarkerCluster class to instantiate (animated or not).\n\t\t\tthis._markerCluster = animate ? L.MarkerCluster : L.MarkerClusterNonAnimated;\n\t\t},\n\n\t\taddLayer: function (layer) {\n\n\t\t\tif (layer instanceof L.LayerGroup) {\n\t\t\t\treturn this.addLayers([layer]);\n\t\t\t}\n\n\t\t\t//Don't cluster non point data\n\t\t\tif (!layer.getLatLng) {\n\t\t\t\tthis._nonPointGroup.addLayer(layer);\n\t\t\t\tthis.fire('layeradd', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!this._map) {\n\t\t\t\tthis._needsClustering.push(layer);\n\t\t\t\tthis.fire('layeradd', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (this.hasLayer(layer)) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\n\t\t\t//If we have already clustered we'll need to add this one to a cluster\n\n\t\t\tif (this._unspiderfy) {\n\t\t\t\tthis._unspiderfy();\n\t\t\t}\n\n\t\t\tthis._addLayer(layer, this._maxZoom);\n\t\t\tthis.fire('layeradd', { layer: layer });\n\n\t\t\t// Refresh bounds and weighted positions.\n\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\t//Work out what is visible\n\t\t\tvar visibleLayer = layer,\n\t\t\t    currentZoom = this._zoom;\n\t\t\tif (layer.__parent) {\n\t\t\t\twhile (visibleLayer.__parent._zoom >= currentZoom) {\n\t\t\t\t\tvisibleLayer = visibleLayer.__parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._currentShownBounds.contains(visibleLayer.getLatLng())) {\n\t\t\t\tif (this.options.animateAddingMarkers) {\n\t\t\t\t\tthis._animationAddLayer(layer, visibleLayer);\n\t\t\t\t} else {\n\t\t\t\t\tthis._animationAddLayerNonAnimated(layer, visibleLayer);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tremoveLayer: function (layer) {\n\n\t\t\tif (layer instanceof L.LayerGroup) {\n\t\t\t\treturn this.removeLayers([layer]);\n\t\t\t}\n\n\t\t\t//Non point layers\n\t\t\tif (!layer.getLatLng) {\n\t\t\t\tthis._nonPointGroup.removeLayer(layer);\n\t\t\t\tthis.fire('layerremove', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!this._map) {\n\t\t\t\tif (!this._arraySplice(this._needsClustering, layer) && this.hasLayer(layer)) {\n\t\t\t\t\tthis._needsRemoving.push({ layer: layer, latlng: layer._latlng });\n\t\t\t\t}\n\t\t\t\tthis.fire('layerremove', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!layer.__parent) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (this._unspiderfy) {\n\t\t\t\tthis._unspiderfy();\n\t\t\t\tthis._unspiderfyLayer(layer);\n\t\t\t}\n\n\t\t\t//Remove the marker from clusters\n\t\t\tthis._removeLayer(layer, true);\n\t\t\tthis.fire('layerremove', { layer: layer });\n\n\t\t\t// Refresh bounds and weighted positions.\n\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\tlayer.off(this._childMarkerEventHandlers, this);\n\n\t\t\tif (this._featureGroup.hasLayer(layer)) {\n\t\t\t\tthis._featureGroup.removeLayer(layer);\n\t\t\t\tif (layer.clusterShow) {\n\t\t\t\t\tlayer.clusterShow();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t//Takes an array of markers and adds them in bulk\n\t\taddLayers: function (layersArray, skipLayerAddEvent) {\n\t\t\tif (!L.Util.isArray(layersArray)) {\n\t\t\t\treturn this.addLayer(layersArray);\n\t\t\t}\n\n\t\t\tvar fg = this._featureGroup,\n\t\t\t    npg = this._nonPointGroup,\n\t\t\t    chunked = this.options.chunkedLoading,\n\t\t\t    chunkInterval = this.options.chunkInterval,\n\t\t\t    chunkProgress = this.options.chunkProgress,\n\t\t\t    l = layersArray.length,\n\t\t\t    offset = 0,\n\t\t\t    originalArray = true,\n\t\t\t    m;\n\n\t\t\tif (this._map) {\n\t\t\t\tvar started = (new Date()).getTime();\n\t\t\t\tvar process = L.bind(function () {\n\t\t\t\t\tvar start = (new Date()).getTime();\n\n\t\t\t\t\t// Make sure to unspiderfy before starting to add some layers\n\t\t\t\t\tif (this._map && this._unspiderfy) {\n\t\t\t\t\t\tthis._unspiderfy();\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (; offset < l; offset++) {\n\t\t\t\t\t\tif (chunked && offset % 200 === 0) {\n\t\t\t\t\t\t\t// every couple hundred markers, instrument the time elapsed since processing started:\n\t\t\t\t\t\t\tvar elapsed = (new Date()).getTime() - start;\n\t\t\t\t\t\t\tif (elapsed > chunkInterval) {\n\t\t\t\t\t\t\t\tbreak; // been working too hard, time to take a break :-)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tm = layersArray[offset];\n\n\t\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\t\t// Side effects:\n\t\t\t\t\t\t// - Total increases, so chunkProgress ratio jumps backward.\n\t\t\t\t\t\t// - Groups are not included in this group, only their non-group child layers (hasLayer).\n\t\t\t\t\t\t// Changing array length while looping does not affect performance in current browsers:\n\t\t\t\t\t\t// http://jsperf.com/for-loop-changing-length/6\n\t\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Not point data, can't be clustered\n\t\t\t\t\t\tif (!m.getLatLng) {\n\t\t\t\t\t\t\tnpg.addLayer(m);\n\t\t\t\t\t\t\tif (!skipLayerAddEvent) {\n\t\t\t\t\t\t\t\tthis.fire('layeradd', { layer: m });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.hasLayer(m)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._addLayer(m, this._maxZoom);\n\t\t\t\t\t\tif (!skipLayerAddEvent) {\n\t\t\t\t\t\t\tthis.fire('layeradd', { layer: m });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//If we just made a cluster of size 2 then we need to remove the other marker from the map (if it is) or we never will\n\t\t\t\t\t\tif (m.__parent) {\n\t\t\t\t\t\t\tif (m.__parent.getChildCount() === 2) {\n\t\t\t\t\t\t\t\tvar markers = m.__parent.getAllChildMarkers(),\n\t\t\t\t\t\t\t\t    otherMarker = markers[0] === m ? markers[1] : markers[0];\n\t\t\t\t\t\t\t\tfg.removeLayer(otherMarker);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chunkProgress) {\n\t\t\t\t\t\t// report progress and time elapsed:\n\t\t\t\t\t\tchunkProgress(offset, l, (new Date()).getTime() - started);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Completed processing all markers.\n\t\t\t\t\tif (offset === l) {\n\n\t\t\t\t\t\t// Refresh bounds and weighted positions.\n\t\t\t\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\t\t\t\tthis._refreshClustersIcons();\n\n\t\t\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(process, this.options.chunkDelay);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tprocess();\n\t\t\t} else {\n\t\t\t\tvar needsClustering = this._needsClustering;\n\n\t\t\t\tfor (; offset < l; offset++) {\n\t\t\t\t\tm = layersArray[offset];\n\n\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t//Not point data, can't be clustered\n\t\t\t\t\tif (!m.getLatLng) {\n\t\t\t\t\t\tnpg.addLayer(m);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.hasLayer(m)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsClustering.push(m);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\t//Takes an array of markers and removes them in bulk\n\t\tremoveLayers: function (layersArray) {\n\t\t\tvar i, m,\n\t\t\t    l = layersArray.length,\n\t\t\t    fg = this._featureGroup,\n\t\t\t    npg = this._nonPointGroup,\n\t\t\t    originalArray = true;\n\n\t\t\tif (!this._map) {\n\t\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t\tm = layersArray[i];\n\n\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._arraySplice(this._needsClustering, m);\n\t\t\t\t\tnpg.removeLayer(m);\n\t\t\t\t\tif (this.hasLayer(m)) {\n\t\t\t\t\t\tthis._needsRemoving.push({ layer: m, latlng: m._latlng });\n\t\t\t\t\t}\n\t\t\t\t\tthis.fire('layerremove', { layer: m });\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (this._unspiderfy) {\n\t\t\t\tthis._unspiderfy();\n\n\t\t\t\t// Work on a copy of the array, so that next loop is not affected.\n\t\t\t\tvar layersArray2 = layersArray.slice(),\n\t\t\t\t    l2 = l;\n\t\t\t\tfor (i = 0; i < l2; i++) {\n\t\t\t\t\tm = layersArray2[i];\n\n\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray2);\n\t\t\t\t\t\tl2 = layersArray2.length;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._unspiderfyLayer(m);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tm = layersArray[i];\n\n\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!m.__parent) {\n\t\t\t\t\tnpg.removeLayer(m);\n\t\t\t\t\tthis.fire('layerremove', { layer: m });\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis._removeLayer(m, true, true);\n\t\t\t\tthis.fire('layerremove', { layer: m });\n\n\t\t\t\tif (fg.hasLayer(m)) {\n\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Refresh bounds and weighted positions.\n\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\t//Fix up the clusters and markers on the map\n\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\n\n\t\t\treturn this;\n\t\t},\n\n\t\t//Removes all layers from the MarkerClusterGroup\n\t\tclearLayers: function () {\n\t\t\t//Need our own special implementation as the LayerGroup one doesn't work for us\n\n\t\t\t//If we aren't on the map (yet), blow away the markers we know of\n\t\t\tif (!this._map) {\n\t\t\t\tthis._needsClustering = [];\n\t\t\t\tthis._needsRemoving = [];\n\t\t\t\tdelete this._gridClusters;\n\t\t\t\tdelete this._gridUnclustered;\n\t\t\t}\n\n\t\t\tif (this._noanimationUnspiderfy) {\n\t\t\t\tthis._noanimationUnspiderfy();\n\t\t\t}\n\n\t\t\t//Remove all the visible layers\n\t\t\tthis._featureGroup.clearLayers();\n\t\t\tthis._nonPointGroup.clearLayers();\n\n\t\t\tthis.eachLayer(function (marker) {\n\t\t\t\tmarker.off(this._childMarkerEventHandlers, this);\n\t\t\t\tdelete marker.__parent;\n\t\t\t}, this);\n\n\t\t\tif (this._map) {\n\t\t\t\t//Reset _topClusterLevel and the DistanceGrids\n\t\t\t\tthis._generateInitialClusters();\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t//Override FeatureGroup.getBounds as it doesn't work\n\t\tgetBounds: function () {\n\t\t\tvar bounds = new L.LatLngBounds();\n\n\t\t\tif (this._topClusterLevel) {\n\t\t\t\tbounds.extend(this._topClusterLevel._bounds);\n\t\t\t}\n\n\t\t\tfor (var i = this._needsClustering.length - 1; i >= 0; i--) {\n\t\t\t\tbounds.extend(this._needsClustering[i].getLatLng());\n\t\t\t}\n\n\t\t\tbounds.extend(this._nonPointGroup.getBounds());\n\n\t\t\treturn bounds;\n\t\t},\n\n\t\t//Overrides LayerGroup.eachLayer\n\t\teachLayer: function (method, context) {\n\t\t\tvar markers = this._needsClustering.slice(),\n\t\t\t\tneedsRemoving = this._needsRemoving,\n\t\t\t\tthisNeedsRemoving, i, j;\n\n\t\t\tif (this._topClusterLevel) {\n\t\t\t\tthis._topClusterLevel.getAllChildMarkers(markers);\n\t\t\t}\n\n\t\t\tfor (i = markers.length - 1; i >= 0; i--) {\n\t\t\t\tthisNeedsRemoving = true;\n\n\t\t\t\tfor (j = needsRemoving.length - 1; j >= 0; j--) {\n\t\t\t\t\tif (needsRemoving[j].layer === markers[i]) {\n\t\t\t\t\t\tthisNeedsRemoving = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (thisNeedsRemoving) {\n\t\t\t\t\tmethod.call(context, markers[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._nonPointGroup.eachLayer(method, context);\n\t\t},\n\n\t\t//Overrides LayerGroup.getLayers\n\t\tgetLayers: function () {\n\t\t\tvar layers = [];\n\t\t\tthis.eachLayer(function (l) {\n\t\t\t\tlayers.push(l);\n\t\t\t});\n\t\t\treturn layers;\n\t\t},\n\n\t\t//Overrides LayerGroup.getLayer, WARNING: Really bad performance\n\t\tgetLayer: function (id) {\n\t\t\tvar result = null;\n\n\t\t\tid = parseInt(id, 10);\n\n\t\t\tthis.eachLayer(function (l) {\n\t\t\t\tif (L.stamp(l) === id) {\n\t\t\t\t\tresult = l;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\n\t\t//Returns true if the given layer is in this MarkerClusterGroup\n\t\thasLayer: function (layer) {\n\t\t\tif (!layer) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i, anArray = this._needsClustering;\n\n\t\t\tfor (i = anArray.length - 1; i >= 0; i--) {\n\t\t\t\tif (anArray[i] === layer) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tanArray = this._needsRemoving;\n\t\t\tfor (i = anArray.length - 1; i >= 0; i--) {\n\t\t\t\tif (anArray[i].layer === layer) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn !!(layer.__parent && layer.__parent._group === this) || this._nonPointGroup.hasLayer(layer);\n\t\t},\n\n\t\t//Zoom down to show the given layer (spiderfying if necessary) then calls the callback\n\t\tzoomToShowLayer: function (layer, callback) {\n\n\t\t\tvar map = this._map;\n\n\t\t\tif (typeof callback !== 'function') {\n\t\t\t\tcallback = function () {};\n\t\t\t}\n\n\t\t\tvar showMarker = function () {\n\t\t\t\t// Assumes that map.hasLayer checks for direct appearance on map, not recursively calling\n\t\t\t\t// hasLayer on Layer Groups that are on map (typically not calling this MarkerClusterGroup.hasLayer, which would always return true)\n\t\t\t\tif ((map.hasLayer(layer) || map.hasLayer(layer.__parent)) && !this._inZoomAnimation) {\n\t\t\t\t\tthis._map.off('moveend', showMarker, this);\n\t\t\t\t\tthis.off('animationend', showMarker, this);\n\n\t\t\t\t\tif (map.hasLayer(layer)) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t} else if (layer.__parent._icon) {\n\t\t\t\t\t\tthis.once('spiderfied', callback, this);\n\t\t\t\t\t\tlayer.__parent.spiderfy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (layer._icon && this._map.getBounds().contains(layer.getLatLng())) {\n\t\t\t\t//Layer is visible ond on screen, immediate return\n\t\t\t\tcallback();\n\t\t\t} else if (layer.__parent._zoom < Math.round(this._map._zoom)) {\n\t\t\t\t//Layer should be visible at this zoom level. It must not be on screen so just pan over to it\n\t\t\t\tthis._map.on('moveend', showMarker, this);\n\t\t\t\tthis._map.panTo(layer.getLatLng());\n\t\t\t} else {\n\t\t\t\tthis._map.on('moveend', showMarker, this);\n\t\t\t\tthis.on('animationend', showMarker, this);\n\t\t\t\tlayer.__parent.zoomToBounds();\n\t\t\t}\n\t\t},\n\n\t\t//Overrides FeatureGroup.onAdd\n\t\tonAdd: function (map) {\n\t\t\tthis._map = map;\n\t\t\tvar i, l, layer;\n\n\t\t\tif (!isFinite(this._map.getMaxZoom())) {\n\t\t\t\tthrow \"Map has no maxZoom specified\";\n\t\t\t}\n\n\t\t\tthis._featureGroup.addTo(map);\n\t\t\tthis._nonPointGroup.addTo(map);\n\n\t\t\tif (!this._gridClusters) {\n\t\t\t\tthis._generateInitialClusters();\n\t\t\t}\n\n\t\t\tthis._maxLat = map.options.crs.projection.MAX_LATITUDE;\n\n\t\t\t//Restore all the positions as they are in the MCG before removing them\n\t\t\tfor (i = 0, l = this._needsRemoving.length; i < l; i++) {\n\t\t\t\tlayer = this._needsRemoving[i];\n\t\t\t\tlayer.newlatlng = layer.layer._latlng;\n\t\t\t\tlayer.layer._latlng = layer.latlng;\n\t\t\t}\n\t\t\t//Remove them, then restore their new positions\n\t\t\tfor (i = 0, l = this._needsRemoving.length; i < l; i++) {\n\t\t\t\tlayer = this._needsRemoving[i];\n\t\t\t\tthis._removeLayer(layer.layer, true);\n\t\t\t\tlayer.layer._latlng = layer.newlatlng;\n\t\t\t}\n\t\t\tthis._needsRemoving = [];\n\n\t\t\t//Remember the current zoom level and bounds\n\t\t\tthis._zoom = Math.round(this._map._zoom);\n\t\t\tthis._currentShownBounds = this._getExpandedVisibleBounds();\n\n\t\t\tthis._map.on('zoomend', this._zoomEnd, this);\n\t\t\tthis._map.on('moveend', this._moveEnd, this);\n\n\t\t\tif (this._spiderfierOnAdd) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely\n\t\t\t\tthis._spiderfierOnAdd();\n\t\t\t}\n\n\t\t\tthis._bindEvents();\n\n\t\t\t//Actually add our markers to the map:\n\t\t\tl = this._needsClustering;\n\t\t\tthis._needsClustering = [];\n\t\t\tthis.addLayers(l, true);\n\t\t},\n\n\t\t//Overrides FeatureGroup.onRemove\n\t\tonRemove: function (map) {\n\t\t\tmap.off('zoomend', this._zoomEnd, this);\n\t\t\tmap.off('moveend', this._moveEnd, this);\n\n\t\t\tthis._unbindEvents();\n\n\t\t\t//In case we are in a cluster animation\n\t\t\tthis._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\n\n\t\t\tif (this._spiderfierOnRemove) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely\n\t\t\t\tthis._spiderfierOnRemove();\n\t\t\t}\n\n\t\t\tdelete this._maxLat;\n\n\t\t\t//Clean up all the layers we added to the map\n\t\t\tthis._hideCoverage();\n\t\t\tthis._featureGroup.remove();\n\t\t\tthis._nonPointGroup.remove();\n\n\t\t\tthis._featureGroup.clearLayers();\n\n\t\t\tthis._map = null;\n\t\t},\n\n\t\tgetVisibleParent: function (marker) {\n\t\t\tvar vMarker = marker;\n\t\t\twhile (vMarker && !vMarker._icon) {\n\t\t\t\tvMarker = vMarker.__parent;\n\t\t\t}\n\t\t\treturn vMarker || null;\n\t\t},\n\n\t\t//Remove the given object from the given array\n\t\t_arraySplice: function (anArray, obj) {\n\t\t\tfor (var i = anArray.length - 1; i >= 0; i--) {\n\t\t\t\tif (anArray[i] === obj) {\n\t\t\t\t\tanArray.splice(i, 1);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes a marker from all _gridUnclustered zoom levels, starting at the supplied zoom.\n\t\t * @param marker to be removed from _gridUnclustered.\n\t\t * @param z integer bottom start zoom level (included)\n\t\t * @private\n\t\t */\n\t\t_removeFromGridUnclustered: function (marker, z) {\n\t\t\tvar map = this._map,\n\t\t\t    gridUnclustered = this._gridUnclustered,\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom());\n\n\t\t\tfor (; z >= minZoom; z--) {\n\t\t\t\tif (!gridUnclustered[z].removeObject(marker, map.project(marker.getLatLng(), z))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_childMarkerDragStart: function (e) {\n\t\t\te.target.__dragStart = e.target._latlng;\n\t\t},\n\n\t\t_childMarkerMoved: function (e) {\n\t\t\tif (!this._ignoreMove && !e.target.__dragStart) {\n\t\t\t\tvar isPopupOpen = e.target._popup && e.target._popup.isOpen();\n\n\t\t\t\tthis._moveChild(e.target, e.oldLatLng, e.latlng);\n\n\t\t\t\tif (isPopupOpen) {\n\t\t\t\t\te.target.openPopup();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_moveChild: function (layer, from, to) {\n\t\t\tlayer._latlng = from;\n\t\t\tthis.removeLayer(layer);\n\n\t\t\tlayer._latlng = to;\n\t\t\tthis.addLayer(layer);\n\t\t},\n\n\t\t_childMarkerDragEnd: function (e) {\n\t\t\tvar dragStart = e.target.__dragStart;\n\t\t\tdelete e.target.__dragStart;\n\t\t\tif (dragStart) {\n\t\t\t\tthis._moveChild(e.target, dragStart, e.target._latlng);\n\t\t\t}\t\t\n\t\t},\n\n\n\t\t//Internal function for removing a marker from everything.\n\t\t//dontUpdateMap: set to true if you will handle updating the map manually (for bulk functions)\n\t\t_removeLayer: function (marker, removeFromDistanceGrid, dontUpdateMap) {\n\t\t\tvar gridClusters = this._gridClusters,\n\t\t\t\tgridUnclustered = this._gridUnclustered,\n\t\t\t\tfg = this._featureGroup,\n\t\t\t\tmap = this._map,\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom());\n\n\t\t\t//Remove the marker from distance clusters it might be in\n\t\t\tif (removeFromDistanceGrid) {\n\t\t\t\tthis._removeFromGridUnclustered(marker, this._maxZoom);\n\t\t\t}\n\n\t\t\t//Work our way up the clusters removing them as we go if required\n\t\t\tvar cluster = marker.__parent,\n\t\t\t\tmarkers = cluster._markers,\n\t\t\t\totherMarker;\n\n\t\t\t//Remove the marker from the immediate parents marker list\n\t\t\tthis._arraySplice(markers, marker);\n\n\t\t\twhile (cluster) {\n\t\t\t\tcluster._childCount--;\n\t\t\t\tcluster._boundsNeedUpdate = true;\n\n\t\t\t\tif (cluster._zoom < minZoom) {\n\t\t\t\t\t//Top level, do nothing\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (removeFromDistanceGrid && cluster._childCount <= 1) { //Cluster no longer required\n\t\t\t\t\t//We need to push the other marker up to the parent\n\t\t\t\t\totherMarker = cluster._markers[0] === marker ? cluster._markers[1] : cluster._markers[0];\n\n\t\t\t\t\t//Update distance grid\n\t\t\t\t\tgridClusters[cluster._zoom].removeObject(cluster, map.project(cluster._cLatLng, cluster._zoom));\n\t\t\t\t\tgridUnclustered[cluster._zoom].addObject(otherMarker, map.project(otherMarker.getLatLng(), cluster._zoom));\n\n\t\t\t\t\t//Move otherMarker up to parent\n\t\t\t\t\tthis._arraySplice(cluster.__parent._childClusters, cluster);\n\t\t\t\t\tcluster.__parent._markers.push(otherMarker);\n\t\t\t\t\totherMarker.__parent = cluster.__parent;\n\n\t\t\t\t\tif (cluster._icon) {\n\t\t\t\t\t\t//Cluster is currently on the map, need to put the marker on the map instead\n\t\t\t\t\t\tfg.removeLayer(cluster);\n\t\t\t\t\t\tif (!dontUpdateMap) {\n\t\t\t\t\t\t\tfg.addLayer(otherMarker);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcluster._iconNeedsUpdate = true;\n\t\t\t\t}\n\n\t\t\t\tcluster = cluster.__parent;\n\t\t\t}\n\n\t\t\tdelete marker.__parent;\n\t\t},\n\n\t\t_isOrIsParent: function (el, oel) {\n\t\t\twhile (oel) {\n\t\t\t\tif (el === oel) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\toel = oel.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t//Override L.Evented.fire\n\t\tfire: function (type, data, propagate) {\n\t\t\tif (data && data.layer instanceof L.MarkerCluster) {\n\t\t\t\t//Prevent multiple clustermouseover/off events if the icon is made up of stacked divs (Doesn't work in ie <= 8, no relatedTarget)\n\t\t\t\tif (data.originalEvent && this._isOrIsParent(data.layer._icon, data.originalEvent.relatedTarget)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttype = 'cluster' + type;\n\t\t\t}\n\n\t\t\tL.FeatureGroup.prototype.fire.call(this, type, data, propagate);\n\t\t},\n\n\t\t//Override L.Evented.listens\n\t\tlistens: function (type, propagate) {\n\t\t\treturn L.FeatureGroup.prototype.listens.call(this, type, propagate) || L.FeatureGroup.prototype.listens.call(this, 'cluster' + type, propagate);\n\t\t},\n\n\t\t//Default functionality\n\t\t_defaultIconCreateFunction: function (cluster) {\n\t\t\tvar childCount = cluster.getChildCount();\n\n\t\t\tvar c = ' marker-cluster-';\n\t\t\tif (childCount < 10) {\n\t\t\t\tc += 'small';\n\t\t\t} else if (childCount < 100) {\n\t\t\t\tc += 'medium';\n\t\t\t} else {\n\t\t\t\tc += 'large';\n\t\t\t}\n\n\t\t\treturn new L.DivIcon({ html: '<div><span>' + childCount + '</span></div>', className: 'marker-cluster' + c, iconSize: new L.Point(40, 40) });\n\t\t},\n\n\t\t_bindEvents: function () {\n\t\t\tvar map = this._map,\n\t\t\t    spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,\n\t\t\t    showCoverageOnHover = this.options.showCoverageOnHover,\n\t\t\t    zoomToBoundsOnClick = this.options.zoomToBoundsOnClick,\n\t\t\t    spiderfyOnEveryZoom = this.options.spiderfyOnEveryZoom;\n\n\t\t\t//Zoom on cluster click or spiderfy if we are at the lowest level\n\t\t\tif (spiderfyOnMaxZoom || zoomToBoundsOnClick || spiderfyOnEveryZoom) {\n\t\t\t\tthis.on('clusterclick clusterkeypress', this._zoomOrSpiderfy, this);\n\t\t\t}\n\n\t\t\t//Show convex hull (boundary) polygon on mouse over\n\t\t\tif (showCoverageOnHover) {\n\t\t\t\tthis.on('clustermouseover', this._showCoverage, this);\n\t\t\t\tthis.on('clustermouseout', this._hideCoverage, this);\n\t\t\t\tmap.on('zoomend', this._hideCoverage, this);\n\t\t\t}\n\t\t},\n\n\t\t_zoomOrSpiderfy: function (e) {\n\t\t\tvar cluster = e.layer,\n\t\t\t    bottomCluster = cluster;\n\n\t\t\tif (e.type === 'clusterkeypress' && e.originalEvent && e.originalEvent.keyCode !== 13) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twhile (bottomCluster._childClusters.length === 1) {\n\t\t\t\tbottomCluster = bottomCluster._childClusters[0];\n\t\t\t}\n\n\t\t\tif (bottomCluster._zoom === this._maxZoom &&\n\t\t\t\tbottomCluster._childCount === cluster._childCount &&\n\t\t\t\tthis.options.spiderfyOnMaxZoom) {\n\n\t\t\t\t// All child markers are contained in a single cluster from this._maxZoom to this cluster.\n\t\t\t\tcluster.spiderfy();\n\t\t\t} else if (this.options.zoomToBoundsOnClick) {\n\t\t\t\tcluster.zoomToBounds();\n\t\t\t}\n\n\t\t\tif (this.options.spiderfyOnEveryZoom) {\n\t\t\t\tcluster.spiderfy();\n\t\t\t}\n\n\t\t\t// Focus the map again for keyboard users.\n\t\t\tif (e.originalEvent && e.originalEvent.keyCode === 13) {\n\t\t\t\tthis._map._container.focus();\n\t\t\t}\n\t\t},\n\n\t\t_showCoverage: function (e) {\n\t\t\tvar map = this._map;\n\t\t\tif (this._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._shownPolygon) {\n\t\t\t\tmap.removeLayer(this._shownPolygon);\n\t\t\t}\n\t\t\tif (e.layer.getChildCount() > 2 && e.layer !== this._spiderfied) {\n\t\t\t\tthis._shownPolygon = new L.Polygon(e.layer.getConvexHull(), this.options.polygonOptions);\n\t\t\t\tmap.addLayer(this._shownPolygon);\n\t\t\t}\n\t\t},\n\n\t\t_hideCoverage: function () {\n\t\t\tif (this._shownPolygon) {\n\t\t\t\tthis._map.removeLayer(this._shownPolygon);\n\t\t\t\tthis._shownPolygon = null;\n\t\t\t}\n\t\t},\n\n\t\t_unbindEvents: function () {\n\t\t\tvar spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,\n\t\t\t\tshowCoverageOnHover = this.options.showCoverageOnHover,\n\t\t\t\tzoomToBoundsOnClick = this.options.zoomToBoundsOnClick,\n\t\t\t\tspiderfyOnEveryZoom = this.options.spiderfyOnEveryZoom,\n\t\t\t\tmap = this._map;\n\n\t\t\tif (spiderfyOnMaxZoom || zoomToBoundsOnClick || spiderfyOnEveryZoom) {\n\t\t\t\tthis.off('clusterclick clusterkeypress', this._zoomOrSpiderfy, this);\n\t\t\t}\n\t\t\tif (showCoverageOnHover) {\n\t\t\t\tthis.off('clustermouseover', this._showCoverage, this);\n\t\t\t\tthis.off('clustermouseout', this._hideCoverage, this);\n\t\t\t\tmap.off('zoomend', this._hideCoverage, this);\n\t\t\t}\n\t\t},\n\n\t\t_zoomEnd: function () {\n\t\t\tif (!this._map) { //May have been removed from the map by a zoomEnd handler\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._mergeSplitClusters();\n\n\t\t\tthis._zoom = Math.round(this._map._zoom);\n\t\t\tthis._currentShownBounds = this._getExpandedVisibleBounds();\n\t\t},\n\n\t\t_moveEnd: function () {\n\t\t\tif (this._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newBounds = this._getExpandedVisibleBounds();\n\n\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), this._zoom, newBounds);\n\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, Math.round(this._map._zoom), newBounds);\n\n\t\t\tthis._currentShownBounds = newBounds;\n\t\t\treturn;\n\t\t},\n\n\t\t_generateInitialClusters: function () {\n\t\t\tvar maxZoom = Math.ceil(this._map.getMaxZoom()),\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom()),\n\t\t\t\tradius = this.options.maxClusterRadius,\n\t\t\t\tradiusFn = radius;\n\n\t\t\t//If we just set maxClusterRadius to a single number, we need to create\n\t\t\t//a simple function to return that number. Otherwise, we just have to\n\t\t\t//use the function we've passed in.\n\t\t\tif (typeof radius !== \"function\") {\n\t\t\t\tradiusFn = function () { return radius; };\n\t\t\t}\n\n\t\t\tif (this.options.disableClusteringAtZoom !== null) {\n\t\t\t\tmaxZoom = this.options.disableClusteringAtZoom - 1;\n\t\t\t}\n\t\t\tthis._maxZoom = maxZoom;\n\t\t\tthis._gridClusters = {};\n\t\t\tthis._gridUnclustered = {};\n\n\t\t\t//Set up DistanceGrids for each zoom\n\t\t\tfor (var zoom = maxZoom; zoom >= minZoom; zoom--) {\n\t\t\t\tthis._gridClusters[zoom] = new L.DistanceGrid(radiusFn(zoom));\n\t\t\t\tthis._gridUnclustered[zoom] = new L.DistanceGrid(radiusFn(zoom));\n\t\t\t}\n\n\t\t\t// Instantiate the appropriate L.MarkerCluster class (animated or not).\n\t\t\tthis._topClusterLevel = new this._markerCluster(this, minZoom - 1);\n\t\t},\n\n\t\t//Zoom: Zoom to start adding at (Pass this._maxZoom to start at the bottom)\n\t\t_addLayer: function (layer, zoom) {\n\t\t\tvar gridClusters = this._gridClusters,\n\t\t\t    gridUnclustered = this._gridUnclustered,\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom()),\n\t\t\t    markerPoint, z;\n\n\t\t\tif (this.options.singleMarkerMode) {\n\t\t\t\tthis._overrideMarkerIcon(layer);\n\t\t\t}\n\n\t\t\tlayer.on(this._childMarkerEventHandlers, this);\n\n\t\t\t//Find the lowest zoom level to slot this one in\n\t\t\tfor (; zoom >= minZoom; zoom--) {\n\t\t\t\tmarkerPoint = this._map.project(layer.getLatLng(), zoom); // calculate pixel position\n\n\t\t\t\t//Try find a cluster close by\n\t\t\t\tvar closest = gridClusters[zoom].getNearObject(markerPoint);\n\t\t\t\tif (closest) {\n\t\t\t\t\tclosest._addChild(layer);\n\t\t\t\t\tlayer.__parent = closest;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//Try find a marker close by to form a new cluster with\n\t\t\t\tclosest = gridUnclustered[zoom].getNearObject(markerPoint);\n\t\t\t\tif (closest) {\n\t\t\t\t\tvar parent = closest.__parent;\n\t\t\t\t\tif (parent) {\n\t\t\t\t\t\tthis._removeLayer(closest, false);\n\t\t\t\t\t}\n\n\t\t\t\t\t//Create new cluster with these 2 in it\n\n\t\t\t\t\tvar newCluster = new this._markerCluster(this, zoom, closest, layer);\n\t\t\t\t\tgridClusters[zoom].addObject(newCluster, this._map.project(newCluster._cLatLng, zoom));\n\t\t\t\t\tclosest.__parent = newCluster;\n\t\t\t\t\tlayer.__parent = newCluster;\n\n\t\t\t\t\t//First create any new intermediate parent clusters that don't exist\n\t\t\t\t\tvar lastParent = newCluster;\n\t\t\t\t\tfor (z = zoom - 1; z > parent._zoom; z--) {\n\t\t\t\t\t\tlastParent = new this._markerCluster(this, z, lastParent);\n\t\t\t\t\t\tgridClusters[z].addObject(lastParent, this._map.project(closest.getLatLng(), z));\n\t\t\t\t\t}\n\t\t\t\t\tparent._addChild(lastParent);\n\n\t\t\t\t\t//Remove closest from this zoom level and any above that it is in, replace with newCluster\n\t\t\t\t\tthis._removeFromGridUnclustered(closest, zoom);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//Didn't manage to cluster in at this zoom, record us as a marker here and continue upwards\n\t\t\t\tgridUnclustered[zoom].addObject(layer, markerPoint);\n\t\t\t}\n\n\t\t\t//Didn't get in anything, add us to the top\n\t\t\tthis._topClusterLevel._addChild(layer);\n\t\t\tlayer.__parent = this._topClusterLevel;\n\t\t\treturn;\n\t\t},\n\n\t\t/**\n\t\t * Refreshes the icon of all \"dirty\" visible clusters.\n\t\t * Non-visible \"dirty\" clusters will be updated when they are added to the map.\n\t\t * @private\n\t\t */\n\t\t_refreshClustersIcons: function () {\n\t\t\tthis._featureGroup.eachLayer(function (c) {\n\t\t\t\tif (c instanceof L.MarkerCluster && c._iconNeedsUpdate) {\n\t\t\t\t\tc._updateIcon();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t//Enqueue code to fire after the marker expand/contract has happened\n\t\t_enqueue: function (fn) {\n\t\t\tthis._queue.push(fn);\n\t\t\tif (!this._queueTimeout) {\n\t\t\t\tthis._queueTimeout = setTimeout(L.bind(this._processQueue, this), 300);\n\t\t\t}\n\t\t},\n\t\t_processQueue: function () {\n\t\t\tfor (var i = 0; i < this._queue.length; i++) {\n\t\t\t\tthis._queue[i].call(this);\n\t\t\t}\n\t\t\tthis._queue.length = 0;\n\t\t\tclearTimeout(this._queueTimeout);\n\t\t\tthis._queueTimeout = null;\n\t\t},\n\n\t\t//Merge and split any existing clusters that are too big or small\n\t\t_mergeSplitClusters: function () {\n\t\t\tvar mapZoom = Math.round(this._map._zoom);\n\n\t\t\t//In case we are starting to split before the animation finished\n\t\t\tthis._processQueue();\n\n\t\t\tif (this._zoom < mapZoom && this._currentShownBounds.intersects(this._getExpandedVisibleBounds())) { //Zoom in, split\n\t\t\t\tthis._animationStart();\n\t\t\t\t//Remove clusters now off screen\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), this._zoom, this._getExpandedVisibleBounds());\n\n\t\t\t\tthis._animationZoomIn(this._zoom, mapZoom);\n\n\t\t\t} else if (this._zoom > mapZoom) { //Zoom out, merge\n\t\t\t\tthis._animationStart();\n\n\t\t\t\tthis._animationZoomOut(this._zoom, mapZoom);\n\t\t\t} else {\n\t\t\t\tthis._moveEnd();\n\t\t\t}\n\t\t},\n\n\t\t//Gets the maps visible bounds expanded in each direction by the size of the screen (so the user cannot see an area we do not cover in one pan)\n\t\t_getExpandedVisibleBounds: function () {\n\t\t\tif (!this.options.removeOutsideVisibleBounds) {\n\t\t\t\treturn this._mapBoundsInfinite;\n\t\t\t} else if (L.Browser.mobile) {\n\t\t\t\treturn this._checkBoundsMaxLat(this._map.getBounds());\n\t\t\t}\n\n\t\t\treturn this._checkBoundsMaxLat(this._map.getBounds().pad(1)); // Padding expands the bounds by its own dimensions but scaled with the given factor.\n\t\t},\n\n\t\t/**\n\t\t * Expands the latitude to Infinity (or -Infinity) if the input bounds reach the map projection maximum defined latitude\n\t\t * (in the case of Web/Spherical Mercator, it is 85.0511287798 / see https://en.wikipedia.org/wiki/Web_Mercator#Formulas).\n\t\t * Otherwise, the removeOutsideVisibleBounds option will remove markers beyond that limit, whereas the same markers without\n\t\t * this option (or outside MCG) will have their position floored (ceiled) by the projection and rendered at that limit,\n\t\t * making the user think that MCG \"eats\" them and never displays them again.\n\t\t * @param bounds L.LatLngBounds\n\t\t * @returns {L.LatLngBounds}\n\t\t * @private\n\t\t */\n\t\t_checkBoundsMaxLat: function (bounds) {\n\t\t\tvar maxLat = this._maxLat;\n\n\t\t\tif (maxLat !== undefined) {\n\t\t\t\tif (bounds.getNorth() >= maxLat) {\n\t\t\t\t\tbounds._northEast.lat = Infinity;\n\t\t\t\t}\n\t\t\t\tif (bounds.getSouth() <= -maxLat) {\n\t\t\t\t\tbounds._southWest.lat = -Infinity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn bounds;\n\t\t},\n\n\t\t//Shared animation code\n\t\t_animationAddLayerNonAnimated: function (layer, newCluster) {\n\t\t\tif (newCluster === layer) {\n\t\t\t\tthis._featureGroup.addLayer(layer);\n\t\t\t} else if (newCluster._childCount === 2) {\n\t\t\t\tnewCluster._addToMap();\n\n\t\t\t\tvar markers = newCluster.getAllChildMarkers();\n\t\t\t\tthis._featureGroup.removeLayer(markers[0]);\n\t\t\t\tthis._featureGroup.removeLayer(markers[1]);\n\t\t\t} else {\n\t\t\t\tnewCluster._updateIcon();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Extracts individual (i.e. non-group) layers from a Layer Group.\n\t\t * @param group to extract layers from.\n\t\t * @param output {Array} in which to store the extracted layers.\n\t\t * @returns {*|Array}\n\t\t * @private\n\t\t */\n\t\t_extractNonGroupLayers: function (group, output) {\n\t\t\tvar layers = group.getLayers(),\n\t\t\t    i = 0,\n\t\t\t    layer;\n\n\t\t\toutput = output || [];\n\n\t\t\tfor (; i < layers.length; i++) {\n\t\t\t\tlayer = layers[i];\n\n\t\t\t\tif (layer instanceof L.LayerGroup) {\n\t\t\t\t\tthis._extractNonGroupLayers(layer, output);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\toutput.push(layer);\n\t\t\t}\n\n\t\t\treturn output;\n\t\t},\n\n\t\t/**\n\t\t * Implements the singleMarkerMode option.\n\t\t * @param layer Marker to re-style using the Clusters iconCreateFunction.\n\t\t * @returns {L.Icon} The newly created icon.\n\t\t * @private\n\t\t */\n\t\t_overrideMarkerIcon: function (layer) {\n\t\t\tvar icon = layer.options.icon = this.options.iconCreateFunction({\n\t\t\t\tgetChildCount: function () {\n\t\t\t\t\treturn 1;\n\t\t\t\t},\n\t\t\t\tgetAllChildMarkers: function () {\n\t\t\t\t\treturn [layer];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn icon;\n\t\t}\n\t});\n\n\t// Constant bounds used in case option \"removeOutsideVisibleBounds\" is set to false.\n\tL.MarkerClusterGroup.include({\n\t\t_mapBoundsInfinite: new L.LatLngBounds(new L.LatLng(-Infinity, -Infinity), new L.LatLng(Infinity, Infinity))\n\t});\n\n\tL.MarkerClusterGroup.include({\n\t\t_noAnimation: {\n\t\t\t//Non Animated versions of everything\n\t\t\t_animationStart: function () {\n\t\t\t\t//Do nothing...\n\t\t\t},\n\t\t\t_animationZoomIn: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), previousZoomLevel);\n\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\n\t\t\t\t//We didn't actually animate, but we use this event to mean \"clustering animations have finished\"\n\t\t\t\tthis.fire('animationend');\n\t\t\t},\n\t\t\t_animationZoomOut: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), previousZoomLevel);\n\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\n\t\t\t\t//We didn't actually animate, but we use this event to mean \"clustering animations have finished\"\n\t\t\t\tthis.fire('animationend');\n\t\t\t},\n\t\t\t_animationAddLayer: function (layer, newCluster) {\n\t\t\t\tthis._animationAddLayerNonAnimated(layer, newCluster);\n\t\t\t}\n\t\t},\n\n\t\t_withAnimation: {\n\t\t\t//Animated versions here\n\t\t\t_animationStart: function () {\n\t\t\t\tthis._map._mapPane.className += ' leaflet-cluster-anim';\n\t\t\t\tthis._inZoomAnimation++;\n\t\t\t},\n\n\t\t\t_animationZoomIn: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tvar bounds = this._getExpandedVisibleBounds(),\n\t\t\t\t    fg = this._featureGroup,\n\t\t\t\t\tminZoom = Math.floor(this._map.getMinZoom()),\n\t\t\t\t    i;\n\n\t\t\t\tthis._ignoreMove = true;\n\n\t\t\t\t//Add all children of current clusters to map and remove those clusters from map\n\t\t\t\tthis._topClusterLevel._recursively(bounds, previousZoomLevel, minZoom, function (c) {\n\t\t\t\t\tvar startPos = c._latlng,\n\t\t\t\t\t    markers  = c._markers,\n\t\t\t\t\t    m;\n\n\t\t\t\t\tif (!bounds.contains(startPos)) {\n\t\t\t\t\t\tstartPos = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c._isSingleParent() && previousZoomLevel + 1 === newZoomLevel) { //Immediately add the new child and remove us\n\t\t\t\t\t\tfg.removeLayer(c);\n\t\t\t\t\t\tc._recursivelyAddChildrenToMap(null, newZoomLevel, bounds);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Fade out old cluster\n\t\t\t\t\t\tc.clusterHide();\n\t\t\t\t\t\tc._recursivelyAddChildrenToMap(startPos, newZoomLevel, bounds);\n\t\t\t\t\t}\n\n\t\t\t\t\t//Remove all markers that aren't visible any more\n\t\t\t\t\t//TODO: Do we actually need to do this on the higher levels too?\n\t\t\t\t\tfor (i = markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = markers[i];\n\t\t\t\t\t\tif (!bounds.contains(m._latlng)) {\n\t\t\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tthis._forceLayout();\n\n\t\t\t\t//Update opacities\n\t\t\t\tthis._topClusterLevel._recursivelyBecomeVisible(bounds, newZoomLevel);\n\t\t\t\t//TODO Maybe? Update markers in _recursivelyBecomeVisible\n\t\t\t\tfg.eachLayer(function (n) {\n\t\t\t\t\tif (!(n instanceof L.MarkerCluster) && n._icon) {\n\t\t\t\t\t\tn.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//update the positions of the just added clusters/markers\n\t\t\t\tthis._topClusterLevel._recursively(bounds, previousZoomLevel, newZoomLevel, function (c) {\n\t\t\t\t\tc._recursivelyRestoreChildPositions(newZoomLevel);\n\t\t\t\t});\n\n\t\t\t\tthis._ignoreMove = false;\n\n\t\t\t\t//Remove the old clusters and close the zoom animation\n\t\t\t\tthis._enqueue(function () {\n\t\t\t\t\t//update the positions of the just added clusters/markers\n\t\t\t\t\tthis._topClusterLevel._recursively(bounds, previousZoomLevel, minZoom, function (c) {\n\t\t\t\t\t\tfg.removeLayer(c);\n\t\t\t\t\t\tc.clusterShow();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._animationEnd();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t_animationZoomOut: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tthis._animationZoomOutSingle(this._topClusterLevel, previousZoomLevel - 1, newZoomLevel);\n\n\t\t\t\t//Need to add markers for those that weren't on the map before but are now\n\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\t\t\t\t//Remove markers that were on the map before but won't be now\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), previousZoomLevel, this._getExpandedVisibleBounds());\n\t\t\t},\n\n\t\t\t_animationAddLayer: function (layer, newCluster) {\n\t\t\t\tvar me = this,\n\t\t\t\t    fg = this._featureGroup;\n\n\t\t\t\tfg.addLayer(layer);\n\t\t\t\tif (newCluster !== layer) {\n\t\t\t\t\tif (newCluster._childCount > 2) { //Was already a cluster\n\n\t\t\t\t\t\tnewCluster._updateIcon();\n\t\t\t\t\t\tthis._forceLayout();\n\t\t\t\t\t\tthis._animationStart();\n\n\t\t\t\t\t\tlayer._setPos(this._map.latLngToLayerPoint(newCluster.getLatLng()));\n\t\t\t\t\t\tlayer.clusterHide();\n\n\t\t\t\t\t\tthis._enqueue(function () {\n\t\t\t\t\t\t\tfg.removeLayer(layer);\n\t\t\t\t\t\t\tlayer.clusterShow();\n\n\t\t\t\t\t\t\tme._animationEnd();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else { //Just became a cluster\n\t\t\t\t\t\tthis._forceLayout();\n\n\t\t\t\t\t\tme._animationStart();\n\t\t\t\t\t\tme._animationZoomOutSingle(newCluster, this._map.getMaxZoom(), this._zoom);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Private methods for animated versions.\n\t\t_animationZoomOutSingle: function (cluster, previousZoomLevel, newZoomLevel) {\n\t\t\tvar bounds = this._getExpandedVisibleBounds(),\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom());\n\n\t\t\t//Animate all of the markers in the clusters to move to their cluster center point\n\t\t\tcluster._recursivelyAnimateChildrenInAndAddSelfToMap(bounds, minZoom, previousZoomLevel + 1, newZoomLevel);\n\n\t\t\tvar me = this;\n\n\t\t\t//Update the opacity (If we immediately set it they won't animate)\n\t\t\tthis._forceLayout();\n\t\t\tcluster._recursivelyBecomeVisible(bounds, newZoomLevel);\n\n\t\t\t//TODO: Maybe use the transition timing stuff to make this more reliable\n\t\t\t//When the animations are done, tidy up\n\t\t\tthis._enqueue(function () {\n\n\t\t\t\t//This cluster stopped being a cluster before the timeout fired\n\t\t\t\tif (cluster._childCount === 1) {\n\t\t\t\t\tvar m = cluster._markers[0];\n\t\t\t\t\t//If we were in a cluster animation at the time then the opacity and position of our child could be wrong now, so fix it\n\t\t\t\t\tthis._ignoreMove = true;\n\t\t\t\t\tm.setLatLng(m.getLatLng());\n\t\t\t\t\tthis._ignoreMove = false;\n\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcluster._recursively(bounds, newZoomLevel, minZoom, function (c) {\n\t\t\t\t\t\tc._recursivelyRemoveChildrenFromMap(bounds, minZoom, previousZoomLevel + 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tme._animationEnd();\n\t\t\t});\n\t\t},\n\n\t\t_animationEnd: function () {\n\t\t\tif (this._map) {\n\t\t\t\tthis._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\n\t\t\t}\n\t\t\tthis._inZoomAnimation--;\n\t\t\tthis.fire('animationend');\n\t\t},\n\n\t\t//Force a browser layout of stuff in the map\n\t\t// Should apply the current opacity and location to all elements so we can update them again for an animation\n\t\t_forceLayout: function () {\n\t\t\t//In my testing this works, infact offsetWidth of any element seems to work.\n\t\t\t//Could loop all this._layers and do this for each _icon if it stops working\n\n\t\t\tL.Util.falseFn(document.body.offsetWidth);\n\t\t}\n\t});\n\n\tL.markerClusterGroup = function (options) {\n\t\treturn new L.MarkerClusterGroup(options);\n\t};\n\n\tvar MarkerCluster = L.MarkerCluster = L.Marker.extend({\n\t\toptions: L.Icon.prototype.options,\n\n\t\tinitialize: function (group, zoom, a, b) {\n\n\t\t\tL.Marker.prototype.initialize.call(this, a ? (a._cLatLng || a.getLatLng()) : new L.LatLng(0, 0),\n\t            { icon: this, pane: group.options.clusterPane });\n\n\t\t\tthis._group = group;\n\t\t\tthis._zoom = zoom;\n\n\t\t\tthis._markers = [];\n\t\t\tthis._childClusters = [];\n\t\t\tthis._childCount = 0;\n\t\t\tthis._iconNeedsUpdate = true;\n\t\t\tthis._boundsNeedUpdate = true;\n\n\t\t\tthis._bounds = new L.LatLngBounds();\n\n\t\t\tif (a) {\n\t\t\t\tthis._addChild(a);\n\t\t\t}\n\t\t\tif (b) {\n\t\t\t\tthis._addChild(b);\n\t\t\t}\n\t\t},\n\n\t\t//Recursively retrieve all child markers of this cluster\n\t\tgetAllChildMarkers: function (storageArray, ignoreDraggedMarker) {\n\t\t\tstorageArray = storageArray || [];\n\n\t\t\tfor (var i = this._childClusters.length - 1; i >= 0; i--) {\n\t\t\t\tthis._childClusters[i].getAllChildMarkers(storageArray, ignoreDraggedMarker);\n\t\t\t}\n\n\t\t\tfor (var j = this._markers.length - 1; j >= 0; j--) {\n\t\t\t\tif (ignoreDraggedMarker && this._markers[j].__dragStart) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstorageArray.push(this._markers[j]);\n\t\t\t}\n\n\t\t\treturn storageArray;\n\t\t},\n\n\t\t//Returns the count of how many child markers we have\n\t\tgetChildCount: function () {\n\t\t\treturn this._childCount;\n\t\t},\n\n\t\t//Zoom to the minimum of showing all of the child markers, or the extents of this cluster\n\t\tzoomToBounds: function (fitBoundsOptions) {\n\t\t\tvar childClusters = this._childClusters.slice(),\n\t\t\t\tmap = this._group._map,\n\t\t\t\tboundsZoom = map.getBoundsZoom(this._bounds),\n\t\t\t\tzoom = this._zoom + 1,\n\t\t\t\tmapZoom = map.getZoom(),\n\t\t\t\ti;\n\n\t\t\t//calculate how far we need to zoom down to see all of the markers\n\t\t\twhile (childClusters.length > 0 && boundsZoom > zoom) {\n\t\t\t\tzoom++;\n\t\t\t\tvar newClusters = [];\n\t\t\t\tfor (i = 0; i < childClusters.length; i++) {\n\t\t\t\t\tnewClusters = newClusters.concat(childClusters[i]._childClusters);\n\t\t\t\t}\n\t\t\t\tchildClusters = newClusters;\n\t\t\t}\n\n\t\t\tif (boundsZoom > zoom) {\n\t\t\t\tthis._group._map.setView(this._latlng, zoom);\n\t\t\t} else if (boundsZoom <= mapZoom) { //If fitBounds wouldn't zoom us down, zoom us down instead\n\t\t\t\tthis._group._map.setView(this._latlng, mapZoom + 1);\n\t\t\t} else {\n\t\t\t\tthis._group._map.fitBounds(this._bounds, fitBoundsOptions);\n\t\t\t}\n\t\t},\n\n\t\tgetBounds: function () {\n\t\t\tvar bounds = new L.LatLngBounds();\n\t\t\tbounds.extend(this._bounds);\n\t\t\treturn bounds;\n\t\t},\n\n\t\t_updateIcon: function () {\n\t\t\tthis._iconNeedsUpdate = true;\n\t\t\tif (this._icon) {\n\t\t\t\tthis.setIcon(this);\n\t\t\t}\n\t\t},\n\n\t\t//Cludge for Icon, we pretend to be an icon for performance\n\t\tcreateIcon: function () {\n\t\t\tif (this._iconNeedsUpdate) {\n\t\t\t\tthis._iconObj = this._group.options.iconCreateFunction(this);\n\t\t\t\tthis._iconNeedsUpdate = false;\n\t\t\t}\n\t\t\treturn this._iconObj.createIcon();\n\t\t},\n\t\tcreateShadow: function () {\n\t\t\treturn this._iconObj.createShadow();\n\t\t},\n\n\n\t\t_addChild: function (new1, isNotificationFromChild) {\n\n\t\t\tthis._iconNeedsUpdate = true;\n\n\t\t\tthis._boundsNeedUpdate = true;\n\t\t\tthis._setClusterCenter(new1);\n\n\t\t\tif (new1 instanceof L.MarkerCluster) {\n\t\t\t\tif (!isNotificationFromChild) {\n\t\t\t\t\tthis._childClusters.push(new1);\n\t\t\t\t\tnew1.__parent = this;\n\t\t\t\t}\n\t\t\t\tthis._childCount += new1._childCount;\n\t\t\t} else {\n\t\t\t\tif (!isNotificationFromChild) {\n\t\t\t\t\tthis._markers.push(new1);\n\t\t\t\t}\n\t\t\t\tthis._childCount++;\n\t\t\t}\n\n\t\t\tif (this.__parent) {\n\t\t\t\tthis.__parent._addChild(new1, true);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Makes sure the cluster center is set. If not, uses the child center if it is a cluster, or the marker position.\n\t\t * @param child L.MarkerCluster|L.Marker that will be used as cluster center if not defined yet.\n\t\t * @private\n\t\t */\n\t\t_setClusterCenter: function (child) {\n\t\t\tif (!this._cLatLng) {\n\t\t\t\t// when clustering, take position of the first point as the cluster center\n\t\t\t\tthis._cLatLng = child._cLatLng || child._latlng;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Assigns impossible bounding values so that the next extend entirely determines the new bounds.\n\t\t * This method avoids having to trash the previous L.LatLngBounds object and to create a new one, which is much slower for this class.\n\t\t * As long as the bounds are not extended, most other methods would probably fail, as they would with bounds initialized but not extended.\n\t\t * @private\n\t\t */\n\t\t_resetBounds: function () {\n\t\t\tvar bounds = this._bounds;\n\n\t\t\tif (bounds._southWest) {\n\t\t\t\tbounds._southWest.lat = Infinity;\n\t\t\t\tbounds._southWest.lng = Infinity;\n\t\t\t}\n\t\t\tif (bounds._northEast) {\n\t\t\t\tbounds._northEast.lat = -Infinity;\n\t\t\t\tbounds._northEast.lng = -Infinity;\n\t\t\t}\n\t\t},\n\n\t\t_recalculateBounds: function () {\n\t\t\tvar markers = this._markers,\n\t\t\t    childClusters = this._childClusters,\n\t\t\t    latSum = 0,\n\t\t\t    lngSum = 0,\n\t\t\t    totalCount = this._childCount,\n\t\t\t    i, child, childLatLng, childCount;\n\n\t\t\t// Case where all markers are removed from the map and we are left with just an empty _topClusterLevel.\n\t\t\tif (totalCount === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Reset rather than creating a new object, for performance.\n\t\t\tthis._resetBounds();\n\n\t\t\t// Child markers.\n\t\t\tfor (i = 0; i < markers.length; i++) {\n\t\t\t\tchildLatLng = markers[i]._latlng;\n\n\t\t\t\tthis._bounds.extend(childLatLng);\n\n\t\t\t\tlatSum += childLatLng.lat;\n\t\t\t\tlngSum += childLatLng.lng;\n\t\t\t}\n\n\t\t\t// Child clusters.\n\t\t\tfor (i = 0; i < childClusters.length; i++) {\n\t\t\t\tchild = childClusters[i];\n\n\t\t\t\t// Re-compute child bounds and weighted position first if necessary.\n\t\t\t\tif (child._boundsNeedUpdate) {\n\t\t\t\t\tchild._recalculateBounds();\n\t\t\t\t}\n\n\t\t\t\tthis._bounds.extend(child._bounds);\n\n\t\t\t\tchildLatLng = child._wLatLng;\n\t\t\t\tchildCount = child._childCount;\n\n\t\t\t\tlatSum += childLatLng.lat * childCount;\n\t\t\t\tlngSum += childLatLng.lng * childCount;\n\t\t\t}\n\n\t\t\tthis._latlng = this._wLatLng = new L.LatLng(latSum / totalCount, lngSum / totalCount);\n\n\t\t\t// Reset dirty flag.\n\t\t\tthis._boundsNeedUpdate = false;\n\t\t},\n\n\t\t//Set our markers position as given and add it to the map\n\t\t_addToMap: function (startPos) {\n\t\t\tif (startPos) {\n\t\t\t\tthis._backupLatlng = this._latlng;\n\t\t\t\tthis.setLatLng(startPos);\n\t\t\t}\n\t\t\tthis._group._featureGroup.addLayer(this);\n\t\t},\n\n\t\t_recursivelyAnimateChildrenIn: function (bounds, center, maxZoom) {\n\t\t\tthis._recursively(bounds, this._group._map.getMinZoom(), maxZoom - 1,\n\t\t\t\tfunction (c) {\n\t\t\t\t\tvar markers = c._markers,\n\t\t\t\t\t\ti, m;\n\t\t\t\t\tfor (i = markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = markers[i];\n\n\t\t\t\t\t\t//Only do it if the icon is still on the map\n\t\t\t\t\t\tif (m._icon) {\n\t\t\t\t\t\t\tm._setPos(center);\n\t\t\t\t\t\t\tm.clusterHide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction (c) {\n\t\t\t\t\tvar childClusters = c._childClusters,\n\t\t\t\t\t\tj, cm;\n\t\t\t\t\tfor (j = childClusters.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tcm = childClusters[j];\n\t\t\t\t\t\tif (cm._icon) {\n\t\t\t\t\t\t\tcm._setPos(center);\n\t\t\t\t\t\t\tcm.clusterHide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t_recursivelyAnimateChildrenInAndAddSelfToMap: function (bounds, mapMinZoom, previousZoomLevel, newZoomLevel) {\n\t\t\tthis._recursively(bounds, newZoomLevel, mapMinZoom,\n\t\t\t\tfunction (c) {\n\t\t\t\t\tc._recursivelyAnimateChildrenIn(bounds, c._group._map.latLngToLayerPoint(c.getLatLng()).round(), previousZoomLevel);\n\n\t\t\t\t\t//TODO: depthToAnimateIn affects _isSingleParent, if there is a multizoom we may/may not be.\n\t\t\t\t\t//As a hack we only do a animation free zoom on a single level zoom, if someone does multiple levels then we always animate\n\t\t\t\t\tif (c._isSingleParent() && previousZoomLevel - 1 === newZoomLevel) {\n\t\t\t\t\t\tc.clusterShow();\n\t\t\t\t\t\tc._recursivelyRemoveChildrenFromMap(bounds, mapMinZoom, previousZoomLevel); //Immediately remove our children as we are replacing them. TODO previousBounds not bounds\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.clusterHide();\n\t\t\t\t\t}\n\n\t\t\t\t\tc._addToMap();\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t_recursivelyBecomeVisible: function (bounds, zoomLevel) {\n\t\t\tthis._recursively(bounds, this._group._map.getMinZoom(), zoomLevel, null, function (c) {\n\t\t\t\tc.clusterShow();\n\t\t\t});\n\t\t},\n\n\t\t_recursivelyAddChildrenToMap: function (startPos, zoomLevel, bounds) {\n\t\t\tthis._recursively(bounds, this._group._map.getMinZoom() - 1, zoomLevel,\n\t\t\t\tfunction (c) {\n\t\t\t\t\tif (zoomLevel === c._zoom) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//Add our child markers at startPos (so they can be animated out)\n\t\t\t\t\tfor (var i = c._markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar nm = c._markers[i];\n\n\t\t\t\t\t\tif (!bounds.contains(nm._latlng)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (startPos) {\n\t\t\t\t\t\t\tnm._backupLatlng = nm.getLatLng();\n\n\t\t\t\t\t\t\tnm.setLatLng(startPos);\n\t\t\t\t\t\t\tif (nm.clusterHide) {\n\t\t\t\t\t\t\t\tnm.clusterHide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tc._group._featureGroup.addLayer(nm);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction (c) {\n\t\t\t\t\tc._addToMap(startPos);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t_recursivelyRestoreChildPositions: function (zoomLevel) {\n\t\t\t//Fix positions of child markers\n\t\t\tfor (var i = this._markers.length - 1; i >= 0; i--) {\n\t\t\t\tvar nm = this._markers[i];\n\t\t\t\tif (nm._backupLatlng) {\n\t\t\t\t\tnm.setLatLng(nm._backupLatlng);\n\t\t\t\t\tdelete nm._backupLatlng;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (zoomLevel - 1 === this._zoom) {\n\t\t\t\t//Reposition child clusters\n\t\t\t\tfor (var j = this._childClusters.length - 1; j >= 0; j--) {\n\t\t\t\t\tthis._childClusters[j]._restorePosition();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var k = this._childClusters.length - 1; k >= 0; k--) {\n\t\t\t\t\tthis._childClusters[k]._recursivelyRestoreChildPositions(zoomLevel);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_restorePosition: function () {\n\t\t\tif (this._backupLatlng) {\n\t\t\t\tthis.setLatLng(this._backupLatlng);\n\t\t\t\tdelete this._backupLatlng;\n\t\t\t}\n\t\t},\n\n\t\t//exceptBounds: If set, don't remove any markers/clusters in it\n\t\t_recursivelyRemoveChildrenFromMap: function (previousBounds, mapMinZoom, zoomLevel, exceptBounds) {\n\t\t\tvar m, i;\n\t\t\tthis._recursively(previousBounds, mapMinZoom - 1, zoomLevel - 1,\n\t\t\t\tfunction (c) {\n\t\t\t\t\t//Remove markers at every level\n\t\t\t\t\tfor (i = c._markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = c._markers[i];\n\t\t\t\t\t\tif (!exceptBounds || !exceptBounds.contains(m._latlng)) {\n\t\t\t\t\t\t\tc._group._featureGroup.removeLayer(m);\n\t\t\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction (c) {\n\t\t\t\t\t//Remove child clusters at just the bottom level\n\t\t\t\t\tfor (i = c._childClusters.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = c._childClusters[i];\n\t\t\t\t\t\tif (!exceptBounds || !exceptBounds.contains(m._latlng)) {\n\t\t\t\t\t\t\tc._group._featureGroup.removeLayer(m);\n\t\t\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t//Run the given functions recursively to this and child clusters\n\t\t// boundsToApplyTo: a L.LatLngBounds representing the bounds of what clusters to recurse in to\n\t\t// zoomLevelToStart: zoom level to start running functions (inclusive)\n\t\t// zoomLevelToStop: zoom level to stop running functions (inclusive)\n\t\t// runAtEveryLevel: function that takes an L.MarkerCluster as an argument that should be applied on every level\n\t\t// runAtBottomLevel: function that takes an L.MarkerCluster as an argument that should be applied at only the bottom level\n\t\t_recursively: function (boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel) {\n\t\t\tvar childClusters = this._childClusters,\n\t\t\t    zoom = this._zoom,\n\t\t\t    i, c;\n\n\t\t\tif (zoomLevelToStart <= zoom) {\n\t\t\t\tif (runAtEveryLevel) {\n\t\t\t\t\trunAtEveryLevel(this);\n\t\t\t\t}\n\t\t\t\tif (runAtBottomLevel && zoom === zoomLevelToStop) {\n\t\t\t\t\trunAtBottomLevel(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (zoom < zoomLevelToStart || zoom < zoomLevelToStop) {\n\t\t\t\tfor (i = childClusters.length - 1; i >= 0; i--) {\n\t\t\t\t\tc = childClusters[i];\n\t\t\t\t\tif (c._boundsNeedUpdate) {\n\t\t\t\t\t\tc._recalculateBounds();\n\t\t\t\t\t}\n\t\t\t\t\tif (boundsToApplyTo.intersects(c._bounds)) {\n\t\t\t\t\t\tc._recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//Returns true if we are the parent of only one cluster and that cluster is the same as us\n\t\t_isSingleParent: function () {\n\t\t\t//Don't need to check this._markers as the rest won't work if there are any\n\t\t\treturn this._childClusters.length > 0 && this._childClusters[0]._childCount === this._childCount;\n\t\t}\n\t});\n\n\t/*\n\t* Extends L.Marker to include two extra methods: clusterHide and clusterShow.\n\t* \n\t* They work as setOpacity(0) and setOpacity(1) respectively, but\n\t* don't overwrite the options.opacity\n\t* \n\t*/\n\n\tL.Marker.include({\n\t\tclusterHide: function () {\n\t\t\tvar backup = this.options.opacity;\n\t\t\tthis.setOpacity(0);\n\t\t\tthis.options.opacity = backup;\n\t\t\treturn this;\n\t\t},\n\t\t\n\t\tclusterShow: function () {\n\t\t\treturn this.setOpacity(this.options.opacity);\n\t\t}\n\t});\n\n\tL.DistanceGrid = function (cellSize) {\n\t\tthis._cellSize = cellSize;\n\t\tthis._sqCellSize = cellSize * cellSize;\n\t\tthis._grid = {};\n\t\tthis._objectPoint = { };\n\t};\n\n\tL.DistanceGrid.prototype = {\n\n\t\taddObject: function (obj, point) {\n\t\t\tvar x = this._getCoord(point.x),\n\t\t\t    y = this._getCoord(point.y),\n\t\t\t    grid = this._grid,\n\t\t\t    row = grid[y] = grid[y] || {},\n\t\t\t    cell = row[x] = row[x] || [],\n\t\t\t    stamp = L.Util.stamp(obj);\n\n\t\t\tthis._objectPoint[stamp] = point;\n\n\t\t\tcell.push(obj);\n\t\t},\n\n\t\tupdateObject: function (obj, point) {\n\t\t\tthis.removeObject(obj);\n\t\t\tthis.addObject(obj, point);\n\t\t},\n\n\t\t//Returns true if the object was found\n\t\tremoveObject: function (obj, point) {\n\t\t\tvar x = this._getCoord(point.x),\n\t\t\t    y = this._getCoord(point.y),\n\t\t\t    grid = this._grid,\n\t\t\t    row = grid[y] = grid[y] || {},\n\t\t\t    cell = row[x] = row[x] || [],\n\t\t\t    i, len;\n\n\t\t\tdelete this._objectPoint[L.Util.stamp(obj)];\n\n\t\t\tfor (i = 0, len = cell.length; i < len; i++) {\n\t\t\t\tif (cell[i] === obj) {\n\n\t\t\t\t\tcell.splice(i, 1);\n\n\t\t\t\t\tif (len === 1) {\n\t\t\t\t\t\tdelete row[x];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\n\t\teachObject: function (fn, context) {\n\t\t\tvar i, j, k, len, row, cell, removed,\n\t\t\t    grid = this._grid;\n\n\t\t\tfor (i in grid) {\n\t\t\t\trow = grid[i];\n\n\t\t\t\tfor (j in row) {\n\t\t\t\t\tcell = row[j];\n\n\t\t\t\t\tfor (k = 0, len = cell.length; k < len; k++) {\n\t\t\t\t\t\tremoved = fn.call(context, cell[k]);\n\t\t\t\t\t\tif (removed) {\n\t\t\t\t\t\t\tk--;\n\t\t\t\t\t\t\tlen--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetNearObject: function (point) {\n\t\t\tvar x = this._getCoord(point.x),\n\t\t\t    y = this._getCoord(point.y),\n\t\t\t    i, j, k, row, cell, len, obj, dist,\n\t\t\t    objectPoint = this._objectPoint,\n\t\t\t    closestDistSq = this._sqCellSize,\n\t\t\t    closest = null;\n\n\t\t\tfor (i = y - 1; i <= y + 1; i++) {\n\t\t\t\trow = this._grid[i];\n\t\t\t\tif (row) {\n\n\t\t\t\t\tfor (j = x - 1; j <= x + 1; j++) {\n\t\t\t\t\t\tcell = row[j];\n\t\t\t\t\t\tif (cell) {\n\n\t\t\t\t\t\t\tfor (k = 0, len = cell.length; k < len; k++) {\n\t\t\t\t\t\t\t\tobj = cell[k];\n\t\t\t\t\t\t\t\tdist = this._sqDist(objectPoint[L.Util.stamp(obj)], point);\n\t\t\t\t\t\t\t\tif (dist < closestDistSq ||\n\t\t\t\t\t\t\t\t\tdist <= closestDistSq && closest === null) {\n\t\t\t\t\t\t\t\t\tclosestDistSq = dist;\n\t\t\t\t\t\t\t\t\tclosest = obj;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn closest;\n\t\t},\n\n\t\t_getCoord: function (x) {\n\t\t\tvar coord = Math.floor(x / this._cellSize);\n\t\t\treturn isFinite(coord) ? coord : x;\n\t\t},\n\n\t\t_sqDist: function (p, p2) {\n\t\t\tvar dx = p2.x - p.x,\n\t\t\t    dy = p2.y - p.y;\n\t\t\treturn dx * dx + dy * dy;\n\t\t}\n\t};\n\n\t/* Copyright (c) 2012 the authors listed at the following URL, and/or\n\tthe authors of referenced articles or incorporated external code:\n\thttp://en.literateprograms.org/Quickhull_(Javascript)?action=history&offset=20120410175256\n\n\tPermission is hereby granted, free of charge, to any person obtaining\n\ta copy of this software and associated documentation files (the\n\t\"Software\"), to deal in the Software without restriction, including\n\twithout limitation the rights to use, copy, modify, merge, publish,\n\tdistribute, sublicense, and/or sell copies of the Software, and to\n\tpermit persons to whom the Software is furnished to do so, subject to\n\tthe following conditions:\n\n\tThe above copyright notice and this permission notice shall be\n\tincluded in all copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\tEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\tMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n\tIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n\tCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n\tTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n\tSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\tRetrieved from: http://en.literateprograms.org/Quickhull_(Javascript)?oldid=18434\n\t*/\n\n\t(function () {\n\t\tL.QuickHull = {\n\n\t\t\t/*\n\t\t\t * @param {Object} cpt a point to be measured from the baseline\n\t\t\t * @param {Array} bl the baseline, as represented by a two-element\n\t\t\t *   array of latlng objects.\n\t\t\t * @returns {Number} an approximate distance measure\n\t\t\t */\n\t\t\tgetDistant: function (cpt, bl) {\n\t\t\t\tvar vY = bl[1].lat - bl[0].lat,\n\t\t\t\t\tvX = bl[0].lng - bl[1].lng;\n\t\t\t\treturn (vX * (cpt.lat - bl[0].lat) + vY * (cpt.lng - bl[0].lng));\n\t\t\t},\n\n\t\t\t/*\n\t\t\t * @param {Array} baseLine a two-element array of latlng objects\n\t\t\t *   representing the baseline to project from\n\t\t\t * @param {Array} latLngs an array of latlng objects\n\t\t\t * @returns {Object} the maximum point and all new points to stay\n\t\t\t *   in consideration for the hull.\n\t\t\t */\n\t\t\tfindMostDistantPointFromBaseLine: function (baseLine, latLngs) {\n\t\t\t\tvar maxD = 0,\n\t\t\t\t\tmaxPt = null,\n\t\t\t\t\tnewPoints = [],\n\t\t\t\t\ti, pt, d;\n\n\t\t\t\tfor (i = latLngs.length - 1; i >= 0; i--) {\n\t\t\t\t\tpt = latLngs[i];\n\t\t\t\t\td = this.getDistant(pt, baseLine);\n\n\t\t\t\t\tif (d > 0) {\n\t\t\t\t\t\tnewPoints.push(pt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (d > maxD) {\n\t\t\t\t\t\tmaxD = d;\n\t\t\t\t\t\tmaxPt = pt;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn { maxPoint: maxPt, newPoints: newPoints };\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Given a baseline, compute the convex hull of latLngs as an array\n\t\t\t * of latLngs.\n\t\t\t *\n\t\t\t * @param {Array} latLngs\n\t\t\t * @returns {Array}\n\t\t\t */\n\t\t\tbuildConvexHull: function (baseLine, latLngs) {\n\t\t\t\tvar convexHullBaseLines = [],\n\t\t\t\t\tt = this.findMostDistantPointFromBaseLine(baseLine, latLngs);\n\n\t\t\t\tif (t.maxPoint) { // if there is still a point \"outside\" the base line\n\t\t\t\t\tconvexHullBaseLines =\n\t\t\t\t\t\tconvexHullBaseLines.concat(\n\t\t\t\t\t\t\tthis.buildConvexHull([baseLine[0], t.maxPoint], t.newPoints)\n\t\t\t\t\t\t);\n\t\t\t\t\tconvexHullBaseLines =\n\t\t\t\t\t\tconvexHullBaseLines.concat(\n\t\t\t\t\t\t\tthis.buildConvexHull([t.maxPoint, baseLine[1]], t.newPoints)\n\t\t\t\t\t\t);\n\t\t\t\t\treturn convexHullBaseLines;\n\t\t\t\t} else {  // if there is no more point \"outside\" the base line, the current base line is part of the convex hull\n\t\t\t\t\treturn [baseLine[0]];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/*\n\t\t\t * Given an array of latlngs, compute a convex hull as an array\n\t\t\t * of latlngs\n\t\t\t *\n\t\t\t * @param {Array} latLngs\n\t\t\t * @returns {Array}\n\t\t\t */\n\t\t\tgetConvexHull: function (latLngs) {\n\t\t\t\t// find first baseline\n\t\t\t\tvar maxLat = false, minLat = false,\n\t\t\t\t\tmaxLng = false, minLng = false,\n\t\t\t\t\tmaxLatPt = null, minLatPt = null,\n\t\t\t\t\tmaxLngPt = null, minLngPt = null,\n\t\t\t\t\tmaxPt = null, minPt = null,\n\t\t\t\t\ti;\n\n\t\t\t\tfor (i = latLngs.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar pt = latLngs[i];\n\t\t\t\t\tif (maxLat === false || pt.lat > maxLat) {\n\t\t\t\t\t\tmaxLatPt = pt;\n\t\t\t\t\t\tmaxLat = pt.lat;\n\t\t\t\t\t}\n\t\t\t\t\tif (minLat === false || pt.lat < minLat) {\n\t\t\t\t\t\tminLatPt = pt;\n\t\t\t\t\t\tminLat = pt.lat;\n\t\t\t\t\t}\n\t\t\t\t\tif (maxLng === false || pt.lng > maxLng) {\n\t\t\t\t\t\tmaxLngPt = pt;\n\t\t\t\t\t\tmaxLng = pt.lng;\n\t\t\t\t\t}\n\t\t\t\t\tif (minLng === false || pt.lng < minLng) {\n\t\t\t\t\t\tminLngPt = pt;\n\t\t\t\t\t\tminLng = pt.lng;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (minLat !== maxLat) {\n\t\t\t\t\tminPt = minLatPt;\n\t\t\t\t\tmaxPt = maxLatPt;\n\t\t\t\t} else {\n\t\t\t\t\tminPt = minLngPt;\n\t\t\t\t\tmaxPt = maxLngPt;\n\t\t\t\t}\n\n\t\t\t\tvar ch = [].concat(this.buildConvexHull([minPt, maxPt], latLngs),\n\t\t\t\t\t\t\t\t\tthis.buildConvexHull([maxPt, minPt], latLngs));\n\t\t\t\treturn ch;\n\t\t\t}\n\t\t};\n\t}());\n\n\tL.MarkerCluster.include({\n\t\tgetConvexHull: function () {\n\t\t\tvar childMarkers = this.getAllChildMarkers(),\n\t\t\t\tpoints = [],\n\t\t\t\tp, i;\n\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tp = childMarkers[i].getLatLng();\n\t\t\t\tpoints.push(p);\n\t\t\t}\n\n\t\t\treturn L.QuickHull.getConvexHull(points);\n\t\t}\n\t});\n\n\t//This code is 100% based on https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet\n\t//Huge thanks to jawj for implementing it first to make my job easy :-)\n\n\tL.MarkerCluster.include({\n\n\t\t_2PI: Math.PI * 2,\n\t\t_circleFootSeparation: 25, //related to circumference of circle\n\t\t_circleStartAngle: 0,\n\n\t\t_spiralFootSeparation:  28, //related to size of spiral (experiment!)\n\t\t_spiralLengthStart: 11,\n\t\t_spiralLengthFactor: 5,\n\n\t\t_circleSpiralSwitchover: 9, //show spiral instead of circle from this marker count upwards.\n\t\t\t\t\t\t\t\t\t// 0 -> always spiral; Infinity -> always circle\n\n\t\tspiderfy: function () {\n\t\t\tif (this._group._spiderfied === this || this._group._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar childMarkers = this.getAllChildMarkers(null, true),\n\t\t\t\tgroup = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tcenter = map.latLngToLayerPoint(this._latlng),\n\t\t\t\tpositions;\n\n\t\t\tthis._group._unspiderfy();\n\t\t\tthis._group._spiderfied = this;\n\n\t\t\t//TODO Maybe: childMarkers order by distance to center\n\n\t\t\tif (this._group.options.spiderfyShapePositions) {\n\t\t\t\tpositions = this._group.options.spiderfyShapePositions(childMarkers.length, center);\n\t\t\t} else if (childMarkers.length >= this._circleSpiralSwitchover) {\n\t\t\t\tpositions = this._generatePointsSpiral(childMarkers.length, center);\n\t\t\t} else {\n\t\t\t\tcenter.y += 10; // Otherwise circles look wrong => hack for standard blue icon, renders differently for other icons.\n\t\t\t\tpositions = this._generatePointsCircle(childMarkers.length, center);\n\t\t\t}\n\n\t\t\tthis._animationSpiderfy(childMarkers, positions);\n\t\t},\n\n\t\tunspiderfy: function (zoomDetails) {\n\t\t\t/// <param Name=\"zoomDetails\">Argument from zoomanim if being called in a zoom animation or null otherwise</param>\n\t\t\tif (this._group._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._animationUnspiderfy(zoomDetails);\n\n\t\t\tthis._group._spiderfied = null;\n\t\t},\n\n\t\t_generatePointsCircle: function (count, centerPt) {\n\t\t\tvar circumference = this._group.options.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),\n\t\t\t\tlegLength = circumference / this._2PI,  //radius from circumference\n\t\t\t\tangleStep = this._2PI / count,\n\t\t\t\tres = [],\n\t\t\t\ti, angle;\n\n\t\t\tlegLength = Math.max(legLength, 35); // Minimum distance to get outside the cluster icon.\n\n\t\t\tres.length = count;\n\n\t\t\tfor (i = 0; i < count; i++) { // Clockwise, like spiral.\n\t\t\t\tangle = this._circleStartAngle + i * angleStep;\n\t\t\t\tres[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\n\t\t\t}\n\n\t\t\treturn res;\n\t\t},\n\n\t\t_generatePointsSpiral: function (count, centerPt) {\n\t\t\tvar spiderfyDistanceMultiplier = this._group.options.spiderfyDistanceMultiplier,\n\t\t\t\tlegLength = spiderfyDistanceMultiplier * this._spiralLengthStart,\n\t\t\t\tseparation = spiderfyDistanceMultiplier * this._spiralFootSeparation,\n\t\t\t\tlengthFactor = spiderfyDistanceMultiplier * this._spiralLengthFactor * this._2PI,\n\t\t\t\tangle = 0,\n\t\t\t\tres = [],\n\t\t\t\ti;\n\n\t\t\tres.length = count;\n\n\t\t\t// Higher index, closer position to cluster center.\n\t\t\tfor (i = count; i >= 0; i--) {\n\t\t\t\t// Skip the first position, so that we are already farther from center and we avoid\n\t\t\t\t// being under the default cluster icon (especially important for Circle Markers).\n\t\t\t\tif (i < count) {\n\t\t\t\t\tres[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\n\t\t\t\t}\n\t\t\t\tangle += separation / legLength + i * 0.0005;\n\t\t\t\tlegLength += lengthFactor / angle;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\n\t\t_noanimationUnspiderfy: function () {\n\t\t\tvar group = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tchildMarkers = this.getAllChildMarkers(null, true),\n\t\t\t\tm, i;\n\n\t\t\tgroup._ignoreMove = true;\n\n\t\t\tthis.setOpacity(1);\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\tfg.removeLayer(m);\n\n\t\t\t\tif (m._preSpiderfyLatlng) {\n\t\t\t\t\tm.setLatLng(m._preSpiderfyLatlng);\n\t\t\t\t\tdelete m._preSpiderfyLatlng;\n\t\t\t\t}\n\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\tm.setZIndexOffset(0);\n\t\t\t\t}\n\n\t\t\t\tif (m._spiderLeg) {\n\t\t\t\t\tmap.removeLayer(m._spiderLeg);\n\t\t\t\t\tdelete m._spiderLeg;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgroup.fire('unspiderfied', {\n\t\t\t\tcluster: this,\n\t\t\t\tmarkers: childMarkers\n\t\t\t});\n\t\t\tgroup._ignoreMove = false;\n\t\t\tgroup._spiderfied = null;\n\t\t}\n\t});\n\n\t//Non Animated versions of everything\n\tL.MarkerClusterNonAnimated = L.MarkerCluster.extend({\n\t\t_animationSpiderfy: function (childMarkers, positions) {\n\t\t\tvar group = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tlegOptions = this._group.options.spiderLegPolylineOptions,\n\t\t\t\ti, m, leg, newPos;\n\n\t\t\tgroup._ignoreMove = true;\n\n\t\t\t// Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.\n\t\t\t// The reverse order trick no longer improves performance on modern browsers.\n\t\t\tfor (i = 0; i < childMarkers.length; i++) {\n\t\t\t\tnewPos = map.layerPointToLatLng(positions[i]);\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t// Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.\n\t\t\t\tleg = new L.Polyline([this._latlng, newPos], legOptions);\n\t\t\t\tmap.addLayer(leg);\n\t\t\t\tm._spiderLeg = leg;\n\n\t\t\t\t// Now add the marker.\n\t\t\t\tm._preSpiderfyLatlng = m._latlng;\n\t\t\t\tm.setLatLng(newPos);\n\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\tm.setZIndexOffset(1000000); //Make these appear on top of EVERYTHING\n\t\t\t\t}\n\n\t\t\t\tfg.addLayer(m);\n\t\t\t}\n\t\t\tthis.setOpacity(0.3);\n\n\t\t\tgroup._ignoreMove = false;\n\t\t\tgroup.fire('spiderfied', {\n\t\t\t\tcluster: this,\n\t\t\t\tmarkers: childMarkers\n\t\t\t});\n\t\t},\n\n\t\t_animationUnspiderfy: function () {\n\t\t\tthis._noanimationUnspiderfy();\n\t\t}\n\t});\n\n\t//Animated versions here\n\tL.MarkerCluster.include({\n\n\t\t_animationSpiderfy: function (childMarkers, positions) {\n\t\t\tvar me = this,\n\t\t\t\tgroup = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tthisLayerLatLng = this._latlng,\n\t\t\t\tthisLayerPos = map.latLngToLayerPoint(thisLayerLatLng),\n\t\t\t\tsvg = L.Path.SVG,\n\t\t\t\tlegOptions = L.extend({}, this._group.options.spiderLegPolylineOptions), // Copy the options so that we can modify them for animation.\n\t\t\t\tfinalLegOpacity = legOptions.opacity,\n\t\t\t\ti, m, leg, legPath, legLength, newPos;\n\n\t\t\tif (finalLegOpacity === undefined) {\n\t\t\t\tfinalLegOpacity = L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity;\n\t\t\t}\n\n\t\t\tif (svg) {\n\t\t\t\t// If the initial opacity of the spider leg is not 0 then it appears before the animation starts.\n\t\t\t\tlegOptions.opacity = 0;\n\n\t\t\t\t// Add the class for CSS transitions.\n\t\t\t\tlegOptions.className = (legOptions.className || '') + ' leaflet-cluster-spider-leg';\n\t\t\t} else {\n\t\t\t\t// Make sure we have a defined opacity.\n\t\t\t\tlegOptions.opacity = finalLegOpacity;\n\t\t\t}\n\n\t\t\tgroup._ignoreMove = true;\n\n\t\t\t// Add markers and spider legs to map, hidden at our center point.\n\t\t\t// Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.\n\t\t\t// The reverse order trick no longer improves performance on modern browsers.\n\t\t\tfor (i = 0; i < childMarkers.length; i++) {\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\tnewPos = map.layerPointToLatLng(positions[i]);\n\n\t\t\t\t// Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.\n\t\t\t\tleg = new L.Polyline([thisLayerLatLng, newPos], legOptions);\n\t\t\t\tmap.addLayer(leg);\n\t\t\t\tm._spiderLeg = leg;\n\n\t\t\t\t// Explanations: https://jakearchibald.com/2013/animated-line-drawing-svg/\n\t\t\t\t// In our case the transition property is declared in the CSS file.\n\t\t\t\tif (svg) {\n\t\t\t\t\tlegPath = leg._path;\n\t\t\t\t\tlegLength = legPath.getTotalLength() + 0.1; // Need a small extra length to avoid remaining dot in Firefox.\n\t\t\t\t\tlegPath.style.strokeDasharray = legLength; // Just 1 length is enough, it will be duplicated.\n\t\t\t\t\tlegPath.style.strokeDashoffset = legLength;\n\t\t\t\t}\n\n\t\t\t\t// If it is a marker, add it now and we'll animate it out\n\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\tm.setZIndexOffset(1000000); // Make normal markers appear on top of EVERYTHING\n\t\t\t\t}\n\t\t\t\tif (m.clusterHide) {\n\t\t\t\t\tm.clusterHide();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Vectors just get immediately added\n\t\t\t\tfg.addLayer(m);\n\n\t\t\t\tif (m._setPos) {\n\t\t\t\t\tm._setPos(thisLayerPos);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgroup._forceLayout();\n\t\t\tgroup._animationStart();\n\n\t\t\t// Reveal markers and spider legs.\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tnewPos = map.layerPointToLatLng(positions[i]);\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t//Move marker to new position\n\t\t\t\tm._preSpiderfyLatlng = m._latlng;\n\t\t\t\tm.setLatLng(newPos);\n\t\t\t\t\n\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\tm.clusterShow();\n\t\t\t\t}\n\n\t\t\t\t// Animate leg (animation is actually delegated to CSS transition).\n\t\t\t\tif (svg) {\n\t\t\t\t\tleg = m._spiderLeg;\n\t\t\t\t\tlegPath = leg._path;\n\t\t\t\t\tlegPath.style.strokeDashoffset = 0;\n\t\t\t\t\t//legPath.style.strokeOpacity = finalLegOpacity;\n\t\t\t\t\tleg.setStyle({opacity: finalLegOpacity});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setOpacity(0.3);\n\n\t\t\tgroup._ignoreMove = false;\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tgroup._animationEnd();\n\t\t\t\tgroup.fire('spiderfied', {\n\t\t\t\t\tcluster: me,\n\t\t\t\t\tmarkers: childMarkers\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t},\n\n\t\t_animationUnspiderfy: function (zoomDetails) {\n\t\t\tvar me = this,\n\t\t\t\tgroup = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tthisLayerPos = zoomDetails ? map._latLngToNewLayerPoint(this._latlng, zoomDetails.zoom, zoomDetails.center) : map.latLngToLayerPoint(this._latlng),\n\t\t\t\tchildMarkers = this.getAllChildMarkers(null, true),\n\t\t\t\tsvg = L.Path.SVG,\n\t\t\t\tm, i, leg, legPath, legLength, nonAnimatable;\n\n\t\t\tgroup._ignoreMove = true;\n\t\t\tgroup._animationStart();\n\n\t\t\t//Make us visible and bring the child markers back in\n\t\t\tthis.setOpacity(1);\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t//Marker was added to us after we were spiderfied\n\t\t\t\tif (!m._preSpiderfyLatlng) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t//Close any popup on the marker first, otherwise setting the location of the marker will make the map scroll\n\t\t\t\tm.closePopup();\n\n\t\t\t\t//Fix up the location to the real one\n\t\t\t\tm.setLatLng(m._preSpiderfyLatlng);\n\t\t\t\tdelete m._preSpiderfyLatlng;\n\n\t\t\t\t//Hack override the location to be our center\n\t\t\t\tnonAnimatable = true;\n\t\t\t\tif (m._setPos) {\n\t\t\t\t\tm._setPos(thisLayerPos);\n\t\t\t\t\tnonAnimatable = false;\n\t\t\t\t}\n\t\t\t\tif (m.clusterHide) {\n\t\t\t\t\tm.clusterHide();\n\t\t\t\t\tnonAnimatable = false;\n\t\t\t\t}\n\t\t\t\tif (nonAnimatable) {\n\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t}\n\n\t\t\t\t// Animate the spider leg back in (animation is actually delegated to CSS transition).\n\t\t\t\tif (svg) {\n\t\t\t\t\tleg = m._spiderLeg;\n\t\t\t\t\tlegPath = leg._path;\n\t\t\t\t\tlegLength = legPath.getTotalLength() + 0.1;\n\t\t\t\t\tlegPath.style.strokeDashoffset = legLength;\n\t\t\t\t\tleg.setStyle({opacity: 0});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgroup._ignoreMove = false;\n\n\t\t\tsetTimeout(function () {\n\t\t\t\t//If we have only <= one child left then that marker will be shown on the map so don't remove it!\n\t\t\t\tvar stillThereChildCount = 0;\n\t\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\t\tm = childMarkers[i];\n\t\t\t\t\tif (m._spiderLeg) {\n\t\t\t\t\t\tstillThereChildCount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t\tif (!m._spiderLeg) { //Has already been unspiderfied\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\t\tm.setZIndexOffset(0);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (stillThereChildCount > 1) {\n\t\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t\t}\n\n\t\t\t\t\tmap.removeLayer(m._spiderLeg);\n\t\t\t\t\tdelete m._spiderLeg;\n\t\t\t\t}\n\t\t\t\tgroup._animationEnd();\n\t\t\t\tgroup.fire('unspiderfied', {\n\t\t\t\t\tcluster: me,\n\t\t\t\t\tmarkers: childMarkers\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t}\n\t});\n\n\n\tL.MarkerClusterGroup.include({\n\t\t//The MarkerCluster currently spiderfied (if any)\n\t\t_spiderfied: null,\n\n\t\tunspiderfy: function () {\n\t\t\tthis._unspiderfy.apply(this, arguments);\n\t\t},\n\n\t\t_spiderfierOnAdd: function () {\n\t\t\tthis._map.on('click', this._unspiderfyWrapper, this);\n\n\t\t\tif (this._map.options.zoomAnimation) {\n\t\t\t\tthis._map.on('zoomstart', this._unspiderfyZoomStart, this);\n\t\t\t}\n\t\t\t//Browsers without zoomAnimation or a big zoom don't fire zoomstart\n\t\t\tthis._map.on('zoomend', this._noanimationUnspiderfy, this);\n\n\t\t\tif (!L.Browser.touch) {\n\t\t\t\tthis._map.getRenderer(this);\n\t\t\t\t//Needs to happen in the pageload, not after, or animations don't work in webkit\n\t\t\t\t//  http://stackoverflow.com/questions/8455200/svg-animate-with-dynamically-added-elements\n\t\t\t\t//Disable on touch browsers as the animation messes up on a touch zoom and isn't very noticable\n\t\t\t}\n\t\t},\n\n\t\t_spiderfierOnRemove: function () {\n\t\t\tthis._map.off('click', this._unspiderfyWrapper, this);\n\t\t\tthis._map.off('zoomstart', this._unspiderfyZoomStart, this);\n\t\t\tthis._map.off('zoomanim', this._unspiderfyZoomAnim, this);\n\t\t\tthis._map.off('zoomend', this._noanimationUnspiderfy, this);\n\n\t\t\t//Ensure that markers are back where they should be\n\t\t\t// Use no animation to avoid a sticky leaflet-cluster-anim class on mapPane\n\t\t\tthis._noanimationUnspiderfy();\n\t\t},\n\n\t\t//On zoom start we add a zoomanim handler so that we are guaranteed to be last (after markers are animated)\n\t\t//This means we can define the animation they do rather than Markers doing an animation to their actual location\n\t\t_unspiderfyZoomStart: function () {\n\t\t\tif (!this._map) { //May have been removed from the map by a zoomEnd handler\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._map.on('zoomanim', this._unspiderfyZoomAnim, this);\n\t\t},\n\n\t\t_unspiderfyZoomAnim: function (zoomDetails) {\n\t\t\t//Wait until the first zoomanim after the user has finished touch-zooming before running the animation\n\t\t\tif (L.DomUtil.hasClass(this._map._mapPane, 'leaflet-touching')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._map.off('zoomanim', this._unspiderfyZoomAnim, this);\n\t\t\tthis._unspiderfy(zoomDetails);\n\t\t},\n\n\t\t_unspiderfyWrapper: function () {\n\t\t\t/// <summary>_unspiderfy but passes no arguments</summary>\n\t\t\tthis._unspiderfy();\n\t\t},\n\n\t\t_unspiderfy: function (zoomDetails) {\n\t\t\tif (this._spiderfied) {\n\t\t\t\tthis._spiderfied.unspiderfy(zoomDetails);\n\t\t\t}\n\t\t},\n\n\t\t_noanimationUnspiderfy: function () {\n\t\t\tif (this._spiderfied) {\n\t\t\t\tthis._spiderfied._noanimationUnspiderfy();\n\t\t\t}\n\t\t},\n\n\t\t//If the given layer is currently being spiderfied then we unspiderfy it so it isn't on the map anymore etc\n\t\t_unspiderfyLayer: function (layer) {\n\t\t\tif (layer._spiderLeg) {\n\t\t\t\tthis._featureGroup.removeLayer(layer);\n\n\t\t\t\tif (layer.clusterShow) {\n\t\t\t\t\tlayer.clusterShow();\n\t\t\t\t}\n\t\t\t\t\t//Position will be fixed up immediately in _animationUnspiderfy\n\t\t\t\tif (layer.setZIndexOffset) {\n\t\t\t\t\tlayer.setZIndexOffset(0);\n\t\t\t\t}\n\n\t\t\t\tthis._map.removeLayer(layer._spiderLeg);\n\t\t\t\tdelete layer._spiderLeg;\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Adds 1 public method to MCG and 1 to L.Marker to facilitate changing\n\t * markers' icon options and refreshing their icon and their parent clusters\n\t * accordingly (case where their iconCreateFunction uses data of childMarkers\n\t * to make up the cluster icon).\n\t */\n\n\n\tL.MarkerClusterGroup.include({\n\t\t/**\n\t\t * Updates the icon of all clusters which are parents of the given marker(s).\n\t\t * In singleMarkerMode, also updates the given marker(s) icon.\n\t\t * @param layers L.MarkerClusterGroup|L.LayerGroup|Array(L.Marker)|Map(L.Marker)|\n\t\t * L.MarkerCluster|L.Marker (optional) list of markers (or single marker) whose parent\n\t\t * clusters need to be updated. If not provided, retrieves all child markers of this.\n\t\t * @returns {L.MarkerClusterGroup}\n\t\t */\n\t\trefreshClusters: function (layers) {\n\t\t\tif (!layers) {\n\t\t\t\tlayers = this._topClusterLevel.getAllChildMarkers();\n\t\t\t} else if (layers instanceof L.MarkerClusterGroup) {\n\t\t\t\tlayers = layers._topClusterLevel.getAllChildMarkers();\n\t\t\t} else if (layers instanceof L.LayerGroup) {\n\t\t\t\tlayers = layers._layers;\n\t\t\t} else if (layers instanceof L.MarkerCluster) {\n\t\t\t\tlayers = layers.getAllChildMarkers();\n\t\t\t} else if (layers instanceof L.Marker) {\n\t\t\t\tlayers = [layers];\n\t\t\t} // else: must be an Array(L.Marker)|Map(L.Marker)\n\t\t\tthis._flagParentsIconsNeedUpdate(layers);\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\t// In case of singleMarkerMode, also re-draw the markers.\n\t\t\tif (this.options.singleMarkerMode) {\n\t\t\t\tthis._refreshSingleMarkerModeMarkers(layers);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Simply flags all parent clusters of the given markers as having a \"dirty\" icon.\n\t\t * @param layers Array(L.Marker)|Map(L.Marker) list of markers.\n\t\t * @private\n\t\t */\n\t\t_flagParentsIconsNeedUpdate: function (layers) {\n\t\t\tvar id, parent;\n\n\t\t\t// Assumes layers is an Array or an Object whose prototype is non-enumerable.\n\t\t\tfor (id in layers) {\n\t\t\t\t// Flag parent clusters' icon as \"dirty\", all the way up.\n\t\t\t\t// Dumb process that flags multiple times upper parents, but still\n\t\t\t\t// much more efficient than trying to be smart and make short lists,\n\t\t\t\t// at least in the case of a hierarchy following a power law:\n\t\t\t\t// http://jsperf.com/flag-nodes-in-power-hierarchy/2\n\t\t\t\tparent = layers[id].__parent;\n\t\t\t\twhile (parent) {\n\t\t\t\t\tparent._iconNeedsUpdate = true;\n\t\t\t\t\tparent = parent.__parent;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Re-draws the icon of the supplied markers.\n\t\t * To be used in singleMarkerMode only.\n\t\t * @param layers Array(L.Marker)|Map(L.Marker) list of markers.\n\t\t * @private\n\t\t */\n\t\t_refreshSingleMarkerModeMarkers: function (layers) {\n\t\t\tvar id, layer;\n\n\t\t\tfor (id in layers) {\n\t\t\t\tlayer = layers[id];\n\n\t\t\t\t// Make sure we do not override markers that do not belong to THIS group.\n\t\t\t\tif (this.hasLayer(layer)) {\n\t\t\t\t\t// Need to re-create the icon first, then re-draw the marker.\n\t\t\t\t\tlayer.setIcon(this._overrideMarkerIcon(layer));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tL.Marker.include({\n\t\t/**\n\t\t * Updates the given options in the marker's icon and refreshes the marker.\n\t\t * @param options map object of icon options.\n\t\t * @param directlyRefreshClusters boolean (optional) true to trigger\n\t\t * MCG.refreshClustersOf() right away with this single marker.\n\t\t * @returns {L.Marker}\n\t\t */\n\t\trefreshIconOptions: function (options, directlyRefreshClusters) {\n\t\t\tvar icon = this.options.icon;\n\n\t\t\tL.setOptions(icon, options);\n\n\t\t\tthis.setIcon(icon);\n\n\t\t\t// Shortcut to refresh the associated MCG clusters right away.\n\t\t\t// To be used when refreshing a single marker.\n\t\t\t// Otherwise, better use MCG.refreshClusters() once at the end with\n\t\t\t// the list of modified markers.\n\t\t\tif (directlyRefreshClusters && this.__parent) {\n\t\t\t\tthis.__parent._group.refreshClusters(this);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\t});\n\n\texports.MarkerClusterGroup = MarkerClusterGroup;\n\texports.MarkerCluster = MarkerCluster;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=leaflet.markercluster-src.js.map\n","var EmitOnOff = module.exports = function(thing){\n  if (!thing) thing = {};\n\n  thing._subs = [];\n  thing._paused = false;\n  thing._pending = [];\n\n  /**\n   * Sub of pubsub\n   * @param  {String}   name name of event\n   * @param  {Function} cb   your callback\n   */\n  thing.on = function(name, cb){\n    thing._subs[name] = thing._subs[name] || [];\n    thing._subs[name].push(cb);\n  };\n\n  /**\n   * remove sub of pubsub\n   * @param  {String}   name name of event\n   * @param  {Function} cb   your callback\n   */\n  thing.off = function(name, cb){\n    if (!thing._subs[name]) return;\n    for (var i in thing._subs[name]){\n      if (thing._subs[name][i] === cb){\n        thing._subs[name].splice(i);\n        break;\n      }\n    }\n  };\n\n  /**\n   * Pub of pubsub\n   * @param  {String}   name name of event\n   * @param  {Mixed}    data the data to publish\n   */\n  thing.emit = function(name){\n    if (!thing._subs[name]) return;\n\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    if (thing._paused) {\n      thing._pending[name] = thing._pending[name] || [];\n      thing._pending[name].push(args)\n      return\n    }\n\n    for (var i in thing._subs[name]){\n      thing._subs[name][i].apply(thing, args);\n    }\n  };\n\n  thing.pause = function() {\n    thing._paused = true;\n  };\n\n  thing.resume = function() {\n    thing._paused = false;\n\n    for (var name in thing._pending) {\n      for (var i = 0; i < thing._pending[name].length; i++) {\n        thing.emit(name, thing._pending[name][i])\n      }\n    }\n  };\n\n  return thing;\n};","import 'whatwg-fetch';\nimport tress from 'tress';\nimport { nlmaps } from '../nlmaps/dist/nlmaps.es.js';\nimport { pointQueryChain } from './lib.js';\nimport 'leaflet.markercluster';\nimport emitonoff from 'emitonoff';\n/* eslint-disable-next-line max-len */\nconst URL = 'https://map.data.amsterdam.nl/maps/parkeervakken?REQUEST=GetFeature&SERVICE=wfs&OUTPUTFORMAT=application/json;%20subtype=geojson;%20charset=utf-8&Typename=fiscaal_parkeervakken&version=1.1.0&srsname=urn:ogc:def:crs:EPSG::4326';\nconst tvm = {};\nemitonoff(tvm);\n\n\nfunction parkeerVakken() {\n  let parkeervakken = L.geoJson(null, {\n    style: defaultStyleParkeerVakken,\n    onEachFeature: parkeerVakkenEach\n\n  })\n  return parkeervakken;\n}\n\nconst defaultStyleParkeerVakken = {\n  \"color\": \"#000\",\n  \"weight\": 2,\n  \"opacity\": 1,\n  \"fillOpacity\": 0\n};\n\nconst hoverStyleParkeerVakken = {\n  \"color\": \"#000\",\n  \"weight\": 3,\n  \"opacity\": 1,\n  \"fillOpacity\": 1,\n  \"fillColor\": '#ccc'\n}\n\nconst defaultStyleSelection = {\n  \"color\": \"#ec0000\",\n  \"weight\": 2,\n  \"opacity\": 1,\n  \"fillOpacity\": 0.5,\n  \"fillColor\": \"#ec0000\"\n};\n\nconst hoverStyleSelection = {\n  \"color\": \"#ec0000\",\n  \"weight\": 3,\n  \"opacity\": 1,\n  \"fillOpacity\": 0.3,\n  \"fillColor\": '#ec0000'\n}\n\nfunction selectionLayer() {\n  let selection = L.geoJson(null, {\n    style: defaultStyleSelection,\n    onEachFeature: selectionEach\n  })\n  return selection;\n}\n\nfunction selectionEach(feature, layer) {\n  layer.on('mouseover', () => layer.setStyle(hoverStyleSelection));\n  layer.on('mouseout', () => layer.setStyle(defaultStyleSelection));\n  layer.on('click', e => {\n    e.originalEvent.preventDefault();\n    tvm.store.removeFeature(feature, layer);\n  })\n}\n\nfunction parkeerVakkenEach(feature, layer) {\n  layer.on('mouseover', () => layer.setStyle(hoverStyleParkeerVakken));\n  layer.on('mouseout', () => layer.setStyle(defaultStyleParkeerVakken));\n  layer.on('click', e => {\n    e.originalEvent.preventDefault();\n    tvm.store.addFeature(feature, e)\n  });\n}\n\nfunction formatWfsUrl(bounds) {\n  const ll = {x: bounds._southWest.lng, y: bounds._southWest.lat};\n  const ur = {x: bounds._northEast.lng, y: bounds._northEast.lat};\n  return `${URL}&bbox=${ll.x},${ll.y},${ur.x},${ur.y}`\n}\n\n\nasync function reloadWfs() {\n  const zoom = this.map.getZoom();\n  let layers = this.parkeervakken.getLayers();\n  if (zoom > 16) {\n    const bounds = this.map.getBounds();\n    const data = await fetch(formatWfsUrl(bounds)).then(res => res.json());\n    layers.forEach(lyr => lyr.remove());\n    this.parkeervakken.clearLayers();\n    this.parkeervakken.addData(data);\n    tvm.selection.bringToFront();\n  } else {\n    layers.forEach(lyr => lyr.remove());\n    this.parkeervakken.clearLayers();\n  }\n}\n\nasync function combinePointAndFeatureInfo(click, feature){\n  const result = await pointQueryChain(click, tvm);\n  result.object = feature;\n  return result;\n}\n\n\n//store uses a queue so that clicks on the map will be handled in order\n//and no race conditions will ensue in the store.\ntvm.store = {\n  store: [],\n  queue: tress(async (job, done) => {\n    if (job.type === 'add') {\n      tvm.selection.addData(job.feature);\n      const result = await combinePointAndFeatureInfo({latlng: job.e.latlng}, job.feature);\n      tvm.store.store.push(result);\n      tvm.emit('feature',{features: tvm.store.store, type: 'added', added: result});\n      done(null, 'added')\n    } else if (job.type === 'remove') {\n      const idx = tvm.store.store.findIndex(item => item.object.id === job.feature.properties.id);\n      const removed = tvm.store.store[idx];\n      tvm.store.store.splice(idx, 1);\n      tvm.selection.removeLayer(job.layer);\n      tvm.emit('feature', {features: tvm.store.store, type: 'removed', removed: removed});\n      done(null, 'removed');\n    }\n\n  }),\n  addFeature: async function(feature, e) {\n    this.queue.push({type: 'add', feature: feature, e: e})\n  },\n  removeFeature: function(feature, layer) {\n    this.queue.push({type: 'remove', feature: feature, layer: layer});\n  },\n  getStore: function() {\n    return this.store\n  }\n}\n\n\n\ntvm.createMap = async function(config) {\n  let map = nlmaps.createMap(config);\n  this.map = map;\n  let parkeervakken = parkeerVakken();\n  this.parkeervakken = parkeervakken;\n\n  //workaround to trigger wfsreload since map.on('load' isn't available)\n  map.on('layeradd', reloadWfs, this);\n  parkeervakken.addTo(map);\n  map.off('layeradd', reloadWfs, this);\n\n  map.on('moveend', reloadWfs, this);\n\n  parkeervakken.on('remove', () => {\n    map.off('moveend', reloadWfs, this);\n  })\n\n  tvm.selection = selectionLayer();\n  tvm.selection.addTo(map);\n\n  if (typeof config.onFeatures === 'function') {\n    tvm.on('feature', data => {\n      config.onFeatures(data.features);\n    });\n  } else if (Array.isArray(config.onFeatures)) {\n    config.onFeatures.forEach((f) =>{\n      if (typeof f === 'function') {\n        tvm.on('feature', data => {\n          f(data.features);\n        });\n      }\n    })\n  }\n\n  return map;\n}\n\nconst multiselect = tvm\nexport default multiselect;\n"],"names":["self","fetch","support","searchParams","iterable","Symbol","blob","Blob","e","formData","arrayBuffer","viewClasses","isDataView","obj","DataView","prototype","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","indexOf","Object","toString","call","normalizeName","name","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","map","forEach","append","Array","isArray","header","getOwnPropertyNames","oldValue","get","has","hasOwnProperty","set","callback","thisArg","keys","push","values","entries","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","length","i","fromCharCode","join","bufferClone","slice","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","Error","type","rejected","then","text","decode","json","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","options","url","credentials","mode","referrer","clone","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","response","redirectStatuses","redirect","RangeError","location","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill","this","v","isUndefined","isDefined","isNull","isString","isBoolean","isNumber","isObject","isFunction","isRegExp","isDate","isSet","isMap","isWeakSet","isWeakMap","isSymbol","isError","isPromise","finite","Number","isFinite","isNaN","pure","Reflect","getPrototypeOf","plain","includes","isPrimitive","isEasy","ofNumbers","every","ofStrings","ofBooleans","ofFunctions","ofObjects","ofArrays","ofPrimitives","ofEasies","empty","isSerializable","args","ad","babelHelpers.typeof","f","defineProperty","object","noop","safeSet","worker","_concurrency","delay","concurrency","paused","started","saturated","queue","waiting","active","failed","finished","onDrain","onEmpty","onSaturated","onUnsaturated","onError","onSuccess","onRetry","startJob","job","doneCalled","setTimeout","delayable","data","err","filter","addJob","prior","j","jobObject","unshift","running","workersList","idle","pause","resume","kill","remove","task","save","concat","load","mapper","tress","hp","hardProp","createCommonjsModule","o","exports","mergeConfig","_extends","parseBase","CONFIG","BASE_DEFAULTS","defaults","layers","BASEMAP_PROVIDERS","formatBasemapUrl","parseWMS","WMS_DEFAULTS","WMS_PROVIDERS","applyTemplate","parseGeocoder","GEOCODER","lookupUrl","suggestUrl","placeholder","parseMap","MAP","layerName","crs","format","t","workSpaceName","parseFeatureQuery","FEATUREQUERYBASEURL","parseClasses","CLASSNAMES","parseMarker","MARKER","httpGetAsync","r","onreadystatechange","readyState","wktPointToGeoJson","coordinates","parseFloat","parseClasses$1","classList","add","getMarker","getExtent","extent","getProvider","deprecated","console","warn","PROVIDERS","getWmsProvider","log","mapPointerStyle","_container","extentLeafletFormat","L","latLng","latLngBounds","markerLayer","_typeof","getMapCenter","latitude","longitude","marker","alt","icon","iconUrl","iconSize","iconAnchor","bgLayer","nlmapsBgLayer","overlayLayer","nlmapsOverlayLayer","geoLocatorControl","zoomTo","fitBounds","geoJSON","getBounds","maxZoom","geocoderControl","geocoder","createControl","getContainer","parentElement","insertBefore","getCenter","lat","lng","bgLayer$1","arguments","subdomains","ol","layer","Tile","source","XYZ","attributions","Attribution","html","attribution","markerLayer$1","style","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","src","scale","n","getMapCenter$1","a","proj","fromLonLat","s","Feature","geometry","geom","Point","setStyle","Vector","features","overlayLayer$1","TileWMS","serverType","params","LAYERS","VERSION","version","STYLES","styleName","geoLocatorControl$1","getView","getZoom","View","center","coords","zoom","setView","document","createElement","className","addEventListener","start","on","control","Control","element","zoomTo$1","setCenter","setZoom","toLonLat","geocoderControl$1","addControl","AttributionControl","google","maps","backgroundColor","opacity","border","cursor","appendChild","color","fontFamily","fontSize","innerHTML","index","geoLocatorControl$2","id","boxShadow","height","width","borderRadius","margin","zoomTo$2","indexOfMapControl","getArray","toggleAttrControl","getMapTypeId","controls","ControlPosition","BOTTOM_RIGHT","removeAt","makeGoogleAttrControl","addListener","makeGoogleLayerOpts","getTileUrl","bare_url","x","y","tileSize","Size","isPng","minZoom","getWmsTiledOptions","baseUrl","styles","transparent","bgLayer$2","ImageMapType","toMercator","Math","abs","sin","WMSTiled","getProjection","pow","fromPointToLatLng","l","c","u","d","setOpacity","overlayMapTypes","overlayLayer$2","markerLayer$2","getMapCenter$2","LatLng","Marker","title","position","geocoderControl$2","getDiv","positionHandler","emit","positionErrorHandler","geoLocator","window","navigator","emitonoff$1","GeoLocator","stop","query","catch","createAndAddMarker","latlng","addTo","markerStore","popup","offset","setContent","bindPopup","openPopup","addMarker","singleMarker","markers","removeMarker","multiMarker","testWhichLib","initMap","getElementById","target","padding","attributionControl","DomUtil","create","maxBounds","setPrefix","zoomControl","setPosition","zoomposition","Map","zoomControlOptions","LEFT_BOTTOM","fullscreenControl","getTargetElement","getElementsByClassName","cssText","addGoogleLayer","setMap","setOptions","mapTypeControl","mapTypeControlOptions","mapTypeIds","BOTTOM_LEFT","mapTypes","setMapTypeId","addLayerToMap","addLayer","createBackgroundLayer","nlmaps","leaflet","googlemaps","openlayers","createOverlayLayer","createMarkerLayer","getMapCenter$3","mergeOpts","addGeoLocControlToMap","TOP_RIGHT","addGeocoderControlToMap","emitonoff","_subs","_paused","_pending","off","splice","apply","config","basemaps","wms","featureQuery","classnames","geocoderContainer","geocoderSearch","geocoderButton","geocoderResultList","geocoderResultItem","geocoderResultSelected","constructor","assign","attr","resultList","selectedResult","doSuggestRequest","encodeURIComponent","doLookupRequest","docs","centroide_ll","centroide_rd","stopPropagation","setAttribute","code","keyCode","showLookupResult","clearSuggestResults","suggest","preventDefault","lookup","showSuggestResults","weergavenaam","resultObject","NlmapsBgLayer","TileLayer","extend","initialize","Util","scheme","sa_id","NlmapsOverlayLayer","WMS","GeoLocatorControl","onAdd","panTo","geolocator","isStarted","addClass","DomEvent","removeClass","onRemove","geoLocateDefaultOpts","follow","geolocation","getCurrentPosition","bind","maximumAge","pointToQuery","queryResult","queryFeatures","subscribe","findIndex","geoLocateDefaultOpts$1","lib","createMap","message","search","overlay","geoLocate","clickProvider","defs","WGS84","GOOGLE","PJD_3PARAM","PJD_7PARAM","PJD_GRIDSHIFT","PJD_WGS84","PJD_NODATUM","SRS_WGS84_SEMIMAJOR","SRS_WGS84_SEMIMINOR","SRS_WGS84_ESQUARED","SEC_TO_RAD","HALF_PI","PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","greenwich","lisbon","paris","bogota","madrid","rome","bern","jakarta","ferro","brussels","stockholm","athens","oslo","ft","to_meter","ignoredChar","match","lkey","testkey","processedKey","defData","paramObj","reduce","p","paramName","paramVal","paramOutname","datum","rf","lat_0","lat0","lat_1","lat1","lat_2","lat2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","alpha","gamma","rectified_grid_angle","lonc","longc","x_0","x0","y_0","y0","k_0","k0","k","b","r_a","R_A","zone","parseInt","south","utmSouth","towgs84","datum_params","units","unit","from_greenwich","pm","PrimeMeridian","nadgrids","datumCode","axis","legalAxis","substr","approx","NEUTRAL","KEYWORD","NUMBER","QUOTED","AFTERQUOTE","ENDED","whitespace","latin","keyword","endThings","digets","Parser","level","place","root","stack","currentObject","state","readCharicter","char","neutral","quoted","afterquote","number","word","afterItem","pop","newObjects","output","parseString","txt","parser","mapit","thing","out","newObj","item","sExpr","convert","rename","outName","inName","d2r","cleanWKT","wkt","projName","local","PROJECTION","AXIS","axisOrder","ii","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","sphere","ellps","TOWGS84","toMeter","ratio","renamer","list","lisp","that","def","charAt","parseProj","EPSG","ESRI","IAU2000","globals","testObj","testDef","codeWords","testWKT","some","codes","checkMercator","auth","checkProjStr","ext","testProj","maybeProjStr","projStr","destination","property","eccent","sinphi","cosphi","con","sqrt","sign","phi","com","tan","ts","eccnth","dphi","atan","es","cos","msfnz","forward","lon","adjust_lon","tsfnz","inverse","exp","phi2z","names","identity","pt","projs","merc","longlat","projStore","len","MERIT","ellipseName","SGS85","GRS80","IAU76","airy","APL4","NWL9D","mod_airy","andrae","aust_SA","GRS67","bessel","bess_nam","clrk66","clrk80","clrk80ign","clrk58","CPM","delmbr","engelis","evrst30","evrst48","evrst56","evrst69","evrstSS","fschr60","fschr60m","fschr68","helmert","hough","intl","kaula","lerch","mprts","new_intl","plessis","krass","SEasia","walbeck","WGS60","WGS66","WGS7","eccentricity","a2","b2","ep2","ellipse","Ellipsoid","wgs84","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","militargeographische_institut","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","datum_type","grids","loadedNadgrids","nadgrid","isLittleEndian","detectLittleEndian","readHeader","subgrids","readSubgrids","getNadgrids","parseNadgridString","optional","mandatory","grid","secondsToRadians","seconds","nFields","getInt32","nSubgridFields","nSubgrids","shiftType","decodeString","fromSemiMajorAxis","getFloat64","fromSemiMinorAxis","toSemiMajorAxis","toSemiMinorAxis","end","gridOffset","subHeader","readGridHeader","nodes","readGridNodes","lngColumnCount","round","upperLongitude","lowerLongitude","longitudeInterval","latColumnCount","upperLatitude","lowerLatitude","latitudeInterval","ll","del","lim","count","gridNodeCount","cvs","mapNodes","longitudeShift","latitudeShift","parent","gridHeader","nodesOffset","gridRecordLength","gridShiftRecords","record","getFloat32","latitudeAccuracy","longitudeAccuracy","Projection","srsCode","parseCode","ourProj","projections","datumDef","Datum","sphere_","dc_sphere","ecc","dc_eccentricity","datumObj","compareDatums","dest","geodeticToGeocentric","Longitude","Latitude","Height","z","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Infinity","geocentricToGeodetic","genau","genau2","maxiter","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","atan2","geocentricToWgs84","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricFromWgs84","x_tmp","y_tmp","z_tmp","checkParams","point","source_a","source_es","gridShiftCode","applyGridShift","dest_a","dest_b","dest_es","destGridShiftResult","NaN","onlyMandatoryGrids","attemptedGrids","outer","jj","subgrid","epsilon","minX","minY","maxX","maxY","applySubgridShift","pin","ct","val","tb","nadInterpolate","tol","dif","indx","floor","frct","inx","f00","f10","f11","f01","m11","m10","m00","m01","denorm","xin","yin","zin","array","m","checkCoord","num","checkNotWGS","transform","enforceAxis","toPoint","hasZ","checkSanity","adjust_axis","datum_transform","transformer","from","to","transformedArray","checkProj","oProj","proj4","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","A","I","O","V","accuracy","encode","LLtoUTM","mgrs","bbox","UTMtoLL","left","bottom","right","top","degToRad","deg","radToDeg","rad","Lat","Long","eccSquared","LongOrigin","eccPrimeSquared","N","T","C","M","LatRad","LongRad","LongOriginRad","ZoneNumber","UTMEasting","UTMNorthing","northing","easting","zoneNumber","zoneLetter","getLetterDesignator","utm","e1","N1","T1","C1","R1","D","mu","phi1Rad","topRight","LetterDesignator","seasting","snorthing","get100kID","setParm","get100kSetForZone","setColumn","setRow","getLetter100kID","column","row","parm","colOrigin","charCodeAt","rowOrigin","colInt","rowInt","rollover","twoLetter","mgrsString","hunK","sb","testChar","substring","east100k","getEastingFromChar","north100k","getNorthingFromChar","getMinNorthing","remainder","sep","sepEasting","sepNorthing","accuracyBonus","sepEastingString","sepNorthingString","curCol","eastingValue","rewindMarker","curRow","northingValue","fromMGRS","mgrsStr","toMGRS","C00","C02","C04","C06","C08","C22","C44","C46","C48","C66","C68","C88","en","sphi","cphi","MAX_ITER","arg","pj_mlfn","pj_enfn","ml0","delta_lon","sin_phi","cos_phi","acos","al","als","cs","tq","ml","g","temp","h","asin","pj_inv_mlfn","tan_phi","ds","max","min","log1py","hypot","pp","B","cos_2B","h1","h2","arg_r","hr1","hr2","hr","arg_i","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","cosh_arg_i","cosh","hi1","hi","hi2","tmerc","cgb","cbg","utg","gtu","np","Qn","gatg","Zb","clens","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","asinhy","tmp","clens_cmplx","dependsOn","adjust_zone","etmerc","esinp","rc","phic0","ratexp","K","srat","DEL_TOL","gauss","sinc0","cosc0","R2","sinc","cosc","cosl","rho","ssfn_","phit","eccen","coslat0","sinlat0","cons","ms1","X0","cosX0","sinX0","sinlat","coslat","sinX","cosX","rh","dlon","ce","Chi","phy0","lambda0","sinPhy0","semiMajorAxis","invF","flattening","e2","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","TOL","isTypeA","typeAProjections","projectionName","cosph0","F","H","sinph0","J","gamma0","lamc","lam1","lam2","phi1","phi2","alpha_c","AB","no_off","no_rot","alp","gam","one_es","E","lam0","pi","singam","cosgam","sinrot","cosrot","rB","ArB","BrA","u_0","v_pole_n","v_pole_s","U","W","Qp","Sp","Tp","Vp","Up","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","ns","f0","rh1","theta","s45","s90","fi0","alfa","uq","u0","n0","s0","ro0","gfi","deltav","eps","ro","czech","fi1","e0","e3","e0fn","e1fn","e2fn","e3fn","mlfn","lam","nl","gN","tl","asq","cl","dd","ml1","imlfn","nl1","rl1","tl1","dl","dsq","adjust_lat","S_POLE","N_POLE","EQUIT","OBLIQ","qp","qsfnz","mmf","apa","authset","rq","xmf","ymf","sinb1","cosb1","coslam","sinlam","q","sinb","cosb","cCe","sCe","ab","cosz","sinz","authlat","P00","P01","P02","P10","P11","P20","APA","beta","sin_po","cos_po","t1","qs1","t2","qs2","t3","qs0","ns0","qs","phi1z","asinz","eccnts","sin_p14","cos_p14","infinity_dist","coslon","ksp","iqsfnz","dlat","el","bl","tanphi","mln","mlnp","ma","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_re","th_im","th_n_re","th_n_im","th_n_re1","th_n_im1","z_re","z_im","delta_x","delta_y","z_n_re","z_n_im","z_n_re1","z_n_im1","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","C_y","C_x","delta_theta","ml2","sinth","costh","gsq","msq","xx","yy","xys","c1","c2","c3","a1","m1","th1","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","GH","Hs","kp","cos_c","s2","s3","s4","s5","cosAz","Ee","sinpsi","FACE_ENUM","FRONT","RIGHT","BACK","LEFT","TOP","BOTTOM","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","face","one_minus_f","one_minus_f_squared","xy","area","sinlon","qsc_shift_lon_origin","qsc_fwd_equat_face_theta","lp","nu","cosmu","tannu","tantheta","invert_sign","xa","slon","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","poly3_der","newton_rapshon","f_df","max_err","iters","upd","azi","degrees","tilt","pn1","rp","pfact","omega","cg","sg","cw","sw","yt","ba","bm","bq","flip_axis","sweep","radius_g_1","radius_g","rone_es","radius_p","radius_p2","radius_p_inv2","shape","v_x","v_y","v_z","det","v_zp","Proj","sterea","stere","somerc","omerc","lcc","krovak","cass","laea","aea","gnom","cea","eqc","poly","nzmg","mill","sinu","moll","eqdc","vandg","aeqd","ortho","qsc","robin","geocent","tpers","geos","defaultDatum","common","includedProjections","click","nummeraanduidingId","nummeraanduiding_id","requestFormatter","responseFormatter","res","getBagInfo","dichtstbijzijnd_adres","_links","href","openbare_ruimte","_display","huisnummer","huisletter","huisnummer_toevoeging","postcode","woonplaats","getFullObjectData","buurtinfo","findOmgevingFeature","wijkinfo","stadsdeelinfo","omgevingsinfo","buurtnaam","display","buurtcode","vollcode","wijknaam","wijkcode","stadsdeelnaam","stadsdeelcode","getOmgevingInfo","pointQueryChain","transformCoords","feature","find","feat","properties","xyRD","search_id","filtered","results","landelijk_id","type_adres","global","factory","MarkerClusterGroup","FeatureGroup","maxClusterRadius","iconCreateFunction","clusterPane","pane","spiderfyOnEveryZoom","spiderfyOnMaxZoom","showCoverageOnHover","zoomToBoundsOnClick","singleMarkerMode","disableClusteringAtZoom","removeOutsideVisibleBounds","animate","animateAddingMarkers","spiderfyShapePositions","spiderfyDistanceMultiplier","spiderLegPolylineOptions","weight","chunkedLoading","chunkInterval","chunkDelay","chunkProgress","polygonOptions","_defaultIconCreateFunction","_featureGroup","featureGroup","addEventParent","_nonPointGroup","_inZoomAnimation","_needsClustering","_needsRemoving","_currentShownBounds","_queue","_childMarkerEventHandlers","_childMarkerDragStart","_childMarkerMoved","_childMarkerDragEnd","TRANSITION","_withAnimation","_noAnimation","_markerCluster","MarkerCluster","MarkerClusterNonAnimated","LayerGroup","addLayers","getLatLng","fire","_map","hasLayer","_unspiderfy","_addLayer","_maxZoom","_topClusterLevel","_recalculateBounds","_refreshClustersIcons","visibleLayer","currentZoom","_zoom","__parent","contains","_animationAddLayer","_animationAddLayerNonAnimated","removeLayer","removeLayers","_arraySplice","_latlng","_unspiderfyLayer","_removeLayer","clusterShow","layersArray","skipLayerAddEvent","fg","npg","chunked","originalArray","Date","getTime","process","elapsed","_extractNonGroupLayers","getChildCount","getAllChildMarkers","otherMarker","_recursivelyAddChildrenToMap","needsClustering","layersArray2","l2","clearLayers","_gridClusters","_gridUnclustered","_noanimationUnspiderfy","eachLayer","_generateInitialClusters","bounds","LatLngBounds","_bounds","context","needsRemoving","thisNeedsRemoving","getLayers","getLayer","stamp","anArray","_group","zoomToShowLayer","showMarker","_icon","once","spiderfy","zoomToBounds","getMaxZoom","_maxLat","projection","MAX_LATITUDE","newlatlng","_getExpandedVisibleBounds","_zoomEnd","_moveEnd","_spiderfierOnAdd","_bindEvents","_unbindEvents","_mapPane","_spiderfierOnRemove","_hideCoverage","getVisibleParent","vMarker","_removeFromGridUnclustered","gridUnclustered","getMinZoom","removeObject","project","__dragStart","_ignoreMove","isPopupOpen","_popup","isOpen","_moveChild","oldLatLng","dragStart","removeFromDistanceGrid","dontUpdateMap","gridClusters","cluster","_markers","_childCount","_boundsNeedUpdate","_cLatLng","addObject","_childClusters","_iconNeedsUpdate","_isOrIsParent","oel","parentNode","propagate","originalEvent","relatedTarget","listens","childCount","DivIcon","_zoomOrSpiderfy","_showCoverage","bottomCluster","focus","_shownPolygon","_spiderfied","Polygon","getConvexHull","_mergeSplitClusters","newBounds","_recursivelyRemoveChildrenFromMap","ceil","radius","radiusFn","DistanceGrid","markerPoint","_overrideMarkerIcon","closest","getNearObject","_addChild","newCluster","lastParent","_updateIcon","_enqueue","fn","_queueTimeout","_processQueue","clearTimeout","mapZoom","intersects","_animationStart","_animationZoomIn","_animationZoomOut","_mapBoundsInfinite","Browser","mobile","_checkBoundsMaxLat","pad","maxLat","getNorth","_northEast","getSouth","_southWest","_addToMap","group","include","previousZoomLevel","newZoomLevel","_recursively","startPos","_isSingleParent","clusterHide","_forceLayout","_recursivelyBecomeVisible","_recursivelyRestoreChildPositions","_animationEnd","_animationZoomOutSingle","me","_setPos","latLngToLayerPoint","_recursivelyAnimateChildrenInAndAddSelfToMap","setLatLng","falseFn","offsetWidth","markerClusterGroup","storageArray","ignoreDraggedMarker","fitBoundsOptions","childClusters","boundsZoom","getBoundsZoom","newClusters","setIcon","createIcon","_iconObj","createShadow","new1","isNotificationFromChild","_setClusterCenter","child","_resetBounds","latSum","lngSum","totalCount","childLatLng","_wLatLng","_backupLatlng","_recursivelyAnimateChildrenIn","cm","mapMinZoom","zoomLevel","nm","_restorePosition","previousBounds","exceptBounds","boundsToApplyTo","zoomLevelToStart","zoomLevelToStop","runAtEveryLevel","runAtBottomLevel","backup","cellSize","_cellSize","_sqCellSize","_grid","_objectPoint","_getCoord","cell","updateObject","eachObject","removed","dist","objectPoint","closestDistSq","_sqDist","p2","dx","dy","QuickHull","getDistant","cpt","vY","vX","findMostDistantPointFromBaseLine","baseLine","latLngs","maxD","maxPt","newPoints","maxPoint","buildConvexHull","convexHullBaseLines","minLat","maxLng","minLng","maxLatPt","minLatPt","maxLngPt","minLngPt","minPt","ch","childMarkers","points","_2PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_circleSpiralSwitchover","positions","_generatePointsSpiral","_generatePointsCircle","_animationSpiderfy","unspiderfy","zoomDetails","_animationUnspiderfy","centerPt","circumference","legLength","angleStep","angle","_round","separation","lengthFactor","_preSpiderfyLatlng","setZIndexOffset","_spiderLeg","legOptions","leg","newPos","layerPointToLatLng","Polyline","thisLayerLatLng","thisLayerPos","svg","Path","SVG","finalLegOpacity","legPath","_path","getTotalLength","strokeDasharray","strokeDashoffset","_latLngToNewLayerPoint","nonAnimatable","closePopup","stillThereChildCount","_unspiderfyWrapper","zoomAnimation","_unspiderfyZoomStart","touch","getRenderer","_unspiderfyZoomAnim","hasClass","refreshClusters","_layers","_flagParentsIconsNeedUpdate","_refreshSingleMarkerModeMarkers","refreshIconOptions","directlyRefreshClusters","EmitOnOff","module","cb","parkeervakken","formatWfsUrl","lyr","addData","tvm","selection","bringToFront","reloadWfs","combinePointAndFeatureInfo","URL","parkeerVakken","geoJson","defaultStyleParkeerVakken","onEachFeature","parkeerVakkenEach","hoverStyleParkeerVakken","defaultStyleSelection","hoverStyleSelection","selectionLayer","selectionEach","store","removeFeature","addFeature","ur","added","idx","getStore","onFeatures","multiselect"],"mappings":";;;EAAA,CAAC,UAASA,IAAT,EAAe;AACd;EAEA,MAAIA,KAAKC,KAAT,EAAgB;EACd;EACD;;EAED,MAAIC,UAAU;EACZC,kBAAc,qBAAqBH,IADvB;EAEZI,cAAU,YAAYJ,IAAZ,IAAoB,cAAcK,MAFhC;EAGZC,UAAM,gBAAgBN,IAAhB,IAAwB,UAAUA,IAAlC,IAA2C,YAAW;EAC1D,UAAI;EACF,YAAIO,IAAJ;EACA,eAAO,IAAP;EACD,OAHD,CAGE,OAAMC,CAAN,EAAS;EACT,eAAO,KAAP;EACD;EACF,KAP+C,EAHpC;EAWZC,cAAU,cAAcT,IAXZ;EAYZU,iBAAa,iBAAiBV;EAZlB,GAAd;;EAeA,MAAIE,QAAQQ,WAAZ,EAAyB;EACvB,QAAIC,cAAc,CAChB,oBADgB,EAEhB,qBAFgB,EAGhB,4BAHgB,EAIhB,qBAJgB,EAKhB,sBALgB,EAMhB,qBANgB,EAOhB,sBAPgB,EAQhB,uBARgB,EAShB,uBATgB,CAAlB;;EAYA,QAAIC,aAAa,SAAbA,UAAa,CAASC,GAAT,EAAc;EAC7B,aAAOA,OAAOC,SAASC,SAAT,CAAmBC,aAAnB,CAAiCH,GAAjC,CAAd;EACD,KAFD;;EAIA,QAAII,oBAAoBC,YAAYC,MAAZ,IAAsB,UAASN,GAAT,EAAc;EAC1D,aAAOA,OAAOF,YAAYS,OAAZ,CAAoBC,OAAON,SAAP,CAAiBO,QAAjB,CAA0BC,IAA1B,CAA+BV,GAA/B,CAApB,IAA2D,CAAC,CAA1E;EACD,KAFD;EAGD;;EAED,WAASW,aAAT,CAAuBC,IAAvB,EAA6B;EAC3B,QAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;EAC5BA,aAAOC,OAAOD,IAAP,CAAP;EACD;EACD,QAAI,6BAA6BE,IAA7B,CAAkCF,IAAlC,CAAJ,EAA6C;EAC3C,YAAM,IAAIG,SAAJ,CAAc,wCAAd,CAAN;EACD;EACD,WAAOH,KAAKI,WAAL,EAAP;EACD;;EAED,WAASC,cAAT,CAAwBC,KAAxB,EAA+B;EAC7B,QAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;EAC7BA,cAAQL,OAAOK,KAAP,CAAR;EACD;EACD,WAAOA,KAAP;EACD;;EAED;EACA,WAASC,WAAT,CAAqBC,KAArB,EAA4B;EAC1B,QAAIC,WAAW;EACbC,YAAM,gBAAW;EACf,YAAIJ,QAAQE,MAAMG,KAAN,EAAZ;EACA,eAAO,EAACC,MAAMN,UAAUO,SAAjB,EAA4BP,OAAOA,KAAnC,EAAP;EACD;EAJY,KAAf;;EAOA,QAAI7B,QAAQE,QAAZ,EAAsB;EACpB8B,eAAS7B,OAAO6B,QAAhB,IAA4B,YAAW;EACrC,eAAOA,QAAP;EACD,OAFD;EAGD;;EAED,WAAOA,QAAP;EACD;;EAED,WAASK,OAAT,CAAiBC,OAAjB,EAA0B;EACxB,SAAKC,GAAL,GAAW,EAAX;;EAEA,QAAID,mBAAmBD,OAAvB,EAAgC;EAC9BC,cAAQE,OAAR,CAAgB,UAASX,KAAT,EAAgBN,IAAhB,EAAsB;EACpC,aAAKkB,MAAL,CAAYlB,IAAZ,EAAkBM,KAAlB;EACD,OAFD,EAEG,IAFH;EAGD,KAJD,MAIO,IAAIa,MAAMC,OAAN,CAAcL,OAAd,CAAJ,EAA4B;EACjCA,cAAQE,OAAR,CAAgB,UAASI,MAAT,EAAiB;EAC/B,aAAKH,MAAL,CAAYG,OAAO,CAAP,CAAZ,EAAuBA,OAAO,CAAP,CAAvB;EACD,OAFD,EAEG,IAFH;EAGD,KAJM,MAIA,IAAIN,OAAJ,EAAa;EAClBnB,aAAO0B,mBAAP,CAA2BP,OAA3B,EAAoCE,OAApC,CAA4C,UAASjB,IAAT,EAAe;EACzD,aAAKkB,MAAL,CAAYlB,IAAZ,EAAkBe,QAAQf,IAAR,CAAlB;EACD,OAFD,EAEG,IAFH;EAGD;EACF;;EAEDc,UAAQxB,SAAR,CAAkB4B,MAAlB,GAA2B,UAASlB,IAAT,EAAeM,KAAf,EAAsB;EAC/CN,WAAOD,cAAcC,IAAd,CAAP;EACAM,YAAQD,eAAeC,KAAf,CAAR;EACA,QAAIiB,WAAW,KAAKP,GAAL,CAAShB,IAAT,CAAf;EACA,SAAKgB,GAAL,CAAShB,IAAT,IAAiBuB,WAAWA,WAAS,GAAT,GAAajB,KAAxB,GAAgCA,KAAjD;EACD,GALD;;EAOAQ,UAAQxB,SAAR,CAAkB,QAAlB,IAA8B,UAASU,IAAT,EAAe;EAC3C,WAAO,KAAKgB,GAAL,CAASjB,cAAcC,IAAd,CAAT,CAAP;EACD,GAFD;;EAIAc,UAAQxB,SAAR,CAAkBkC,GAAlB,GAAwB,UAASxB,IAAT,EAAe;EACrCA,WAAOD,cAAcC,IAAd,CAAP;EACA,WAAO,KAAKyB,GAAL,CAASzB,IAAT,IAAiB,KAAKgB,GAAL,CAAShB,IAAT,CAAjB,GAAkC,IAAzC;EACD,GAHD;;EAKAc,UAAQxB,SAAR,CAAkBmC,GAAlB,GAAwB,UAASzB,IAAT,EAAe;EACrC,WAAO,KAAKgB,GAAL,CAASU,cAAT,CAAwB3B,cAAcC,IAAd,CAAxB,CAAP;EACD,GAFD;;EAIAc,UAAQxB,SAAR,CAAkBqC,GAAlB,GAAwB,UAAS3B,IAAT,EAAeM,KAAf,EAAsB;EAC5C,SAAKU,GAAL,CAASjB,cAAcC,IAAd,CAAT,IAAgCK,eAAeC,KAAf,CAAhC;EACD,GAFD;;EAIAQ,UAAQxB,SAAR,CAAkB2B,OAAlB,GAA4B,UAASW,QAAT,EAAmBC,OAAnB,EAA4B;EACtD,SAAK,IAAI7B,IAAT,IAAiB,KAAKgB,GAAtB,EAA2B;EACzB,UAAI,KAAKA,GAAL,CAASU,cAAT,CAAwB1B,IAAxB,CAAJ,EAAmC;EACjC4B,iBAAS9B,IAAT,CAAc+B,OAAd,EAAuB,KAAKb,GAAL,CAAShB,IAAT,CAAvB,EAAuCA,IAAvC,EAA6C,IAA7C;EACD;EACF;EACF,GAND;;EAQAc,UAAQxB,SAAR,CAAkBwC,IAAlB,GAAyB,YAAW;EAClC,QAAItB,QAAQ,EAAZ;EACA,SAAKS,OAAL,CAAa,UAASX,KAAT,EAAgBN,IAAhB,EAAsB;EAAEQ,YAAMuB,IAAN,CAAW/B,IAAX;EAAkB,KAAvD;EACA,WAAOO,YAAYC,KAAZ,CAAP;EACD,GAJD;;EAMAM,UAAQxB,SAAR,CAAkB0C,MAAlB,GAA2B,YAAW;EACpC,QAAIxB,QAAQ,EAAZ;EACA,SAAKS,OAAL,CAAa,UAASX,KAAT,EAAgB;EAAEE,YAAMuB,IAAN,CAAWzB,KAAX;EAAmB,KAAlD;EACA,WAAOC,YAAYC,KAAZ,CAAP;EACD,GAJD;;EAMAM,UAAQxB,SAAR,CAAkB2C,OAAlB,GAA4B,YAAW;EACrC,QAAIzB,QAAQ,EAAZ;EACA,SAAKS,OAAL,CAAa,UAASX,KAAT,EAAgBN,IAAhB,EAAsB;EAAEQ,YAAMuB,IAAN,CAAW,CAAC/B,IAAD,EAAOM,KAAP,CAAX;EAA2B,KAAhE;EACA,WAAOC,YAAYC,KAAZ,CAAP;EACD,GAJD;;EAMA,MAAI/B,QAAQE,QAAZ,EAAsB;EACpBmC,YAAQxB,SAAR,CAAkBV,OAAO6B,QAAzB,IAAqCK,QAAQxB,SAAR,CAAkB2C,OAAvD;EACD;;EAED,WAASC,QAAT,CAAkBC,IAAlB,EAAwB;EACtB,QAAIA,KAAKC,QAAT,EAAmB;EACjB,aAAOC,QAAQC,MAAR,CAAe,IAAInC,SAAJ,CAAc,cAAd,CAAf,CAAP;EACD;EACDgC,SAAKC,QAAL,GAAgB,IAAhB;EACD;;EAED,WAASG,eAAT,CAAyBC,MAAzB,EAAiC;EAC/B,WAAO,IAAIH,OAAJ,CAAY,UAASI,OAAT,EAAkBH,MAAlB,EAA0B;EAC3CE,aAAOE,MAAP,GAAgB,YAAW;EACzBD,gBAAQD,OAAOG,MAAf;EACD,OAFD;EAGAH,aAAOI,OAAP,GAAiB,YAAW;EAC1BN,eAAOE,OAAOK,KAAd;EACD,OAFD;EAGD,KAPM,CAAP;EAQD;;EAED,WAASC,qBAAT,CAA+BjE,IAA/B,EAAqC;EACnC,QAAI2D,SAAS,IAAIO,UAAJ,EAAb;EACA,QAAIC,UAAUT,gBAAgBC,MAAhB,CAAd;EACAA,WAAOS,iBAAP,CAAyBpE,IAAzB;EACA,WAAOmE,OAAP;EACD;;EAED,WAASE,cAAT,CAAwBrE,IAAxB,EAA8B;EAC5B,QAAI2D,SAAS,IAAIO,UAAJ,EAAb;EACA,QAAIC,UAAUT,gBAAgBC,MAAhB,CAAd;EACAA,WAAOW,UAAP,CAAkBtE,IAAlB;EACA,WAAOmE,OAAP;EACD;;EAED,WAASI,qBAAT,CAA+BC,GAA/B,EAAoC;EAClC,QAAIC,OAAO,IAAIC,UAAJ,CAAeF,GAAf,CAAX;EACA,QAAIG,QAAQ,IAAIrC,KAAJ,CAAUmC,KAAKG,MAAf,CAAZ;;EAEA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,KAAKG,MAAzB,EAAiCC,GAAjC,EAAsC;EACpCF,YAAME,CAAN,IAAWzD,OAAO0D,YAAP,CAAoBL,KAAKI,CAAL,CAApB,CAAX;EACD;EACD,WAAOF,MAAMI,IAAN,CAAW,EAAX,CAAP;EACD;;EAED,WAASC,WAAT,CAAqBR,GAArB,EAA0B;EACxB,QAAIA,IAAIS,KAAR,EAAe;EACb,aAAOT,IAAIS,KAAJ,CAAU,CAAV,CAAP;EACD,KAFD,MAEO;EACL,UAAIR,OAAO,IAAIC,UAAJ,CAAeF,IAAIU,UAAnB,CAAX;EACAT,WAAK3B,GAAL,CAAS,IAAI4B,UAAJ,CAAeF,GAAf,CAAT;EACA,aAAOC,KAAKU,MAAZ;EACD;EACF;;EAED,WAASC,IAAT,GAAgB;EACd,SAAK7B,QAAL,GAAgB,KAAhB;;EAEA,SAAK8B,SAAL,GAAiB,UAAS/B,IAAT,EAAe;EAC9B,WAAKgC,SAAL,GAAiBhC,IAAjB;EACA,UAAI,CAACA,IAAL,EAAW;EACT,aAAKiC,SAAL,GAAiB,EAAjB;EACD,OAFD,MAEO,IAAI,OAAOjC,IAAP,KAAgB,QAApB,EAA8B;EACnC,aAAKiC,SAAL,GAAiBjC,IAAjB;EACD,OAFM,MAEA,IAAI1D,QAAQI,IAAR,IAAgBC,KAAKQ,SAAL,CAAeC,aAAf,CAA6B4C,IAA7B,CAApB,EAAwD;EAC7D,aAAKkC,SAAL,GAAiBlC,IAAjB;EACD,OAFM,MAEA,IAAI1D,QAAQO,QAAR,IAAoBsF,SAAShF,SAAT,CAAmBC,aAAnB,CAAiC4C,IAAjC,CAAxB,EAAgE;EACrE,aAAKoC,aAAL,GAAqBpC,IAArB;EACD,OAFM,MAEA,IAAI1D,QAAQC,YAAR,IAAwB8F,gBAAgBlF,SAAhB,CAA0BC,aAA1B,CAAwC4C,IAAxC,CAA5B,EAA2E;EAChF,aAAKiC,SAAL,GAAiBjC,KAAKtC,QAAL,EAAjB;EACD,OAFM,MAEA,IAAIpB,QAAQQ,WAAR,IAAuBR,QAAQI,IAA/B,IAAuCM,WAAWgD,IAAX,CAA3C,EAA6D;EAClE,aAAKsC,gBAAL,GAAwBZ,YAAY1B,KAAK6B,MAAjB,CAAxB;EACA;EACA,aAAKG,SAAL,GAAiB,IAAIrF,IAAJ,CAAS,CAAC,KAAK2F,gBAAN,CAAT,CAAjB;EACD,OAJM,MAIA,IAAIhG,QAAQQ,WAAR,KAAwBQ,YAAYH,SAAZ,CAAsBC,aAAtB,CAAoC4C,IAApC,KAA6C3C,kBAAkB2C,IAAlB,CAArE,CAAJ,EAAmG;EACxG,aAAKsC,gBAAL,GAAwBZ,YAAY1B,IAAZ,CAAxB;EACD,OAFM,MAEA;EACL,cAAM,IAAIuC,KAAJ,CAAU,2BAAV,CAAN;EACD;;EAED,UAAI,CAAC,KAAK3D,OAAL,CAAaS,GAAb,CAAiB,cAAjB,CAAL,EAAuC;EACrC,YAAI,OAAOW,IAAP,KAAgB,QAApB,EAA8B;EAC5B,eAAKpB,OAAL,CAAaY,GAAb,CAAiB,cAAjB,EAAiC,0BAAjC;EACD,SAFD,MAEO,IAAI,KAAK0C,SAAL,IAAkB,KAAKA,SAAL,CAAeM,IAArC,EAA2C;EAChD,eAAK5D,OAAL,CAAaY,GAAb,CAAiB,cAAjB,EAAiC,KAAK0C,SAAL,CAAeM,IAAhD;EACD,SAFM,MAEA,IAAIlG,QAAQC,YAAR,IAAwB8F,gBAAgBlF,SAAhB,CAA0BC,aAA1B,CAAwC4C,IAAxC,CAA5B,EAA2E;EAChF,eAAKpB,OAAL,CAAaY,GAAb,CAAiB,cAAjB,EAAiC,iDAAjC;EACD;EACF;EACF,KA/BD;;EAiCA,QAAIlD,QAAQI,IAAZ,EAAkB;EAChB,WAAKA,IAAL,GAAY,YAAW;EACrB,YAAI+F,WAAW1C,SAAS,IAAT,CAAf;EACA,YAAI0C,QAAJ,EAAc;EACZ,iBAAOA,QAAP;EACD;;EAED,YAAI,KAAKP,SAAT,EAAoB;EAClB,iBAAOhC,QAAQI,OAAR,CAAgB,KAAK4B,SAArB,CAAP;EACD,SAFD,MAEO,IAAI,KAAKI,gBAAT,EAA2B;EAChC,iBAAOpC,QAAQI,OAAR,CAAgB,IAAI3D,IAAJ,CAAS,CAAC,KAAK2F,gBAAN,CAAT,CAAhB,CAAP;EACD,SAFM,MAEA,IAAI,KAAKF,aAAT,EAAwB;EAC7B,gBAAM,IAAIG,KAAJ,CAAU,sCAAV,CAAN;EACD,SAFM,MAEA;EACL,iBAAOrC,QAAQI,OAAR,CAAgB,IAAI3D,IAAJ,CAAS,CAAC,KAAKsF,SAAN,CAAT,CAAhB,CAAP;EACD;EACF,OAfD;;EAiBA,WAAKnF,WAAL,GAAmB,YAAW;EAC5B,YAAI,KAAKwF,gBAAT,EAA2B;EACzB,iBAAOvC,SAAS,IAAT,KAAkBG,QAAQI,OAAR,CAAgB,KAAKgC,gBAArB,CAAzB;EACD,SAFD,MAEO;EACL,iBAAO,KAAK5F,IAAL,GAAYgG,IAAZ,CAAiB/B,qBAAjB,CAAP;EACD;EACF,OAND;EAOD;;EAED,SAAKgC,IAAL,GAAY,YAAW;EACrB,UAAIF,WAAW1C,SAAS,IAAT,CAAf;EACA,UAAI0C,QAAJ,EAAc;EACZ,eAAOA,QAAP;EACD;;EAED,UAAI,KAAKP,SAAT,EAAoB;EAClB,eAAOnB,eAAe,KAAKmB,SAApB,CAAP;EACD,OAFD,MAEO,IAAI,KAAKI,gBAAT,EAA2B;EAChC,eAAOpC,QAAQI,OAAR,CAAgBW,sBAAsB,KAAKqB,gBAA3B,CAAhB,CAAP;EACD,OAFM,MAEA,IAAI,KAAKF,aAAT,EAAwB;EAC7B,cAAM,IAAIG,KAAJ,CAAU,sCAAV,CAAN;EACD,OAFM,MAEA;EACL,eAAOrC,QAAQI,OAAR,CAAgB,KAAK2B,SAArB,CAAP;EACD;EACF,KAfD;;EAiBA,QAAI3F,QAAQO,QAAZ,EAAsB;EACpB,WAAKA,QAAL,GAAgB,YAAW;EACzB,eAAO,KAAK8F,IAAL,GAAYD,IAAZ,CAAiBE,MAAjB,CAAP;EACD,OAFD;EAGD;;EAED,SAAKC,IAAL,GAAY,YAAW;EACrB,aAAO,KAAKF,IAAL,GAAYD,IAAZ,CAAiBI,KAAKC,KAAtB,CAAP;EACD,KAFD;;EAIA,WAAO,IAAP;EACD;;EAED;EACA,MAAIC,UAAU,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0B,SAA1B,EAAqC,MAArC,EAA6C,KAA7C,CAAd;;EAEA,WAASC,eAAT,CAAyBC,MAAzB,EAAiC;EAC/B,QAAIC,UAAUD,OAAOE,WAAP,EAAd;EACA,WAAQJ,QAAQxF,OAAR,CAAgB2F,OAAhB,IAA2B,CAAC,CAA7B,GAAkCA,OAAlC,GAA4CD,MAAnD;EACD;;EAED,WAASG,OAAT,CAAiBC,KAAjB,EAAwBC,OAAxB,EAAiC;EAC/BA,cAAUA,WAAW,EAArB;EACA,QAAIvD,OAAOuD,QAAQvD,IAAnB;;EAEA,QAAIsD,iBAAiBD,OAArB,EAA8B;EAC5B,UAAIC,MAAMrD,QAAV,EAAoB;EAClB,cAAM,IAAIjC,SAAJ,CAAc,cAAd,CAAN;EACD;EACD,WAAKwF,GAAL,GAAWF,MAAME,GAAjB;EACA,WAAKC,WAAL,GAAmBH,MAAMG,WAAzB;EACA,UAAI,CAACF,QAAQ3E,OAAb,EAAsB;EACpB,aAAKA,OAAL,GAAe,IAAID,OAAJ,CAAY2E,MAAM1E,OAAlB,CAAf;EACD;EACD,WAAKsE,MAAL,GAAcI,MAAMJ,MAApB;EACA,WAAKQ,IAAL,GAAYJ,MAAMI,IAAlB;EACA,UAAI,CAAC1D,IAAD,IAASsD,MAAMtB,SAAN,IAAmB,IAAhC,EAAsC;EACpChC,eAAOsD,MAAMtB,SAAb;EACAsB,cAAMrD,QAAN,GAAiB,IAAjB;EACD;EACF,KAfD,MAeO;EACL,WAAKuD,GAAL,GAAW1F,OAAOwF,KAAP,CAAX;EACD;;EAED,SAAKG,WAAL,GAAmBF,QAAQE,WAAR,IAAuB,KAAKA,WAA5B,IAA2C,MAA9D;EACA,QAAIF,QAAQ3E,OAAR,IAAmB,CAAC,KAAKA,OAA7B,EAAsC;EACpC,WAAKA,OAAL,GAAe,IAAID,OAAJ,CAAY4E,QAAQ3E,OAApB,CAAf;EACD;EACD,SAAKsE,MAAL,GAAcD,gBAAgBM,QAAQL,MAAR,IAAkB,KAAKA,MAAvB,IAAiC,KAAjD,CAAd;EACA,SAAKQ,IAAL,GAAYH,QAAQG,IAAR,IAAgB,KAAKA,IAArB,IAA6B,IAAzC;EACA,SAAKC,QAAL,GAAgB,IAAhB;;EAEA,QAAI,CAAC,KAAKT,MAAL,KAAgB,KAAhB,IAAyB,KAAKA,MAAL,KAAgB,MAA1C,KAAqDlD,IAAzD,EAA+D;EAC7D,YAAM,IAAIhC,SAAJ,CAAc,2CAAd,CAAN;EACD;EACD,SAAK+D,SAAL,CAAe/B,IAAf;EACD;;EAEDqD,UAAQlG,SAAR,CAAkByG,KAAlB,GAA0B,YAAW;EACnC,WAAO,IAAIP,OAAJ,CAAY,IAAZ,EAAkB,EAAErD,MAAM,KAAKgC,SAAb,EAAlB,CAAP;EACD,GAFD;;EAIA,WAASY,MAAT,CAAgB5C,IAAhB,EAAsB;EACpB,QAAI6D,OAAO,IAAI1B,QAAJ,EAAX;EACAnC,SAAK8D,IAAL,GAAYC,KAAZ,CAAkB,GAAlB,EAAuBjF,OAAvB,CAA+B,UAASkF,KAAT,EAAgB;EAC7C,UAAIA,KAAJ,EAAW;EACT,YAAID,QAAQC,MAAMD,KAAN,CAAY,GAAZ,CAAZ;EACA,YAAIlG,OAAOkG,MAAMvF,KAAN,GAAcyF,OAAd,CAAsB,KAAtB,EAA6B,GAA7B,CAAX;EACA,YAAI9F,QAAQ4F,MAAMtC,IAAN,CAAW,GAAX,EAAgBwC,OAAhB,CAAwB,KAAxB,EAA+B,GAA/B,CAAZ;EACAJ,aAAK9E,MAAL,CAAYmF,mBAAmBrG,IAAnB,CAAZ,EAAsCqG,mBAAmB/F,KAAnB,CAAtC;EACD;EACF,KAPD;EAQA,WAAO0F,IAAP;EACD;;EAED,WAASM,YAAT,CAAsBC,UAAtB,EAAkC;EAChC,QAAIxF,UAAU,IAAID,OAAJ,EAAd;EACA;EACA;EACA,QAAI0F,sBAAsBD,WAAWH,OAAX,CAAmB,cAAnB,EAAmC,GAAnC,CAA1B;EACAI,wBAAoBN,KAApB,CAA0B,OAA1B,EAAmCjF,OAAnC,CAA2C,UAASwF,IAAT,EAAe;EACxD,UAAIC,QAAQD,KAAKP,KAAL,CAAW,GAAX,CAAZ;EACA,UAAIS,MAAMD,MAAM/F,KAAN,GAAcsF,IAAd,EAAV;EACA,UAAIU,GAAJ,EAAS;EACP,YAAIrG,QAAQoG,MAAM9C,IAAN,CAAW,GAAX,EAAgBqC,IAAhB,EAAZ;EACAlF,gBAAQG,MAAR,CAAeyF,GAAf,EAAoBrG,KAApB;EACD;EACF,KAPD;EAQA,WAAOS,OAAP;EACD;;EAEDkD,OAAKnE,IAAL,CAAU0F,QAAQlG,SAAlB;;EAEA,WAASsH,QAAT,CAAkBC,QAAlB,EAA4BnB,OAA5B,EAAqC;EACnC,QAAI,CAACA,OAAL,EAAc;EACZA,gBAAU,EAAV;EACD;;EAED,SAAKf,IAAL,GAAY,SAAZ;EACA,SAAKmC,MAAL,GAAcpB,QAAQoB,MAAR,KAAmBjG,SAAnB,GAA+B,GAA/B,GAAqC6E,QAAQoB,MAA3D;EACA,SAAKC,EAAL,GAAU,KAAKD,MAAL,IAAe,GAAf,IAAsB,KAAKA,MAAL,GAAc,GAA9C;EACA,SAAKE,UAAL,GAAkB,gBAAgBtB,OAAhB,GAA0BA,QAAQsB,UAAlC,GAA+C,IAAjE;EACA,SAAKjG,OAAL,GAAe,IAAID,OAAJ,CAAY4E,QAAQ3E,OAApB,CAAf;EACA,SAAK4E,GAAL,GAAWD,QAAQC,GAAR,IAAe,EAA1B;EACA,SAAKzB,SAAL,CAAe2C,QAAf;EACD;;EAED5C,OAAKnE,IAAL,CAAU8G,SAAStH,SAAnB;;EAEAsH,WAAStH,SAAT,CAAmByG,KAAnB,GAA2B,YAAW;EACpC,WAAO,IAAIa,QAAJ,CAAa,KAAKzC,SAAlB,EAA6B;EAClC2C,cAAQ,KAAKA,MADqB;EAElCE,kBAAY,KAAKA,UAFiB;EAGlCjG,eAAS,IAAID,OAAJ,CAAY,KAAKC,OAAjB,CAHyB;EAIlC4E,WAAK,KAAKA;EAJwB,KAA7B,CAAP;EAMD,GAPD;;EASAiB,WAAS/D,KAAT,GAAiB,YAAW;EAC1B,QAAIoE,WAAW,IAAIL,QAAJ,CAAa,IAAb,EAAmB,EAACE,QAAQ,CAAT,EAAYE,YAAY,EAAxB,EAAnB,CAAf;EACAC,aAAStC,IAAT,GAAgB,OAAhB;EACA,WAAOsC,QAAP;EACD,GAJD;;EAMA,MAAIC,mBAAmB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,CAAvB;;EAEAN,WAASO,QAAT,GAAoB,UAASxB,GAAT,EAAcmB,MAAd,EAAsB;EACxC,QAAII,iBAAiBvH,OAAjB,CAAyBmH,MAAzB,MAAqC,CAAC,CAA1C,EAA6C;EAC3C,YAAM,IAAIM,UAAJ,CAAe,qBAAf,CAAN;EACD;;EAED,WAAO,IAAIR,QAAJ,CAAa,IAAb,EAAmB,EAACE,QAAQA,MAAT,EAAiB/F,SAAS,EAACsG,UAAU1B,GAAX,EAA1B,EAAnB,CAAP;EACD,GAND;;EAQApH,OAAKuC,OAAL,GAAeA,OAAf;EACAvC,OAAKiH,OAAL,GAAeA,OAAf;EACAjH,OAAKqI,QAAL,GAAgBA,QAAhB;;EAEArI,OAAKC,KAAL,GAAa,UAASiH,KAAT,EAAgB6B,IAAhB,EAAsB;EACjC,WAAO,IAAIjF,OAAJ,CAAY,UAASI,OAAT,EAAkBH,MAAlB,EAA0B;EAC3C,UAAIiF,UAAU,IAAI/B,OAAJ,CAAYC,KAAZ,EAAmB6B,IAAnB,CAAd;EACA,UAAIE,MAAM,IAAIC,cAAJ,EAAV;;EAEAD,UAAI9E,MAAJ,GAAa,YAAW;EACtB,YAAIgD,UAAU;EACZoB,kBAAQU,IAAIV,MADA;EAEZE,sBAAYQ,IAAIR,UAFJ;EAGZjG,mBAASuF,aAAakB,IAAIE,qBAAJ,MAA+B,EAA5C;EAHG,SAAd;EAKAhC,gBAAQC,GAAR,GAAc,iBAAiB6B,GAAjB,GAAuBA,IAAIG,WAA3B,GAAyCjC,QAAQ3E,OAAR,CAAgBS,GAAhB,CAAoB,eAApB,CAAvD;EACA,YAAIW,OAAO,cAAcqF,GAAd,GAAoBA,IAAIP,QAAxB,GAAmCO,IAAII,YAAlD;EACAnF,gBAAQ,IAAImE,QAAJ,CAAazE,IAAb,EAAmBuD,OAAnB,CAAR;EACD,OATD;;EAWA8B,UAAI5E,OAAJ,GAAc,YAAW;EACvBN,eAAO,IAAInC,SAAJ,CAAc,wBAAd,CAAP;EACD,OAFD;;EAIAqH,UAAIK,SAAJ,GAAgB,YAAW;EACzBvF,eAAO,IAAInC,SAAJ,CAAc,wBAAd,CAAP;EACD,OAFD;;EAIAqH,UAAIM,IAAJ,CAASP,QAAQlC,MAAjB,EAAyBkC,QAAQ5B,GAAjC,EAAsC,IAAtC;;EAEA,UAAI4B,QAAQ3B,WAAR,KAAwB,SAA5B,EAAuC;EACrC4B,YAAIO,eAAJ,GAAsB,IAAtB;EACD,OAFD,MAEO,IAAIR,QAAQ3B,WAAR,KAAwB,MAA5B,EAAoC;EACzC4B,YAAIO,eAAJ,GAAsB,KAAtB;EACD;;EAED,UAAI,kBAAkBP,GAAlB,IAAyB/I,QAAQI,IAArC,EAA2C;EACzC2I,YAAIQ,YAAJ,GAAmB,MAAnB;EACD;;EAEDT,cAAQxG,OAAR,CAAgBE,OAAhB,CAAwB,UAASX,KAAT,EAAgBN,IAAhB,EAAsB;EAC5CwH,YAAIS,gBAAJ,CAAqBjI,IAArB,EAA2BM,KAA3B;EACD,OAFD;;EAIAkH,UAAIU,IAAJ,CAAS,OAAOX,QAAQpD,SAAf,KAA6B,WAA7B,GAA2C,IAA3C,GAAkDoD,QAAQpD,SAAnE;EACD,KAxCM,CAAP;EAyCD,GA1CD;EA2CA5F,OAAKC,KAAL,CAAW2J,QAAX,GAAsB,IAAtB;EACD,CAjdD,EAidG,OAAO5J,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GAAqC6J,SAjdxC;;ECAA,IAAMzD,OAAO,SAAPA,IAAO;EAAA,SAAM,EAAD,CAAK9E,QAAL,CAAcC,IAAd,CAAmBuI,CAAnB,EAAsBvE,KAAtB,CAA4B,CAA5B,EAA+B,CAAC,CAAhC,CAAL;EAAA,CAAb;;EAEAa,KAAK2D,WAAL,GAAmB;EAAA,SAAK3D,KAAK0D,CAAL,MAAY,WAAjB;EAAA,CAAnB;EACA1D,KAAK4D,SAAL,GAAiB;EAAA,SAAK5D,KAAK0D,CAAL,MAAY,WAAjB;EAAA,CAAjB;EACA1D,KAAK6D,MAAL,GAAc;EAAA,SAAK7D,KAAK0D,CAAL,MAAY,MAAjB;EAAA,CAAd;EACA1D,KAAK8D,QAAL,GAAgB;EAAA,SAAK9D,KAAK0D,CAAL,MAAY,QAAjB;EAAA,CAAhB;EACA1D,KAAK+D,SAAL,GAAiB;EAAA,SAAK/D,KAAK0D,CAAL,MAAY,SAAjB;EAAA,CAAjB;EACA1D,KAAKgE,QAAL,GAAgB;EAAA,SAAKhE,KAAK0D,CAAL,MAAY,QAAjB;EAAA,CAAhB;EACA1D,KAAKvD,OAAL,GAAe;EAAA,SAAKuD,KAAK0D,CAAL,MAAY,OAAjB;EAAA,CAAf;EACA1D,KAAKiE,QAAL,GAAgB;EAAA,SAAKjE,KAAK0D,CAAL,MAAY,QAAjB;EAAA,CAAhB;EACA1D,KAAKkE,UAAL,GAAkB;EAAA,SAAKlE,KAAK0D,CAAL,MAAY,UAAjB;EAAA,CAAlB;EACA1D,KAAKmE,QAAL,GAAgB;EAAA,SAAKnE,KAAK0D,CAAL,MAAY,QAAjB;EAAA,CAAhB;EACA1D,KAAKoE,MAAL,GAAc;EAAA,SAAKpE,KAAK0D,CAAL,MAAY,MAAjB;EAAA,CAAd;EACA1D,KAAKqE,KAAL,GAAa;EAAA,SAAKrE,KAAK0D,CAAL,MAAY,KAAjB;EAAA,CAAb;EACA1D,KAAKsE,KAAL,GAAa;EAAA,SAAKtE,KAAK0D,CAAL,MAAY,KAAjB;EAAA,CAAb;EACA1D,KAAKuE,SAAL,GAAiB;EAAA,SAAKvE,KAAK0D,CAAL,MAAY,SAAjB;EAAA,CAAjB;EACA1D,KAAKwE,SAAL,GAAiB;EAAA,SAAKxE,KAAK0D,CAAL,MAAY,SAAjB;EAAA,CAAjB;EACA1D,KAAKyE,QAAL,GAAgB;EAAA,SAAKzE,KAAK0D,CAAL,MAAY,QAAjB;EAAA,CAAhB;EACA1D,KAAK0E,OAAL,GAAe;EAAA,SAAK1E,KAAK0D,CAAL,MAAY,OAAjB;EAAA,CAAf;EACA1D,KAAK2E,SAAL,GAAiB;EAAA,SAAK3E,KAAK0D,CAAL,MAAY,SAAjB;EAAA,CAAjB;;EAEA1D,KAAKgE,QAAL,CAAcY,MAAd,GAAuB;EAAA,SAAKC,OAAOC,QAAP,CAAgBpB,CAAhB,CAAL;EAAA,CAAvB;;EAEA1D,KAAK+E,KAAL,GAAa;EAAA,SAAKrB,MAAMA,CAAX;EAAA,CAAb;;EAEA1D,KAAKiE,QAAL,CAAce,IAAd,GAAqB;EAAA,SAAKhF,KAAKiE,QAAL,CAAcP,CAAd,KAAoBuB,QAAQC,cAAR,CAAuBxB,CAAvB,MAA8B,IAAvD;EAAA,CAArB;EACA1D,KAAKiE,QAAL,CAAckB,KAAd,GAAsB;EAAA,SAAKnF,KAAKiE,QAAL,CAAcP,CAAd,KAAoB,CAAC,IAAD,EAAOuB,QAAQC,cAAR,CAAuB,EAAvB,CAAP,EAAmCE,QAAnC,CAA4CH,QAAQC,cAAR,CAAuBxB,CAAvB,CAA5C,CAAzB;EAAA,CAAtB;EACA1D,KAAKqF,WAAL,GAAmB;EAAA,SAAK3B,MAAMzI,OAAOyI,CAAP,CAAX;EAAA,CAAnB;EACA1D,KAAKsF,MAAL,GAAc;EAAA,SAAK,CAAC,SAAD,EAAY,MAAZ,EAAoB,QAApB,EAA8B,QAA9B,EAAwCF,QAAxC,CAAiDpF,KAAK0D,CAAL,CAAjD,CAAL;EAAA,CAAd;;EAEA1D,KAAKvD,OAAL,CAAa8I,SAAb,GAAyB;EAAA,SAAKvF,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAKgE,QAAL,CAAc5J,CAAd,CAAL;EAAA,GAAR,CAAxB;EAAA,CAAzB;EACA4F,KAAKvD,OAAL,CAAagJ,SAAb,GAAyB;EAAA,SAAKzF,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAK8D,QAAL,CAAc1J,CAAd,CAAL;EAAA,GAAR,CAAxB;EAAA,CAAzB;EACA4F,KAAKvD,OAAL,CAAaiJ,UAAb,GAA0B;EAAA,SAAK1F,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAK+D,SAAL,CAAe3J,CAAf,CAAL;EAAA,GAAR,CAAxB;EAAA,CAA1B;EACA4F,KAAKvD,OAAL,CAAakJ,WAAb,GAA2B;EAAA,SAAK3F,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAKkE,UAAL,CAAgB9J,CAAhB,CAAL;EAAA,GAAR,CAAxB;EAAA,CAA3B;EACA4F,KAAKvD,OAAL,CAAamJ,SAAb,GAAyB;EAAA,SAAK5F,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAKiE,QAAL,CAAc7J,CAAd,CAAL;EAAA,GAAR,CAAxB;EAAA,CAAzB;EACA4F,KAAKvD,OAAL,CAAaoJ,QAAb,GAAwB;EAAA,SAAK7F,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAKvD,OAAL,CAAarC,CAAb,CAAL;EAAA,GAAR,CAAxB;EAAA,CAAxB;EACA4F,KAAKvD,OAAL,CAAaqJ,YAAb,GAA4B;EAAA,SAAK9F,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAKqF,WAAL,CAAiBjL,CAAjB,CAAL;EAAA,GAAR,CAAxB;EAAA,CAA5B;EACA4F,KAAKvD,OAAL,CAAasJ,QAAb,GAAwB;EAAA,SAAK/F,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE8B,KAAF,CAAQ;EAAA,WAAKxF,KAAKsF,MAAL,CAAYlL,CAAZ,CAAL;EAAA,GAAR,CAAxB;EAAA,CAAxB;EACA4F,KAAKvD,OAAL,CAAauJ,KAAb,GAAqB;EAAA,SAAKhG,KAAKvD,OAAL,CAAaiH,CAAb,KAAmBA,EAAE5E,MAAF,KAAa,CAArC;EAAA,CAArB;;EAEAkB,KAAKiG,cAAL,GAAsB;EAAA,SAAKjG,KAAKsF,MAAL,CAAY5B,CAAZ,KAAkB1D,KAAKvD,OAAL,CAAasJ,QAAb,CAAsBrC,CAAtB,CAAvB;EAAA,CAAtB;;EAEA,eAAiB1D,IAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EC1CA,eAAiB,iBAAA;EAAA,WAAU,UAAC3E,IAAD,EAAmB;EAAA,0CAAT6K,IAAS;EAATA,gBAAS;EAAA;;EAC1C,YAAG,OAAO7K,IAAP,KAAgB,QAAnB,EAA6B,MAAM,IAAI0E,KAAJ,CAAU,uBAAV,CAAN;EAC7B,YAAGmG,KAAKpH,MAAL,KAAgB,CAAnB,EAAsB,MAAM,IAAIiB,KAAJ,CAAU,gCAAV,CAAN;;EAEtB,YAAMoG,KAAK;EACPtJ,eADO,oBACF;EAAE,sBAAM,IAAIkD,KAAJ,8BAAqC1E,IAArC,CAAN;EAAqD,aADrD;EAEP2B,eAFO,kBAEH0G,CAFG,EAED;EAAE,sBAAM,IAAI3D,KAAJ,8BAAqC1E,IAArC,CAAN;EAAqD;EAFtD,SAAX;;EAKA,YAAG+K,QAAOF,KAAK,CAAL,CAAP,MAAmB,QAAtB,EAA+B;EAC3B,gBAAGA,KAAKpH,MAAL,GAAc,CAAjB,EAAoB,MAAM,IAAIiB,KAAJ,CAAU,oBAAV,CAAN;EACpBoG,eAAGtJ,GAAH,GAASqJ,KAAK,CAAL,EAAQrJ,GAAR,IAAesJ,GAAGtJ,GAA3B;EACAsJ,eAAGnJ,GAAH,GAASkJ,KAAK,CAAL,EAAQlJ,GAAR,IAAemJ,GAAGnJ,GAA3B;EACH,SAJD,MAIO;EACHkJ,iBAAK5J,OAAL,CAAa,aAAK;EACd,oBAAG,OAAO+J,CAAP,KAAa,UAAhB,EAA4B,MAAM,IAAItG,KAAJ,CAAU,cAAV,CAAN;EAC5BoG,mBAAGE,EAAEvH,MAAF,KAAa,CAAb,GAAiB,KAAjB,GAAyB,KAA5B,IAAqCuH,CAArC;EACH,aAHD;EAIH;;EAEDpL,eAAOqL,cAAP,CAAsBC,MAAtB,EAA8BlL,IAA9B,EAAoC8K,EAApC;EACH,KArBgB;EAAA,CAAjB;;ECEA,IAAMK,OAAO,SAAPA,IAAO;EAAA,WAAMtK,SAAN;EAAA,CAAb;EACA,IAAMuK,UAAU,SAAVA,OAAU,GAAc;EAAA,QAAb/C,CAAa,uEAAT8C,IAAS;;EAC1B,QAAGxG,SAAKkE,UAAL,CAAgBR,CAAhB,CAAH,EAAuB,OAAOA,CAAP;EACvB,UAAM,IAAIlI,SAAJ,CAAc,mBAAd,CAAN;EACH,CAHD;;EAKA,YAAiB,eAACkL,MAAD,EAA8B;EAAA,QAArBC,YAAqB,uEAAN,CAAM;;;EAC3C,QAAGA,iBAAiB,CAApB,EAAuB,MAAM,IAAIlE,UAAJ,CAAe,0BAAf,CAAN;EACvB,QAAG,CAACzC,SAAKgE,QAAL,CAAc2C,YAAd,CAAJ,EAAiC,MAAM,IAAInL,SAAJ,CAAc,8BAAd,CAAN;EACjC,QAAG,CAACwE,SAAKkE,UAAL,CAAgBwC,MAAhB,CAAJ,EAA6B,MAAM,IAAIlL,SAAJ,CAAc,2BAAd,CAAN;;EAE7B,QAAIoL,QAAQD,eAAe,CAAf,GAAmB,CAACA,YAApB,GAAmC,CAA/C;EACA,QAAIE,cAAcF,eAAe,CAAf,GAAmBA,YAAnB,GAAkC,CAApD;EACA,QAAItH,SAASwH,cAAc,CAA3B;EACA,QAAIC,SAAS,KAAb;EACA,QAAIC,UAAU,KAAd;EACA,QAAIC,YAAY,KAAhB;EACA,QAAIC,QAAQ;EACRC,iBAAS,EADD;EAERC,gBAAQ,EAFA;EAGRC,gBAAQ,EAHA;EAIRC,kBAAU;EAJF,KAAZ;;EAOA,QAAIC,UAAUd,IAAd;EACA,QAAIe,UAAUf,IAAd;EACA,QAAIgB,cAAchB,IAAlB;EACA,QAAIiB,gBAAgBjB,IAApB;EACA,QAAIkB,UAAUlB,IAAd;EACA,QAAImB,YAAYnB,IAAhB;EACA,QAAIoB,UAAUpB,IAAd;;EAEA,QAAMqB,WAAW,SAAXA,QAAW,YAAa;EAC1B,YAAGZ,MAAMC,OAAN,CAAcpI,MAAd,KAAyB,CAAzB,IAA8BmI,MAAME,MAAN,CAAarI,MAAb,KAAwB,CAAzD,EAA4DwI;;EAE5D,YAAGR,UAAUG,MAAME,MAAN,CAAarI,MAAb,IAAuB+H,WAAjC,IAAgDI,MAAMC,OAAN,CAAcpI,MAAd,KAAyB,CAA5E,EAA+E;;EAE/E,YAAMgJ,MAAMb,MAAMC,OAAN,CAAclL,KAAd,EAAZ;EACAiL,cAAME,MAAN,CAAa/J,IAAb,CAAkB0K,GAAlB;;EAEA,YAAGb,MAAMC,OAAN,CAAcpI,MAAd,KAAyB,CAA5B,EAA+ByI;EAC/B,YAAGN,MAAME,MAAN,CAAarI,MAAb,KAAwB+H,WAAxB,IAAuC,CAACG,SAA3C,EAAqD;EACjDA,wBAAY,IAAZ;EACAQ;EACH;;EAED,YAAIO,aAAa,KAAjB;;EAEAC,mBAAWtB,MAAX,EAAmBuB,YAAYrB,KAAZ,GAAoB,CAAvC,EAA0CkB,IAAII,IAA9C,EAAoD,UAACC,GAAD,EAAkB;EAAA,8CAATjC,IAAS;EAATA,oBAAS;EAAA;;EAClE,gBAAG6B,UAAH,EAAc;EACV,sBAAM,IAAIhI,KAAJ,CAAU,mCAAV,CAAN;EACH,aAFD,MAEO;EACHgI,6BAAa,IAAb;EACH;EACDd,kBAAME,MAAN,GAAeF,MAAME,MAAN,CAAaiB,MAAb,CAAoB;EAAA,uBAAK1E,MAAMoE,GAAX;EAAA,aAApB,CAAf;EACA,gBAAG,OAAOK,GAAP,KAAe,SAAlB,EAA4B;EAAA;;EACxBlB,sBAAMC,OAAN,CAAciB,MAAM,SAAN,GAAkB,MAAhC,EAAwCL,GAAxC;EACA,qCAAQ3M,IAAR,kBAAa2M,IAAII,IAAjB,SAA0BhC,IAA1B;EACH,aAHD,MAGO;EAAA;;EACHe,sBAAMkB,MAAM,QAAN,GAAiB,UAAvB,EAAmC/K,IAAnC,CAAwC0K,GAAxC;EACA,qCAAI7K,QAAJ,EAAa9B,IAAb,uBAAkB2M,IAAII,IAAtB,EAA4BC,GAA5B,SAAoCjC,IAApC;EACA,oBAAGiC,GAAH,EAAQ,qBAAQhN,IAAR,kBAAa2M,IAAII,IAAjB,EAAuBC,GAAvB,SAA+BjC,IAA/B;EACR,oBAAG,CAACiC,GAAJ,EAAS,yBAAUhN,IAAV,oBAAe2M,IAAII,IAAnB,SAA4BhC,IAA5B;EACZ;EACD,gBAAGe,MAAME,MAAN,CAAarI,MAAb,IAAuB+H,cAAcxH,MAArC,IAA+C2H,SAAlD,EAA4D;EACxDA,4BAAY,KAAZ;EACAS;EACH;EACDI,qBAAS,IAAT;EACH,SArBD;;EAuBAA;EACH,KAxCD;;EA0CA,QAAMQ,SAAS,SAATA,MAAS,CAACP,GAAD,EAAM7K,QAAN,EAAgBqL,KAAhB,EAA0B;EACrCvB,kBAAU,IAAV;EACA,YAAG/G,SAAKkE,UAAL,CAAgB4D,GAAhB,KAAwB9H,SAAK2D,WAAL,CAAiBmE,GAAjB,CAA3B,EAAkD,MAAM,IAAItM,SAAJ,oBAA+BwE,SAAK8H,GAAL,CAA/B,eAAN;EAClD,YAAG9H,SAAKvD,OAAL,CAAaqL,GAAb,CAAH,EAAqB;EACjBA,gBAAIxL,OAAJ,CAAY;EAAA,uBAAK+L,OAAOE,CAAP,EAAUtL,QAAV,EAAoBqL,KAApB,CAAL;EAAA,aAAZ;EACA;EACH;EACD,YAAME,YAAY;EACdN,kBAAMJ,GADQ;EAEd7K,sBAAUwJ,QAAQxJ,QAAR;EAFI,SAAlB;EAIAgK,cAAMC,OAAN,CAAcoB,QAAQ,SAAR,GAAoB,MAAlC,EAA0CE,SAA1C;;EAEAR,mBAAWH,QAAX,EAAqB,CAArB;EACH,KAdD;;EAgBA,QAAMzK,OAAO,SAAPA,IAAO,CAAC0K,GAAD,EAAM7K,QAAN;EAAA,eAAmBoL,OAAOP,GAAP,EAAY7K,QAAZ,CAAnB;EAAA,KAAb;EACA,QAAMwL,UAAU,SAAVA,OAAU,CAACX,GAAD,EAAM7K,QAAN;EAAA,eAAmBoL,OAAOP,GAAP,EAAY7K,QAAZ,EAAsB,IAAtB,CAAnB;EAAA,KAAhB;EACA,QAAM6B,SAAS,SAATA,MAAS;EAAA,eAAMmI,MAAMC,OAAN,CAAcpI,MAApB;EAAA,KAAf;EACA,QAAM4J,UAAU,SAAVA,OAAU;EAAA,eAAMzB,MAAME,MAAN,CAAarI,MAAnB;EAAA,KAAhB;EACA,QAAM6J,cAAc,SAAdA,WAAc;EAAA,eAAM1B,MAAME,MAAZ;EAAA,KAApB;EACA,QAAMyB,OAAO,SAAPA,IAAO;EAAA,eAAM3B,MAAMC,OAAN,CAAcpI,MAAd,GAAuBmI,MAAME,MAAN,CAAarI,MAApC,KAA+C,CAArD;EAAA,KAAb;EACA,QAAM+J,QAAQ,SAARA,KAAQ,GAAM;EAChB/B,iBAAS,IAAT;EACH,KAFD;EAGA,QAAMgC,SAAS,SAATA,MAAS,GAAM;EACjBhC,iBAAS,KAAT;EACAe;EACH,KAHD;EAIA,QAAMkB,OAAO,SAAPA,IAAO,GAAM;EACfzB,kBAAUd,IAAV;EACAS,cAAMC,OAAN,GAAgB,EAAhB;EACH,KAHD;EAIA,QAAM8B,SAAS,SAATA,MAAS,OAAQ;EACnB/B,cAAMC,OAAN,GAAgBD,MAAMC,OAAN,CAAckB,MAAd,CAAqB;EAAA,mBAAK1E,EAAEwE,IAAF,KAAWe,IAAhB;EAAA,SAArB,CAAhB;EACH,KAFD;EAGA,QAAMC,OAAO,SAAPA,IAAO;EAAA,eAAYjM,SAAS;EAC9BiK,qBAASD,MAAMC,OAAN,CAAc/H,KAAd,GAAsBgK,MAAtB,CAA6BlC,MAAME,MAAnC,EAA2C9K,GAA3C,CAA+C;EAAA,uBAAKqH,EAAEwE,IAAP;EAAA,aAA/C,CADqB;EAE9Bd,oBAAQH,MAAMG,MAAN,CAAajI,KAAb,GAAqB9C,GAArB,CAAyB;EAAA,uBAAKqH,EAAEwE,IAAP;EAAA,aAAzB,CAFsB;EAG9Bb,sBAAUJ,MAAMI,QAAN,CAAelI,KAAf,GAAuB9C,GAAvB,CAA2B;EAAA,uBAAKqH,EAAEwE,IAAP;EAAA,aAA3B;EAHoB,SAAT,CAAZ;EAAA,KAAb;EAKA,QAAMkB,OAAO,SAAPA,IAAO,OAAQ;EACjB,YAAGrC,OAAH,EAAY,MAAM,IAAIhH,KAAJ,CAAU,yCAAV,CAAN;EACZgH,kBAAU,IAAV;EACA,YAAMsC,SAAS,SAATA,MAAS;EAAA,mBAAM,EAACnB,MAAMxE,CAAP,EAAUzG,UAAUwJ,SAApB,EAAN;EAAA,SAAf;EACAQ,gBAAQ;EACJC,qBAAS,CAACgB,KAAKhB,OAAL,IAAgB,EAAjB,EAAqB7K,GAArB,CAAyBgN,MAAzB,CADL;EAEJlC,oBAAQ,EAFJ;EAGJC,oBAAQ,CAACc,KAAKd,MAAL,IAAe,EAAhB,EAAoB/K,GAApB,CAAwBgN,MAAxB,CAHJ;EAIJhC,sBAAU,CAACa,KAAKb,QAAL,IAAiB,EAAlB,EAAsBhL,GAAtB,CAA0BgN,MAA1B;EAJN,SAAR;EAMA,YAAG,CAACvC,MAAJ,EAAYe;EACf,KAXD;EAYA,QAAM1F,SAAS,SAATA,MAAS;EAAA,eAAO8E,MAAMC,OAAN,CAAc7K,GAAd,CAAkB;EAAA,mBAAKqH,EAAEwE,IAAP;EAAA,SAAlB,EAA+B9C,QAA/B,CAAwC0C,GAAxC,IAA+C,SAA/C,GAClBb,MAAME,MAAN,CAAa9K,GAAb,CAAiB;EAAA,mBAAKqH,EAAEwE,IAAP;EAAA,SAAjB,EAA8B9C,QAA9B,CAAuC0C,GAAvC,IAA8C,QAA9C,GACIb,MAAMI,QAAN,CAAehL,GAAf,CAAmB;EAAA,mBAAKqH,EAAEwE,IAAP;EAAA,SAAnB,EAAgC9C,QAAhC,CAAyC0C,GAAzC,IAAgD,UAAhD,GACIb,MAAMG,MAAN,CAAa/K,GAAb,CAAiB;EAAA,mBAAKqH,EAAEwE,IAAP;EAAA,SAAjB,EAA8B9C,QAA9B,CAAuC0C,GAAvC,IAA8C,QAA9C,GACI,SAJD;EAAA,KAAf;;;EAOA,QAAMwB,QAAQ,EAAd;EACA,QAAMC,KAAKC,SAASF,KAAT,CAAX;;;EAGAC,OAAG,OAAH,EAAY,aAAK;EACbjC,kBAAUb,QAAQJ,CAAR,CAAV;EACH,KAFD;EAGAkD,OAAG,OAAH,EAAY,aAAK;EACbhC,kBAAUd,QAAQJ,CAAR,CAAV;EACH,KAFD;EAGAkD,OAAG,WAAH,EAAgB,aAAK;EACjB/B,sBAAcf,QAAQJ,CAAR,CAAd;EACH,KAFD;EAGAkD,OAAG,aAAH,EAAkB,aAAK;EACnB9B,wBAAgBhB,QAAQJ,CAAR,CAAhB;EACH,KAFD;EAGAkD,OAAG,OAAH,EAAY,aAAK;EACb7B,kBAAUjB,QAAQJ,CAAR,CAAV;EACH,KAFD;EAGAkD,OAAG,SAAH,EAAc,aAAK;EACf5B,oBAAYlB,QAAQJ,CAAR,CAAZ;EACH,KAFD;EAGAkD,OAAG,OAAH,EAAY,aAAK;EACb3B,kBAAUnB,QAAQJ,CAAR,CAAV;EACH,KAFD;;;EAKAkD,OAAG,aAAH,EAAkB;EAAA,eAAM3C,QAAQ,CAAR,GAAY,CAACA,KAAb,GAAqBC,WAA3B;EAAA,KAAlB,EAA0D,aAAK;EAC3D,YAAGnD,MAAM,CAAT,EAAY,MAAM,IAAIjB,UAAJ,CAAe,0BAAf,CAAN;EACZ,YAAG,CAACzC,SAAKgE,QAAL,CAAcN,CAAd,CAAJ,EAAsB,MAAM,IAAIlI,SAAJ,CAAc,8BAAd,CAAN;EACtBqL,sBAAcnD,IAAI,CAAJ,GAAQA,CAAR,GAAY,CAA1B;EACAkD,gBAAQlD,IAAI,CAAJ,GAAQ,CAACA,CAAT,GAAa,CAArB;EACH,KALD;EAMA6F,OAAG,QAAH,EAAa;EAAA,eAAMlK,MAAN;EAAA,KAAb,EAA2B,aAAK;EAC5B,YAAG,CAACW,SAAKgE,QAAL,CAAcN,CAAd,CAAJ,EAAsB,MAAM,IAAIlI,SAAJ,CAAc,yBAAd,CAAN;EACtB6D,iBAASqE,CAAT;EACH,KAHD;EAIA6F,OAAG,QAAH,EAAa;EAAA,eAAMzC,MAAN;EAAA,KAAb;EACAyC,OAAG,SAAH,EAAc;EAAA,eAAMxC,OAAN;EAAA,KAAd;EACAwC,OAAG,SAAH,EAAc;EAAA,eAAMtC,MAAMC,OAAZ;EAAA,KAAd;EACAqC,OAAG,QAAH,EAAa;EAAA,eAAMtC,MAAME,MAAZ;EAAA,KAAb;EACAoC,OAAG,QAAH,EAAa;EAAA,eAAMtC,MAAMG,MAAZ;EAAA,KAAb;EACAmC,OAAG,UAAH,EAAe;EAAA,eAAMtC,MAAMI,QAAZ;EAAA,KAAf;;;EAGAkC,OAAG,MAAH,EAAW;EAAA,eAAMnM,IAAN;EAAA,KAAX;EACAmM,OAAG,SAAH,EAAc;EAAA,eAAMd,OAAN;EAAA,KAAd;EACAc,OAAG,QAAH,EAAa;EAAA,eAAMzK,MAAN;EAAA,KAAb;EACAyK,OAAG,SAAH,EAAc;EAAA,eAAMb,OAAN;EAAA,KAAd;EACAa,OAAG,aAAH,EAAkB;EAAA,eAAMZ,WAAN;EAAA,KAAlB;EACAY,OAAG,MAAH,EAAW;EAAA,eAAMX,IAAN;EAAA,KAAX;EACAW,OAAG,OAAH,EAAY;EAAA,eAAMV,KAAN;EAAA,KAAZ;EACAU,OAAG,QAAH,EAAa;EAAA,eAAMT,MAAN;EAAA,KAAb;EACAS,OAAG,MAAH,EAAW;EAAA,eAAMR,IAAN;EAAA,KAAX;EACAQ,OAAG,QAAH,EAAa;EAAA,eAAMP,MAAN;EAAA,KAAb;EACAO,OAAG,MAAH,EAAW;EAAA,eAAML,IAAN;EAAA,KAAX;EACAK,OAAG,MAAH,EAAW;EAAA,eAAMH,IAAN;EAAA,KAAX;EACAG,OAAG,QAAH,EAAa;EAAA,eAAMpH,MAAN;EAAA,KAAb;;EAEA,WAAOmH,KAAP;EACH,CA5LD;;ECRA,SAASG,oBAAT,CAA8BrP,CAA9B,EAAgCsP,CAAhC,EAAkC;EAAC,SAAOA,IAAE,EAACC,SAAQ,EAAT,EAAF,EAAevP,EAAEsP,CAAF,EAAIA,EAAEC,OAAN,CAAf,EAA8BD,EAAEC,OAAvC;EAA+C,UAASxB,GAAT,CAAa/N,CAAb,EAAe;EAAC,QAAMA,CAAN;EAAQ,UAASwP,WAAT,CAAqBxP,CAArB,EAAuBsP,CAAvB,EAAyB;EAAC,SAAOG,WAAS,EAAT,EAAYzP,CAAZ,EAAcsP,CAAd,CAAP;EAAwB,UAASI,SAAT,CAAmB1P,CAAnB,EAAqB;EAAC,MAAIsP,IAAEE,YAAYG,OAAOC,aAAnB,EAAiC5P,EAAE6P,QAAnC,CAAN,CAAmD,CAAC,CAAC7P,EAAE8P,MAAH,IAAW9P,EAAE8P,MAAF,CAASpL,MAAT,GAAgB,CAA5B,KAAgCqJ,IAAI,kEAAJ,CAAhC,EAAwG/N,EAAE8P,MAAF,CAAS5N,OAAT,CAAiB,UAASlC,CAAT,EAAW;EAACA,MAAEiB,IAAF,IAAQ,KAAK,CAAL,KAAS0O,OAAOI,iBAAP,CAAyB/P,EAAEiB,IAA3B,CAAjB,IAAmD8M,IAAI,kDAAgD/N,EAAEiB,IAAtD,CAAnD,EAA+G0O,OAAOI,iBAAP,CAAyB/P,EAAEiB,IAA3B,IAAiC+O,iBAAiBR,YAAYF,CAAZ,EAActP,CAAd,CAAjB,CAAhJ;EAAmL,GAAhN,CAAxG;EAA0T,UAASiQ,QAAT,CAAkBjQ,CAAlB,EAAoB;EAAC,MAAIsP,IAAEE,YAAYG,OAAOO,YAAnB,EAAgClQ,EAAE6P,QAAlC,CAAN,CAAkD7P,EAAE8P,MAAF,IAAU9P,EAAE8P,MAAF,CAAS5N,OAAT,CAAiB,UAASlC,CAAT,EAAW;EAACA,MAAEiB,IAAF,IAAQ,KAAK,CAAL,KAAS0O,OAAOQ,aAAP,CAAqBnQ,EAAEiB,IAAvB,CAAjB,IAA+C8M,IAAI,8CAA4C/N,EAAEiB,IAAlD,CAA/C,EAAuG0O,OAAOQ,aAAP,CAAqBnQ,EAAEiB,IAAvB,IAA6BmP,cAAcZ,YAAYF,CAAZ,EAActP,CAAd,CAAd,CAApI;EAAoK,GAAjM,CAAV;EAA6M,UAASqQ,aAAT,CAAuBrQ,CAAvB,EAAyB;EAAC2P,SAAOW,QAAP,CAAgBC,SAAhB,GAA0BvQ,EAAEuQ,SAA5B,EAAsCZ,OAAOW,QAAP,CAAgBE,UAAhB,GAA2BxQ,EAAEwQ,UAAnE,EAA8Eb,OAAOW,QAAP,CAAgBG,WAAhB,GAA4BzQ,EAAEyQ,WAA5G;EAAwH,UAASC,QAAT,CAAkB1Q,CAAlB,EAAoB;EAAC2P,SAAOgB,GAAP,GAAWnB,YAAYG,OAAOgB,GAAnB,EAAuB3Q,CAAvB,CAAX;EAAqC,UAASgQ,gBAAT,CAA0BhQ,CAA1B,EAA4B;EAAC,UAAOA,EAAE4F,IAAT,GAAe,KAAI,MAAJ;EAAW5F,QAAE4G,GAAF,GAAM5G,EAAE4G,GAAF,GAAM,GAAN,GAAU5G,EAAE4F,IAAZ,GAAiB,GAAjB,GAAqB5F,EAAE4Q,SAAvB,GAAiC,GAAjC,GAAqC5Q,EAAE6Q,GAAvC,GAA2C,eAA3C,GAA2D7Q,EAAE8Q,MAAnE,CAA0E,MAAM,KAAI,KAAJ;EAAU9Q,QAAE4G,GAAF,GAAM5G,EAAE4G,GAAF,GAAM,GAAN,GAAU5G,EAAE4Q,SAAZ,GAAsB,eAAtB,GAAsC5Q,EAAE8Q,MAA9C,CAAqD,MAAM;EAAQ9Q,QAAE4G,GAAF,GAAM5G,EAAE4G,GAAF,GAAM,GAAN,GAAU5G,EAAE4F,IAAZ,GAAiB,GAAjB,GAAqB5F,EAAE4Q,SAAvB,GAAiC,GAAjC,GAAqC5Q,EAAE6Q,GAAvC,GAA2C,eAA3C,GAA2D7Q,EAAE8Q,MAAnE,CAAvL,CAAiQ,OAAO9Q,CAAP;EAAS,UAASoQ,aAAT,CAAuBpQ,CAAvB,EAAyB;EAAC,MAAIsP,IAAEtP,EAAE4G,GAAF,CAAMhG,OAAN,CAAc,GAAd,CAAN,CAAyB,IAAG0O,IAAE,CAAC,CAAN,EAAQ;EAAC,QAAIyB,IAAE/Q,EAAE4G,GAAF,CAAMhG,OAAN,CAAc,GAAd,CAAN,CAAyB,oBAAkBZ,EAAE4G,GAAF,CAAM7B,KAAN,CAAYuK,IAAE,CAAd,EAAgByB,CAAhB,EAAmB1P,WAAnB,EAAlB,GAAmDrB,EAAE4G,GAAF,GAAM5G,EAAE4G,GAAF,CAAM7B,KAAN,CAAY,CAAZ,EAAcuK,CAAd,IAAiBtP,EAAEgR,aAAnB,GAAiChR,EAAE4G,GAAF,CAAM7B,KAAN,CAAYgM,IAAE,CAAd,EAAgB,CAAC,CAAjB,CAA1F,GAA8GhD,IAAI,oDAAJ,CAA9G;EAAwK,UAAO/N,CAAP;EAAS,UAASiR,iBAAT,CAA2BjR,CAA3B,EAA6B;EAAC2P,SAAOuB,mBAAP,GAA2BlR,CAA3B;EAA6B,UAASmR,YAAT,CAAsBnR,CAAtB,EAAwB;EAAC2P,SAAOyB,UAAP,GAAkB5B,YAAYG,OAAOyB,UAAnB,EAA8BpR,CAA9B,CAAlB;EAAmD,UAASqR,WAAT,CAAqBrR,CAArB,EAAuB;EAAC2P,SAAO2B,MAAP,GAActR,CAAd;EAAgB,UAASuR,YAAT,CAAsBvR,CAAtB,EAAwB;EAAC,SAAO,IAAIsD,OAAJ,CAAY,UAASgM,CAAT,EAAWyB,CAAX,EAAa;EAAC,QAAIS,IAAE,IAAI9I,cAAJ,EAAN,CAAyB8I,EAAEC,kBAAF,GAAqB,YAAU;EAAC,WAAGD,EAAEE,UAAL,IAAiB,OAAKF,EAAEzJ,MAAxB,IAAgCuH,EAAEpJ,KAAKC,KAAL,CAAWqL,EAAE3I,YAAb,CAAF,CAAhC;EAA8D,KAA9F,EAA+F2I,EAAEzI,IAAF,CAAO,KAAP,EAAa/I,CAAb,EAAe,CAAC,CAAhB,CAA/F,EAAkHwR,EAAErI,IAAF,CAAO,IAAP,CAAlH;EAA+H,GAAlL,CAAP;EAA2L,UAASwI,iBAAT,CAA2B3R,CAA3B,EAA6B;EAAC,MAAG,CAACA,EAAEgL,QAAF,CAAW,OAAX,CAAJ,EAAwB,MAAM5J,UAAU,uCAAV,CAAN,CAAyD,IAAIkO,IAAEtP,EAAEmH,KAAF,CAAQ,GAAR,EAAa,CAAb,EAAgBA,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAN,CAAoC,OAAM,EAACvB,MAAK,OAAN,EAAcgM,aAAY,CAACC,WAAWvC,EAAEnI,KAAF,CAAQ,GAAR,EAAa,CAAb,CAAX,CAAD,EAA6B0K,WAAWvC,EAAEnI,KAAF,CAAQ,GAAR,EAAa,CAAb,CAAX,CAA7B,CAA1B,EAAN;EAA2F,UAAS2K,cAAT,CAAwB9R,CAAxB,EAA0BsP,CAA1B,EAA4B;EAACA,IAAEpN,OAAF,CAAU,UAASoN,CAAT,EAAW;EAACtP,MAAE+R,SAAF,CAAYC,GAAZ,CAAgB1C,CAAhB;EAAmB,GAAzC;EAA2C,UAAS2C,SAAT,GAAoB;EAAC,SAAOtC,OAAO2B,MAAd;EAAqB,UAASY,SAAT,GAAoB;EAAC,SAAOvC,OAAOgB,GAAP,CAAWwB,MAAlB;EAAyB,UAASC,WAAT,CAAqBpS,CAArB,EAAuB;EAAC,MAAGA,KAAK2P,OAAOI,iBAAf,EAAiC;EAAC,QAAIT,IAAEK,OAAOI,iBAAP,CAAyB/P,CAAzB,CAAN,CAAkC,OAAOsP,EAAE+C,UAAF,IAAcC,OAAd,IAAuBA,QAAQC,IAA/B,IAAqCD,QAAQC,IAAR,CAAavS,IAAE,+HAAf,CAArC,EAAqLsP,CAA5L;EAA8L,WAAQxL,KAAR,CAAc,kFAAgFjD,OAAOkC,IAAP,CAAYyP,SAAZ,EAAuB3N,IAAvB,CAA4B,IAA5B,CAA9F;EAAiI,UAAS4N,cAAT,CAAwBzS,CAAxB,EAA0BsP,CAA1B,EAA4B;EAAC,MAAIyB,IAAE,KAAK,CAAX,CAAa,OAAO/Q,KAAK2P,OAAOQ,aAAZ,GAA0B,CAACY,IAAEpB,OAAOQ,aAAP,CAAqBnQ,CAArB,CAAH,EAA4BqS,UAA5B,IAAwCC,OAAxC,IAAiDA,QAAQC,IAAzD,IAA+DD,QAAQC,IAAR,CAAavS,IAAE,6HAAf,CAAzF,IAAwO+Q,IAAEtB,WAAS,EAAT,EAAYE,OAAOO,YAAnB,EAAgCZ,CAAhC,CAAF,EAAqCgD,QAAQI,GAAR,CAAY,yEAAuE7R,OAAOkC,IAAP,CAAY4M,OAAOQ,aAAnB,EAAkCtL,IAAlC,CAAuC,IAAvC,CAAvE,GAAoH,mDAAhI,CAA7Q,GAAmckM,CAA1c;EAA4c,UAAS4B,eAAT,CAAyB3S,CAAzB,EAA2B;EAACA,IAAE4S,UAAF,CAAab,SAAb,CAAuBC,GAAvB,CAA2B,sBAA3B;EAAmD,UAASa,mBAAT,GAA8B;EAAC,MAAI7S,IAAEkS,WAAN;EAAA,MAAkB5C,IAAEwD,EAAEC,MAAF,CAAS/S,EAAE,CAAF,CAAT,EAAcA,EAAE,CAAF,CAAd,CAApB;EAAA,MAAwC+Q,IAAE+B,EAAEC,MAAF,CAAS/S,EAAE,CAAF,CAAT,EAAcA,EAAE,CAAF,CAAd,CAA1C,CAA8D,OAAO8S,EAAEE,YAAF,CAAe1D,CAAf,EAAiByB,CAAjB,CAAP;EAA2B,UAASkC,WAAT,CAAqBjT,CAArB,EAAuB;EAAC,MAAG,eAAa,OAAO8S,CAApB,IAAuB,cAAY,eAAa,OAAOA,CAApB,GAAsB,WAAtB,GAAkCI,UAAQJ,CAAR,CAA9C,CAA1B,EAAoF;EAAC,QAAIxD,IAAE,KAAK,CAAX;EAAA,QAAayB,IAAE,KAAK,CAApB,CAAsB,IAAG,KAAK,CAAL,KAAS/Q,CAAZ,EAAc;EAAC,UAAIwR,IAAE2B,aAAalR,GAAb,CAAN,CAAwBqN,IAAEkC,EAAE4B,QAAJ,EAAarC,IAAES,EAAE6B,SAAjB;EAA2B,KAAlE,MAAuE/D,IAAEtP,EAAEoT,QAAJ,EAAarC,IAAE/Q,EAAEqT,SAAjB,CAA2B,OAAO,IAAIP,EAAEQ,MAAN,CAAa,CAAChE,CAAD,EAAGyB,CAAH,CAAb,EAAmB,EAACwC,KAAI,QAAL,EAAcC,MAAK,IAAIV,EAAEU,IAAN,CAAW,EAACC,SAAQxB,YAAYrL,GAArB,EAAyB8M,UAASzB,YAAYyB,QAA9C,EAAuDC,YAAW1B,YAAY0B,UAA9E,EAAX,CAAnB,EAAnB,CAAP;EAAqJ;EAAC,UAASC,OAAT,CAAiB5T,CAAjB,EAAmB;EAAC,MAAG,eAAa,OAAO8S,CAApB,IAAuB,cAAY,eAAa,OAAOA,CAApB,GAAsB,WAAtB,GAAkCI,UAAQJ,CAAR,CAA9C,CAA1B,EAAoF,OAAOA,EAAEe,aAAF,CAAgB7T,CAAhB,CAAP;EAA0B,UAAS8T,YAAT,CAAsB9T,CAAtB,EAAwBsP,CAAxB,EAA0B;EAAC,MAAG,eAAa,OAAOwD,CAApB,IAAuB,cAAY,eAAa,OAAOA,CAApB,GAAsB,WAAtB,GAAkCI,UAAQJ,CAAR,CAA9C,CAA1B,EAAoF,OAAOA,EAAEiB,kBAAF,CAAqB/T,CAArB,EAAuBsP,CAAvB,CAAP;EAAiC,UAAS0E,iBAAT,CAA2BhU,CAA3B,EAA6B;EAAC,MAAG,eAAa,OAAO8S,CAApB,IAAuB,cAAY,eAAa,OAAOA,CAApB,GAAsB,WAAtB,GAAkCI,UAAQJ,CAAR,CAA9C,CAA1B,EAAoF,OAAOA,EAAEkB,iBAAF,CAAoBhU,CAApB,CAAP;EAA8B,UAASiU,MAAT,CAAgBjU,CAAhB,EAAkBsP,CAAlB,EAAoB;EAACA,IAAE4E,SAAF,CAAYpB,EAAEqB,OAAF,CAAUnU,CAAV,EAAaoU,SAAb,EAAZ,EAAqC,EAACC,SAAQ,EAAT,EAArC;EAAmD,UAASC,eAAT,CAAyBtU,CAAzB,EAA2BsP,CAA3B,EAA6B;EAAC,MAAIyB,IAAEwD,SAASC,aAAT,CAAuBP,MAAvB,EAA8BjU,CAA9B,EAAgCsP,CAAhC,CAAN,CAAyCtP,EAAEyU,YAAF,GAAiBC,aAAjB,CAA+BC,YAA/B,CAA4C5D,CAA5C,EAA8C/Q,EAAEyU,YAAF,GAAiBC,aAAjB,CAA+B,CAA/B,CAA9C;EAAiF,UAASvB,YAAT,CAAsBnT,CAAtB,EAAwB;EAAC,MAAIsP,IAAEtP,EAAE4U,SAAF,EAAN,CAAoB,OAAM,EAACxB,UAAS9D,EAAEuF,GAAZ,EAAgBxB,WAAU/D,EAAEwF,GAA5B,EAAN;EAAuC,UAASC,SAAT,GAAoB;EAAC,MAAI/U,IAAEoS,YAAY4C,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuD,WAAnE,CAAN,CAAsF,IAAGhV,EAAEiV,UAAL,EAAgB;EAAC,QAAI3F,IAAEtP,EAAEiV,UAAR,CAAmBjV,EAAE4G,GAAF,GAAM5G,EAAE4G,GAAF,CAAMS,OAAN,CAAc,KAAd,EAAoB,MAAIiI,EAAEvK,KAAF,CAAQ,CAAR,EAAU,CAAV,CAAJ,GAAiB,GAAjB,GAAqBuK,EAAEvK,KAAF,CAAQ,CAAC,CAAT,CAArB,GAAiC,GAArD,CAAN;EAAgE,OAAG,cAAY,eAAa,OAAOmQ,EAApB,GAAuB,WAAvB,GAAmChC,UAAQgC,EAAR,CAA/C,CAAH,EAA+D,OAAO,IAAIA,GAAGC,KAAH,CAASC,IAAb,CAAkB,EAACC,QAAO,IAAIH,GAAGG,MAAH,CAAUC,GAAd,CAAkB,EAAC1O,KAAI5G,EAAE4G,GAAP,EAAW2O,cAAa,CAAC,IAAIL,GAAGM,WAAP,CAAmB,EAACC,MAAKzV,EAAE0V,WAAR,EAAnB,CAAD,CAAxB,EAAlB,CAAR,EAAlB,CAAP,CAA0H,MAAK,2BAAL;EAAiC,UAASC,aAAT,CAAuB3V,CAAvB,EAAyB;EAAC,MAAIsP,IAAE,IAAI4F,GAAGU,KAAH,CAASC,KAAb,CAAmB,EAACC,OAAM,IAAIZ,GAAGU,KAAH,CAASG,IAAb,CAAkB,EAACC,QAAO,CAAC,EAAD,EAAI,EAAJ,CAAR,EAAgBC,cAAa,QAA7B,EAAsCC,cAAa,QAAnD,EAA4DC,KAAIlE,YAAYrL,GAA5E,EAAgFwP,OAAM,CAAtF,EAAlB,CAAP,EAAnB,CAAN;EAAA,MAA8IrF,IAAE,KAAK,CAArJ;EAAA,MAAuJS,IAAE,KAAK,CAA9J,CAAgK,IAAG,KAAK,CAAL,KAASxR,CAAZ,EAAc;EAAC,QAAIqW,IAAEC,eAAerU,GAAf,CAAN,CAA0B8O,IAAEsF,EAAEjD,QAAJ,EAAa5B,IAAE6E,EAAEhD,SAAjB;EAA2B,GAApE,MAAyEtC,IAAE/Q,EAAEoT,QAAJ,EAAa5B,IAAExR,EAAEqT,SAAjB,CAA2B,IAAIkD,IAAErB,GAAGsB,IAAH,CAAQC,UAAR,CAAmB,CAACjF,CAAD,EAAGT,CAAH,CAAnB,CAAN;EAAA,MAAgC2F,IAAE,IAAIxB,GAAGyB,OAAP,CAAe,EAACC,UAAS,IAAI1B,GAAG2B,IAAH,CAAQC,KAAZ,CAAkBP,CAAlB,CAAV,EAA+BtV,MAAK,QAApC,EAAf,CAAlC,CAAgGyV,EAAEK,QAAF,CAAWzH,CAAX,EAAc,IAAI3K,IAAE,IAAIuQ,GAAGG,MAAH,CAAU2B,MAAd,CAAqB,EAACC,UAAS,CAACP,CAAD,CAAV,EAArB,CAAN,CAA2C,OAAO,IAAIxB,GAAGC,KAAH,CAAS6B,MAAb,CAAoB,EAAC3B,QAAO1Q,CAAR,EAApB,CAAP;EAAuC,UAASuS,cAAT,CAAwBlX,CAAxB,EAA0BsP,CAA1B,EAA4B;EAAC,MAAIyB,IAAE0B,eAAezS,CAAf,EAAiBsP,CAAjB,CAAN,CAA0B,IAAG,cAAY,eAAa,OAAO4F,EAApB,GAAuB,WAAvB,GAAmChC,UAAQgC,EAAR,CAA/C,CAAH,EAA+D,OAAO,IAAIA,GAAGC,KAAH,CAASC,IAAb,CAAkB,EAACC,QAAO,IAAIH,GAAGG,MAAH,CAAU8B,OAAd,CAAsB,EAACvQ,KAAImK,EAAEnK,GAAP,EAAWwQ,YAAW,WAAtB,EAAkCC,QAAO,EAACC,QAAOvG,EAAEH,SAAV,EAAoB2G,SAAQxG,EAAEyG,OAA9B,EAAsCC,QAAO1G,EAAE2G,SAA/C,EAAzC,EAAtB,CAAR,EAAlB,CAAP,CAA8J,MAAK,2BAAL;EAAiC,UAASC,mBAAT,CAA6B3X,CAA7B,EAA+BsP,CAA/B,EAAiC;EAAC,WAASyB,CAAT,CAAW/Q,CAAX,EAAa;EAAC,QAAIsP,IAAE0F,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuD1F,CAA7D;EAAA,QAA+DyB,IAAEzB,EAAEsI,OAAF,GAAYC,OAAZ,EAAjE;EAAA,QAAuFrG,IAAE,IAAI0D,GAAG4C,IAAP,CAAY,EAACC,QAAO7C,GAAGsB,IAAH,CAAQC,UAAR,CAAmB,CAACzW,EAAEgY,MAAF,CAAS3E,SAAV,EAAoBrT,EAAEgY,MAAF,CAAS5E,QAA7B,CAAnB,CAAR,EAAmE6E,MAAKlH,CAAxE,EAAZ,CAAzF,CAAiLzB,EAAE4I,OAAF,CAAU1G,CAAV;EAAa,OAAIA,IAAE2G,SAASC,aAAT,CAAuB,KAAvB,CAAN,CAAoC,OAAO5G,EAAE6G,SAAF,GAAY,sCAAZ,EAAmD7G,EAAE8G,gBAAF,CAAmB,OAAnB,EAA2B,YAAU;EAACtY,MAAEuY,KAAF;EAAU,GAAhD,CAAnD,EAAqGvY,EAAEwY,EAAF,CAAK,UAAL,EAAgB,UAASxY,CAAT,EAAW;EAAC+Q,MAAE/Q,CAAF,EAAIsP,CAAJ;EAAO,GAAnC,CAArG,EAA0I,IAAI4F,GAAGuD,OAAH,CAAWC,OAAf,CAAuB,EAACC,SAAQnH,CAAT,EAAvB,CAAjJ;EAAqL,UAASoH,QAAT,CAAkB5Y,CAAlB,EAAoBsP,CAApB,EAAsB;EAAC,MAAIyB,IAAEmE,GAAGsB,IAAH,CAAQC,UAAR,CAAmBzW,EAAE4R,WAArB,CAAN,CAAwCtC,EAAEsI,OAAF,GAAYiB,SAAZ,CAAsB9H,CAAtB,GAAyBzB,EAAEsI,OAAF,GAAYkB,OAAZ,CAAoB,EAApB,CAAzB;EAAiD,UAASxC,cAAT,CAAwBtW,CAAxB,EAA0B;EAAC,MAAIsP,IAAEtP,EAAE4X,OAAF,GAAYhD,SAAZ,EAAN;EAAA,MAA8B7D,IAAEmE,GAAGsB,IAAH,CAAQuC,QAAR,CAAiBzJ,CAAjB,CAAhC,CAAoD,OAAM,EAAC+D,WAAUtC,EAAE,CAAF,CAAX,EAAgBqC,UAASrC,EAAE,CAAF,CAAzB,EAAN;EAAqC,UAASiI,iBAAT,CAA2BhZ,CAA3B,EAA6B;EAAC,MAAIsP,IAAEiF,SAASC,aAAT,CAAuBoE,QAAvB,EAAgC5Y,CAAhC,CAAN,CAAyCsP,IAAE,IAAI4F,GAAGuD,OAAH,CAAWC,OAAf,CAAuB,EAACC,SAAQrJ,CAAT,EAAvB,CAAF,EAAsCtP,EAAEiZ,UAAF,CAAa3J,CAAb,CAAtC;EAAsD,UAAS4J,kBAAT,CAA4BlZ,CAA5B,EAA8BsP,CAA9B,EAAgC;EAAC,MAAG,cAAY,eAAa,OAAO6J,MAApB,GAA2B,WAA3B,GAAuCjG,UAAQiG,MAAR,CAAnD,KAAqE,aAAWjG,UAAQiG,OAAOC,IAAf,CAAnF,EAAwG;EAAC,QAAIrI,IAAEoH,SAASC,aAAT,CAAuB,KAAvB,CAAN,CAAoCrH,EAAE6E,KAAF,CAAQyD,eAAR,GAAwB,MAAxB,EAA+BtI,EAAE6E,KAAF,CAAQ0D,OAAR,GAAgB,KAA/C,EAAqDvI,EAAE6E,KAAF,CAAQ2D,MAAR,GAAe,gBAApE,EAAqFxI,EAAE6E,KAAF,CAAQ4D,MAAR,GAAe,SAApG,EAA8GxZ,EAAEyZ,WAAF,CAAc1I,CAAd,CAA9G,CAA+H,IAAIS,IAAE2G,SAASC,aAAT,CAAuB,KAAvB,CAAN,CAAoC,OAAO5G,EAAEoE,KAAF,CAAQ8D,KAAR,GAAc,eAAd,EAA8BlI,EAAEoE,KAAF,CAAQ+D,UAAR,GAAmB,yBAAjD,EAA2EnI,EAAEoE,KAAF,CAAQgE,QAAR,GAAiB,MAA5F,EAAmGpI,EAAEqI,SAAF,GAAYvK,CAA/G,EAAiHyB,EAAE0I,WAAF,CAAcjI,CAAd,CAAjH,EAAkIxR,EAAE8Z,KAAF,GAAQ,CAA1I,EAA4I9Z,CAAnJ;EAAqJ,SAAK,uBAAL;EAA6B,UAAS+Z,mBAAT,CAA6B/Z,CAA7B,EAA+BsP,CAA/B,EAAiC;EAAC,MAAIyB,IAAEoH,SAASC,aAAT,CAAuB,KAAvB,CAAN,CAAoC,OAAOrH,EAAEiJ,EAAF,GAAK,2BAAL,EAAiCjJ,EAAE6E,KAAF,CAAQyD,eAAR,GAAwB,MAAzD,EAAgEtI,EAAE6E,KAAF,CAAQ4D,MAAR,GAAe,SAA/E,EAAyFzI,EAAE6E,KAAF,CAAQqE,SAAR,GAAkB,+BAA3G,EAA2IlJ,EAAE6E,KAAF,CAAQsE,MAAR,GAAe,MAA1J,EAAiKnJ,EAAE6E,KAAF,CAAQuE,KAAR,GAAc,MAA/K,EAAsLpJ,EAAE6E,KAAF,CAAQwE,YAAR,GAAqB,WAA3M,EAAuNrJ,EAAE6E,KAAF,CAAQyE,MAAR,GAAe,MAAtO,EAA6OtJ,EAAEuH,gBAAF,CAAmB,OAAnB,EAA2B,YAAU;EAACtY,MAAEuY,KAAF;EAAU,GAAhD,EAAiD,IAAjD,CAA7O,EAAoSvY,EAAEwY,EAAF,CAAK,UAAL,EAAgB,UAASxY,CAAT,EAAW;EAACsP,MAAEuJ,SAAF,CAAY,EAAChE,KAAI7U,EAAEgY,MAAF,CAAS5E,QAAd,EAAuB0B,KAAI9U,EAAEgY,MAAF,CAAS3E,SAApC,EAAZ;EAA4D,GAAxF,CAApS,EAA8XtC,CAArY;EAAuY,UAASuJ,QAAT,CAAkBta,CAAlB,EAAoBsP,CAApB,EAAsB;EAACA,IAAEuJ,SAAF,CAAY,EAAChE,KAAI7U,EAAE4R,WAAF,CAAc,CAAd,CAAL,EAAsBkD,KAAI9U,EAAE4R,WAAF,CAAc,CAAd,CAA1B,EAAZ,GAAyDtC,EAAEwJ,OAAF,CAAU,EAAV,CAAzD;EAAuE,UAASyB,iBAAT,CAA2Bva,CAA3B,EAA6BsP,CAA7B,EAA+B;EAAC,SAAOtP,EAAEwa,QAAF,GAAa5Z,OAAb,CAAqB0O,CAArB,CAAP;EAA+B,UAASmL,iBAAT,CAA2Bza,CAA3B,EAA6BsP,CAA7B,EAA+B;EAAC,MAAIyB,IAAEzB,EAAEoL,YAAF,EAAN;EAAA,MAAuBlJ,IAAElC,EAAEqL,QAAF,CAAWxB,OAAOC,IAAP,CAAYwB,eAAZ,CAA4BC,YAAvC,CAAzB;EAAA,MAA8ExE,IAAEkE,kBAAkB/I,CAAlB,EAAoBxR,CAApB,CAAhF,CAAuG,cAAY+Q,CAAZ,IAAe,aAAWA,CAA1B,IAA6B,gBAAcA,CAA3C,GAA6CsF,IAAE,CAAC,CAAH,IAAM7E,EAAEsJ,QAAF,CAAWzE,CAAX,CAAnD,GAAiE,CAAC,CAAD,KAAKA,CAAL,IAAQ7E,EAAExO,IAAF,CAAOhD,CAAP,CAAzE;EAAmF,UAAS+a,qBAAT,GAAgC;EAAC,MAAI/a,IAAEgV,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuDhV,CAA7D;EAAA,MAA+DsP,IAAE0F,UAAU,CAAV,CAAjE;EAAA,MAA8EjE,IAAE,IAAImI,kBAAJ,CAAuBf,SAASC,aAAT,CAAuB,KAAvB,CAAvB,EAAqD9I,CAArD,CAAhF,CAAwItP,EAAE2a,QAAF,CAAWxB,OAAOC,IAAP,CAAYwB,eAAZ,CAA4BC,YAAvC,EAAqD7X,IAArD,CAA0D+N,CAA1D,GAA6D/Q,EAAEgb,WAAF,CAAc,mBAAd,EAAkC,YAAU;EAAC,WAAOP,kBAAkB1J,CAAlB,EAAoB/Q,CAApB,CAAP;EAA8B,GAA3E,CAA7D;EAA0I,UAASib,mBAAT,CAA6Bjb,CAA7B,EAA+B;EAAC,SAAM,EAACkb,YAAW,oBAAS5L,CAAT,EAAWyB,CAAX,EAAa;EAAC,aAAO/Q,EAAEmb,QAAF,GAAW,GAAX,GAAepK,CAAf,GAAiB,GAAjB,GAAqBzB,EAAE8L,CAAvB,GAAyB,GAAzB,GAA6B9L,EAAE+L,CAA/B,GAAiC,MAAxC;EAA+C,KAAzE,EAA0EC,UAAS,IAAInC,OAAOC,IAAP,CAAYmC,IAAhB,CAAqB,GAArB,EAAyB,GAAzB,CAAnF,EAAiHC,OAAM,CAAC,CAAxH,EAA0Hva,MAAKjB,EAAEiB,IAAjI,EAAsIoT,SAAQrU,EAAEqU,OAAhJ,EAAwJoH,SAAQzb,EAAEyb,OAAlK,EAAN;EAAiL,UAASC,kBAAT,CAA4B1b,CAA5B,EAA8B;EAAC,SAAM,EAAC2b,SAAQ3b,EAAE4G,GAAX,EAAekJ,QAAO9P,EAAE8P,MAAxB,EAA+B8L,QAAO5b,EAAE4b,MAAxC,EAA+C9K,QAAO9Q,EAAE8Q,MAAxD,EAA+D+K,aAAY7b,EAAE6b,WAA7E,EAAyFvC,SAAQ,EAAjG,EAAN;EAA2G,UAASwC,SAAT,CAAmB9b,CAAnB,EAAqB;EAAC,MAAIsP,IAAE0F,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuD,WAA7D,CAAyE,IAAG,cAAY,eAAa,OAAOmE,MAApB,GAA2B,WAA3B,GAAuCjG,UAAQiG,MAAR,CAAnD,KAAqE,aAAWjG,UAAQiG,OAAOC,IAAf,CAAnF,EAAwG;EAAC,QAAIrI,IAAEqB,YAAY9C,CAAZ,CAAN;EAAA,QAAqBkC,IAAEyJ,oBAAoBlK,CAApB,CAAvB;EAAA,QAA8CsF,IAAE,IAAI8C,OAAOC,IAAP,CAAY2C,YAAhB,CAA6BvK,CAA7B,CAAhD;EAAA,QAAgF+E,IAAEvW,KAAG,KAAKiC,GAAR,IAAa,WAA/F,CAA2G,OAAO,KAAK,CAAL,KAASsU,CAAT,IAAYwE,sBAAsBxE,CAAtB,EAAwBxF,EAAE2E,WAA1B,CAAZ,EAAmDW,CAA1D;EAA4D,SAAK,uBAAL;EAA6B,UAAS2F,UAAT,CAAoBhc,CAApB,EAAsB;EAAC,MAAIsP,IAAEtP,EAAE6U,GAAF,EAAN;EAAA,MAAc9D,IAAE/Q,EAAE8U,GAAF,EAAhB,CAAwB,IAAG,EAAEmH,KAAKC,GAAL,CAASnL,CAAT,IAAY,GAAZ,IAAiBkL,KAAKC,GAAL,CAAS5M,CAAT,IAAY,EAA/B,CAAH,EAAsC;EAAC,QAAIkC,IAAE,sBAAoBlC,CAA1B,CAA4B,OAAM,EAAC8L,GAAE,WAAS,sBAAoBrK,CAA7B,CAAH,EAAmCsK,GAAE,YAAUY,KAAKvJ,GAAL,CAAS,CAAC,IAAEuJ,KAAKE,GAAL,CAAS3K,CAAT,CAAH,KAAiB,IAAEyK,KAAKE,GAAL,CAAS3K,CAAT,CAAnB,CAAT,CAA/C,EAAN;EAAgG;EAAC,UAAS4K,QAAT,CAAkBpc,CAAlB,EAAoBsP,CAApB,EAAsB;EAAC,MAAIyB,IAAE,EAACmK,YAAW,oBAASnK,CAAT,EAAWS,CAAX,EAAa;EAAC,UAAI6E,IAAErW,EAAEqc,aAAF,EAAN;EAAA,UAAwB9F,IAAE0F,KAAKK,GAAL,CAAS,CAAT,EAAW9K,CAAX,CAA1B;EAAA,UAAwCkF,IAAEL,EAAEkG,iBAAF,CAAoB,IAAIpD,OAAOC,IAAP,CAAYtC,KAAhB,CAAsB,MAAI/F,EAAEqK,CAAN,GAAQ7E,CAA9B,EAAgC,MAAIxF,EAAEsK,CAAN,GAAQ9E,CAAxC,CAApB,CAA1C;EAAA,UAA0G5R,IAAE0R,EAAEkG,iBAAF,CAAoB,IAAIpD,OAAOC,IAAP,CAAYtC,KAAhB,CAAsB,OAAK/F,EAAEqK,CAAF,GAAI,CAAT,IAAY7E,CAAlC,EAAoC,OAAKxF,EAAEsK,CAAF,GAAI,CAAT,IAAY9E,CAAhD,CAApB,CAA5G;EAAA,UAAoLiG,IAAER,WAAWtF,CAAX,CAAtL;EAAA,UAAoM+F,IAAET,WAAWrX,CAAX,CAAtM;EAAA,UAAoN+X,IAAEF,EAAEpB,CAAF,GAAI,GAAJ,GAAQqB,EAAEpB,CAAV,GAAY,GAAZ,GAAgBoB,EAAErB,CAAlB,GAAoB,GAApB,GAAwBoB,EAAEnB,CAAhP;EAAA,UAAkPsB,IAAErN,EAAEqM,OAAtP,CAA8P,OAAOgB,KAAG,wDAAH,EAA4DA,KAAG,YAA/D,EAA4EA,KAAG,aAA/E,EAA6FA,KAAG,aAAWrN,EAAEQ,MAA7G,EAAoH6M,KAAG,aAAWrN,EAAEsM,MAApI,EAA2Ie,KAAG,WAASD,CAAvJ,EAAyJC,KAAG,aAAWrN,EAAEwB,MAAzK,EAAgL6L,KAAG,kBAAgBrN,EAAEuM,WAA5M;EAAwN,KAAhf,EAAifP,UAAS,IAAInC,OAAOC,IAAP,CAAYmC,IAAhB,CAAqB,GAArB,EAAyB,GAAzB,CAA1f,EAAwhBC,OAAM,CAAC,CAA/hB,EAAN;EAAA,MAAwiBhK,IAAE,IAAI2H,OAAOC,IAAP,CAAY2C,YAAhB,CAA6BhL,CAA7B,CAA1iB,CAA0kB,OAAOS,EAAEoL,UAAF,CAAatN,EAAEgK,OAAf,GAAwBtZ,EAAE6c,eAAF,CAAkB7Z,IAAlB,CAAuBwO,CAAvB,CAA/B;EAAyD,UAASsL,cAAT,GAAyB;EAAC,MAAI9c,IAAEgV,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuDhV,CAA7D;EAAA,MAA+DsP,IAAE,IAAI8M,QAAJ,CAAapc,CAAb,EAAe0b,mBAAmBjJ,eAAeuC,UAAU,CAAV,CAAf,EAA4BA,UAAU,CAAV,CAA5B,CAAnB,CAAf,CAAjE,CAA+I,OAAO1F,EAAErO,IAAF,GAAO,KAAP,EAAaqO,CAApB;EAAsB,UAASyN,aAAT,CAAuB/c,CAAvB,EAAyB;EAAC,MAAIsP,IAAE,KAAK,CAAX;EAAA,MAAayB,IAAE,KAAK,CAApB,CAAsB,IAAG,KAAK,CAAL,KAAS/Q,CAAZ,EAAc;EAAC,QAAIwR,IAAEwL,eAAe/a,GAAf,CAAN,CAA0BqN,IAAEkC,EAAE4B,QAAJ,EAAarC,IAAES,EAAE6B,SAAjB;EAA2B,GAApE,MAAyE/D,IAAEtP,EAAEoT,QAAJ,EAAarC,IAAE/Q,EAAEqT,SAAjB,CAA2B,IAAIgD,IAAE,IAAI8C,OAAOC,IAAP,CAAY6D,MAAhB,CAAuB3N,CAAvB,EAAyByB,CAAzB,CAAN,CAAkC,OAAO,IAAIoI,OAAOC,IAAP,CAAY8D,MAAhB,CAAuB,EAACC,OAAM,QAAP,EAAgBC,UAAS/G,CAAzB,EAA2B7C,MAAKvB,YAAYrL,GAA5C,EAAvB,CAAP;EAAgF,UAASoW,cAAT,CAAwBhd,CAAxB,EAA0B;EAAC,SAAM,EAACoT,UAASpT,EAAE4U,SAAF,GAAcC,GAAd,EAAV,EAA8BxB,WAAUrT,EAAE4U,SAAF,GAAcE,GAAd,EAAxC,EAAN;EAAmE,UAASuI,iBAAT,CAA2Brd,CAA3B,EAA6B;EAAC,MAAIsP,IAAEiF,SAASC,aAAT,CAAuB8F,QAAvB,EAAgCta,CAAhC,CAAN,CAAyCA,EAAEsd,MAAF,GAAW7D,WAAX,CAAuBnK,CAAvB;EAA0B,UAASiO,eAAT,CAAyBvd,CAAzB,EAA2B;EAAC,OAAKwd,IAAL,CAAU,UAAV,EAAqBxd,CAArB;EAAwB,UAASyd,oBAAT,CAA8Bzd,CAA9B,EAAgC;EAAC,OAAKwd,IAAL,CAAU,OAAV,EAAkBxd,CAAlB;EAAqB,UAAS0d,UAAT,CAAoB1d,CAApB,EAAsB;EAAC,MAAIsP,IAAE,eAAa,OAAOqO,MAApB,GAA2BA,OAAOC,SAAP,IAAkB,EAA7C,GAAgD,EAAtD,CAAyD,IAAG,KAAK,CAAL,KAAStO,CAAT,IAAY,iBAAgBA,CAA/B,EAAiC;EAAC,QAAIyB,IAAE8M,YAAYC,WAAW9d,CAAX,CAAZ,CAAN,CAAiC,OAAO+Q,EAAEyH,EAAF,CAAK,UAAL,EAAgB,YAAU;EAAC,WAAKuF,IAAL;EAAY,KAAvC,GAAyChN,CAAhD;EAAkD,SAAK,+CAAL;EAAqD,UAASiN,KAAT,CAAehe,CAAf,EAAiB;EAAC,SAAO,IAAIsD,OAAJ,CAAY,UAASgM,CAAT,EAAWyB,CAAX,EAAa;EAACtR,UAAMO,CAAN,EAAS8F,IAAT,CAAc,UAAS9F,CAAT,EAAW;EAAC,aAAOsP,EAAEtP,EAAEiG,IAAF,EAAF,CAAP;EAAmB,KAA7C,EAA+CgY,KAA/C,CAAqD,UAASje,CAAT,EAAW;EAAC,aAAO+Q,EAAE/Q,CAAF,CAAP;EAAY,KAA7E;EAA+E,GAAzG,CAAP;EAAkH,UAASke,kBAAT,CAA4Ble,CAA5B,EAA8BsP,CAA9B,EAAgCyB,CAAhC,EAAkCS,CAAlC,EAAoC;EAAC,MAAI6E,IAAEvD,EAAEQ,MAAF,CAAS,CAAChE,EAAE6O,MAAF,CAAStJ,GAAV,EAAcvF,EAAE6O,MAAF,CAASrJ,GAAvB,CAAT,EAAqC,EAACvB,KAAI,QAAL,EAAcC,MAAK,IAAIV,EAAEU,IAAN,CAAW,EAACC,SAAQxB,YAAYrL,GAArB,EAAyB8M,UAASzB,YAAYyB,QAA9C,EAAuDC,YAAW1B,YAAY0B,UAA9E,EAAX,CAAnB,EAArC,CAAN,CAAsK,IAAG0C,EAAE+H,KAAF,CAAQpe,CAAR,GAAW+Q,CAAd,EAAgB;EAAC,QAAIwF,IAAExF,EAAEhQ,IAAF,CAAOsd,WAAP,EAAmB/O,CAAnB,EAAqB+G,CAArB,CAAN;EAAA,QAA8BK,IAAE5D,EAAEwL,KAAF,CAAQ,EAACC,QAAO,CAAC,CAAD,EAAG,CAAC,EAAJ,CAAR,EAAR,EAA0BC,UAA1B,CAAqCjI,CAArC,CAAhC,CAAwEF,EAAEoI,SAAF,CAAY/H,CAAZ,EAAegI,SAAf,IAA2BL,YAAYM,SAAZ,CAAsBtI,CAAtB,CAA3B;EAAoD,GAA7I,MAAkJ7E,IAAE6M,YAAYM,SAAZ,CAAsBtI,CAAtB,CAAF,GAA2BgI,YAAYM,SAAZ,CAAsBtI,CAAtB,EAAwB,CAAC,CAAzB,CAA3B;EAAuD,UAASuI,YAAT,CAAsB5e,CAAtB,EAAwBsP,CAAxB,EAA0ByB,CAA1B,EAA4B;EAAC,SAAO4B,gBAAgB3S,CAAhB,GAAmB,UAAS+Q,CAAT,EAAWS,CAAX,EAAa6E,CAAb,EAAeE,CAAf,EAAiB;EAAC,UAAIxF,CAAJ,KAAQsN,YAAYQ,OAAZ,CAAoB,CAApB,KAAwBR,YAAYS,YAAZ,CAAyBT,YAAYQ,OAAZ,CAAoB,CAApB,CAAzB,CAAxB,EAAyEX,mBAAmBle,CAAnB,EAAqBwR,CAArB,EAAuBlC,CAAvB,EAAyBiH,CAAzB,CAAjF;EAA8G,GAA1J;EAA2J,UAASwI,WAAT,CAAqB/e,CAArB,EAAuBsP,CAAvB,EAAyByB,CAAzB,EAA2B;EAAC,SAAO4B,gBAAgB3S,CAAhB,GAAmB,UAASwR,CAAT,EAAW6E,CAAX,EAAa;EAAC,UAAI7E,CAAJ,IAAO0M,mBAAmBle,CAAnB,EAAqBqW,CAArB,EAAuB/G,CAAvB,EAAyByB,CAAzB,CAAP;EAAmC,GAA3E;EAA4E,UAASiO,YAAT,GAAuB;EAAC,MAAIhf,IAAE,EAAN,CAAS,OAAM,cAAY,eAAa,OAAO8S,CAApB,GAAsB,WAAtB,GAAkCI,UAAQJ,CAAR,CAA9C,KAA2D9S,EAAEgD,IAAF,CAAO,SAAP,CAA3D,EAA6E,cAAY,eAAa,OAAOmW,MAApB,GAA2B,WAA3B,GAAuCjG,UAAQiG,MAAR,CAAnD,KAAqE,aAAWjG,UAAQiG,OAAOC,IAAf,CAAhF,IAAsGpZ,EAAEgD,IAAF,CAAO,YAAP,CAAnL,EAAwM,cAAY,eAAa,OAAOkS,EAApB,GAAuB,WAAvB,GAAmChC,UAAQgC,EAAR,CAA/C,KAA6DlV,EAAEgD,IAAF,CAAO,YAAP,CAArQ,EAA0RhD,EAAE0E,MAAF,GAAS,CAAT,GAAW,eAAX,GAA2B,MAAI1E,EAAE0E,MAAN,GAAa,cAAb,GAA4B1E,EAAE,CAAF,CAAvV;EAA4V,UAASif,OAAT,CAAiBjf,CAAjB,EAAmBsP,CAAnB,EAAqB;EAAC,MAAIyB,IAAE,KAAK,CAAX;EAAA,MAAaS,IAAE,KAAK,CAApB;EAAA,MAAsB6E,IAAE,KAAK,CAA7B;EAAA,MAA+BE,IAAE,KAAK,CAAtC,CAAwC,QAAOvW,CAAP,GAAU,KAAI,SAAJ;EAAc,OAACwR,IAAE2G,SAAS+G,cAAT,CAAwB5P,EAAE6P,MAA1B,CAAH,EAAsCvJ,KAAtC,CAA4CwH,QAA5C,GAAqD,UAArD,EAAgE5L,EAAEoE,KAAF,CAAQwJ,OAAR,GAAgB,KAAhF,EAAsF5N,EAAEoE,KAAF,CAAQyE,MAAR,GAAe,KAArG,EAA2G9D,IAAE,EAA7G,EAAgHjH,EAAEoG,WAAF,KAAgBa,EAAE8I,kBAAF,GAAqB,CAAC,CAAtC,CAAhH,EAAyJ,CAAChJ,IAAEvD,EAAEwM,OAAF,CAAUC,MAAV,CAAiB,KAAjB,CAAH,EAA4B3J,KAA5B,CAAkCsE,MAAlC,GAAyC,MAAlM,EAAyM1I,EAAEiI,WAAF,CAAcpD,CAAd,CAAzM,EAA0NE,EAAEiJ,SAAF,GAAY3M,qBAAtO,EAA4P9B,IAAE+B,EAAE7Q,GAAF,CAAMoU,CAAN,EAAQE,CAAR,EAAW2B,OAAX,CAAmB,CAAC5I,EAAEyI,MAAF,CAAS3E,QAAV,EAAmB9D,EAAEyI,MAAF,CAAS1E,SAA5B,CAAnB,EAA0D/D,EAAE2I,IAA5D,CAA9P,EAAgU3I,EAAEoG,WAAF,IAAe3E,EAAEsO,kBAAF,CAAqBI,SAArB,CAA+B,CAAC,CAAhC,CAA/U,EAAkX1O,EAAE2O,WAAF,CAAcC,WAAd,CAA0BhQ,OAAOgB,GAAP,CAAWiP,YAArC,CAAlX,CAAqa,MAAM,KAAI,YAAJ;EAAiB7O,UAAE,IAAIoI,OAAOC,IAAP,CAAYyG,GAAhB,CAAoB1H,SAAS+G,cAAT,CAAwB5P,EAAE6P,MAA1B,CAApB,EAAsD,EAACpH,QAAO,EAAClD,KAAIvF,EAAEyI,MAAF,CAAS3E,QAAd,EAAuB0B,KAAIxF,EAAEyI,MAAF,CAAS1E,SAApC,EAAR,EAAuD4E,MAAK3I,EAAE2I,IAA9D,EAAmEyH,aAAY,CAAC,CAAhF,EAAkFI,oBAAmB,EAAC1C,UAASjE,OAAOC,IAAP,CAAYwB,eAAZ,CAA4BmF,WAAtC,EAArG,EAAwJC,mBAAkB,CAAC,CAA3K,EAAtD,CAAF,CAAuO,MAAM,KAAI,YAAJ;EAAiB,OAACjP,IAAE,IAAImE,GAAG2K,GAAP,CAAW,EAACtb,MAAK,IAAI2Q,GAAG4C,IAAP,CAAY,EAACC,QAAO7C,GAAGsB,IAAH,CAAQC,UAAR,CAAmB,CAACnH,EAAEyI,MAAF,CAAS1E,SAAV,EAAoB/D,EAAEyI,MAAF,CAAS3E,QAA7B,CAAnB,CAAR,EAAmE6E,MAAK3I,EAAE2I,IAA1E,EAAZ,CAAN,EAAmGkH,QAAO9I,CAA1G,EAAX,CAAH,EAA6H4J,gBAA7H,GAAgJC,sBAAhJ,CAAuK,SAAvK,EAAkL,CAAlL,EAAqLtK,KAArL,CAA2LuK,OAA3L,GAAmM,8CAAnM,EAAkPpP,EAAEkP,gBAAF,GAAqBC,sBAArB,CAA4C,SAA5C,EAAuD,CAAvD,EAA0DnO,SAA1D,CAAoEnD,MAApE,CAA2E,SAA3E,CAAlP,CAAltB,CAA0hC,OAAOmC,CAAP;EAAS,UAASqP,cAAT,CAAwBpgB,CAAxB,EAA0BsP,CAA1B,EAA4B;EAAC,MAAG,aAAWtP,EAAEmd,KAAhB,EAAsB,OAAO,KAAKnd,EAAEqgB,MAAF,CAAS/Q,CAAT,CAAZ,CAAwB,IAAIyB,IAAE,CAAC/Q,EAAEiB,IAAH,EAAQ,SAAR,CAAN,CAAyB,IAAG,UAAQjB,EAAEiB,IAAb,EAAkB,OAAO,KAAKqO,EAAEgR,UAAF,CAAa,EAACC,gBAAe,CAAC,CAAjB,EAAmBC,uBAAsB,EAACC,YAAW1P,CAAZ,EAAcqM,UAASjE,OAAOC,IAAP,CAAYwB,eAAZ,CAA4B8F,WAAnD,EAAzC,EAAb,CAAZ,CAAoIpR,EAAEgR,UAAF,CAAa,EAACC,gBAAe,CAAC,CAAjB,EAAmBC,uBAAsB,EAACC,YAAW1P,CAAZ,EAAcqM,UAASjE,OAAOC,IAAP,CAAYwB,eAAZ,CAA4B8F,WAAnD,EAAzC,EAAb,GAAwHpR,EAAEqR,QAAF,CAAW/d,GAAX,CAAe5C,EAAEiB,IAAjB,EAAsBjB,CAAtB,CAAxH,EAAiJsP,EAAEsR,YAAF,CAAe5gB,EAAEiB,IAAjB,CAAjJ;EAAwK,UAAS4f,aAAT,CAAuB7gB,CAAvB,EAAyBsP,CAAzB,EAA2ByB,CAA3B,EAA6B;EAAC,UAAO/Q,CAAP,GAAU,KAAI,SAAJ;EAAc+Q,QAAE+P,QAAF,CAAWxR,CAAX,EAAc,MAAM,KAAI,YAAJ;EAAiB8Q,qBAAe9Q,CAAf,EAAiByB,CAAjB,EAAoB,MAAM,KAAI,YAAJ;EAAiBA,QAAE+P,QAAF,CAAWxR,CAAX,EAAxG;EAAuH,UAASyR,qBAAT,CAA+B/gB,CAA/B,EAAiCsP,CAAjC,EAAmCyB,CAAnC,EAAqC;EAAC,MAAIS,IAAE,KAAK,CAAX,CAAa,QAAOxR,CAAP,GAAU,KAAI,SAAJ;EAAcwR,UAAEwP,OAAOC,OAAP,CAAerN,OAAf,CAAuB7C,CAAvB,CAAF,CAA4B,MAAM,KAAI,YAAJ;EAAiBS,UAAEwP,OAAOE,UAAP,CAAkBtN,OAAlB,CAA0BtE,CAA1B,EAA4ByB,CAA5B,CAAF,CAAiC,MAAM,KAAI,YAAJ;EAAiBS,UAAEwP,OAAOG,UAAP,CAAkBvN,OAAlB,CAA0B7C,CAA1B,CAAF,CAAnI,CAAkK,OAAOS,CAAP;EAAS,UAAS4P,kBAAT,CAA4BphB,CAA5B,EAA8BsP,CAA9B,EAAgCyB,CAAhC,EAAkC;EAAC,MAAIS,IAAE,KAAK,CAAX,CAAa,QAAOxR,CAAP,GAAU,KAAI,SAAJ;EAAcwR,UAAEwP,OAAOC,OAAP,CAAenN,YAAf,CAA4B/C,CAA5B,CAAF,CAAiC,MAAM,KAAI,YAAJ;EAAiBS,UAAEwP,OAAOE,UAAP,CAAkBpN,YAAlB,CAA+BxE,CAA/B,EAAiCyB,CAAjC,CAAF,CAAsC,MAAM,KAAI,YAAJ;EAAiBS,UAAEwP,OAAOG,UAAP,CAAkBrN,YAAlB,CAA+B/C,CAA/B,CAAF,CAA7I,CAAiL,OAAOS,CAAP;EAAS,UAAS6P,iBAAT,CAA2BrhB,CAA3B,EAA6BsP,CAA7B,EAA+ByB,CAA/B,EAAiC;EAAC,MAAIS,IAAE,KAAK,CAAX,CAAa,QAAOxR,CAAP,GAAU,KAAI,SAAJ;EAAcwR,UAAEwP,OAAOC,OAAP,CAAehO,WAAf,CAA2BlC,CAA3B,CAAF,CAAgC,MAAM,KAAI,YAAJ;EAAiBS,UAAEwP,OAAOE,UAAP,CAAkBjO,WAAlB,CAA8BlC,CAA9B,CAAF,CAAmC,MAAM,KAAI,YAAJ;EAAiBS,UAAEwP,OAAOG,UAAP,CAAkBlO,WAAlB,CAA8BlC,CAA9B,CAAF,CAAzI,CAA4K,OAAOS,CAAP;EAAS,UAAS8P,cAAT,CAAwBthB,CAAxB,EAA0BsP,CAA1B,EAA4B;EAAC,MAAIyB,IAAE,KAAK,CAAX,CAAa,QAAO/Q,CAAP,GAAU,KAAI,SAAJ;EAAc+Q,UAAEoC,aAAa7D,CAAb,CAAF,CAAkB,MAAM,KAAI,YAAJ;EAAiByB,UAAEiM,eAAe1N,CAAf,CAAF,CAAoB,MAAM,KAAI,YAAJ;EAAiByB,UAAEuF,eAAehH,CAAf,CAAF,CAA5G,CAAgI,OAAOyB,CAAP;EAAS,UAASwQ,SAAT,CAAmBvhB,CAAnB,EAAqBsP,CAArB,EAAuB;EAAC,SAAOG,WAAS,EAAT,EAAYzP,CAAZ,EAAcsP,CAAd,CAAP;EAAwB,UAASkS,qBAAT,CAA+BxhB,CAA/B,EAAiCsP,CAAjC,EAAmCyB,CAAnC,EAAqC;EAAC,MAAIS,IAAE,KAAK,CAAX,CAAa,QAAOxR,CAAP,GAAU,KAAI,SAAJ;EAAcghB,aAAOhhB,CAAP,EAAUgU,iBAAV,CAA4B1E,CAA5B,EAA+B8O,KAA/B,CAAqCrN,CAArC,EAAwC,MAAM,KAAI,YAAJ;EAAiBS,UAAEwP,OAAOhhB,CAAP,EAAUgU,iBAAV,CAA4B1E,CAA5B,EAA8ByB,CAA9B,CAAF,EAAmCA,EAAE4J,QAAF,CAAWxB,OAAOC,IAAP,CAAYwB,eAAZ,CAA4B6G,SAAvC,EAAkDze,IAAlD,CAAuDwO,CAAvD,CAAnC,CAA6F,MAAM,KAAI,YAAJ;EAAiBA,UAAEwP,OAAOhhB,CAAP,EAAUgU,iBAAV,CAA4B1E,CAA5B,EAA8ByB,CAA9B,CAAF,EAAmCA,EAAEkI,UAAF,CAAazH,CAAb,CAAnC,CAA3M;EAA+P,UAASkQ,uBAAT,CAAiC1hB,CAAjC,EAAmCsP,CAAnC,EAAqC;EAAC0R,SAAOhhB,CAAP,EAAUsU,eAAV,CAA0BhF,CAA1B,EAA4B0R,MAA5B;EAAoC,KAAIW,YAAUtS,qBAAqB,UAASrP,CAAT,EAAW;EAACA,IAAEuP,OAAF,GAAU,UAASvP,CAAT,EAAW;EAAC,WAAOA,MAAIA,IAAE,EAAN,GAAUA,EAAE4hB,KAAF,GAAQ,EAAlB,EAAqB5hB,EAAE6hB,OAAF,GAAU,CAAC,CAAhC,EAAkC7hB,EAAE8hB,QAAF,GAAW,EAA7C,EAAgD9hB,EAAEwY,EAAF,GAAK,UAASlJ,CAAT,EAAWyB,CAAX,EAAa;EAAC/Q,QAAE4hB,KAAF,CAAQtS,CAAR,IAAWtP,EAAE4hB,KAAF,CAAQtS,CAAR,KAAY,EAAvB,EAA0BtP,EAAE4hB,KAAF,CAAQtS,CAAR,EAAWtM,IAAX,CAAgB+N,CAAhB,CAA1B;EAA6C,KAAhH,EAAiH/Q,EAAE+hB,GAAF,GAAM,UAASzS,CAAT,EAAWyB,CAAX,EAAa;EAAC,UAAG/Q,EAAE4hB,KAAF,CAAQtS,CAAR,CAAH,EAAc,KAAI,IAAIkC,CAAR,IAAaxR,EAAE4hB,KAAF,CAAQtS,CAAR,CAAb;EAAwB,YAAGtP,EAAE4hB,KAAF,CAAQtS,CAAR,EAAWkC,CAAX,MAAgBT,CAAnB,EAAqB;EAAC/Q,YAAE4hB,KAAF,CAAQtS,CAAR,EAAW0S,MAAX,CAAkBxQ,CAAlB,EAAqB;EAAM;EAAzE;EAA0E,KAA7N,EAA8NxR,EAAEwd,IAAF,GAAO,UAASlO,CAAT,EAAW;EAAC,UAAGtP,EAAE4hB,KAAF,CAAQtS,CAAR,CAAH,EAAc;EAAC,YAAIyB,IAAE3O,MAAM7B,SAAN,CAAgBwE,KAAhB,CAAsBhE,IAAtB,CAA2BiU,SAA3B,EAAqC,CAArC,CAAN,CAA8C,IAAGhV,EAAE6hB,OAAL,EAAa,OAAO7hB,EAAE8hB,QAAF,CAAWxS,CAAX,IAActP,EAAE8hB,QAAF,CAAWxS,CAAX,KAAe,EAA7B,EAAgC,KAAKtP,EAAE8hB,QAAF,CAAWxS,CAAX,EAActM,IAAd,CAAmB+N,CAAnB,CAA5C,CAAkE,KAAI,IAAIS,CAAR,IAAaxR,EAAE4hB,KAAF,CAAQtS,CAAR,CAAb;EAAwBtP,YAAE4hB,KAAF,CAAQtS,CAAR,EAAWkC,CAAX,EAAcyQ,KAAd,CAAoBjiB,CAApB,EAAsB+Q,CAAtB;EAAxB;EAAiD;EAAC,KAA/a,EAAgb/Q,EAAEyO,KAAF,GAAQ,YAAU;EAACzO,QAAE6hB,OAAF,GAAU,CAAC,CAAX;EAAa,KAAhd,EAAid7hB,EAAE0O,MAAF,GAAS,YAAU;EAAC1O,QAAE6hB,OAAF,GAAU,CAAC,CAAX,CAAa,KAAI,IAAIvS,CAAR,IAAatP,EAAE8hB,QAAf;EAAwB,aAAI,IAAI/Q,IAAE,CAAV,EAAYA,IAAE/Q,EAAE8hB,QAAF,CAAWxS,CAAX,EAAc5K,MAA5B,EAAmCqM,GAAnC;EAAuC/Q,YAAEwd,IAAF,CAAOlO,CAAP,EAAStP,EAAE8hB,QAAF,CAAWxS,CAAX,EAAcyB,CAAd,CAAT;EAAvC;EAAxB;EAA0F,KAA5kB,EAA6kB/Q,CAAplB;EAAslB,GAA5mB;EAA6mB,CAA9oB,CAAd;EAAA,IAA8pBkiB,SAAO,EAAC1K,SAAQ,EAAT,EAAY2K,UAAS,EAACtS,UAAS,EAAC6F,aAAY,4CAAb,EAA0D+F,SAAQ,EAAlE,EAAqEpH,SAAQ,EAA7E,EAAgFzO,MAAK,KAArF,EAA2FkL,QAAO,KAAlG,EAAwGlK,KAAI,8BAA5G,EAAV,EAAsJkJ,QAAO,CAAC,EAAC7O,MAAK,WAAN,EAAkB2P,WAAU,SAA5B,EAAD,EAAwC,EAAC3P,MAAK,UAAN,EAAiB2P,WAAU,YAA3B,EAAxC,EAAiF,EAAC3P,MAAK,OAAN,EAAc2P,WAAU,eAAxB,EAAjF,EAA0H,EAAC3P,MAAK,QAAN,EAAe2P,WAAU,SAAzB,EAA1H,CAA7J,EAArB,EAAkVwR,KAAI,EAACvS,UAAS,EAACjJ,KAAI,oCAAL,EAA0C4Q,SAAQ,OAAlD,EAA0DqE,aAAY,CAAC,CAAvE,EAAyE/K,QAAO,WAAhF,EAA4F2K,SAAQ,CAApG,EAAsGpH,SAAQ,EAA9G,EAAiHqD,WAAU,EAA3H,EAAV,EAAyI5H,QAAO,CAAC,EAAC7O,MAAK,MAAN,EAAa2P,WAAU,KAAvB,EAA6BhK,KAAI,yCAAjC,EAAD,CAAhJ,EAAtV,EAAqjB2N,UAAS,EAAC/D,YAAW,oGAAZ,EAAiHD,WAAU,mGAA3H,EAA+NE,aAAY,eAA3O,EAA9jB,EAA0zB4R,cAAa,EAAC1G,SAAQ,+EAAT,EAAv0B,EAAi6BrI,QAAO,EAAC1M,KAAI,0DAAL,EAAgE8M,UAAS,CAAC,EAAD,EAAI,EAAJ,CAAzE,EAAiFC,YAAW,CAAC,EAAD,EAAI,EAAJ,CAA5F,EAAx6B,EAA6gC1R,KAAI,EAAC2T,OAAM,WAAP,EAAmBmC,QAAO,EAAC3E,UAAS,KAAV,EAAgBC,WAAU,MAA1B,EAA1B,EAA4D4E,MAAK,EAAjE,EAAoEvC,aAAY,CAAC,CAAjF,EAAmFvD,QAAO,CAAC,QAAD,EAAU,OAAV,EAAkB,QAAlB,EAA2B,OAA3B,CAA1F,EAA8HyN,cAAa,aAA3I,EAAjhC,EAA2qC0C,YAAW,EAACC,mBAAkB,CAAC,cAAD,CAAnB,EAAoCC,gBAAe,CAAC,oBAAD,CAAnD,EAA0EC,gBAAe,CAAC,SAAD,EAAW,QAAX,EAAoB,sBAApB,CAAzF,EAAqIC,oBAAmB,CAAC,4BAAD,CAAxJ,EAAuLC,oBAAmB,CAAC,kCAAD,CAA1M,EAA+OC,wBAAuB,CAAC,0CAAD,CAAtQ,EAAtrC,EAArqB;EAAA,IAAgpE1P,YAAQ,cAAY,OAAOrT,MAAnB,IAA2B,oBAAiBA,OAAO6B,QAAxB,CAA3B,GAA4D,UAAS1B,CAAT,EAAW;EAAC,gBAAcA,CAAd,yCAAcA,CAAd;EAAgB,CAAxF,GAAyF,UAASA,CAAT,EAAW;EAAC,SAAOA,KAAG,cAAY,OAAOH,MAAtB,IAA8BG,EAAE6iB,WAAF,KAAgBhjB,MAA9C,IAAsDG,MAAIH,OAAOU,SAAjE,GAA2E,QAA3E,UAA2FP,CAA3F,yCAA2FA,CAA3F,CAAP;EAAoG,CAAj2E;EAAA,IAAk2EyP,aAAS5O,OAAOiiB,MAAP,IAAe,UAAS9iB,CAAT,EAAW;EAAC,OAAI,IAAIsP,IAAE,CAAV,EAAYA,IAAE0F,UAAUtQ,MAAxB,EAA+B4K,GAA/B,EAAmC;EAAC,QAAIyB,IAAEiE,UAAU1F,CAAV,CAAN,CAAmB,KAAI,IAAIkC,CAAR,IAAaT,CAAb;EAAelQ,aAAON,SAAP,CAAiBoC,cAAjB,CAAgC5B,IAAhC,CAAqCgQ,CAArC,EAAuCS,CAAvC,MAA4CxR,EAAEwR,CAAF,IAAKT,EAAES,CAAF,CAAjD;EAAf;EAAsE,UAAOxR,CAAP;EAAS,CAA5gF;EAAA,IAA6gF2P,SAAO,EAAphF,CAAuhFA,OAAOC,aAAP,GAAqB,EAACiB,KAAI,WAAL,EAAiBkS,MAAK,EAAtB,EAAyBtH,SAAQ,CAAjC,EAAmCpH,SAAQ,EAA3C,EAA8CzO,MAAK,MAAnD,EAA0DkL,QAAO,KAAjE,EAAuElK,KAAI,EAA3E,EAArB,EAAoG+I,OAAOO,YAAP,GAAoB,EAACtJ,KAAI,EAAL,EAAQ4Q,SAAQ,OAAhB,EAAwBqE,aAAY,CAAC,CAArC,EAAuC/K,QAAO,WAA9C,EAA0D2K,SAAQ,CAAlE,EAAoEpH,SAAQ,EAA5E,EAA+EqD,WAAU,EAAzF,EAAxH,EAAqN/H,OAAOI,iBAAP,GAAyB,EAA9O,EAAiPJ,OAAOQ,aAAP,GAAqB,EAAtQ,EAAyQR,OAAOW,QAAP,GAAgB,EAAzR,EAA4RX,OAAOgB,GAAP,GAAW,EAACiP,cAAa,YAAd,EAAvS,EAAmUjQ,OAAO2B,MAAP,GAAc,EAAjV,EAAoV3B,OAAOyB,UAAP,GAAkB,EAACmR,mBAAkB,CAAC,mCAAD,CAAnB,EAAyDC,gBAAe,CAAC,gCAAD,CAAxE,EAA2GC,gBAAe,CAAC,gCAAD,CAA1H,EAA6JC,oBAAmB,CAAC,6BAAD,CAAhL,EAAgNC,oBAAmB,CAAC,6BAAD,CAAnO,EAAtW,EAA0mB,OAAKT,OAAO1K,OAAZ,IAAqBzJ,IAAI,4BAAJ,CAA/nB,EAAiqB,KAAK,CAAL,KAASmU,OAAOG,YAAhB,IAA8BpR,kBAAkBiR,OAAOG,YAAP,CAAoB1G,OAAtC,CAA/rB,EAA8uB,KAAK,CAAL,KAASuG,OAAOjgB,GAAhB,IAAqByO,SAASwR,OAAOjgB,GAAhB,CAAnwB,EAAwxByN,UAAUwS,OAAOC,QAAjB,CAAxxB,EAAmzB,KAAK,CAAL,KAASD,OAAOE,GAAhB,IAAqBnS,SAASiS,OAAOE,GAAhB,CAAx0B,EAA61B,KAAK,CAAL,KAASF,OAAO3N,QAAhB,IAA0BlE,cAAc6R,OAAO3N,QAArB,CAAv3B,EAAs5B,KAAK,CAAL,KAAS2N,OAAO5O,MAAhB,IAAwBjC,YAAY6Q,OAAO5O,MAAnB,CAA96B,EAAy8B,KAAK,CAAL,KAAS4O,OAAOI,UAAhB,IAA4BnR,aAAa+Q,OAAOI,UAApB,CAAr+B,CAAqgC,IAAI/N,WAAS5E,OAAOW,QAApB,CAA6BiE,SAASyO,UAAT,GAAoB,EAApB,EAAuBzO,SAAS0O,cAAT,GAAwB,CAAC,CAAhD,EAAkD1O,SAAS2O,gBAAT,GAA0B,UAASljB,CAAT,EAAW;EAAC,SAAOuR,aAAa,KAAKf,UAAL,GAAgB,IAAhB,GAAqB2S,mBAAmBnjB,CAAnB,CAAlC,CAAP;EAAgE,CAAxJ,EAAyJuU,SAAS6O,eAAT,GAAyB,UAASpjB,CAAT,EAAW;EAAC,SAAOuR,aAAa,KAAKhB,SAAL,GAAe,KAAf,GAAqB4S,mBAAmBnjB,CAAnB,CAAlC,EAAyD8F,IAAzD,CAA8D,UAAS9F,CAAT,EAAW;EAAC,QAAIsP,IAAEtP,EAAEkI,QAAF,CAAWmb,IAAX,CAAgB,CAAhB,CAAN,CAAyB,OAAO/T,EAAEgU,YAAF,GAAe3R,kBAAkBrC,EAAEgU,YAApB,CAAf,EAAiDhU,EAAEiU,YAAF,GAAe5R,kBAAkBrC,EAAEiU,YAApB,CAAhE,EAAkGjU,CAAzG;EAA2G,GAA9M,CAAP;EAAuN,CAArZ,EAAsZiF,SAASC,aAAT,GAAuB,UAASxU,CAAT,EAAWsP,CAAX,EAAayB,CAAb,EAAe;EAAC,MAAIS,IAAE,IAAN,CAAW,KAAKyC,MAAL,GAAYjU,CAAZ,EAAc,KAAKiC,GAAL,GAASqN,CAAvB,EAAyB,KAAK0R,MAAL,GAAYjQ,CAArC,CAAuC,IAAIsF,IAAE8B,SAASC,aAAT,CAAuB,KAAvB,CAAN;EAAA,MAAoC7B,IAAE4B,SAASC,aAAT,CAAuB,MAAvB,CAAtC;EAAA,MAAqE1B,IAAEyB,SAASC,aAAT,CAAuB,OAAvB,CAAvE;EAAA,MAAuGzT,IAAEwT,SAASC,aAAT,CAAuB,QAAvB,CAAzG;EAAA,MAA0IoE,IAAErE,SAASC,aAAT,CAAuB,KAAvB,CAA5I,CAA0K,OAAOtG,eAAeuE,CAAf,EAAiB1G,OAAOyB,UAAP,CAAkBmR,iBAAnC,GAAsDzQ,eAAeyE,CAAf,EAAiB5G,OAAOyB,UAAP,CAAkBoR,cAAnC,CAAtD,EAAyGnM,EAAEiC,gBAAF,CAAmB,OAAnB,EAA2B,UAAStY,CAAT,EAAW;EAAC,WAAOA,EAAEwjB,eAAF,EAAP;EAA2B,GAAlE,CAAzG,EAA6KnN,EAAEiC,gBAAF,CAAmB,UAAnB,EAA8B,UAAStY,CAAT,EAAW;EAAC,WAAOA,EAAEwjB,eAAF,EAAP;EAA2B,GAArE,CAA7K,EAAoP9M,EAAEsD,EAAF,GAAK,+BAAzP,EAAyRtD,EAAEjG,WAAF,GAAc8D,SAAS9D,WAAhT,EAA4TiG,EAAE+M,YAAF,CAAe,YAAf,EAA4BlP,SAAS9D,WAArC,CAA5T,EAA8WiG,EAAE+M,YAAF,CAAe,MAAf,EAAsB,MAAtB,CAA9W,EAA4Y/M,EAAE+M,YAAF,CAAe,gBAAf,EAAgC,KAAhC,CAA5Y,EAAmb/M,EAAE+M,YAAF,CAAe,cAAf,EAA8B,KAA9B,CAAnb,EAAwd/M,EAAE+M,YAAF,CAAe,aAAf,EAA6B,KAA7B,CAAxd,EAA4f/M,EAAE+M,YAAF,CAAe,YAAf,EAA4B,OAA5B,CAA5f,EAAiiB/M,EAAE4B,gBAAF,CAAmB,SAAnB,EAA6B,UAAStY,CAAT,EAAW;EAAC,QAAIsP,IAAEkC,EAAEwR,UAAR,CAAmBxR,EAAEwR,UAAF,CAAate,MAAb,GAAoB,CAApB,KAAwB,gBAAc1E,EAAE0jB,IAAhB,IAAsB,OAAK1jB,EAAE2jB,OAA7B,KAAuCnS,EAAEyR,cAAF,GAAiBzR,EAAEwR,UAAF,CAAate,MAAb,GAAoB,CAArC,IAAwC8M,EAAEyR,cAAF,EAAxC,EAA2DzR,EAAEoS,gBAAF,CAAmBtU,EAAEkC,EAAEyR,cAAJ,CAAnB,CAAlG,GAA2I,cAAYjjB,EAAE0jB,IAAd,IAAoB,OAAK1jB,EAAE2jB,OAA3B,KAAqCnS,EAAEyR,cAAF,GAAiB,CAAjB,IAAoBzR,EAAEyR,cAAF,EAApB,EAAuCzR,EAAEoS,gBAAF,CAAmBtU,EAAEkC,EAAEyR,cAAJ,CAAnB,CAA5E,CAA3I,EAAgQ,aAAWjjB,EAAE0jB,IAAb,IAAmBlS,EAAEqS,mBAAF,CAAsB,CAAC,CAAvB,CAA3S;EAAsU,GAAlY,CAAjiB,EAAq6BnN,EAAE4B,gBAAF,CAAmB,OAAnB,EAA2B,UAAStY,CAAT,EAAW;EAACwR,MAAEsS,OAAF,CAAU9jB,EAAEmf,MAAF,CAAS5d,KAAnB;EAA0B,GAAjE,CAAr6B,EAAw+BmV,EAAE4B,gBAAF,CAAmB,OAAnB,EAA2B,UAAStY,CAAT,EAAW;EAACwR,MAAEsS,OAAF,CAAU9jB,EAAEmf,MAAF,CAAS5d,KAAnB;EAA0B,GAAjE,CAAx+B,EAA2iCoD,EAAE8e,YAAF,CAAe,MAAf,EAAsB,QAAtB,CAA3iC,EAA2kClN,EAAE+B,gBAAF,CAAmB,QAAnB,EAA4B,UAAStY,CAAT,EAAW;EAACA,MAAE+jB,cAAF,IAAmBvS,EAAEwR,UAAF,CAAate,MAAb,GAAoB,CAApB,IAAuB8M,EAAEwS,MAAF,CAASxS,EAAEwR,UAAF,CAAaxR,EAAEyR,cAAF,GAAiB,CAAjB,GAAmB,CAAnB,GAAqBzR,EAAEyR,cAApC,EAAoDjJ,EAA7D,CAA1C;EAA2G,GAAnJ,CAA3kC,EAAguCrV,EAAE8e,YAAF,CAAe,YAAf,EAA4BlP,SAAS9D,WAArC,CAAhuC,EAAkxCqB,eAAenN,CAAf,EAAiBgL,OAAOyB,UAAP,CAAkBqR,cAAnC,CAAlxC,EAAq0CjG,EAAExC,EAAF,GAAK,iCAA10C,EAA42ClI,eAAe0K,CAAf,EAAiB7M,OAAOyB,UAAP,CAAkBsR,kBAAnC,CAA52C,EAAm6ClG,EAAEzK,SAAF,CAAYC,GAAZ,CAAgB,eAAhB,CAAn6C,EAAo8CqE,EAAEoD,WAAF,CAAclD,CAAd,CAAp8C,EAAq9CA,EAAEkD,WAAF,CAAc/C,CAAd,CAAr9C,EAAs+CH,EAAEkD,WAAF,CAAc9U,CAAd,CAAt+C,EAAu/C0R,EAAEoD,WAAF,CAAc+C,CAAd,CAAv/C,EAAwgDnG,CAA/gD;EAAihD,CAA1qE,EAA2qE9B,SAASuP,OAAT,GAAiB,UAAS9jB,CAAT,EAAW;EAAC,MAAIsP,IAAE,IAAN,CAAW,IAAGtP,EAAE0E,MAAF,GAAS,CAAZ,EAAc,OAAO,KAAK,KAAKmf,mBAAL,EAAZ,CAAuC,KAAKX,gBAAL,CAAsBljB,CAAtB,EAAyB8F,IAAzB,CAA8B,UAAS9F,CAAT,EAAW;EAACsP,MAAE0T,UAAF,GAAahjB,EAAEkI,QAAF,CAAWmb,IAAxB,EAA6B/T,EAAE2U,kBAAF,CAAqB3U,EAAE0T,UAAvB,CAA7B;EAAgE,GAA1G;EAA4G,CAAp3E,EAAq3EzO,SAASyP,MAAT,GAAgB,UAAShkB,CAAT,EAAW;EAAC,MAAIsP,IAAE,IAAN,CAAW,KAAK8T,eAAL,CAAqBpjB,CAArB,EAAwB8F,IAAxB,CAA6B,UAAS9F,CAAT,EAAW;EAACsP,MAAE2E,MAAF,CAASjU,EAAEsjB,YAAX,EAAwBhU,EAAErN,GAA1B,GAA+BqN,EAAE0R,MAAF,CAASxD,IAAT,CAAc,eAAd,EAA8B,EAAClV,UAAStI,EAAEkkB,YAAZ,EAAyB/F,QAAOne,EAAEsjB,YAAlC,EAA+Ca,cAAankB,CAA5D,EAA9B,CAA/B,EAA6HsP,EAAEsU,gBAAF,CAAmB5jB,CAAnB,CAA7H,EAAmJsP,EAAEuU,mBAAF,EAAnJ;EAA2K,GAApN;EAAsN,CAAlnF,EAAmnFtP,SAASsP,mBAAT,GAA6B,UAAS7jB,CAAT,EAAW;EAAC,OAAKijB,cAAL,GAAoB,CAAC,CAArB,EAAuBjjB,MAAImY,SAAS+G,cAAT,CAAwB,+BAAxB,EAAyD3d,KAAzD,GAA+D,EAAnE,CAAvB,EAA8F4W,SAAS+G,cAAT,CAAwB,iCAAxB,EAA2DrF,SAA3D,GAAqE,EAAnK,EAAsK1B,SAAS+G,cAAT,CAAwB,iCAAxB,EAA2DnN,SAA3D,CAAqEC,GAArE,CAAyE,eAAzE,CAAtK;EAAgQ,CAA55F,EAA65FuC,SAASqP,gBAAT,GAA0B,UAAS5jB,CAAT,EAAW;EAAC,MAAIsP,IAAE6I,SAAS+H,sBAAT,CAAgCvQ,OAAOyB,UAAP,CAAkBuR,kBAAlD,CAAN,CAA4EvgB,MAAM7B,SAAN,CAAgB0B,GAAhB,CAAoBlB,IAApB,CAAyBuO,CAAzB,EAA2B,UAAStP,CAAT,EAAW;EAAC,WAAOA,EAAE+R,SAAF,CAAYnD,MAAZ,CAAmBe,OAAOyB,UAAP,CAAkBwR,sBAArC,CAAP;EAAoE,GAA3G,EAA6G,IAAI7R,IAAEoH,SAAS+G,cAAT,CAAwBlf,EAAEga,EAA1B,CAAN,CAAoCjJ,KAAGA,EAAEgB,SAAF,CAAYC,GAAZ,CAAgBrC,OAAOyB,UAAP,CAAkBwR,sBAAlC,CAAH,EAA6DzK,SAAS+G,cAAT,CAAwB,+BAAxB,EAAyD3d,KAAzD,GAA+DvB,EAAEkkB,YAA9H;EAA2I,CAA3yG,EAA4yG3P,SAAS0P,kBAAT,GAA4B,UAASjkB,CAAT,EAAW;EAAC,MAAIsP,IAAE,IAAN,CAAW,IAAG,KAAKuU,mBAAL,IAA2B7jB,EAAE0E,MAAF,GAAS,CAAvC,EAAyC;EAAC,QAAIqM,IAAEoH,SAASC,aAAT,CAAuB,IAAvB,CAAN,CAAmCpY,EAAEkC,OAAF,CAAU,UAASlC,CAAT,EAAW;EAAC,UAAIwR,IAAE2G,SAASC,aAAT,CAAuB,IAAvB,CAAN;EAAA,UAAmC/B,IAAE8B,SAASC,aAAT,CAAuB,GAAvB,CAArC,CAAiE/B,EAAEwD,SAAF,GAAY7Z,EAAEkkB,YAAd,EAA2B7N,EAAE2D,EAAF,GAAKha,EAAEga,EAAlC,EAAqClI,eAAeuE,CAAf,EAAiB1G,OAAOyB,UAAP,CAAkBuR,kBAAnC,CAArC,EAA4FtM,EAAEoN,YAAF,CAAe,MAAf,EAAsB,GAAtB,CAA5F,EAAuHpN,EAAEiC,gBAAF,CAAmB,OAAnB,EAA2B,UAAStY,CAAT,EAAW;EAACA,UAAE+jB,cAAF,IAAmBzU,EAAE0U,MAAF,CAAShkB,EAAEmf,MAAF,CAASnF,EAAlB,CAAnB;EAAyC,OAAhF,CAAvH,EAAyMxI,EAAEiI,WAAF,CAAcpD,CAAd,CAAzM,EAA0NtF,EAAE0I,WAAF,CAAcjI,CAAd,CAA1N;EAA2O,KAAlU,GAAoU2G,SAAS+G,cAAT,CAAwB,iCAAxB,EAA2DnN,SAA3D,CAAqEnD,MAArE,CAA4E,eAA5E,CAApU,EAAiauJ,SAAS+G,cAAT,CAAwB,iCAAxB,EAA2DzF,WAA3D,CAAuE1I,CAAvE,CAAja;EAA2e;EAAC,CAAx5H,EAAy5H,eAAa,OAAO+B,CAApB,IAAuB,cAAY,eAAa,OAAOA,CAApB,GAAsB,WAAtB,GAAkCI,UAAQJ,CAAR,CAA9C,CAAvB,KAAmFA,EAAEsR,aAAF,GAAgBtR,EAAEuR,SAAF,CAAYC,MAAZ,CAAmB,EAACC,YAAW,sBAAU;EAAC,QAAIvkB,IAAEgV,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuD,WAA7D;EAAA,QAAyE1F,IAAE0F,UAAU,CAAV,CAA3E;EAAA,QAAwFjE,IAAEqB,YAAYpS,CAAZ,CAA1F;EAAA,QAAyGwR,IAAEsB,EAAE0R,IAAF,CAAOF,MAAP,CAAc,EAAd,EAAiBhV,CAAjB,EAAmB,EAACmM,SAAQ1K,EAAE0K,OAAX,EAAmBpH,SAAQtD,EAAEsD,OAA7B,EAAqCoQ,QAAO,KAA5C,EAAkD/O,aAAY3E,EAAE2E,WAAhE,EAA4ET,YAAWlE,EAAEkE,UAAF,GAAalE,EAAEkE,UAAf,GAA0B,KAAjH,EAAuHyP,OAAM1kB,CAA7H,EAAnB,CAA3G,CAA+P8S,EAAEuR,SAAF,CAAY9jB,SAAZ,CAAsBgkB,UAAtB,CAAiCxjB,IAAjC,CAAsC,IAAtC,EAA2CgQ,EAAEnK,GAA7C,EAAiD4K,CAAjD;EAAoD,GAA1U,EAAnB,CAAhB,EAAgXsB,EAAEe,aAAF,GAAgB,UAAS7T,CAAT,EAAWsP,CAAX,EAAa;EAAC,SAAO,IAAIwD,EAAEsR,aAAN,CAAoBpkB,CAApB,EAAsBsP,CAAtB,CAAP;EAAgC,CAA9a,EAA+awD,EAAE6R,kBAAF,GAAqB7R,EAAEuR,SAAF,CAAYO,GAAZ,CAAgBN,MAAhB,CAAuB,EAACC,YAAW,sBAAU;EAAC,QAAIvkB,IAAEgV,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuD,EAA7D;EAAA,QAAgE1F,IAAE0F,UAAU,CAAV,CAAlE;EAAA,QAA+EjE,IAAE0B,eAAezS,CAAf,EAAiBsP,CAAjB,CAAjF;EAAA,QAAqGkC,IAAET,EAAEnK,GAAzG,CAA6G,OAAOmK,EAAEnK,GAAT,CAAa,IAAIyP,IAAEvD,EAAE0R,IAAF,CAAOF,MAAP,CAAc,EAAd,EAAiBhV,CAAjB,EAAmB,EAACQ,QAAOiB,EAAEH,SAAV,EAAoByD,SAAQ,EAA5B,EAA+BoH,SAAQ,CAAvC,EAAyCG,QAAO7K,EAAE2G,SAAlD,EAA4DF,SAAQzG,EAAEyG,OAAtE,EAA8EqE,aAAY9K,EAAE8K,WAA5F,EAAwG/K,QAAOC,EAAED,MAAjH,EAAnB,CAAN,CAAmJgC,EAAEuR,SAAF,CAAYO,GAAZ,CAAgBrkB,SAAhB,CAA0BgkB,UAA1B,CAAqCxjB,IAArC,CAA0C,IAA1C,EAA+CyQ,CAA/C,EAAiD6E,CAAjD;EAAoD,GAAxV,EAAvB,CAApc,EAAszBvD,EAAEiB,kBAAF,GAAqB,UAAS/T,CAAT,EAAWsP,CAAX,EAAa;EAAC,SAAO,IAAIwD,EAAE6R,kBAAN,CAAyB3kB,CAAzB,EAA2BsP,CAA3B,CAAP;EAAqC,CAA93B,EAA+3BwD,EAAE4F,OAAF,CAAUmM,iBAAV,GAA4B/R,EAAE4F,OAAF,CAAU4L,MAAV,CAAiB,EAAC3d,SAAQ,EAACyW,UAAS,UAAV,EAAT,EAA+BmH,YAAW,oBAASvkB,CAAT,EAAW;EAAC,SAAI,IAAIsP,CAAR,IAAatP,CAAb;EAAe,mBAAWkT,UAAQ,KAAKvM,OAAL,CAAa2I,CAAb,CAAR,CAAX,GAAoCwD,EAAEwR,MAAF,CAAS,KAAK3d,OAAL,CAAa2I,CAAb,CAAT,EAAyBtP,EAAEsP,CAAF,CAAzB,CAApC,GAAmE,KAAK3I,OAAL,CAAa2I,CAAb,IAAgBtP,EAAEsP,CAAF,CAAnF;EAAf;EAAuG,GAA7J,EAA8JwV,OAAM,eAAS9kB,CAAT,EAAW;EAAC,aAASsP,CAAT,CAAWA,CAAX,EAAa;EAACtP,QAAE+kB,KAAF,CAAQ,CAACzV,EAAE0I,MAAF,CAAS5E,QAAV,EAAmB9D,EAAE0I,MAAF,CAAS3E,SAA5B,CAAR;EAAgD,SAAItC,IAAE+B,EAAEwM,OAAF,CAAUC,MAAV,CAAiB,KAAjB,CAAN,CAA8BxO,EAAEiJ,EAAF,GAAK,2BAAL,EAAiCjJ,EAAEsH,SAAF,GAAY,2BAA7C,CAAyE,IAAI7G,IAAE2G,SAASC,aAAT,CAAuB,KAAvB,CAAN,CAAoC,OAAOrH,EAAE5O,MAAF,CAASqP,CAAT,GAAY,KAAK7K,OAAL,CAAaqe,UAAb,CAAwBC,SAAxB,MAAqCnS,EAAEwM,OAAF,CAAU4F,QAAV,CAAmBnU,CAAnB,EAAqB,SAArB,CAAjD,EAAiF+B,EAAEqS,QAAF,CAAW3M,EAAX,CAAczH,CAAd,EAAgB,OAAhB,EAAwB,YAAU;EAAC,WAAKpK,OAAL,CAAaqe,UAAb,CAAwBzM,KAAxB,IAAgCzF,EAAEwM,OAAF,CAAU4F,QAAV,CAAmBnU,CAAnB,EAAqB,SAArB,CAAhC;EAAgE,KAAnG,EAAoG,IAApG,CAAjF,EAA2L,KAAKpK,OAAL,CAAaqe,UAAb,CAAwBxM,EAAxB,CAA2B,UAA3B,EAAsC,UAASxY,CAAT,EAAW;EAAC8S,QAAEwM,OAAF,CAAU8F,WAAV,CAAsBrU,CAAtB,EAAwB,SAAxB,GAAmC+B,EAAEwM,OAAF,CAAU4F,QAAV,CAAmBnU,CAAnB,EAAqB,cAArB,CAAnC,EAAwEzB,EAAEtP,CAAF,CAAxE;EAA6E,KAA/H,CAA3L,EAA4T+Q,CAAnU;EAAqU,GAA9rB,EAA+rBsU,UAAS,kBAASrlB,CAAT,EAAW;EAAC,WAAOA,CAAP;EAAS,GAA7tB,EAAjB,CAA35B,EAA4oD8S,EAAEkB,iBAAF,GAAoB,UAAShU,CAAT,EAAW;EAAC,SAAO,IAAI8S,EAAE4F,OAAF,CAAUmM,iBAAd,CAAgC,EAACG,YAAWhlB,CAAZ,EAAhC,CAAP;EAAuD,CAAtzD,CAAz5H,CAAitL,IAAI6d,cAAYxO,qBAAqB,UAASrP,CAAT,EAAW;EAACA,IAAEuP,OAAF,GAAU,UAASvP,CAAT,EAAW;EAAC,WAAOA,MAAIA,IAAE,EAAN,GAAUA,EAAE4hB,KAAF,GAAQ,EAAlB,EAAqB5hB,EAAE6hB,OAAF,GAAU,CAAC,CAAhC,EAAkC7hB,EAAE8hB,QAAF,GAAW,EAA7C,EAAgD9hB,EAAEwY,EAAF,GAAK,UAASlJ,CAAT,EAAWyB,CAAX,EAAa;EAAC/Q,QAAE4hB,KAAF,CAAQtS,CAAR,IAAWtP,EAAE4hB,KAAF,CAAQtS,CAAR,KAAY,EAAvB,EAA0BtP,EAAE4hB,KAAF,CAAQtS,CAAR,EAAWtM,IAAX,CAAgB+N,CAAhB,CAA1B;EAA6C,KAAhH,EAAiH/Q,EAAE+hB,GAAF,GAAM,UAASzS,CAAT,EAAWyB,CAAX,EAAa;EAAC,UAAG/Q,EAAE4hB,KAAF,CAAQtS,CAAR,CAAH,EAAc,KAAI,IAAIkC,CAAR,IAAaxR,EAAE4hB,KAAF,CAAQtS,CAAR,CAAb;EAAwB,YAAGtP,EAAE4hB,KAAF,CAAQtS,CAAR,EAAWkC,CAAX,MAAgBT,CAAnB,EAAqB;EAAC/Q,YAAE4hB,KAAF,CAAQtS,CAAR,EAAW0S,MAAX,CAAkBxQ,CAAlB,EAAqB;EAAM;EAAzE;EAA0E,KAA7N,EAA8NxR,EAAEwd,IAAF,GAAO,UAASlO,CAAT,EAAW;EAAC,UAAGtP,EAAE4hB,KAAF,CAAQtS,CAAR,CAAH,EAAc;EAAC,YAAIyB,IAAE3O,MAAM7B,SAAN,CAAgBwE,KAAhB,CAAsBhE,IAAtB,CAA2BiU,SAA3B,EAAqC,CAArC,CAAN,CAA8C,IAAGhV,EAAE6hB,OAAL,EAAa,OAAO7hB,EAAE8hB,QAAF,CAAWxS,CAAX,IAActP,EAAE8hB,QAAF,CAAWxS,CAAX,KAAe,EAA7B,EAAgC,KAAKtP,EAAE8hB,QAAF,CAAWxS,CAAX,EAActM,IAAd,CAAmB+N,CAAnB,CAA5C,CAAkE,KAAI,IAAIS,CAAR,IAAaxR,EAAE4hB,KAAF,CAAQtS,CAAR,CAAb;EAAwBtP,YAAE4hB,KAAF,CAAQtS,CAAR,EAAWkC,CAAX,EAAcyQ,KAAd,CAAoBjiB,CAApB,EAAsB+Q,CAAtB;EAAxB;EAAiD;EAAC,KAA/a,EAAgb/Q,EAAEyO,KAAF,GAAQ,YAAU;EAACzO,QAAE6hB,OAAF,GAAU,CAAC,CAAX;EAAa,KAAhd,EAAid7hB,EAAE0O,MAAF,GAAS,YAAU;EAAC1O,QAAE6hB,OAAF,GAAU,CAAC,CAAX,CAAa,KAAI,IAAIvS,CAAR,IAAatP,EAAE8hB,QAAf;EAAwB,aAAI,IAAI/Q,IAAE,CAAV,EAAYA,IAAE/Q,EAAE8hB,QAAF,CAAWxS,CAAX,EAAc5K,MAA5B,EAAmCqM,GAAnC;EAAuC/Q,YAAEwd,IAAF,CAAOlO,CAAP,EAAStP,EAAE8hB,QAAF,CAAWxS,CAAX,EAAcyB,CAAd,CAAT;EAAvC;EAAxB;EAA0F,KAA5kB,EAA6kB/Q,CAAplB;EAAslB,GAA5mB;EAA6mB,CAA9oB,CAAhB;EAAA,IAAgqBslB,uBAAqB,EAACC,QAAO,CAAC,CAAT,EAArrB;EAAA,IAAisBzH,aAAW,SAAXA,UAAW,CAAS9d,CAAT,EAAW;EAAC,MAAIsP,IAAEG,WAAS,EAAT,EAAY6V,oBAAZ,EAAiCtlB,CAAjC,CAAN,CAA0C,OAAM,EAACuY,OAAM,iBAAU;EAAC,aAAOjJ,EAAE3C,OAAF,GAAU,CAAC,CAAX,EAAaiR,UAAU4H,WAAV,CAAsBC,kBAAtB,CAAyClI,gBAAgBmI,IAAhB,CAAqB,IAArB,CAAzC,EAAoEjI,qBAAqBiI,IAArB,CAA0B,IAA1B,CAApE,EAAoG,EAACC,YAAW,GAAZ,EAApG,CAAb,EAAmI,IAA1I;EAA+I,KAAjK,EAAkK5H,MAAK,gBAAU;EAAC,aAAOzO,EAAE3C,OAAF,GAAU,CAAC,CAAX,EAAa,IAApB;EAAyB,KAA3M,EAA4MsY,WAAU,qBAAU;EAAC,aAAO3V,EAAE3C,OAAT;EAAiB,KAAlP,EAAmP+F,KAAI,eAAU;EAAC,aAAOJ,QAAQI,GAAR,CAAYpD,CAAZ,GAAe,IAAtB;EAA2B,KAA7R,EAAN;EAAqS,CAAviC;EAAA,IAAwiCsW,eAAa,SAAbA,YAAa,CAAS5lB,CAAT,EAAWsP,CAAX,EAAayB,CAAb,EAAe;EAAC,SAAO,UAASS,CAAT,EAAW;EAAC,WAAO,UAAS6E,CAAT,EAAWE,CAAX,EAAa;EAAC,YAAIF,CAAJ,IAAO7E,EAAE,CAAF,EAAI,UAASA,CAAT,EAAW6E,CAAX,EAAa;EAAC,cAAI7E,CAAJ,GAAMwM,MAAM1O,EAAEtP,CAAF,EAAI,EAACob,GAAE/E,EAAE8H,MAAF,CAASrJ,GAAZ,EAAgBuG,GAAEhF,EAAE8H,MAAF,CAAStJ,GAA3B,EAAJ,CAAN,EAA4C/O,IAA5C,CAAiD,UAAS9F,CAAT,EAAW;EAAC,cAAIsP,IAAE,EAACuW,aAAY9U,EAAE/Q,CAAF,CAAb,EAAkBme,QAAO9H,EAAE8H,MAA3B,EAAN,CAAyC5H,EAAE,CAAF,EAAIjH,CAAJ;EAAO,SAA7G,CAAN,GAAqHiH,EAAE/E,CAAF,EAAI6E,CAAJ,CAArH;EAA4H,OAA9I,CAAP;EAAuJ,KAA5K;EAA6K,GAAhM;EAAiM,CAAtwC;EAAA,IAAuwCyP,gBAAc,SAAdA,aAAc,CAAS9lB,CAAT,EAAWsP,CAAX,EAAayB,CAAb,EAAeS,CAAf,EAAiB;EAAC,MAAI6E,IAAEuP,aAAatW,CAAb,EAAeyB,CAAf,EAAiBS,CAAjB,EAAoBxR,CAApB,CAAN,CAA6B,OAAOqW,EAAE0P,SAAF,GAAY,UAAS/lB,CAAT,EAAW;EAACqW,MAAE,CAAF,EAAIrW,CAAJ;EAAO,GAA/B,EAAgCqW,CAAvC;EAAyC,CAA72C;EAAA,IAA82CgI,cAAY,EAACQ,SAAQ,EAAT,EAAYC,cAAa,sBAAS9e,CAAT,EAAW;EAAC,QAAIsP,IAAE+O,YAAYQ,OAAZ,CAAoBmH,SAApB,CAA8B,UAAS1W,CAAT,EAAW;EAAC,aAAOA,MAAItP,CAAX;EAAa,KAAvD,CAAN,CAA+Dqe,YAAYQ,OAAZ,CAAoBvP,CAApB,EAAuBV,MAAvB,IAAgCyP,YAAYQ,OAAZ,CAAoBmD,MAApB,CAA2B1S,CAA3B,EAA6B,CAA7B,CAAhC;EAAgE,GAApK,EAAqKqP,WAAU,mBAAS3e,CAAT,EAAW;EAAC,QAAIsP,IAAE0F,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,IAA2CA,UAAU,CAAV,CAAjD,CAA8DqJ,YAAYQ,OAAZ,CAAoB7b,IAApB,CAAyBhD,CAAzB,GAA4BsP,KAAGtP,EAAEwY,EAAF,CAAK,OAAL,EAAa,YAAU;EAAC6F,kBAAYS,YAAZ,CAAyB9e,CAAzB;EAA4B,KAApD,CAA/B;EAAqF,GAA9U,EAA13C;EAAA,IAA0sDghB,SAAO,EAACC,SAAQ,EAACrN,SAAQA,OAAT,EAAiBE,cAAaA,YAA9B,EAA2Cb,aAAYA,WAAvD,EAAmEqB,iBAAgBA,eAAnF,EAAmGN,mBAAkBA,iBAArH,EAAT,EAAiJmN,YAAW,EAACvN,SAAQmB,SAAT,EAAmBjB,cAAaoD,cAAhC,EAA+CjE,aAAY0C,aAA3D,EAAyErB,iBAAgB0E,iBAAzF,EAA2GhF,mBAAkB2D,mBAA7H,EAA5J,EAA8SuJ,YAAW,EAACtN,SAAQkI,SAAT,EAAmBhI,cAAagJ,cAAhC,EAA+C7J,aAAY8J,aAA3D,EAAyE/I,mBAAkB+F,mBAA3F,EAA+GzF,iBAAgB+I,iBAA/H,EAAzT,EAAjtD,CAA6pEsE,UAAUX,MAAV,EAAkB,IAAIiF,yBAAuB,EAA3B,CAA8BjF,OAAOkF,GAAP,GAAWlH,cAAX,EAA0BgC,OAAOmF,SAAP,GAAiB,YAAU;EAAC,MAAInmB,IAAEgV,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuD,EAA7D;EAAA,MAAgE1F,IAAEiS,UAAU5R,OAAOgB,GAAjB,EAAqB3Q,CAArB,CAAlE,CAA0F,IAAG;EAAC,QAAG,mBAAiBghB,OAAOkF,GAAxB,IAA6B,mBAAiBlF,OAAOkF,GAAxD,EAA4D,MAAK,EAACE,SAAQ,0HAAT,EAAL;EAA0I,GAA1M,CAA0M,OAAMpmB,CAAN,EAAQ;EAACsS,YAAQxO,KAAR,CAAc9D,EAAEomB,OAAhB;EAAyB,OAAIrV,IAAEkO,QAAQ+B,OAAOkF,GAAf,EAAmB5W,CAAnB,CAAN;EAAA,MAA4BkC,IAAEuP,sBAAsBC,OAAOkF,GAA7B,EAAiCnV,CAAjC,EAAmCzB,EAAEsG,KAArC,CAA9B,CAA0E,IAAGiL,cAAcG,OAAOkF,GAArB,EAAyB1U,CAAzB,EAA2BT,CAA3B,EAA6BzB,EAAEsG,KAA/B,GAAsCtG,EAAE+W,MAAF,IAAU3E,wBAAwBV,OAAOkF,GAA/B,EAAmCnV,CAAnC,CAAhD,EAAsFzB,EAAEgE,MAA3F,EAAkG;EAAC,QAAI+C,IAAE/G,EAAEgE,MAAR,CAAe,aAAW,OAAOhE,EAAEgE,MAApB,KAA6B+C,IAAEiL,eAAeN,OAAOkF,GAAtB,EAA0BnV,CAA1B,CAA/B,EAA6D,IAAIwF,IAAE8K,kBAAkBL,OAAOkF,GAAzB,EAA6BnV,CAA7B,EAA+BsF,CAA/B,CAAN,CAAwCgI,YAAYM,SAAZ,CAAsBpI,CAAtB,EAAwB,CAAC,CAAzB,GAA4BsK,cAAcG,OAAOkF,GAArB,EAAyB3P,CAAzB,EAA2BxF,CAA3B,CAA5B;EAA0D,OAAGzB,EAAEgX,OAAF,IAAW,YAAUhX,EAAEgX,OAA1B,EAAkC;EAAC,QAAI5P,IAAE0K,mBAAmBJ,OAAOkF,GAA1B,EAA8BnV,CAA9B,EAAgCzB,EAAEgX,OAAlC,CAAN,CAAiDzF,cAAcG,OAAOkF,GAArB,EAAyBxP,CAAzB,EAA2B3F,CAA3B;EAA8B,UAAO,KAAK,CAAL,KAASA,CAAT,IAAYA,EAAEyH,EAAF,CAAK,OAAL,EAAa,UAASxY,CAAT,EAAW;EAACghB,WAAOxD,IAAP,CAAY,UAAZ,EAAuBxd,CAAvB;EAA0B,GAAnD,CAAZ,EAAiE+Q,CAAxE;EAA0E,CAAn5B,EAAo5BiQ,OAAOuF,SAAP,GAAiB,UAASvmB,CAAT,EAAW;EAAC,MAAIsP,IAAE0F,UAAUtQ,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASsQ,UAAU,CAAV,CAA7B,GAA0CA,UAAU,CAAV,CAA1C,GAAuD,EAA7D;EAAA,MAAgEjE,IAAE2M,WAAW6D,UAAU0E,sBAAV,EAAiC3W,CAAjC,CAAX,CAAlE,CAAkHkS,sBAAsBR,OAAOkF,GAA7B,EAAiCnV,CAAjC,EAAmC/Q,CAAnC;EAAsC,CAAzkC,EAA0kCghB,OAAOwF,aAAP,GAAqB,UAASxmB,CAAT,EAAW;EAAC2S,kBAAgB3S,CAAhB,EAAmB,IAAIsP,IAAE,WAASA,EAAT,EAAWyB,CAAX,EAAa;EAAC,UAAIzB,EAAJ,KAAQtP,EAAEwY,EAAF,CAAK,OAAL,EAAa,UAASxY,CAAT,EAAW;EAAC+Q,QAAE,CAAF,EAAI/Q,CAAJ;EAAO,KAAhC,GAAkC+Q,EAAE,CAAF,EAAI,UAAS/Q,CAAT,EAAWsP,CAAX,EAAa,EAAjB,CAA1C;EAAgE,GAApF,CAAqF,OAAOA,EAAEyW,SAAF,GAAY,UAAS/lB,CAAT,EAAW;EAACsP,MAAE,CAAF,EAAItP,CAAJ;EAAO,GAA/B,EAAgCsP,CAAvC;EAAyC,CAA5vC,EAA6vC0R,OAAO8E,aAAP,GAAqBA,aAAlxC,EAAgyC9E,OAAOpC,YAAP,GAAoBA,YAApzC,EAAi0CoC,OAAOjC,WAAP,GAAmBA,WAAp1C,CAAg2C;;ECAhg3B,kBAAS0H,IAAT,EAAe;EAC5BA,OAAK,WAAL,EAAkB,iFAAlB;EACAA,OAAK,WAAL,EAAkB,iHAAlB;EACAA,OAAK,WAAL,EAAkB,kJAAlB;;EAEAA,OAAKC,KAAL,GAAaD,KAAK,WAAL,CAAb;EACAA,OAAK,WAAL,IAAoBA,KAAK,WAAL,CAApB,CAN4B;EAO5BA,OAAKE,MAAL,GAAcF,KAAK,WAAL,CAAd;EACAA,OAAK,aAAL,IAAsBA,KAAK,WAAL,CAAtB;EACAA,OAAK,aAAL,IAAsBA,KAAK,WAAL,CAAtB;EACD;;ECVM,IAAIG,aAAa,CAAjB;AACP,EAAO,IAAIC,aAAa,CAAjB;AACP,EAAO,IAAIC,gBAAgB,CAApB;AACP,EAAO,IAAIC,YAAY,CAAhB;AACP,EAAO,IAAIC,cAAc,CAAlB;AACP,EAAO,IAAIC,sBAAsB,SAA1B;AACP,EAAO,IAAIC,sBAAsB,WAA1B;AACP,EAAO,IAAIC,qBAAqB,qBAAzB;AACP,EAAO,IAAIC,aAAa,kCAAjB;AACP,EAAO,IAAIC,UAAUpL,KAAKqL,EAAL,GAAQ,CAAtB;EACP;AACA,EAAO,IAAIC,QAAQ,qBAAZ;EACP;AACA,EAAO,IAAIC,MAAM,sBAAV;EACP;AACA,EAAO,IAAIC,MAAM,sBAAV;AACP,EAAO,IAAIC,QAAQ,OAAZ;EACP;EACA;;AAEA,EAAO,IAAIC,MAAM,sBAAV;AACP,EAAO,IAAIC,MAAM,oBAAV;AACP,EAAO,IAAIC,SAAS5L,KAAKqL,EAAL,GAAQ,CAArB;AACP,EAAO,IAAIQ,SAAS7L,KAAKqL,EAAL,GAAU,CAAvB;EACP;EACA;EACA;EACA;AACA,EAAO,IAAIS,MAAM,aAAV;;EC5BP,IAAIxY,YAAU,EAAd;AACA;AAEAA,YAAQyY,SAAR,GAAoB,GAApB;AACAzY,YAAQ0Y,MAAR,GAAiB,CAAC,cAAlB;AACA1Y,YAAQ2Y,KAAR,GAAgB,cAAhB;AACA3Y,YAAQ4Y,MAAR,GAAiB,CAAC,eAAlB;AACA5Y,YAAQ6Y,MAAR,GAAiB,CAAC,cAAlB;AACA7Y,YAAQ8Y,IAAR,GAAe,eAAf;AACA9Y,YAAQ+Y,IAAR,GAAe,cAAf;AACA/Y,YAAQgZ,OAAR,GAAkB,gBAAlB;AACAhZ,YAAQiZ,KAAR,GAAgB,CAAC,eAAjB;AACAjZ,YAAQkZ,QAAR,GAAmB,QAAnB;AACAlZ,YAAQmZ,SAAR,GAAoB,eAApB;AACAnZ,YAAQoZ,MAAR,GAAiB,UAAjB;AACApZ,YAAQqZ,IAAR,GAAe,eAAf;;ACfA,eAAe;EACbC,MAAI,EAACC,UAAU,MAAX,EADS;EAEb,WAAS,EAACA,UAAU,OAAO,IAAlB;EAFI,CAAf;;ECAA,IAAIC,cAAc,gBAAlB;AACA,EAAe,SAASC,KAAT,CAAe3oB,GAAf,EAAoBuH,GAApB,EAAyB;EACtC,MAAIvH,IAAIuH,GAAJ,CAAJ,EAAc;EACZ,WAAOvH,IAAIuH,GAAJ,CAAP;EACD;EACD,MAAI7E,OAAOlC,OAAOkC,IAAP,CAAY1C,GAAZ,CAAX;EACA,MAAI4oB,OAAOrhB,IAAIvG,WAAJ,GAAkBgG,OAAlB,CAA0B0hB,WAA1B,EAAuC,EAAvC,CAAX;EACA,MAAIpkB,IAAI,CAAC,CAAT;EACA,MAAIukB,OAAJ,EAAaC,YAAb;EACA,SAAO,EAAExkB,CAAF,GAAM5B,KAAK2B,MAAlB,EAA0B;EACxBwkB,cAAUnmB,KAAK4B,CAAL,CAAV;EACAwkB,mBAAeD,QAAQ7nB,WAAR,GAAsBgG,OAAtB,CAA8B0hB,WAA9B,EAA2C,EAA3C,CAAf;EACA,QAAII,iBAAiBF,IAArB,EAA2B;EACzB,aAAO5oB,IAAI6oB,OAAJ,CAAP;EACD;EACF;EACF;;ECXc,oBAASE,OAAT,EAAkB;EAC/B,MAAI5pB,OAAO,EAAX;EACA,MAAI6pB,WAAWD,QAAQjiB,KAAR,CAAc,GAAd,EAAmBlF,GAAnB,CAAuB,UAASqH,CAAT,EAAY;EAChD,WAAOA,EAAEpC,IAAF,EAAP;EACD,GAFc,EAEZ8G,MAFY,CAEL,UAASuI,CAAT,EAAY;EACpB,WAAOA,CAAP;EACD,GAJc,EAIZ+S,MAJY,CAIL,UAASC,CAAT,EAAYhT,CAAZ,EAAe;EACvB,QAAIpP,QAAQoP,EAAEpP,KAAF,CAAQ,GAAR,CAAZ;EACAA,UAAMnE,IAAN,CAAW,IAAX;EACAumB,MAAEpiB,MAAM,CAAN,EAAS9F,WAAT,EAAF,IAA4B8F,MAAM,CAAN,CAA5B;EACA,WAAOoiB,CAAP;EACD,GATc,EASZ,EATY,CAAf;EAUA,MAAIC,SAAJ,EAAeC,QAAf,EAAyBC,YAAzB;EACA,MAAIrS,SAAS;EACXb,UAAM,UADK;EAEXmT,WAAO,WAFI;EAGXC,QAAI,YAAStgB,CAAT,EAAY;EACd9J,WAAKoqB,EAAL,GAAU/X,WAAWvI,CAAX,CAAV;EACD,KALU;EAMXugB,WAAO,eAASvgB,CAAT,EAAY;EACjB9J,WAAKsqB,IAAL,GAAYxgB,IAAIqe,GAAhB;EACD,KARU;EASXoC,WAAO,eAASzgB,CAAT,EAAY;EACjB9J,WAAKwqB,IAAL,GAAY1gB,IAAIqe,GAAhB;EACD,KAXU;EAYXsC,WAAO,eAAS3gB,CAAT,EAAY;EACjB9J,WAAK0qB,IAAL,GAAY5gB,IAAIqe,GAAhB;EACD,KAdU;EAeXwC,YAAQ,gBAAS7gB,CAAT,EAAY;EAClB9J,WAAK2qB,MAAL,GAAc7gB,IAAIqe,GAAlB;EACD,KAjBU;EAkBXyC,WAAO,eAAS9gB,CAAT,EAAY;EACjB9J,WAAK6qB,KAAL,GAAa/gB,IAAIqe,GAAjB;EACD,KApBU;EAqBX2C,WAAO,eAAShhB,CAAT,EAAY;EACjB9J,WAAK+qB,KAAL,GAAajhB,IAAIqe,GAAjB;EACD,KAvBU;EAwBX6C,WAAO,eAASlhB,CAAT,EAAY;EACjB9J,WAAKirB,KAAL,GAAanhB,IAAIqe,GAAjB;EACD,KA1BU;EA2BX+C,WAAO,eAASphB,CAAT,EAAY;EACjB9J,WAAKkrB,KAAL,GAAa7Y,WAAWvI,CAAX,IAAgBqe,GAA7B;EACD,KA7BU;EA8BXgD,WAAO,eAASrhB,CAAT,EAAY;EACjB9J,WAAKorB,oBAAL,GAA4B/Y,WAAWvI,CAAX,CAA5B;EACD,KAhCU;EAiCXuhB,UAAM,cAASvhB,CAAT,EAAY;EAChB9J,WAAKsrB,KAAL,GAAaxhB,IAAIqe,GAAjB;EACD,KAnCU;EAoCXoD,SAAK,aAASzhB,CAAT,EAAY;EACf9J,WAAKwrB,EAAL,GAAUnZ,WAAWvI,CAAX,CAAV;EACD,KAtCU;EAuCX2hB,SAAK,aAAS3hB,CAAT,EAAY;EACf9J,WAAK0rB,EAAL,GAAUrZ,WAAWvI,CAAX,CAAV;EACD,KAzCU;EA0CX6hB,SAAK,aAAS7hB,CAAT,EAAY;EACf9J,WAAK4rB,EAAL,GAAUvZ,WAAWvI,CAAX,CAAV;EACD,KA5CU;EA6CX+hB,OAAG,WAAS/hB,CAAT,EAAY;EACb9J,WAAK4rB,EAAL,GAAUvZ,WAAWvI,CAAX,CAAV;EACD,KA/CU;EAgDXiN,OAAG,WAASjN,CAAT,EAAY;EACb9J,WAAK+W,CAAL,GAAS1E,WAAWvI,CAAX,CAAT;EACD,KAlDU;EAmDXgiB,OAAG,WAAShiB,CAAT,EAAY;EACb9J,WAAK8rB,CAAL,GAASzZ,WAAWvI,CAAX,CAAT;EACD,KArDU;EAsDXiiB,SAAK,eAAW;EACd/rB,WAAKgsB,GAAL,GAAW,IAAX;EACD,KAxDU;EAyDXC,UAAM,cAASniB,CAAT,EAAY;EAChB9J,WAAKisB,IAAL,GAAYC,SAASpiB,CAAT,EAAY,EAAZ,CAAZ;EACD,KA3DU;EA4DXqiB,WAAO,iBAAW;EAChBnsB,WAAKosB,QAAL,GAAgB,IAAhB;EACD,KA9DU;EA+DXC,aAAS,iBAASviB,CAAT,EAAY;EACnB9J,WAAKssB,YAAL,GAAoBxiB,EAAEnC,KAAF,CAAQ,GAAR,EAAalF,GAAb,CAAiB,UAASsU,CAAT,EAAY;EAC/C,eAAO1E,WAAW0E,CAAX,CAAP;EACD,OAFmB,CAApB;EAGD,KAnEU;EAoEXuS,cAAU,kBAASxf,CAAT,EAAY;EACpB9J,WAAKspB,QAAL,GAAgBjX,WAAWvI,CAAX,CAAhB;EACD,KAtEU;EAuEXyiB,WAAO,eAASziB,CAAT,EAAY;EACjB9J,WAAKusB,KAAL,GAAaziB,CAAb;EACA,UAAI0iB,OAAOhD,MAAM+C,MAAN,EAAaziB,CAAb,CAAX;EACA,UAAI0iB,IAAJ,EAAU;EACRxsB,aAAKspB,QAAL,GAAgBkD,KAAKlD,QAArB;EACD;EACF,KA7EU;EA8EXmD,oBAAgB,wBAAS3iB,CAAT,EAAY;EAC1B9J,WAAKysB,cAAL,GAAsB3iB,IAAIqe,GAA1B;EACD,KAhFU;EAiFXuE,QAAI,YAAS5iB,CAAT,EAAY;EACd,UAAI4iB,KAAKlD,MAAMmD,SAAN,EAAqB7iB,CAArB,CAAT;EACA9J,WAAKysB,cAAL,GAAsB,CAACC,KAAKA,EAAL,GAAUra,WAAWvI,CAAX,CAAX,IAA4Bqe,GAAlD;EACD,KApFU;EAqFXyE,cAAU,kBAAS9iB,CAAT,EAAY;EACpB,UAAIA,MAAM,OAAV,EAAmB;EACjB9J,aAAK6sB,SAAL,GAAiB,MAAjB;EACD,OAFD,MAGK;EACH7sB,aAAK4sB,QAAL,GAAgB9iB,CAAhB;EACD;EACF,KA5FU;EA6FXgjB,UAAM,cAAShjB,CAAT,EAAY;EAChB,UAAIijB,YAAY,QAAhB;EACA,UAAIjjB,EAAE5E,MAAF,KAAa,CAAb,IAAkB6nB,UAAU3rB,OAAV,CAAkB0I,EAAEkjB,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAlB,MAAsC,CAAC,CAAzD,IAA8DD,UAAU3rB,OAAV,CAAkB0I,EAAEkjB,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAlB,MAAsC,CAAC,CAArG,IAA0GD,UAAU3rB,OAAV,CAAkB0I,EAAEkjB,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAlB,MAAsC,CAAC,CAArJ,EAAwJ;EACtJhtB,aAAK8sB,IAAL,GAAYhjB,CAAZ;EACD;EACF,KAlGU;EAmGXmjB,YAAQ,kBAAW;EACjBjtB,WAAKitB,MAAL,GAAc,IAAd;EACD;EArGU,GAAb;EAuGA,OAAKjD,SAAL,IAAkBH,QAAlB,EAA4B;EAC1BI,eAAWJ,SAASG,SAAT,CAAX;EACA,QAAIA,aAAanS,MAAjB,EAAyB;EACvBqS,qBAAerS,OAAOmS,SAAP,CAAf;EACA,UAAI,OAAOE,YAAP,KAAwB,UAA5B,EAAwC;EACtCA,qBAAaD,QAAb;EACD,OAFD,MAGK;EACHjqB,aAAKkqB,YAAL,IAAqBD,QAArB;EACD;EACF,KARD,MASK;EACHjqB,WAAKgqB,SAAL,IAAkBC,QAAlB;EACD;EACF;EACD,MAAG,OAAOjqB,KAAK6sB,SAAZ,KAA0B,QAA1B,IAAsC7sB,KAAK6sB,SAAL,KAAmB,OAA5D,EAAoE;EAClE7sB,SAAK6sB,SAAL,GAAiB7sB,KAAK6sB,SAAL,CAAehrB,WAAf,EAAjB;EACD;EACD,SAAO7B,IAAP;EACD;;EC1ID,IAAIktB,UAAU,CAAd;EACA,IAAIC,UAAU,CAAd;EACA,IAAIC,SAAS,CAAb;EACA,IAAIC,SAAS,CAAb;EACA,IAAIC,aAAa,CAAjB;EACA,IAAIC,QAAQ,CAAC,CAAb;EACA,IAAIC,aAAa,IAAjB;EACA,IAAIC,QAAQ,UAAZ;EACA,IAAIC,UAAU,aAAd;EACA,IAAIC,YAAY,OAAhB;EACA,IAAIC,SAAS,aAAb;EACA;EACA,SAASC,MAAT,CAAgBtnB,IAAhB,EAAsB;EACpB,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;EAC5B,UAAM,IAAIJ,KAAJ,CAAU,cAAV,CAAN;EACD;EACD,OAAKI,IAAL,GAAYA,KAAKmB,IAAL,EAAZ;EACA,OAAKomB,KAAL,GAAa,CAAb;EACA,OAAKC,KAAL,GAAa,CAAb;EACA,OAAKC,IAAL,GAAY,IAAZ;EACA,OAAKC,KAAL,GAAa,EAAb;EACA,OAAKC,aAAL,GAAqB,IAArB;EACA,OAAKC,KAAL,GAAajB,OAAb;EACD;EACDW,OAAO9sB,SAAP,CAAiBqtB,aAAjB,GAAiC,YAAW;EAC1C,MAAIC,OAAO,KAAK9nB,IAAL,CAAU,KAAKwnB,KAAL,EAAV,CAAX;EACA,MAAI,KAAKI,KAAL,KAAed,MAAnB,EAA2B;EACzB,WAAOG,WAAW7rB,IAAX,CAAgB0sB,IAAhB,CAAP,EAA8B;EAC5B,UAAI,KAAKN,KAAL,IAAc,KAAKxnB,IAAL,CAAUrB,MAA5B,EAAoC;EAClC;EACD;EACDmpB,aAAO,KAAK9nB,IAAL,CAAU,KAAKwnB,KAAL,EAAV,CAAP;EACD;EACF;EACD,UAAQ,KAAKI,KAAb;EACE,SAAKjB,OAAL;EACE,aAAO,KAAKoB,OAAL,CAAaD,IAAb,CAAP;EACF,SAAKlB,OAAL;EACE,aAAO,KAAKO,OAAL,CAAaW,IAAb,CAAP;EACF,SAAKhB,MAAL;EACE,aAAO,KAAKkB,MAAL,CAAYF,IAAZ,CAAP;EACF,SAAKf,UAAL;EACE,aAAO,KAAKkB,UAAL,CAAgBH,IAAhB,CAAP;EACF,SAAKjB,MAAL;EACE,aAAO,KAAKqB,MAAL,CAAYJ,IAAZ,CAAP;EACF,SAAKd,KAAL;EACE;EAZJ;EAcD,CAxBD;EAyBAM,OAAO9sB,SAAP,CAAiBytB,UAAjB,GAA8B,UAASH,IAAT,EAAe;EAC3C,MAAIA,SAAS,GAAb,EAAkB;EAChB,SAAKK,IAAL,IAAa,GAAb;EACA,SAAKP,KAAL,GAAad,MAAb;EACA;EACD;EACD,MAAIM,UAAUhsB,IAAV,CAAe0sB,IAAf,CAAJ,EAA0B;EACxB,SAAKK,IAAL,GAAY,KAAKA,IAAL,CAAUhnB,IAAV,EAAZ;EACA,SAAKinB,SAAL,CAAeN,IAAf;EACA;EACD;EACD,QAAM,IAAIloB,KAAJ,CAAU,sBAAqBkoB,IAArB,GAA4B,6BAA5B,GAA4D,KAAKN,KAA3E,CAAN;EACD,CAZD;EAaAF,OAAO9sB,SAAP,CAAiB4tB,SAAjB,GAA6B,UAASN,IAAT,EAAe;EAC1C,MAAIA,SAAS,GAAb,EAAkB;EAChB,QAAI,KAAKK,IAAL,KAAc,IAAlB,EAAwB;EACtB,WAAKR,aAAL,CAAmB1qB,IAAnB,CAAwB,KAAKkrB,IAA7B;EACD;EACD,SAAKA,IAAL,GAAY,IAAZ;EACA,SAAKP,KAAL,GAAajB,OAAb;EACA;EACD;EACD,MAAImB,SAAS,GAAb,EAAkB;EAChB,SAAKP,KAAL;EACA,QAAI,KAAKY,IAAL,KAAc,IAAlB,EAAwB;EACtB,WAAKR,aAAL,CAAmB1qB,IAAnB,CAAwB,KAAKkrB,IAA7B;EACA,WAAKA,IAAL,GAAY,IAAZ;EACD;EACD,SAAKP,KAAL,GAAajB,OAAb;EACA,SAAKgB,aAAL,GAAqB,KAAKD,KAAL,CAAWW,GAAX,EAArB;EACA,QAAI,CAAC,KAAKV,aAAV,EAAyB;EACvB,WAAKC,KAAL,GAAaZ,KAAb;EACD;;EAED;EACD;EACF,CAvBD;EAwBAM,OAAO9sB,SAAP,CAAiB0tB,MAAjB,GAA0B,UAASJ,IAAT,EAAe;EACvC,MAAIT,OAAOjsB,IAAP,CAAY0sB,IAAZ,CAAJ,EAAuB;EACrB,SAAKK,IAAL,IAAaL,IAAb;EACA;EACD;EACD,MAAIV,UAAUhsB,IAAV,CAAe0sB,IAAf,CAAJ,EAA0B;EACxB,SAAKK,IAAL,GAAYrc,WAAW,KAAKqc,IAAhB,CAAZ;EACA,SAAKC,SAAL,CAAeN,IAAf;EACA;EACD;EACD,QAAM,IAAIloB,KAAJ,CAAU,sBAAqBkoB,IAArB,GAA4B,yBAA5B,GAAwD,KAAKN,KAAvE,CAAN;EACD,CAXD;EAYAF,OAAO9sB,SAAP,CAAiBwtB,MAAjB,GAA0B,UAASF,IAAT,EAAe;EACvC,MAAIA,SAAS,GAAb,EAAkB;EAChB,SAAKF,KAAL,GAAab,UAAb;EACA;EACD;EACD,OAAKoB,IAAL,IAAaL,IAAb;EACA;EACD,CAPD;EAQAR,OAAO9sB,SAAP,CAAiB2sB,OAAjB,GAA2B,UAASW,IAAT,EAAe;EACxC,MAAIX,QAAQ/rB,IAAR,CAAa0sB,IAAb,CAAJ,EAAwB;EACtB,SAAKK,IAAL,IAAaL,IAAb;EACA;EACD;EACD,MAAIA,SAAS,GAAb,EAAkB;EAChB,QAAIQ,aAAa,EAAjB;EACAA,eAAWrrB,IAAX,CAAgB,KAAKkrB,IAArB;EACA,SAAKZ,KAAL;EACA,QAAI,KAAKE,IAAL,KAAc,IAAlB,EAAwB;EACtB,WAAKA,IAAL,GAAYa,UAAZ;EACD,KAFD,MAEO;EACL,WAAKX,aAAL,CAAmB1qB,IAAnB,CAAwBqrB,UAAxB;EACD;EACD,SAAKZ,KAAL,CAAWzqB,IAAX,CAAgB,KAAK0qB,aAArB;EACA,SAAKA,aAAL,GAAqBW,UAArB;EACA,SAAKV,KAAL,GAAajB,OAAb;EACA;EACD;EACD,MAAIS,UAAUhsB,IAAV,CAAe0sB,IAAf,CAAJ,EAA0B;EACxB,SAAKM,SAAL,CAAeN,IAAf;EACA;EACD;EACD,QAAM,IAAIloB,KAAJ,CAAU,sBAAqBkoB,IAArB,GAA4B,0BAA5B,GAAyD,KAAKN,KAAxE,CAAN;EACD,CAxBD;EAyBAF,OAAO9sB,SAAP,CAAiButB,OAAjB,GAA2B,UAASD,IAAT,EAAe;EACxC,MAAIZ,MAAM9rB,IAAN,CAAW0sB,IAAX,CAAJ,EAAsB;EACpB,SAAKK,IAAL,GAAYL,IAAZ;EACA,SAAKF,KAAL,GAAahB,OAAb;EACA;EACD;EACD,MAAIkB,SAAS,GAAb,EAAkB;EAChB,SAAKK,IAAL,GAAY,EAAZ;EACA,SAAKP,KAAL,GAAad,MAAb;EACA;EACD;EACD,MAAIO,OAAOjsB,IAAP,CAAY0sB,IAAZ,CAAJ,EAAuB;EACrB,SAAKK,IAAL,GAAYL,IAAZ;EACA,SAAKF,KAAL,GAAaf,MAAb;EACA;EACD;EACD,MAAIO,UAAUhsB,IAAV,CAAe0sB,IAAf,CAAJ,EAA0B;EACxB,SAAKM,SAAL,CAAeN,IAAf;EACA;EACD;EACD,QAAM,IAAIloB,KAAJ,CAAU,sBAAqBkoB,IAArB,GAA4B,0BAA5B,GAAyD,KAAKN,KAAxE,CAAN;EACD,CArBD;EAsBAF,OAAO9sB,SAAP,CAAiB+tB,MAAjB,GAA0B,YAAW;EACnC,SAAO,KAAKf,KAAL,GAAa,KAAKxnB,IAAL,CAAUrB,MAA9B,EAAsC;EACpC,SAAKkpB,aAAL;EACD;EACD,MAAI,KAAKD,KAAL,KAAeZ,KAAnB,EAA0B;EACxB,WAAO,KAAKS,IAAZ;EACD;EACD,QAAM,IAAI7nB,KAAJ,CAAU,6BAA4B,KAAKI,IAAjC,GAAwC,cAAxC,GAAyD,KAAK4nB,KAAxE,CAAN;EACD,CARD;;EAUA,SAASY,WAAT,CAAqBC,GAArB,EAA0B;EACxB,MAAIC,SAAS,IAAIpB,MAAJ,CAAWmB,GAAX,CAAb;EACA,SAAOC,OAAOH,MAAP,EAAP;EACD;;ECtKD,SAASI,KAAT,CAAeruB,GAAf,EAAoBuH,GAApB,EAAyBrG,KAAzB,EAAgC;EAC9B,MAAIa,MAAMC,OAAN,CAAcuF,GAAd,CAAJ,EAAwB;EACtBrG,UAAM8M,OAAN,CAAczG,GAAd;EACAA,UAAM,IAAN;EACD;EACD,MAAI+mB,QAAQ/mB,MAAM,EAAN,GAAWvH,GAAvB;;EAEA,MAAIuuB,MAAMrtB,MAAM+nB,MAAN,CAAa,UAASuF,MAAT,EAAiBC,IAAjB,EAAuB;EAC5CC,UAAMD,IAAN,EAAYD,MAAZ;EACA,WAAOA,MAAP;EACD,GAHS,EAGPF,KAHO,CAAV;EAIA,MAAI/mB,GAAJ,EAAS;EACPvH,QAAIuH,GAAJ,IAAWgnB,GAAX;EACD;EACF;;AAED,EAAO,SAASG,KAAT,CAAezlB,CAAf,EAAkBjJ,GAAlB,EAAuB;EAC5B,MAAI,CAAC+B,MAAMC,OAAN,CAAciH,CAAd,CAAL,EAAuB;EACrBjJ,QAAIiJ,CAAJ,IAAS,IAAT;EACA;EACD;EACD,MAAI1B,MAAM0B,EAAE1H,KAAF,EAAV;EACA,MAAIgG,QAAQ,WAAZ,EAAyB;EACvBA,UAAM0B,EAAE1H,KAAF,EAAN;EACD;EACD,MAAI0H,EAAE5E,MAAF,KAAa,CAAjB,EAAoB;EAClB,QAAItC,MAAMC,OAAN,CAAciH,EAAE,CAAF,CAAd,CAAJ,EAAyB;EACvBjJ,UAAIuH,GAAJ,IAAW,EAAX;EACAmnB,YAAMzlB,EAAE,CAAF,CAAN,EAAYjJ,IAAIuH,GAAJ,CAAZ;EACA;EACD;EACDvH,QAAIuH,GAAJ,IAAW0B,EAAE,CAAF,CAAX;EACA;EACD;EACD,MAAI,CAACA,EAAE5E,MAAP,EAAe;EACbrE,QAAIuH,GAAJ,IAAW,IAAX;EACA;EACD;EACD,MAAIA,QAAQ,SAAZ,EAAuB;EACrBvH,QAAIuH,GAAJ,IAAW0B,CAAX;EACA;EACD;EACD,MAAI1B,QAAQ,MAAZ,EAAoB;EAClB,QAAI,EAAEA,OAAOvH,GAAT,CAAJ,EAAmB;EACjBA,UAAIuH,GAAJ,IAAW,EAAX;EACD;EACDvH,QAAIuH,GAAJ,EAAS5E,IAAT,CAAcsG,CAAd;EACA;EACD;EACD,MAAI,CAAClH,MAAMC,OAAN,CAAcuF,GAAd,CAAL,EAAyB;EACvBvH,QAAIuH,GAAJ,IAAW,EAAX;EACD;;EAED,MAAIjD,CAAJ;EACA,UAAQiD,GAAR;EACE,SAAK,MAAL;EACA,SAAK,QAAL;EACA,SAAK,YAAL;EACEvH,UAAIuH,GAAJ,IAAW;EACT3G,cAAMqI,EAAE,CAAF,EAAKjI,WAAL,EADG;EAET2tB,iBAAS1lB,EAAE,CAAF;EAFA,OAAX;EAIA,UAAIA,EAAE5E,MAAF,KAAa,CAAjB,EAAoB;EAClBqqB,cAAMzlB,EAAE,CAAF,CAAN,EAAYjJ,IAAIuH,GAAJ,CAAZ;EACD;EACD;EACF,SAAK,UAAL;EACA,SAAK,WAAL;EACEvH,UAAIuH,GAAJ,IAAW;EACT3G,cAAMqI,EAAE,CAAF,CADG;EAETiN,WAAGjN,EAAE,CAAF,CAFM;EAGTsgB,YAAItgB,EAAE,CAAF;EAHK,OAAX;EAKA,UAAIA,EAAE5E,MAAF,KAAa,CAAjB,EAAoB;EAClBqqB,cAAMzlB,EAAE,CAAF,CAAN,EAAYjJ,IAAIuH,GAAJ,CAAZ;EACD;EACD;EACF,SAAK,cAAL;EACA,SAAK,SAAL;EACA,SAAK,QAAL;EACA,SAAK,QAAL;EACA,SAAK,QAAL;EACA,SAAK,UAAL;EACA,SAAK,SAAL;EACA,SAAK,aAAL;EACA,SAAK,eAAL;EACA,SAAK,QAAL;EACA,SAAK,kBAAL;EACA,SAAK,SAAL;EACA,SAAK,SAAL;EACA,SAAK,aAAL;EACA,SAAK,UAAL;EACA,SAAK,aAAL;EACA,SAAK,gBAAL;EACA,SAAK,QAAL;EACA,SAAK,WAAL;EACA,SAAK,aAAL;EACA,SAAK,OAAL;EACE0B,QAAE,CAAF,IAAO,CAAC,MAAD,EAASA,EAAE,CAAF,CAAT,CAAP;EACAolB,YAAMruB,GAAN,EAAWuH,GAAX,EAAgB0B,CAAhB;EACA;EACF;EACE3E,UAAI,CAAC,CAAL;EACA,aAAO,EAAEA,CAAF,GAAM2E,EAAE5E,MAAf,EAAuB;EACrB,YAAI,CAACtC,MAAMC,OAAN,CAAciH,EAAE3E,CAAF,CAAd,CAAL,EAA0B;EACxB,iBAAOoqB,MAAMzlB,CAAN,EAASjJ,IAAIuH,GAAJ,CAAT,CAAP;EACD;EACF;EACD,aAAO8mB,MAAMruB,GAAN,EAAWuH,GAAX,EAAgB0B,CAAhB,CAAP;EAtDJ;EAwDD;;EChHD,IAAIqe,QAAM,sBAAV;AACA;EAKA,SAASsH,MAAT,CAAgB5uB,GAAhB,EAAqBgX,MAArB,EAA6B;EAC3B,MAAI6X,UAAU7X,OAAO,CAAP,CAAd;EACA,MAAI8X,SAAS9X,OAAO,CAAP,CAAb;EACA,MAAI,EAAE6X,WAAW7uB,GAAb,KAAsB8uB,UAAU9uB,GAApC,EAA0C;EACxCA,QAAI6uB,OAAJ,IAAe7uB,IAAI8uB,MAAJ,CAAf;EACA,QAAI9X,OAAO3S,MAAP,KAAkB,CAAtB,EAAyB;EACvBrE,UAAI6uB,OAAJ,IAAe7X,OAAO,CAAP,EAAUhX,IAAI6uB,OAAJ,CAAV,CAAf;EACD;EACF;EACF;;EAED,SAASE,GAAT,CAAa1oB,KAAb,EAAoB;EAClB,SAAOA,QAAQihB,KAAf;EACD;;EAED,SAAS0H,QAAT,CAAkBC,GAAlB,EAAuB;EACrB,MAAIA,IAAI1pB,IAAJ,KAAa,QAAjB,EAA2B;EACzB0pB,QAAIC,QAAJ,GAAe,SAAf;EACD,GAFD,MAEO,IAAID,IAAI1pB,IAAJ,KAAa,UAAjB,EAA6B;EAClC0pB,QAAIC,QAAJ,GAAe,UAAf;EACAD,QAAIE,KAAJ,GAAY,IAAZ;EACD,GAHM,MAGA;EACL,QAAIxjB,QAAOsjB,IAAIG,UAAX,MAA0B,QAA9B,EAAwC;EACtCH,UAAIC,QAAJ,GAAe1uB,OAAOkC,IAAP,CAAYusB,IAAIG,UAAhB,EAA4B,CAA5B,CAAf;EACD,KAFD,MAEO;EACLH,UAAIC,QAAJ,GAAeD,IAAIG,UAAnB;EACD;EACF;EACD,MAAIH,IAAII,IAAR,EAAc;EACZ,QAAIC,YAAY,EAAhB;EACA,SAAK,IAAIhrB,IAAI,CAAR,EAAWirB,KAAKN,IAAII,IAAJ,CAAShrB,MAA9B,EAAsCC,IAAIirB,EAA1C,EAA8C,EAAEjrB,CAAhD,EAAmD;EACjD,UAAI2nB,OAAO,CAACgD,IAAII,IAAJ,CAAS/qB,CAAT,EAAY,CAAZ,EAAetD,WAAf,EAAD,EAA+BiuB,IAAII,IAAJ,CAAS/qB,CAAT,EAAY,CAAZ,EAAetD,WAAf,EAA/B,CAAX;EACA,UAAIirB,KAAK,CAAL,EAAQ1rB,OAAR,CAAgB,OAAhB,MAA6B,CAAC,CAA9B,IAAoC,CAAC0rB,KAAK,CAAL,MAAY,GAAZ,IAAmBA,KAAK,CAAL,MAAY,KAAhC,KAA0CA,KAAK,CAAL,MAAY,OAA9F,EAAwG;EACtGqD,qBAAa,GAAb;EACD,OAFD,MAEO,IAAIrD,KAAK,CAAL,EAAQ1rB,OAAR,CAAgB,OAAhB,MAA6B,CAAC,CAA9B,IAAoC,CAAC0rB,KAAK,CAAL,MAAY,GAAZ,IAAmBA,KAAK,CAAL,MAAY,KAAhC,KAA0CA,KAAK,CAAL,MAAY,OAA9F,EAAwG;EAC7GqD,qBAAa,GAAb;EACD,OAFM,MAEA,IAAIrD,KAAK,CAAL,EAAQ1rB,OAAR,CAAgB,MAAhB,MAA4B,CAAC,CAA7B,IAAmC,CAAC0rB,KAAK,CAAL,MAAY,GAAZ,IAAmBA,KAAK,CAAL,MAAY,KAAhC,KAA0CA,KAAK,CAAL,MAAY,MAA7F,EAAsG;EAC3GqD,qBAAa,GAAb;EACD,OAFM,MAEA,IAAIrD,KAAK,CAAL,EAAQ1rB,OAAR,CAAgB,MAAhB,MAA4B,CAAC,CAA7B,IAAmC,CAAC0rB,KAAK,CAAL,MAAY,GAAZ,IAAmBA,KAAK,CAAL,MAAY,KAAhC,KAA0CA,KAAK,CAAL,MAAY,MAA7F,EAAsG;EAC3GqD,qBAAa,GAAb;EACD;EACF;EACD,QAAIA,UAAUjrB,MAAV,KAAqB,CAAzB,EAA4B;EAC1BirB,mBAAa,GAAb;EACD;EACD,QAAIA,UAAUjrB,MAAV,KAAqB,CAAzB,EAA4B;EAC1B4qB,UAAIhD,IAAJ,GAAWqD,SAAX;EACD;EACF;EACD,MAAIL,IAAIO,IAAR,EAAc;EACZP,QAAIvD,KAAJ,GAAYuD,IAAIO,IAAJ,CAAS5uB,IAAT,CAAcI,WAAd,EAAZ;EACA,QAAIiuB,IAAIvD,KAAJ,KAAc,OAAlB,EAA2B;EACzBuD,UAAIvD,KAAJ,GAAY,OAAZ;EACD;EACD,QAAIuD,IAAIO,IAAJ,CAASb,OAAb,EAAsB;EACpB,UAAIM,IAAI1pB,IAAJ,KAAa,QAAjB,EAA2B;EACzB,YAAI0pB,IAAIQ,KAAJ,IAAaR,IAAIQ,KAAJ,CAAUC,QAA3B,EAAqC;EACnCT,cAAIxG,QAAJ,GAAewG,IAAIO,IAAJ,CAASb,OAAT,GAAiBM,IAAIQ,KAAJ,CAAUC,QAAV,CAAmBxZ,CAAnD;EACD;EACF,OAJD,MAIO;EACL+Y,YAAIxG,QAAJ,GAAewG,IAAIO,IAAJ,CAASb,OAAxB;EACD;EACF;EACF;EACD,MAAIgB,SAASV,IAAIW,MAAjB;EACA,MAAIX,IAAI1pB,IAAJ,KAAa,QAAjB,EAA2B;EACzBoqB,aAASV,GAAT;EACD;EACD,MAAIU,MAAJ,EAAY;EACV;EACA;EACA;EACA,QAAIA,OAAOF,KAAX,EAAkB;EAChBR,UAAIjD,SAAJ,GAAgB2D,OAAOF,KAAP,CAAa7uB,IAAb,CAAkBI,WAAlB,EAAhB;EACD,KAFD,MAEO;EACLiuB,UAAIjD,SAAJ,GAAgB2D,OAAO/uB,IAAP,CAAYI,WAAZ,EAAhB;EACD;EACD,QAAIiuB,IAAIjD,SAAJ,CAActnB,KAAd,CAAoB,CAApB,EAAuB,CAAvB,MAA8B,IAAlC,EAAwC;EACtCuqB,UAAIjD,SAAJ,GAAgBiD,IAAIjD,SAAJ,CAActnB,KAAd,CAAoB,CAApB,CAAhB;EACD;EACD,QAAIuqB,IAAIjD,SAAJ,KAAkB,iCAAlB,IAAuDiD,IAAIjD,SAAJ,KAAkB,kBAA7E,EAAiG;EAC/FiD,UAAIjD,SAAJ,GAAgB,QAAhB;EACD;EACD,QAAIiD,IAAIjD,SAAJ,KAAkB,UAAlB,IAAgCiD,IAAIjD,SAAJ,KAAkB,4BAAtD,EAAoF;EAClF,UAAIiD,IAAIG,UAAJ,KAAmB,2BAAvB,EAAoD;EAClDH,YAAIY,MAAJ,GAAa,IAAb;EACD;EACDZ,UAAIjD,SAAJ,GAAgB,OAAhB;EACD;EACD,QAAIiD,IAAIjD,SAAJ,CAActnB,KAAd,CAAoB,CAAC,CAArB,MAA4B,QAAhC,EAA0C;EACxCuqB,UAAIjD,SAAJ,GAAgBiD,IAAIjD,SAAJ,CAActnB,KAAd,CAAoB,CAApB,EAAuB,CAAE,CAAzB,CAAhB;EACD;EACD,QAAIuqB,IAAIjD,SAAJ,CAActnB,KAAd,CAAoB,CAAC,CAArB,MAA4B,UAAhC,EAA4C;EAC1CuqB,UAAIjD,SAAJ,GAAgBiD,IAAIjD,SAAJ,CAActnB,KAAd,CAAoB,CAApB,EAAuB,CAAE,CAAzB,CAAhB;EACD;EACD,QAAI,CAACuqB,IAAIjD,SAAJ,CAAczrB,OAAd,CAAsB,OAAtB,CAAL,EAAqC;EACnC0uB,UAAIjD,SAAJ,GAAgB,OAAhB;EACD;EACD,QAAI2D,OAAOF,KAAP,IAAgBE,OAAOF,KAAP,CAAaC,QAAjC,EAA2C;EACzCT,UAAIa,KAAJ,GAAYH,OAAOF,KAAP,CAAaC,QAAb,CAAsB9uB,IAAtB,CAA2BoG,OAA3B,CAAmC,KAAnC,EAA0C,EAA1C,EAA8CA,OAA9C,CAAsD,eAAtD,EAAuE,MAAvE,CAAZ;EACA,UAAIioB,IAAIa,KAAJ,CAAU9uB,WAAV,GAAwB0D,KAAxB,CAA8B,CAA9B,EAAiC,EAAjC,MAAyC,eAA7C,EAA8D;EAC5DuqB,YAAIa,KAAJ,GAAY,MAAZ;EACD;;EAEDb,UAAI/Y,CAAJ,GAAQyZ,OAAOF,KAAP,CAAaC,QAAb,CAAsBxZ,CAA9B;EACA+Y,UAAI1F,EAAJ,GAAS/X,WAAWme,OAAOF,KAAP,CAAaC,QAAb,CAAsBnG,EAAjC,EAAqC,EAArC,CAAT;EACD;;EAED,QAAIoG,OAAOF,KAAP,IAAgBE,OAAOF,KAAP,CAAaM,OAAjC,EAA0C;EACxCd,UAAIxD,YAAJ,GAAmBkE,OAAOF,KAAP,CAAaM,OAAhC;EACD;EACD,QAAI,CAACd,IAAIjD,SAAJ,CAAczrB,OAAd,CAAsB,WAAtB,CAAL,EAAyC;EACvC0uB,UAAIjD,SAAJ,GAAgB,QAAhB;EACD;EACD,QAAI,CAACiD,IAAIjD,SAAJ,CAAczrB,OAAd,CAAsB,WAAtB,CAAL,EAAyC;EACvC0uB,UAAIjD,SAAJ,GAAgB,QAAhB;EACD;EACD,QAAI,CAACiD,IAAIjD,SAAJ,CAAczrB,OAAd,CAAsB,MAAtB,CAAD,IACC,CAAC0uB,IAAIjD,SAAJ,CAAczrB,OAAd,CAAsB,wBAAtB,CADN,EACuD;EACrD0uB,UAAIjD,SAAJ,GAAgB,OAAhB;EACD;EACD,QAAIiD,IAAIjD,SAAJ,KAAkB,SAAtB,EAAiC;EAC/BiD,UAAIjD,SAAJ,GAAgB,QAAhB;EACD;EACD,QAAI,CAACiD,IAAIjD,SAAJ,CAAczrB,OAAd,CAAsB,QAAtB,CAAL,EAAsC;EACpC0uB,UAAIjD,SAAJ,GAAgB,OAAhB;EACD;EACF;EACD,MAAIiD,IAAIhE,CAAJ,IAAS,CAAC5gB,SAAS4kB,IAAIhE,CAAb,CAAd,EAA+B;EAC7BgE,QAAIhE,CAAJ,GAAQgE,IAAI/Y,CAAZ;EACD;;EAED,WAAS8Z,OAAT,CAAiB3pB,KAAjB,EAAwB;EACtB,QAAI4pB,QAAQhB,IAAIxG,QAAJ,IAAgB,CAA5B;EACA,WAAOpiB,QAAQ4pB,KAAf;EACD;EACD,MAAIC,UAAU,SAAVA,OAAU,CAASha,CAAT,EAAY;EACxB,WAAO0Y,OAAOK,GAAP,EAAY/Y,CAAZ,CAAP;EACD,GAFD;EAGA,MAAIia,OAAO,CACT,CAAC,qBAAD,EAAwB,qBAAxB,CADS,EAET,CAAC,qBAAD,EAAwB,mCAAxB,CAFS,EAGT,CAAC,qBAAD,EAAwB,qBAAxB,CAHS,EAIT,CAAC,qBAAD,EAAwB,mCAAxB,CAJS,EAKT,CAAC,eAAD,EAAkB,eAAlB,CALS,EAMT,CAAC,eAAD,EAAkB,eAAlB,CANS,EAOT,CAAC,eAAD,EAAkB,yBAAlB,CAPS,EAQT,CAAC,gBAAD,EAAmB,gBAAnB,CARS,EAST,CAAC,gBAAD,EAAmB,gBAAnB,CATS,EAUT,CAAC,gBAAD,EAAmB,0BAAnB,CAVS,EAWT,CAAC,kBAAD,EAAqB,kBAArB,CAXS,EAYT,CAAC,kBAAD,EAAqB,6BAArB,CAZS,EAaT,CAAC,kBAAD,EAAqB,2BAArB,CAbS,EAcT,CAAC,oBAAD,EAAuB,oBAAvB,CAdS,EAeT,CAAC,oBAAD,EAAuB,kBAAvB,CAfS,EAgBT,CAAC,oBAAD,EAAuB,4BAAvB,CAhBS,EAiBT,CAAC,oBAAD,EAAuB,0BAAvB,CAjBS,EAkBT,CAAC,cAAD,EAAiB,cAAjB,CAlBS,EAmBT,CAAC,IAAD,EAAO,cAAP,CAnBS,EAoBT,CAAC,oBAAD,EAAuB,oBAAvB,CApBS,EAqBT,CAAC,oBAAD,EAAuB,oBAAvB,CArBS,EAsBT,CAAC,MAAD,EAAS,oBAAT,EAA+BpB,GAA/B,CAtBS,EAuBT,CAAC,qBAAD,EAAwB,qBAAxB,CAvBS,EAwBT,CAAC,qBAAD,EAAwB,qBAAxB,CAxBS,EAyBT,CAAC,OAAD,EAAU,qBAAV,EAAiCA,GAAjC,CAzBS,EA0BT,CAAC,IAAD,EAAO,eAAP,EAAwBiB,OAAxB,CA1BS,EA2BT,CAAC,IAAD,EAAO,gBAAP,EAAyBA,OAAzB,CA3BS,EA4BT,CAAC,OAAD,EAAU,kBAAV,EAA8BjB,GAA9B,CA5BS,EA6BT,CAAC,MAAD,EAAS,oBAAT,EAA+BA,GAA/B,CA7BS,EA8BT,CAAC,MAAD,EAAS,qBAAT,EAAgCA,GAAhC,CA9BS,EA+BT,CAAC,MAAD,EAAS,qBAAT,EAAgCA,GAAhC,CA/BS,EAgCT,CAAC,MAAD,EAAS,qBAAT,EAAgCA,GAAhC,CAhCS,EAiCT,CAAC,SAAD,EAAY,SAAZ,CAjCS,EAkCT,CAAC,OAAD,EAAU,SAAV,EAAqBA,GAArB,CAlCS,EAmCT,CAAC,SAAD,EAAY,MAAZ,CAnCS,CAAX;EAqCAoB,OAAKtuB,OAAL,CAAaquB,OAAb;EACA,MAAI,CAACjB,IAAIjF,KAAL,IAAciF,IAAIxE,KAAlB,KAA4BwE,IAAIC,QAAJ,KAAiB,yBAAjB,IAA8CD,IAAIC,QAAJ,KAAiB,8BAA3F,CAAJ,EAAgI;EAC9HD,QAAIjF,KAAJ,GAAYiF,IAAIxE,KAAhB;EACD;EACD,MAAI,CAACwE,IAAInF,MAAL,IAAemF,IAAItF,IAAnB,KAA4BsF,IAAIC,QAAJ,KAAiB,0BAAjB,IAA+CD,IAAIC,QAAJ,KAAiB,iCAA5F,CAAJ,EAAoI;EAClID,QAAIxF,IAAJ,GAAWsF,IAAIE,IAAItF,IAAJ,GAAW,CAAX,GAAe,EAAf,GAAoB,CAAC,EAAzB,CAAX;EACAsF,QAAInF,MAAJ,GAAamF,IAAItF,IAAjB;EACD,GAHD,MAGO,IAAI,CAACsF,IAAInF,MAAL,IAAemF,IAAIxF,IAAnB,IAA2BwF,IAAIC,QAAJ,KAAiB,qBAAhD,EAAuE;EAC5ED,QAAInF,MAAJ,GAAamF,IAAIxF,IAAjB;EACAwF,QAAIxF,IAAJ,GAAWsF,IAAIE,IAAIxF,IAAJ,GAAW,CAAX,GAAe,EAAf,GAAoB,CAAC,EAAzB,CAAX;EACD;EACF;AACD,EAAe,cAASwF,GAAT,EAAc;EAC3B,MAAImB,OAAOhC,YAAOa,GAAP,CAAX;EACA,MAAI1pB,OAAO6qB,KAAK7uB,KAAL,EAAX;EACA,MAAIX,OAAOwvB,KAAK7uB,KAAL,EAAX;EACA6uB,OAAKpiB,OAAL,CAAa,CAAC,MAAD,EAASpN,IAAT,CAAb;EACAwvB,OAAKpiB,OAAL,CAAa,CAAC,MAAD,EAASzI,IAAT,CAAb;EACA,MAAIvF,MAAM,EAAV;EACA0uB,QAAM0B,IAAN,EAAYpwB,GAAZ;EACAgvB,WAAShvB,GAAT;EACA,SAAOA,GAAP;EACD;;ECxMD,SAASomB,IAAT,CAAcxlB,IAAd,EAAoB;EAClB;EACA,MAAIyvB,OAAO,IAAX;EACA,MAAI1b,UAAUtQ,MAAV,KAAqB,CAAzB,EAA4B;EAC1B,QAAIisB,MAAM3b,UAAU,CAAV,CAAV;EACA,QAAI,OAAO2b,GAAP,KAAe,QAAnB,EAA6B;EAC3B,UAAIA,IAAIC,MAAJ,CAAW,CAAX,MAAkB,GAAtB,EAA2B;EACzBnK,aAAKxlB,IAAL,IAAa4vB,UAAU7b,UAAU,CAAV,CAAV,CAAb;EACD,OAFD,MAGK;EACHyR,aAAKxlB,IAAL,IAAaquB,IAAIta,UAAU,CAAV,CAAJ,CAAb;EACD;EACF,KAPD,MAOO;EACLyR,WAAKxlB,IAAL,IAAa0vB,GAAb;EACD;EACF,GAZD,MAaK,IAAI3b,UAAUtQ,MAAV,KAAqB,CAAzB,EAA4B;EAC/B,QAAItC,MAAMC,OAAN,CAAcpB,IAAd,CAAJ,EAAyB;EACvB,aAAOA,KAAKgB,GAAL,CAAS,UAASqH,CAAT,EAAY;EAC1B,YAAIlH,MAAMC,OAAN,CAAciH,CAAd,CAAJ,EAAsB;EACpBmd,eAAKxE,KAAL,CAAWyO,IAAX,EAAiBpnB,CAAjB;EACD,SAFD,MAGK;EACHmd,eAAKnd,CAAL;EACD;EACF,OAPM,CAAP;EAQD,KATD,MAUK,IAAI,OAAOrI,IAAP,KAAgB,QAApB,EAA8B;EACjC,UAAIA,QAAQwlB,IAAZ,EAAkB;EAChB,eAAOA,KAAKxlB,IAAL,CAAP;EACD;EACF,KAJI,MAKA,IAAI,UAAUA,IAAd,EAAoB;EACvBwlB,WAAK,UAAUxlB,KAAK6vB,IAApB,IAA4B7vB,IAA5B;EACD,KAFI,MAGA,IAAI,UAAUA,IAAd,EAAoB;EACvBwlB,WAAK,UAAUxlB,KAAK8vB,IAApB,IAA4B9vB,IAA5B;EACD,KAFI,MAGA,IAAI,aAAaA,IAAjB,EAAuB;EAC1BwlB,WAAK,aAAaxlB,KAAK+vB,OAAvB,IAAkC/vB,IAAlC;EACD,KAFI,MAGA;EACHqR,cAAQI,GAAR,CAAYzR,IAAZ;EACD;EACD;EACD;EAGF;EACDgwB,QAAQxK,IAAR;;ECjDA,SAASyK,OAAT,CAAiBxN,IAAjB,EAAsB;EACpB,SAAO,OAAOA,IAAP,KAAgB,QAAvB;EACD;EACD,SAASyN,OAAT,CAAiBzN,IAAjB,EAAsB;EACpB,SAAOA,QAAQ+C,IAAf;EACD;EACD,IAAI2K,YAAY,CAAC,cAAD,EAAiB,SAAjB,EAA4B,QAA5B,EAAqC,QAArC,EAA8C,QAA9C,EAAuD,UAAvD,EAAmE,SAAnE,EAA8E,aAA9E,EAA6F,eAA7F,EAA8G,QAA9G,EAAwH,gBAAxH,CAAhB;EACA,SAASC,OAAT,CAAiB3N,IAAjB,EAAsB;EACpB,SAAO0N,UAAUE,IAAV,CAAe,UAAUpD,IAAV,EAAgB;EACpC,WAAOxK,KAAK9iB,OAAL,CAAastB,IAAb,IAAqB,CAAC,CAA7B;EACD,GAFM,CAAP;EAGD;EACD,IAAIqD,QAAQ,CAAC,MAAD,EAAS,QAAT,EAAmB,MAAnB,EAA2B,QAA3B,CAAZ;EACA,SAASC,aAAT,CAAuB1C,IAAvB,EAA6B;EAC3B,MAAI2C,OAAOzI,MAAM8F,IAAN,EAAY,WAAZ,CAAX;EACA,MAAI,CAAC2C,IAAL,EAAW;EACT;EACD;EACD,MAAI/N,OAAOsF,MAAMyI,IAAN,EAAY,MAAZ,CAAX;EACA,SAAO/N,QAAQ6N,MAAM3wB,OAAN,CAAc8iB,IAAd,IAAsB,CAAC,CAAtC;EACD;EACD,SAASgO,YAAT,CAAsB5C,IAAtB,EAA4B;EAC1B,MAAI6C,MAAM3I,MAAM8F,IAAN,EAAY,WAAZ,CAAV;EACA,MAAI,CAAC6C,GAAL,EAAU;EACR;EACD;EACD,SAAO3I,MAAM2I,GAAN,EAAW,OAAX,CAAP;EACD;EACD,SAASC,QAAT,CAAkBlO,IAAlB,EAAuB;EACrB,SAAOA,KAAK,CAAL,MAAY,GAAnB;EACD;EACD,SAASvd,KAAT,CAAeud,IAAf,EAAoB;EAClB,MAAIwN,QAAQxN,IAAR,CAAJ,EAAmB;EACjB;EACA,QAAIyN,QAAQzN,IAAR,CAAJ,EAAmB;EACjB,aAAO+C,KAAK/C,IAAL,CAAP;EACD;EACD,QAAI2N,QAAQ3N,IAAR,CAAJ,EAAmB;EACjB,UAAIkL,MAAMU,IAAI5L,IAAJ,CAAV;EACA;EACA,UAAI8N,cAAc5C,GAAd,CAAJ,EAAwB;EACtB,eAAOnI,KAAK,WAAL,CAAP;EACD;EACD,UAAIoL,eAAeH,aAAa9C,GAAb,CAAnB;EACA,UAAIiD,YAAJ,EAAkB;EAChB,eAAOC,UAAQD,YAAR,CAAP;EACD;EACD,aAAOjD,GAAP;EACD;EACD,QAAIgD,SAASlO,IAAT,CAAJ,EAAoB;EAClB,aAAOoO,UAAQpO,IAAR,CAAP;EACD;EACF,GApBD,MAoBK;EACH,WAAOA,IAAP;EACD;EACF;;EC3Dc,iBAASqO,WAAT,EAAsB1c,MAAtB,EAA8B;EAC3C0c,gBAAcA,eAAe,EAA7B;EACA,MAAIxwB,KAAJ,EAAWywB,QAAX;EACA,MAAI,CAAC3c,MAAL,EAAa;EACX,WAAO0c,WAAP;EACD;EACD,OAAKC,QAAL,IAAiB3c,MAAjB,EAAyB;EACvB9T,YAAQ8T,OAAO2c,QAAP,CAAR;EACA,QAAIzwB,UAAUO,SAAd,EAAyB;EACvBiwB,kBAAYC,QAAZ,IAAwBzwB,KAAxB;EACD;EACF;EACD,SAAOwwB,WAAP;EACD;;ECbc,gBAASE,MAAT,EAAiBC,MAAjB,EAAyBC,MAAzB,EAAiC;EAC9C,MAAIC,MAAMH,SAASC,MAAnB;EACA,SAAOC,SAAUlW,KAAKoW,IAAL,CAAU,IAAID,MAAMA,GAApB,CAAjB;EACD;;ECHc,eAAShX,CAAT,EAAY;EACzB,SAAOA,IAAE,CAAF,GAAM,CAAC,CAAP,GAAW,CAAlB;EACD;;ECEc,qBAASA,CAAT,EAAY;EACzB,SAAQa,KAAKC,GAAL,CAASd,CAAT,KAAe2M,GAAhB,GAAuB3M,CAAvB,GAA4BA,IAAKkX,KAAKlX,CAAL,IAAU0M,MAAlD;EACD;;ECJc,gBAASmK,MAAT,EAAiBM,GAAjB,EAAsBL,MAAtB,EAA8B;EAC3C,MAAIE,MAAMH,SAASC,MAAnB;EACA,MAAIM,MAAM,MAAMP,MAAhB;EACAG,QAAMnW,KAAKK,GAAL,CAAU,CAAC,IAAI8V,GAAL,KAAa,IAAIA,GAAjB,CAAV,EAAkCI,GAAlC,CAAN;EACA,SAAQvW,KAAKwW,GAAL,CAAS,OAAOpL,UAAUkL,GAAjB,CAAT,IAAkCH,GAA1C;EACD;;ECLc,gBAASH,MAAT,EAAiBS,EAAjB,EAAqB;EAClC,MAAIC,SAAS,MAAMV,MAAnB;EACA,MAAIG,GAAJ,EAASQ,IAAT;EACA,MAAIL,MAAMlL,UAAU,IAAIpL,KAAK4W,IAAL,CAAUH,EAAV,CAAxB;EACA,OAAK,IAAI/tB,IAAI,CAAb,EAAgBA,KAAK,EAArB,EAAyBA,GAAzB,EAA8B;EAC5BytB,UAAMH,SAAShW,KAAKE,GAAL,CAASoW,GAAT,CAAf;EACAK,WAAOvL,UAAU,IAAIpL,KAAK4W,IAAL,CAAUH,KAAMzW,KAAKK,GAAL,CAAU,CAAC,IAAI8V,GAAL,KAAa,IAAIA,GAAjB,CAAV,EAAkCO,MAAlC,CAAhB,CAAd,GAA4EJ,GAAnF;EACAA,WAAOK,IAAP;EACA,QAAI3W,KAAKC,GAAL,CAAS0W,IAAT,KAAkB,YAAtB,EAAoC;EAClC,aAAOL,GAAP;EACD;EACF;EACD;EACA,SAAO,CAAC,IAAR;EACD;;ECVM,SAAShqB,IAAT,GAAgB;EACrB,MAAI6pB,MAAM,KAAK9G,CAAL,GAAS,KAAK/U,CAAxB;EACA,OAAKuc,EAAL,GAAU,IAAIV,MAAMA,GAApB;EACA,MAAG,EAAE,QAAQ,IAAV,CAAH,EAAmB;EACjB,SAAKpH,EAAL,GAAU,CAAV;EACD;EACD,MAAG,EAAE,QAAQ,IAAV,CAAH,EAAmB;EACjB,SAAKE,EAAL,GAAU,CAAV;EACD;EACD,OAAKlrB,CAAL,GAASic,KAAKoW,IAAL,CAAU,KAAKS,EAAf,CAAT;EACA,MAAI,KAAK3I,MAAT,EAAiB;EACf,QAAI,KAAK+F,MAAT,EAAiB;EACf,WAAK9E,EAAL,GAAUnP,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAAV;EACD,KAFD,MAGK;EACH,WAAKiB,EAAL,GAAU4H,MAAM,KAAKhzB,CAAX,EAAcic,KAAKE,GAAL,CAAS,KAAKgO,MAAd,CAAd,EAAqClO,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAArC,CAAV;EACD;EACF,GAPD,MAQK;EACH,QAAI,CAAC,KAAKiB,EAAV,EAAc;EACZ,UAAI,KAAKC,CAAT,EAAY;EACV,aAAKD,EAAL,GAAU,KAAKC,CAAf;EACD,OAFD,MAGK;EACH,aAAKD,EAAL,GAAU,CAAV;EACD;EACF;EACF;EACF;;EAED;;;AAGA,EAAO,SAAS6H,OAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA;EACA,MAAIxG,MAAM+S,GAAN,GAAY,EAAZ,IAAkB/S,MAAM+S,GAAN,GAAY,CAAC,EAA/B,IAAqCsL,MAAMtL,GAAN,GAAY,GAAjD,IAAwDsL,MAAMtL,GAAN,GAAY,CAAC,GAAzE,EAA8E;EAC5E,WAAO,IAAP;EACD;;EAED,MAAIxM,CAAJ,EAAOC,CAAP;EACA,MAAIY,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAASrH,GAAT,IAAgBwS,OAAzB,KAAqCK,KAAzC,EAAgD;EAC9C,WAAO,IAAP;EACD,GAFD,MAGK;EACH,QAAI,KAAKwI,MAAT,EAAiB;EACf9U,UAAI,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,GAAS,KAAK6U,EAAd,GAAmB+H,WAAWD,MAAM,KAAK7I,KAAtB,CAAjC;EACAhP,UAAI,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAAS,KAAK6U,EAAd,GAAmBnP,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAAS5K,SAAS,MAAMhT,GAAxB,CAAT,CAAjC;EACD,KAHD,MAIK;EACH,UAAIqd,SAASjW,KAAKE,GAAL,CAAStH,GAAT,CAAb;EACA,UAAI6d,KAAKU,MAAM,KAAKpzB,CAAX,EAAc6U,GAAd,EAAmBqd,MAAnB,CAAT;EACA9W,UAAI,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,GAAS,KAAK6U,EAAd,GAAmB+H,WAAWD,MAAM,KAAK7I,KAAtB,CAAjC;EACAhP,UAAI,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAAS,KAAK6U,EAAd,GAAmBnP,KAAKvJ,GAAL,CAASggB,EAAT,CAAjC;EACD;EACDnJ,MAAEnO,CAAF,GAAMA,CAAN;EACAmO,MAAElO,CAAF,GAAMA,CAAN;EACA,WAAOkO,CAAP;EACD;EACF;;EAED;;AAEA,EAAO,SAAS8J,OAAT,CAAiB9J,CAAjB,EAAoB;;EAEzB,MAAInO,IAAImO,EAAEnO,CAAF,GAAM,KAAK4P,EAAnB;EACA,MAAI3P,IAAIkO,EAAElO,CAAF,GAAM,KAAK6P,EAAnB;EACA,MAAIgI,GAAJ,EAASre,GAAT;;EAEA,MAAI,KAAKqb,MAAT,EAAiB;EACfrb,UAAMwS,UAAU,IAAIpL,KAAK4W,IAAL,CAAU5W,KAAKqX,GAAL,CAAS,CAACjY,CAAD,IAAM,KAAK9E,CAAL,GAAS,KAAK6U,EAApB,CAAT,CAAV,CAApB;EACD,GAFD,MAGK;EACH,QAAIsH,KAAKzW,KAAKqX,GAAL,CAAS,CAACjY,CAAD,IAAM,KAAK9E,CAAL,GAAS,KAAK6U,EAApB,CAAT,CAAT;EACAvW,UAAM0e,MAAM,KAAKvzB,CAAX,EAAc0yB,EAAd,CAAN;EACA,QAAI7d,QAAQ,CAAC,IAAb,EAAmB;EACjB,aAAO,IAAP;EACD;EACF;EACDqe,QAAMC,WAAW,KAAK9I,KAAL,GAAajP,KAAK,KAAK7E,CAAL,GAAS,KAAK6U,EAAnB,CAAxB,CAAN;;EAEA7B,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,QAAQ,CAAC,UAAD,EAAa,uCAAb,EAAsD,cAAtD,EAAsE,2BAAtE,EAAmG,MAAnG,CAAZ;AACP,aAAe;EACbjrB,QAAMA,IADO;EAEb0qB,WAASA,OAFI;EAGbI,WAASA,OAHI;EAIbG,SAAOA;EAJM,CAAf;;EC9FO,SAASjrB,MAAT,GAAgB;EACrB;EACD;;EAED,SAASkrB,QAAT,CAAkBC,EAAlB,EAAsB;EACpB,SAAOA,EAAP;EACD;AACD,EAEO,IAAIF,UAAQ,CAAC,SAAD,EAAY,UAAZ,CAAZ;AACP,gBAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASQ,QAFI;EAGbJ,WAASI,QAHI;EAIbD,SAAOA;EAJM,CAAf;;ECRA,IAAIG,QAAQ,CAACC,IAAD,EAAOC,OAAP,CAAZ;EACA,IAAIL,UAAQ,EAAZ;EACA,IAAIM,YAAY,EAAhB;;EAEA,SAAS9hB,GAAT,CAAawE,IAAb,EAAmB7R,CAAnB,EAAsB;EACpB,MAAIovB,MAAMD,UAAUpvB,MAApB;EACA,MAAI,CAAC8R,KAAKgd,KAAV,EAAiB;EACflhB,YAAQI,GAAR,CAAY/N,CAAZ;EACA,WAAO,IAAP;EACD;EACDmvB,YAAUC,GAAV,IAAiBvd,IAAjB;EACAA,OAAKgd,KAAL,CAAWtxB,OAAX,CAAmB,UAASmU,CAAT,EAAY;EAC7Bmd,YAAMnd,EAAEhV,WAAF,EAAN,IAAyB0yB,GAAzB;EACD,GAFD;EAGA,SAAO,IAAP;EACD;;AAID,EAAO,SAAStxB,KAAT,CAAaxB,IAAb,EAAmB;EACxB,MAAI,CAACA,IAAL,EAAW;EACT,WAAO,KAAP;EACD;EACD,MAAIoV,IAAIpV,KAAKI,WAAL,EAAR;EACA,MAAI,OAAOmyB,QAAMnd,CAAN,CAAP,KAAoB,WAApB,IAAmCyd,UAAUN,QAAMnd,CAAN,CAAV,CAAvC,EAA4D;EAC1D,WAAOyd,UAAUN,QAAMnd,CAAN,CAAV,CAAP;EACD;EACF;;AAED,EAAO,SAASkC,KAAT,GAAiB;EACtBob,QAAMzxB,OAAN,CAAc8P,GAAd;EACD;AACD,oBAAe;EACbuG,SAAOA,KADM;EAEbvG,OAAKA,GAFQ;EAGbvP,OAAKA;EAHQ,CAAf;;EClCA,IAAI8M,YAAU,EAAd;AACA,AACAA,YAAQykB,KAAR,GAAgB;EACdzd,KAAG,SADW;EAEdqT,MAAI,OAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ2kB,KAAR,GAAgB;EACd3d,KAAG,SADW;EAEdqT,MAAI,OAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ4kB,KAAR,GAAgB;EACd5d,KAAG,SADW;EAEdqT,MAAI,aAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ6kB,KAAR,GAAgB;EACd7d,KAAG,SADW;EAEdqT,MAAI,OAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ8kB,IAAR,GAAe;EACb9d,KAAG,WADU;EAEb+U,KAAG,WAFU;EAGb2I,eAAa;EAHA,CAAf;;AAMA1kB,YAAQ+kB,IAAR,GAAe;EACb/d,KAAG,OADU;EAEbqT,MAAI,MAFS;EAGbqK,eAAa;EAHA,CAAf;;AAMA1kB,YAAQglB,KAAR,GAAgB;EACdhe,KAAG,SADW;EAEdqT,MAAI,MAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQilB,QAAR,GAAmB;EACjBje,KAAG,WADc;EAEjB+U,KAAG,WAFc;EAGjB2I,eAAa;EAHI,CAAnB;;AAMA1kB,YAAQklB,MAAR,GAAiB;EACfle,KAAG,UADY;EAEfqT,MAAI,KAFW;EAGfqK,eAAa;EAHE,CAAjB;;AAMA1kB,YAAQmlB,OAAR,GAAkB;EAChBne,KAAG,SADa;EAEhBqT,MAAI,MAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQolB,KAAR,GAAgB;EACdpe,KAAG,SADW;EAEdqT,MAAI,cAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQqlB,MAAR,GAAiB;EACfre,KAAG,WADY;EAEfqT,MAAI,WAFW;EAGfqK,eAAa;EAHE,CAAjB;;AAMA1kB,YAAQslB,QAAR,GAAmB;EACjBte,KAAG,WADc;EAEjBqT,MAAI,WAFa;EAGjBqK,eAAa;EAHI,CAAnB;;AAMA1kB,YAAQulB,MAAR,GAAiB;EACfve,KAAG,SADY;EAEf+U,KAAG,SAFY;EAGf2I,eAAa;EAHE,CAAjB;;AAMA1kB,YAAQwlB,MAAR,GAAiB;EACfxe,KAAG,WADY;EAEfqT,MAAI,QAFW;EAGfqK,eAAa;EAHE,CAAjB;;AAMA1kB,YAAQylB,SAAR,GAAoB;EAClBze,KAAG,SADe;EAElB+U,KAAG,OAFe;EAGlB1B,MAAI,WAHc;EAIlBqK,eAAa;EAJK,CAApB;;AAOA1kB,YAAQ0lB,MAAR,GAAiB;EACf1e,KAAG,iBADY;EAEfqT,MAAI,iBAFW;EAGfqK,eAAa;EAHE,CAAjB;;AAMA1kB,YAAQ2lB,GAAR,GAAc;EACZ3e,KAAG,SADS;EAEZqT,MAAI,MAFQ;EAGZqK,eAAa;EAHD,CAAd;;AAMA1kB,YAAQ4lB,MAAR,GAAiB;EACf5e,KAAG,SADY;EAEfqT,MAAI,KAFW;EAGfqK,eAAa;EAHE,CAAjB;;AAMA1kB,YAAQ6lB,OAAR,GAAkB;EAChB7e,KAAG,UADa;EAEhBqT,MAAI,QAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQ8lB,OAAR,GAAkB;EAChB9e,KAAG,WADa;EAEhBqT,MAAI,QAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQ+lB,OAAR,GAAkB;EAChB/e,KAAG,WADa;EAEhBqT,MAAI,QAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQgmB,OAAR,GAAkB;EAChBhf,KAAG,WADa;EAEhBqT,MAAI,QAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQimB,OAAR,GAAkB;EAChBjf,KAAG,WADa;EAEhBqT,MAAI,QAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQkmB,OAAR,GAAkB;EAChBlf,KAAG,WADa;EAEhBqT,MAAI,QAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQmmB,OAAR,GAAkB;EAChBnf,KAAG,SADa;EAEhBqT,MAAI,KAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQomB,QAAR,GAAmB;EACjBpf,KAAG,SADc;EAEjBqT,MAAI,KAFa;EAGjBqK,eAAa;EAHI,CAAnB;;AAMA1kB,YAAQqmB,OAAR,GAAkB;EAChBrf,KAAG,SADa;EAEhBqT,MAAI,KAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQsmB,OAAR,GAAkB;EAChBtf,KAAG,SADa;EAEhBqT,MAAI,KAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQumB,KAAR,GAAgB;EACdvf,KAAG,SADW;EAEdqT,MAAI,KAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQwmB,IAAR,GAAe;EACbxf,KAAG,SADU;EAEbqT,MAAI,KAFS;EAGbqK,eAAa;EAHA,CAAf;;AAMA1kB,YAAQymB,KAAR,GAAgB;EACdzf,KAAG,SADW;EAEdqT,MAAI,MAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ0mB,KAAR,GAAgB;EACd1f,KAAG,SADW;EAEdqT,MAAI,OAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ2mB,KAAR,GAAgB;EACd3f,KAAG,SADW;EAEdqT,MAAI,KAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ4mB,QAAR,GAAmB;EACjB5f,KAAG,SADc;EAEjB+U,KAAG,SAFc;EAGjB2I,eAAa;EAHI,CAAnB;;AAMA1kB,YAAQ6mB,OAAR,GAAkB;EAChB7f,KAAG,SADa;EAEhBqT,MAAI,SAFY;EAGhBqK,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQ8mB,KAAR,GAAgB;EACd9f,KAAG,SADW;EAEdqT,MAAI,KAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQ+mB,MAAR,GAAiB;EACf/f,KAAG,SADY;EAEf+U,KAAG,YAFY;EAGf2I,eAAa;EAHE,CAAjB;;AAMA1kB,YAAQgnB,OAAR,GAAkB;EAChBhgB,KAAG,SADa;EAEhB+U,KAAG,YAFa;EAGhB2I,eAAa;EAHG,CAAlB;;AAMA1kB,YAAQinB,KAAR,GAAgB;EACdjgB,KAAG,SADW;EAEdqT,MAAI,KAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQknB,KAAR,GAAgB;EACdlgB,KAAG,SADW;EAEdqT,MAAI,MAFU;EAGdqK,eAAa;EAHC,CAAhB;;AAMA1kB,YAAQmnB,IAAR,GAAe;EACbngB,KAAG,SADU;EAEbqT,MAAI,MAFS;EAGbqK,eAAa;EAHA,CAAf;;AAMA,EAAO,IAAIvN,QAAQnX,UAAQmX,KAAR,GAAgB;EACjCnQ,KAAG,SAD8B;EAEjCqT,MAAI,aAF6B;EAGjCqK,eAAa;EAHoB,CAA5B;;AAMP1kB,YAAQ2gB,MAAR,GAAiB;EACf3Z,KAAG,SADY;EAEf+U,KAAG,SAFY;EAGf2I,eAAa;EAHE,CAAjB;;ECjQO,SAAS0C,YAAT,CAAsBpgB,CAAtB,EAAyB+U,CAAzB,EAA4B1B,EAA5B,EAAgC4B,GAAhC,EAAqC;EAC1C,MAAIoL,KAAKrgB,IAAIA,CAAb,CAD0C;EAE1C,MAAIsgB,KAAKvL,IAAIA,CAAb,CAF0C;EAG1C,MAAIwH,KAAK,CAAC8D,KAAKC,EAAN,IAAYD,EAArB,CAH0C;EAI1C,MAAI52B,IAAI,CAAR;EACA,MAAIwrB,GAAJ,EAAS;EACPjV,SAAK,IAAIuc,MAAMvL,QAAQuL,MAAMtL,MAAMsL,KAAKrL,GAAjB,CAAd,CAAT;EACAmP,SAAKrgB,IAAIA,CAAT;EACAuc,SAAK,CAAL;EACD,GAJD,MAIO;EACL9yB,QAAIic,KAAKoW,IAAL,CAAUS,EAAV,CAAJ,CADK;EAEN;EACD,MAAIgE,MAAM,CAACF,KAAKC,EAAN,IAAYA,EAAtB,CAZ0C;EAa1C,SAAO;EACL/D,QAAIA,EADC;EAEL9yB,OAAGA,CAFE;EAGL82B,SAAKA;EAHA,GAAP;EAKD;AACD,EAAO,SAAS5G,MAAT,CAAgB3Z,CAAhB,EAAmB+U,CAAnB,EAAsB1B,EAAtB,EAA0BuG,KAA1B,EAAiCD,MAAjC,EAAyC;EAC9C,MAAI,CAAC3Z,CAAL,EAAQ;EAAE;EACR,QAAIwgB,UAAU/N,MAAMgO,SAAN,EAAiB7G,KAAjB,CAAd;EACA,QAAI,CAAC4G,OAAL,EAAc;EACZA,gBAAUrQ,KAAV;EACD;EACDnQ,QAAIwgB,QAAQxgB,CAAZ;EACA+U,QAAIyL,QAAQzL,CAAZ;EACA1B,SAAKmN,QAAQnN,EAAb;EACD;;EAED,MAAIA,MAAM,CAAC0B,CAAX,EAAc;EACZA,QAAI,CAAC,MAAM,MAAM1B,EAAb,IAAmBrT,CAAvB;EACD;EACD,MAAIqT,OAAO,CAAP,IAAY3N,KAAKC,GAAL,CAAS3F,IAAI+U,CAAb,IAAkB5D,KAAlC,EAAyC;EACvCwI,aAAS,IAAT;EACA5E,QAAI/U,CAAJ;EACD;EACD,SAAO;EACLA,OAAGA,CADE;EAEL+U,OAAGA,CAFE;EAGL1B,QAAIA,EAHC;EAILsG,YAAQA;EAJH,GAAP;EAMD;;EC/CD,IAAI3gB,YAAU,EAAd;AACA,AACAA,YAAQ0nB,KAAR,GAAgB;EACdpL,WAAS,OADK;EAEdkL,WAAS,OAFK;EAGdG,aAAW;EAHG,CAAhB;;AAMA3nB,YAAQ4nB,MAAR,GAAiB;EACftL,WAAS,wBADM;EAEfkL,WAAS,QAFM;EAGfG,aAAW;EAHI,CAAjB;;AAMA3nB,YAAQ6nB,MAAR,GAAiB;EACfvL,WAAS,sBADM;EAEfkL,WAAS,OAFM;EAGfG,aAAW;EAHI,CAAjB;;AAMA3nB,YAAQ8nB,KAAR,GAAgB;EACdxL,WAAS,OADK;EAEdkL,WAAS,OAFK;EAGdG,aAAW;EAHG,CAAhB;;AAMA3nB,YAAQ+nB,KAAR,GAAgB;EACdlL,YAAU,0CADI;EAEd2K,WAAS,QAFK;EAGdG,aAAW;EAHG,CAAhB;;AAMA3nB,YAAQgoB,OAAR,GAAkB;EAChB1L,WAAS,yCADO;EAEhBkL,WAAS,QAFO;EAGhBG,aAAW;EAHK,CAAlB;;AAMA3nB,YAAQioB,QAAR,GAAmB;EACjB3L,WAAS,kBADQ;EAEjBkL,WAAS,SAFQ;EAGjBG,aAAW;EAHM,CAAnB;;AAMA3nB,YAAQkoB,aAAR,GAAwB;EACtB5L,WAAS,iDADa;EAEtBkL,WAAS,QAFa;EAGtBG,aAAW;EAHW,CAAxB;;AAMA3nB,YAAQmoB,6BAAR,GAAwC;EACtC7L,WAAS,iDAD6B;EAEtCkL,WAAS,QAF6B;EAGtCG,aAAW;EAH2B,CAAxC;;AAMA3nB,YAAQooB,MAAR,GAAiB;EACf9L,WAAS,oDADM;EAEfkL,WAAS,MAFM;EAGfG,aAAW;EAHI,CAAjB;;AAMA3nB,YAAQqoB,KAAR,GAAgB;EACd/L,WAAS,oDADK;EAEdkL,WAAS,UAFK;EAGdG,aAAW;EAHG,CAAhB;;AAMA3nB,YAAQsoB,UAAR,GAAqB;EACnBhM,WAAS,wBADU;EAEnBkL,WAAS,MAFU;EAGnBG,aAAW;EAHQ,CAArB;;AAMA3nB,YAAQuoB,MAAR,GAAiB;EACfjM,WAAS,4CADM;EAEfkL,WAAS,MAFM;EAGfG,aAAW;EAHI,CAAjB;;AAMA3nB,YAAQwoB,MAAR,GAAiB;EACflM,WAAS,wDADM;EAEfkL,WAAS,MAFM;EAGfG,aAAW;EAHI,CAAjB;;AAMA3nB,YAAQyoB,MAAR,GAAiB;EACfnM,WAAS,YADM;EAEfkL,WAAS,QAFM;EAGfG,aAAW;EAHI,CAAjB;;AAMA3nB,YAAQ0oB,QAAR,GAAmB;EACjBpM,WAAS,cADQ;EAEjBkL,WAAS,QAFQ;EAGjBG,aAAW;EAHM,CAAnB;;AAMA3nB,YAAQ2oB,aAAR,GAAwB;EACtBrM,WAAS,aADa;EAEtBkL,WAAS,QAFa;EAGtBG,aAAW;EAHW,CAAxB;;AAMA3nB,YAAQ4oB,KAAR,GAAgB;EACdtM,WAAS,uDADK;EAEdkL,WAAS,MAFK;EAGdG,aAAW;EAHG,CAAhB;;ECtGA,SAASvN,KAAT,CAAe0C,SAAf,EAA0BP,YAA1B,EAAwCvV,CAAxC,EAA2C+U,CAA3C,EAA8CwH,EAA9C,EAAkDgE,GAAlD,EAAuD1K,QAAvD,EAAiE;EAC/D,MAAIwC,MAAM,EAAV;;EAEA,MAAIvC,cAAcvqB,SAAd,IAA2BuqB,cAAc,MAA7C,EAAqD;EACnDuC,QAAIwJ,UAAJ,GAAiBpR,WAAjB;EACD,GAFD,MAEO;EACL4H,QAAIwJ,UAAJ,GAAiBrR,SAAjB;EACD;;EAED,MAAI+E,YAAJ,EAAkB;EAChB8C,QAAI9C,YAAJ,GAAmBA,aAAa7pB,GAAb,CAAiB4P,UAAjB,CAAnB;EACA,QAAI+c,IAAI9C,YAAJ,CAAiB,CAAjB,MAAwB,CAAxB,IAA6B8C,IAAI9C,YAAJ,CAAiB,CAAjB,MAAwB,CAArD,IAA0D8C,IAAI9C,YAAJ,CAAiB,CAAjB,MAAwB,CAAtF,EAAyF;EACvF8C,UAAIwJ,UAAJ,GAAiBxR,UAAjB;EACD;EACD,QAAIgI,IAAI9C,YAAJ,CAAiBpnB,MAAjB,GAA0B,CAA9B,EAAiC;EAC/B,UAAIkqB,IAAI9C,YAAJ,CAAiB,CAAjB,MAAwB,CAAxB,IAA6B8C,IAAI9C,YAAJ,CAAiB,CAAjB,MAAwB,CAArD,IAA0D8C,IAAI9C,YAAJ,CAAiB,CAAjB,MAAwB,CAAlF,IAAuF8C,IAAI9C,YAAJ,CAAiB,CAAjB,MAAwB,CAAnH,EAAsH;EACpH8C,YAAIwJ,UAAJ,GAAiBvR,UAAjB;EACA+H,YAAI9C,YAAJ,CAAiB,CAAjB,KAAuB1E,UAAvB;EACAwH,YAAI9C,YAAJ,CAAiB,CAAjB,KAAuB1E,UAAvB;EACAwH,YAAI9C,YAAJ,CAAiB,CAAjB,KAAuB1E,UAAvB;EACAwH,YAAI9C,YAAJ,CAAiB,CAAjB,IAAuB8C,IAAI9C,YAAJ,CAAiB,CAAjB,IAAsB,SAAvB,GAAoC,GAA1D;EACD;EACF;EACF;;EAED,MAAIM,QAAJ,EAAc;EACZwC,QAAIwJ,UAAJ,GAAiBtR,aAAjB;EACA8H,QAAIyJ,KAAJ,GAAYjM,QAAZ;EACD;EACDwC,MAAIrY,CAAJ,GAAQA,CAAR,CA7B+D;EA8B/DqY,MAAItD,CAAJ,GAAQA,CAAR;EACAsD,MAAIkE,EAAJ,GAASA,EAAT;EACAlE,MAAIkI,GAAJ,GAAUA,GAAV;EACA,SAAOlI,GAAP;EACD;;ECpCD;;;;;;EAMA,IAAI0J,iBAAiB,EAArB;;EAEA;;;;AAIA,EAAe,SAASC,OAAT,CAAiB3wB,GAAjB,EAAsBkG,IAAtB,EAA4B;EACzC,MAAIvJ,OAAO,IAAIjE,QAAJ,CAAawN,IAAb,CAAX;EACA,MAAI0qB,iBAAiBC,mBAAmBl0B,IAAnB,CAArB;EACA,MAAIjC,SAASo2B,WAAWn0B,IAAX,EAAiBi0B,cAAjB,CAAb;EACA,MAAIG,WAAWC,aAAar0B,IAAb,EAAmBjC,MAAnB,EAA2Bk2B,cAA3B,CAAf;EACA,MAAID,UAAU,EAACj2B,QAAQA,MAAT,EAAiBq2B,UAAUA,QAA3B,EAAd;EACAL,iBAAe1wB,GAAf,IAAsB2wB,OAAtB;EACA,SAAOA,OAAP;EACD;;EAED;;;AAGA,EAAO,SAASM,WAAT,CAAqBzM,QAArB,EAA+B;EACpC;EACA,MAAIA,aAAatqB,SAAjB,EAA4B;EAAE,WAAO,IAAP;EAAc;EAC5C,MAAIu2B,QAAQjM,SAASjlB,KAAT,CAAe,GAAf,CAAZ;EACA,SAAOkxB,MAAMp2B,GAAN,CAAU62B,kBAAV,CAAP;EACD;;EAED,SAASA,kBAAT,CAA4Bv3B,KAA5B,EAAmC;EACjC,MAAIA,MAAMmD,MAAN,KAAiB,CAArB,EAAwB;EACtB,WAAO,IAAP;EACD;EACD,MAAIq0B,WAAWx3B,MAAM,CAAN,MAAa,GAA5B;EACA,MAAIw3B,QAAJ,EAAc;EACZx3B,YAAQA,MAAMwD,KAAN,CAAY,CAAZ,CAAR;EACD;EACD,MAAIxD,UAAU,MAAd,EAAsB;EACpB,WAAO,EAACN,MAAM,MAAP,EAAe+3B,WAAW,CAACD,QAA3B,EAAqCE,MAAM,IAA3C,EAAiDxvB,QAAQ,IAAzD,EAAP;EACD;EACD,SAAO;EACLxI,UAAMM,KADD;EAELy3B,eAAW,CAACD,QAFP;EAGLE,UAAMX,eAAe/2B,KAAf,KAAyB,IAH1B;EAILkI,YAAQ;EAJH,GAAP;EAMD;;EAED,SAASyvB,gBAAT,CAA0BC,OAA1B,EAAmC;EACjC,SAAQA,UAAU,IAAX,GAAmBld,KAAKqL,EAAxB,GAA6B,GAApC;EACD;;EAED,SAASmR,kBAAT,CAA4Bl0B,IAA5B,EAAkC;EAChC,MAAI60B,UAAU70B,KAAK80B,QAAL,CAAc,CAAd,EAAiB,KAAjB,CAAd;EACA,MAAID,YAAY,EAAhB,EAAoB;EAClB,WAAO,KAAP;EACD;EACDA,YAAU70B,KAAK80B,QAAL,CAAc,CAAd,EAAiB,IAAjB,CAAV;EACA,MAAID,YAAY,EAAhB,EAAoB;EAClB9mB,YAAQC,IAAR,CAAa,mEAAb;EACD;EACD,SAAO,IAAP;EACD;;EAED,SAASmmB,UAAT,CAAoBn0B,IAApB,EAA0Bi0B,cAA1B,EAA0C;EACxC,SAAO;EACLY,aAAS70B,KAAK80B,QAAL,CAAc,CAAd,EAAiBb,cAAjB,CADJ;EAELc,oBAAgB/0B,KAAK80B,QAAL,CAAc,EAAd,EAAkBb,cAAlB,CAFX;EAGLe,eAAWh1B,KAAK80B,QAAL,CAAc,EAAd,EAAkBb,cAAlB,CAHN;EAILgB,eAAWC,aAAal1B,IAAb,EAAmB,EAAnB,EAAuB,KAAK,CAA5B,EAA+B2C,IAA/B,EAJN;EAKLwyB,uBAAmBn1B,KAAKo1B,UAAL,CAAgB,GAAhB,EAAqBnB,cAArB,CALd;EAMLoB,uBAAmBr1B,KAAKo1B,UAAL,CAAgB,GAAhB,EAAqBnB,cAArB,CANd;EAOLqB,qBAAiBt1B,KAAKo1B,UAAL,CAAgB,GAAhB,EAAqBnB,cAArB,CAPZ;EAQLsB,qBAAiBv1B,KAAKo1B,UAAL,CAAgB,GAAhB,EAAqBnB,cAArB;EARZ,GAAP;EAUD;;EAED,SAASiB,YAAT,CAAsBl1B,IAAtB,EAA4BgU,KAA5B,EAAmCwhB,GAAnC,EAAwC;EACtC,SAAO74B,OAAO0D,YAAP,CAAoBqd,KAApB,CAA0B,IAA1B,EAAgC,IAAIzd,UAAJ,CAAeD,KAAKU,MAAL,CAAYF,KAAZ,CAAkBwT,KAAlB,EAAyBwhB,GAAzB,CAAf,CAAhC,CAAP;EACD;;EAED,SAASnB,YAAT,CAAsBr0B,IAAtB,EAA4BjC,MAA5B,EAAoCk2B,cAApC,EAAoD;EAClD,MAAIwB,aAAa,GAAjB;EACA,MAAI3B,QAAQ,EAAZ;EACA,OAAK,IAAI1zB,IAAI,CAAb,EAAgBA,IAAIrC,OAAOi3B,SAA3B,EAAsC50B,GAAtC,EAA2C;EACzC,QAAIs1B,YAAYC,eAAe31B,IAAf,EAAqBy1B,UAArB,EAAiCxB,cAAjC,CAAhB;EACA,QAAI2B,QAAQC,cAAc71B,IAAd,EAAoBy1B,UAApB,EAAgCC,SAAhC,EAA2CzB,cAA3C,CAAZ;EACA,QAAI6B,iBAAiBpe,KAAKqe,KAAL,CACnB,IAAI,CAACL,UAAUM,cAAV,GAA2BN,UAAUO,cAAtC,IAAwDP,UAAUQ,iBADnD,CAArB;EAEA,QAAIC,iBAAiBze,KAAKqe,KAAL,CACnB,IAAI,CAACL,UAAUU,aAAV,GAA0BV,UAAUW,aAArC,IAAsDX,UAAUY,gBADjD,CAArB;EAEA;EACAxC,UAAMr1B,IAAN,CAAW;EACT83B,UAAI,CAAC5B,iBAAiBe,UAAUO,cAA3B,CAAD,EAA6CtB,iBAAiBe,UAAUW,aAA3B,CAA7C,CADK;EAETG,WAAK,CAAC7B,iBAAiBe,UAAUQ,iBAA3B,CAAD,EAAgDvB,iBAAiBe,UAAUY,gBAA3B,CAAhD,CAFI;EAGTG,WAAK,CAACX,cAAD,EAAiBK,cAAjB,CAHI;EAITO,aAAOhB,UAAUiB,aAJR;EAKTC,WAAKC,SAASjB,KAAT;EALI,KAAX;EAOAH,kBAAc,MAAMC,UAAUiB,aAAV,GAA0B,EAA9C;EACD;EACD,SAAO7C,KAAP;EACD;;EAED,SAAS+C,QAAT,CAAkBjB,KAAlB,EAAyB;EACvB,SAAOA,MAAMl4B,GAAN,CAAU,UAAUuP,CAAV,EAAa;EAAC,WAAO,CAAC0nB,iBAAiB1nB,EAAE6pB,cAAnB,CAAD,EAAqCnC,iBAAiB1nB,EAAE8pB,aAAnB,CAArC,CAAP;EAAgF,GAAxG,CAAP;EACD;;EAED,SAASpB,cAAT,CAAwB31B,IAAxB,EAA8Bga,MAA9B,EAAsCia,cAAtC,EAAsD;EACpD,SAAO;EACLv3B,UAAMw4B,aAAal1B,IAAb,EAAmBga,SAAS,CAA5B,EAA+BA,SAAS,EAAxC,EAA4CrX,IAA5C,EADD;EAELq0B,YAAQ9B,aAAal1B,IAAb,EAAmBga,SAAS,EAA5B,EAAgCA,SAAS,EAAT,GAAc,CAA9C,EAAiDrX,IAAjD,EAFH;EAGL0zB,mBAAer2B,KAAKo1B,UAAL,CAAgBpb,SAAS,EAAzB,EAA6Bia,cAA7B,CAHV;EAILmC,mBAAep2B,KAAKo1B,UAAL,CAAgBpb,SAAS,EAAzB,EAA6Bia,cAA7B,CAJV;EAKLgC,oBAAgBj2B,KAAKo1B,UAAL,CAAgBpb,SAAS,GAAzB,EAA8Bia,cAA9B,CALX;EAML+B,oBAAgBh2B,KAAKo1B,UAAL,CAAgBpb,SAAS,GAAzB,EAA8Bia,cAA9B,CANX;EAOLqC,sBAAkBt2B,KAAKo1B,UAAL,CAAgBpb,SAAS,GAAzB,EAA8Bia,cAA9B,CAPb;EAQLiC,uBAAmBl2B,KAAKo1B,UAAL,CAAgBpb,SAAS,GAAzB,EAA8Bia,cAA9B,CARd;EASL0C,mBAAe32B,KAAK80B,QAAL,CAAc9a,SAAS,GAAvB,EAA4Bia,cAA5B;EATV,GAAP;EAWD;;EAED,SAAS4B,aAAT,CAAuB71B,IAAvB,EAA6Bga,MAA7B,EAAqCid,UAArC,EAAiDhD,cAAjD,EAAiE;EAC/D,MAAIiD,cAAcld,SAAS,GAA3B;EACA,MAAImd,mBAAmB,EAAvB;EACA,MAAIC,mBAAmB,EAAvB;EACA,OAAK,IAAIh3B,IAAI,CAAb,EAAgBA,IAAI62B,WAAWN,aAA/B,EAA8Cv2B,GAA9C,EAAmD;EACjD,QAAIi3B,SAAS;EACXN,qBAAe/2B,KAAKs3B,UAAL,CAAgBJ,cAAc92B,IAAI+2B,gBAAlC,EAAoDlD,cAApD,CADJ;EAEX6C,sBAAgB92B,KAAKs3B,UAAL,CAAgBJ,cAAc92B,IAAI+2B,gBAAlB,GAAqC,CAArD,EAAwDlD,cAAxD,CAFL;EAGXsD,wBAAkBv3B,KAAKs3B,UAAL,CAAgBJ,cAAc92B,IAAI+2B,gBAAlB,GAAqC,CAArD,EAAwDlD,cAAxD,CAHP;EAIXuD,yBAAmBx3B,KAAKs3B,UAAL,CAAgBJ,cAAc92B,IAAI+2B,gBAAlB,GAAqC,EAArD,EAAyDlD,cAAzD;EAJR,KAAb;EAMAmD,qBAAiB34B,IAAjB,CAAsB44B,MAAtB;EACD;EACD,SAAOD,gBAAP;EACD;;EClID,SAASK,UAAT,CAAoBC,OAApB,EAA4Bp5B,QAA5B,EAAsC;EACpC,MAAI,EAAE,gBAAgBm5B,UAAlB,CAAJ,EAAmC;EACjC,WAAO,IAAIA,UAAJ,CAAeC,OAAf,CAAP;EACD;EACDp5B,aAAWA,YAAY,UAASiB,KAAT,EAAe;EACpC,QAAGA,KAAH,EAAS;EACP,YAAMA,KAAN;EACD;EACF,GAJD;EAKA,MAAImC,OAAOi2B,MAAUD,OAAV,CAAX;EACA,MAAG,QAAOh2B,IAAP,yCAAOA,IAAP,OAAgB,QAAnB,EAA4B;EAC1BpD,aAASo5B,OAAT;EACA;EACD;EACD,MAAIE,UAAUH,WAAWI,WAAX,CAAuB35B,GAAvB,CAA2BwD,KAAKspB,QAAhC,CAAd;EACA,MAAG,CAAC4M,OAAJ,EAAY;EACVt5B,aAASo5B,OAAT;EACA;EACD;EACD,MAAIh2B,KAAKomB,SAAL,IAAkBpmB,KAAKomB,SAAL,KAAmB,MAAzC,EAAiD;EAC/C,QAAIgQ,WAAWrT,MAAMsT,SAAN,EAAar2B,KAAKomB,SAAlB,CAAf;EACA,QAAIgQ,QAAJ,EAAc;EACZp2B,WAAK6lB,YAAL,GAAoB7lB,KAAK6lB,YAAL,KAAsBuQ,SAASxQ,OAAT,GAAmBwQ,SAASxQ,OAAT,CAAiB1kB,KAAjB,CAAuB,GAAvB,CAAnB,GAAiD,IAAvE,CAApB;EACAlB,WAAKkqB,KAAL,GAAakM,SAAStF,OAAtB;EACA9wB,WAAKixB,SAAL,GAAiBmF,SAASnF,SAAT,GAAqBmF,SAASnF,SAA9B,GAA0CjxB,KAAKomB,SAAhE;EACD;EACF;EACDpmB,OAAKmlB,EAAL,GAAUnlB,KAAKmlB,EAAL,IAAW,GAArB;EACAnlB,OAAKqmB,IAAL,GAAYrmB,KAAKqmB,IAAL,IAAa,KAAzB;EACArmB,OAAKkqB,KAAL,GAAalqB,KAAKkqB,KAAL,IAAc,OAA3B;EACAlqB,OAAK+jB,IAAL,GAAY/jB,KAAK+jB,IAAL,IAAa/jB,KAAK6jB,IAA9B,CA9BoC;;EAgCpC,MAAIyS,UAAUC,OAAUv2B,KAAKsQ,CAAf,EAAkBtQ,KAAKqlB,CAAvB,EAA0BrlB,KAAK2jB,EAA/B,EAAmC3jB,KAAKkqB,KAAxC,EAA+ClqB,KAAKiqB,MAApD,CAAd;EACA,MAAIuM,MAAMC,aAAgBH,QAAQhmB,CAAxB,EAA2BgmB,QAAQjR,CAAnC,EAAsCiR,QAAQ3S,EAA9C,EAAkD3jB,KAAKulB,GAAvD,CAAV;EACA,MAAIY,WAAWyM,YAAY5yB,KAAKmmB,QAAjB,CAAf;EACA,MAAIuQ,WAAW12B,KAAK0jB,KAAL,IAAcA,MAAM1jB,KAAKomB,SAAX,EAAsBpmB,KAAK6lB,YAA3B,EAAyCyQ,QAAQhmB,CAAjD,EAAoDgmB,QAAQjR,CAA5D,EAA+DmR,IAAI3J,EAAnE,EAAuE2J,IAAI3F,GAA3E,EAC3B1K,QAD2B,CAA7B;;EAGA9H,SAAO,IAAP,EAAare,IAAb,EAtCoC;EAuCpCqe,SAAO,IAAP,EAAa6X,OAAb,EAvCoC;;EAyCpC;EACA,OAAK5lB,CAAL,GAASgmB,QAAQhmB,CAAjB;EACA,OAAK+U,CAAL,GAASiR,QAAQjR,CAAjB;EACA,OAAK1B,EAAL,GAAU2S,QAAQ3S,EAAlB;EACA,OAAKsG,MAAL,GAAcqM,QAAQrM,MAAtB;;EAEA;EACA,OAAK4C,EAAL,GAAU2J,IAAI3J,EAAd;EACA,OAAK9yB,CAAL,GAASy8B,IAAIz8B,CAAb;EACA,OAAK82B,GAAL,GAAW2F,IAAI3F,GAAf;;EAEA;EACA,OAAKnN,KAAL,GAAagT,QAAb;;EAEA;EACA,OAAKp0B,IAAL;;EAEA;EACA1F,WAAS,IAAT,EAAe,IAAf;EAED;EACDm5B,WAAWI,WAAX,GAAyBA,WAAzB;EACAJ,WAAWI,WAAX,CAAuB7jB,KAAvB;;ECtEO,SAASqkB,aAAT,CAAuBvnB,MAAvB,EAA+BwnB,IAA/B,EAAqC;EAC1C,MAAIxnB,OAAO+iB,UAAP,KAAsByE,KAAKzE,UAA/B,EAA2C;EACzC,WAAO,KAAP,CADyC;EAE1C,GAFD,MAEO,IAAI/iB,OAAOkB,CAAP,KAAasmB,KAAKtmB,CAAlB,IAAuB0F,KAAKC,GAAL,CAAS7G,OAAOyd,EAAP,GAAY+J,KAAK/J,EAA1B,IAAgC,cAA3D,EAA2E;EAChF;EACA;EACA,WAAO,KAAP;EACD,GAJM,MAIA,IAAIzd,OAAO+iB,UAAP,KAAsBxR,UAA1B,EAAsC;EAC3C,WAAQvR,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAA3B,IAAmDzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAA9E,IAAsGzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAAzI;EACD,GAFM,MAEA,IAAIzW,OAAO+iB,UAAP,KAAsBvR,UAA1B,EAAsC;EAC3C,WAAQxR,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAA3B,IAAmDzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAA9E,IAAsGzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAAjI,IAAyJzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAApL,IAA4MzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAAvO,IAA+PzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAA1R,IAAkTzW,OAAOyW,YAAP,CAAoB,CAApB,MAA2B+Q,KAAK/Q,YAAL,CAAkB,CAAlB,CAArV;EACD,GAFM,MAEA;EACL,WAAO,IAAP,CADK;EAEN;EACF;;EAED;;;;;;;;;;;;;AAaA,EAAO,SAASgR,oBAAT,CAA8BvT,CAA9B,EAAiCuJ,EAAjC,EAAqCvc,CAArC,EAAwC;EAC7C,MAAIwmB,YAAYxT,EAAEnO,CAAlB;EACA,MAAI4hB,WAAWzT,EAAElO,CAAjB;EACA,MAAI4hB,SAAS1T,EAAE2T,CAAF,GAAM3T,EAAE2T,CAAR,GAAY,CAAzB,CAH6C;;EAK7C,MAAIC,EAAJ,CAL6C;EAM7C,MAAIC,OAAJ,CAN6C;EAO7C,MAAIC,QAAJ,CAP6C;EAQ7C,MAAIC,OAAJ,CAR6C;;EAU7C;;;;;EAKA,MAAIN,WAAW,CAAC3V,OAAZ,IAAuB2V,WAAW,CAAC,KAAD,GAAS3V,OAA/C,EAAwD;EACtD2V,eAAW,CAAC3V,OAAZ;EACD,GAFD,MAEO,IAAI2V,WAAW3V,OAAX,IAAsB2V,WAAW,QAAQ3V,OAA7C,EAAsD;EAC3D2V,eAAW3V,OAAX;EACD,GAFM,MAEA,IAAI2V,WAAW,CAAC3V,OAAhB,EAAyB;EAC9B;EACA;EACA,WAAO,EAAEjM,GAAG,CAACmiB,QAAN,EAAgBliB,GAAG,CAACkiB,QAApB,EAA8BL,GAAG3T,EAAE2T,CAAnC,EAAP;EACD,GAJM,MAIA,IAAIF,WAAW3V,OAAf,EAAwB;EAC7B;EACA,WAAO,EAAEjM,GAAGmiB,QAAL,EAAeliB,GAAGkiB,QAAlB,EAA4BL,GAAG3T,EAAE2T,CAAjC,EAAP;EACD;;EAED,MAAIH,YAAY9gB,KAAKqL,EAArB,EAAyB;EACvByV,iBAAc,IAAI9gB,KAAKqL,EAAvB;EACD;EACD8V,YAAUnhB,KAAKE,GAAL,CAAS6gB,QAAT,CAAV;EACAM,YAAUrhB,KAAK8W,GAAL,CAASiK,QAAT,CAAV;EACAK,aAAWD,UAAUA,OAArB;EACAD,OAAK5mB,IAAK0F,KAAKoW,IAAL,CAAU,QAAQS,KAAKuK,QAAvB,CAAV;EACA,SAAO;EACLjiB,OAAG,CAAC+hB,KAAKF,MAAN,IAAgBK,OAAhB,GAA0BrhB,KAAK8W,GAAL,CAASgK,SAAT,CADxB;EAEL1hB,OAAG,CAAC8hB,KAAKF,MAAN,IAAgBK,OAAhB,GAA0BrhB,KAAKE,GAAL,CAAS4gB,SAAT,CAFxB;EAGLG,OAAG,CAAEC,MAAM,IAAIrK,EAAV,CAAD,GAAkBmK,MAAnB,IAA6BG;EAH3B,GAAP;EAKD;;AAED,EAAO,SAASI,oBAAT,CAA8BjU,CAA9B,EAAiCuJ,EAAjC,EAAqCvc,CAArC,EAAwC+U,CAAxC,EAA2C;EAChD;EACA;EACA,MAAImS,QAAQ,KAAZ;EACA,MAAIC,SAAUD,QAAQA,KAAtB;EACA,MAAIE,UAAU,EAAd;;EAEA,MAAIC,CAAJ,CAPgD;EAQhD,MAAIC,EAAJ,CARgD;EAShD,MAAIC,EAAJ,CATgD;EAUhD,MAAIC,EAAJ,CAVgD;EAWhD,MAAIC,EAAJ;EACA,MAAIC,EAAJ;EACA,MAAIC,EAAJ,CAbgD;EAchD,MAAIC,KAAJ,CAdgD;EAehD,MAAIC,KAAJ,CAfgD;EAgBhD,MAAIC,IAAJ,CAhBgD;EAiBhD,MAAIC,IAAJ,CAjBgD;EAkBhD,MAAIC,KAAJ,CAlBgD;EAmBhD,MAAIC,IAAJ,CAnBgD;;EAqBhD,MAAIC,IAAIlV,EAAEnO,CAAV;EACA,MAAIsjB,IAAInV,EAAElO,CAAV;EACA,MAAIsjB,IAAIpV,EAAE2T,CAAF,GAAM3T,EAAE2T,CAAR,GAAY,GAApB,CAvBgD;EAwBhD,MAAIH,SAAJ;EACA,MAAIC,QAAJ;EACA,MAAIC,MAAJ;;EAEAW,MAAI3hB,KAAKoW,IAAL,CAAUoM,IAAIA,CAAJ,GAAQC,IAAIA,CAAtB,CAAJ;EACAb,OAAK5hB,KAAKoW,IAAL,CAAUoM,IAAIA,CAAJ,GAAQC,IAAIA,CAAZ,GAAgBC,IAAIA,CAA9B,CAAL;;EAEA;EACA,MAAIf,IAAIrnB,CAAJ,GAAQknB,KAAZ,EAAmB;;EAEjB;EACAV,gBAAY,GAAZ;;EAEA;;EAEA,QAAIc,KAAKtnB,CAAL,GAASknB,KAAb,EAAoB;EAClBT,iBAAW3V,OAAX;EACA4V,eAAS,CAAC3R,CAAV;EACA,aAAO;EACLlQ,WAAGmO,EAAEnO,CADA;EAELC,WAAGkO,EAAElO,CAFA;EAGL6hB,WAAG3T,EAAE2T;EAHA,OAAP;EAKD;EACF,GAhBD,MAgBO;EACL;;EAEAH,gBAAY9gB,KAAK2iB,KAAL,CAAWF,CAAX,EAAcD,CAAd,CAAZ;EACD;;EAED;;;;;;;;;EASAX,OAAKa,IAAId,EAAT;EACAE,OAAKH,IAAIC,EAAT;EACAG,OAAK,MAAM/hB,KAAKoW,IAAL,CAAU,MAAMS,MAAM,MAAMA,EAAZ,IAAkBiL,EAAlB,GAAuBA,EAAvC,CAAX;EACAI,UAAQJ,MAAM,MAAMjL,EAAZ,IAAkBkL,EAA1B;EACAI,UAAQN,KAAKE,EAAb;EACAQ,SAAO,CAAP;;EAEA;;EAEA,KAAG;EACDA;EACAN,SAAK3nB,IAAI0F,KAAKoW,IAAL,CAAU,MAAMS,KAAKsL,KAAL,GAAaA,KAA7B,CAAT;;EAEA;EACAnB,aAASW,IAAIO,KAAJ,GAAYQ,IAAIP,KAAhB,GAAwBF,MAAM,MAAMpL,KAAKsL,KAAL,GAAaA,KAAzB,CAAjC;;EAEAH,SAAKnL,KAAKoL,EAAL,IAAWA,KAAKjB,MAAhB,CAAL;EACAe,SAAK,MAAM/hB,KAAKoW,IAAL,CAAU,MAAM4L,MAAM,MAAMA,EAAZ,IAAkBF,EAAlB,GAAuBA,EAAvC,CAAX;EACAM,WAAON,MAAM,MAAME,EAAZ,IAAkBD,EAAzB;EACAM,WAAOR,KAAKE,EAAZ;EACAO,YAAQD,OAAOH,KAAP,GAAeE,OAAOD,KAA9B;EACAD,YAAQE,IAAR;EACAD,YAAQE,IAAR;EACD,GAdD,QAeOC,QAAQA,KAAR,GAAgBb,MAAhB,IAA0Bc,OAAOb,OAfxC;;EAiBA;EACAX,aAAW/gB,KAAK4W,IAAL,CAAUyL,OAAOriB,KAAKC,GAAL,CAASmiB,IAAT,CAAjB,CAAX;EACA,SAAO;EACLjjB,OAAG2hB,SADE;EAEL1hB,OAAG2hB,QAFE;EAGLE,OAAGD;EAHE,GAAP;EAKD;;EAED;EACA;EACA;;;EAGA;;;;;AAKA,EAAO,SAAS4B,iBAAT,CAA2BtV,CAA3B,EAA8B6O,UAA9B,EAA0CtM,YAA1C,EAAwD;;EAE7D,MAAIsM,eAAexR,UAAnB,EAA+B;EAC7B;EACA;EACA,WAAO;EACLxL,SAAGmO,EAAEnO,CAAF,GAAM0Q,aAAa,CAAb,CADJ;EAELzQ,SAAGkO,EAAElO,CAAF,GAAMyQ,aAAa,CAAb,CAFJ;EAGLoR,SAAG3T,EAAE2T,CAAF,GAAMpR,aAAa,CAAb;EAHJ,KAAP;EAKD,GARD,MAQO,IAAIsM,eAAevR,UAAnB,EAA+B;EACpC,QAAIiY,QAAQhT,aAAa,CAAb,CAAZ;EACA,QAAIiT,QAAQjT,aAAa,CAAb,CAAZ;EACA,QAAIkT,QAAQlT,aAAa,CAAb,CAAZ;EACA,QAAImT,QAAQnT,aAAa,CAAb,CAAZ;EACA,QAAIoT,QAAQpT,aAAa,CAAb,CAAZ;EACA,QAAIqT,QAAQrT,aAAa,CAAb,CAAZ;EACA,QAAIsT,OAAOtT,aAAa,CAAb,CAAX;EACA;EACA;EACA,WAAO;EACL1Q,SAAGgkB,QAAQ7V,EAAEnO,CAAF,GAAM+jB,QAAQ5V,EAAElO,CAAhB,GAAoB6jB,QAAQ3V,EAAE2T,CAAtC,IAA2C4B,KADzC;EAELzjB,SAAG+jB,QAAQD,QAAQ5V,EAAEnO,CAAV,GAAcmO,EAAElO,CAAhB,GAAoB4jB,QAAQ1V,EAAE2T,CAAtC,IAA2C6B,KAFzC;EAGL7B,SAAGkC,QAAQ,CAACF,KAAD,GAAS3V,EAAEnO,CAAX,GAAe6jB,QAAQ1V,EAAElO,CAAzB,GAA6BkO,EAAE2T,CAAvC,IAA4C8B;EAH1C,KAAP;EAKD;EACF;;EAED;EACA;EACA;EACA;AACA,EAAO,SAASK,mBAAT,CAA6B9V,CAA7B,EAAgC6O,UAAhC,EAA4CtM,YAA5C,EAA0D;;EAE/D,MAAIsM,eAAexR,UAAnB,EAA+B;EAC7B;EACA;EACA,WAAO;EACLxL,SAAGmO,EAAEnO,CAAF,GAAM0Q,aAAa,CAAb,CADJ;EAELzQ,SAAGkO,EAAElO,CAAF,GAAMyQ,aAAa,CAAb,CAFJ;EAGLoR,SAAG3T,EAAE2T,CAAF,GAAMpR,aAAa,CAAb;EAHJ,KAAP;EAMD,GATD,MASO,IAAIsM,eAAevR,UAAnB,EAA+B;EACpC,QAAIiY,QAAQhT,aAAa,CAAb,CAAZ;EACA,QAAIiT,QAAQjT,aAAa,CAAb,CAAZ;EACA,QAAIkT,QAAQlT,aAAa,CAAb,CAAZ;EACA,QAAImT,QAAQnT,aAAa,CAAb,CAAZ;EACA,QAAIoT,QAAQpT,aAAa,CAAb,CAAZ;EACA,QAAIqT,QAAQrT,aAAa,CAAb,CAAZ;EACA,QAAIsT,OAAOtT,aAAa,CAAb,CAAX;EACA,QAAIwT,QAAQ,CAAC/V,EAAEnO,CAAF,GAAM0jB,KAAP,IAAgBM,IAA5B;EACA,QAAIG,QAAQ,CAAChW,EAAElO,CAAF,GAAM0jB,KAAP,IAAgBK,IAA5B;EACA,QAAII,QAAQ,CAACjW,EAAE2T,CAAF,GAAM8B,KAAP,IAAgBI,IAA5B;EACA;EACA;;EAEA,WAAO;EACLhkB,SAAGkkB,QAAQH,QAAQI,KAAhB,GAAwBL,QAAQM,KAD9B;EAELnkB,SAAG,CAAC8jB,KAAD,GAASG,KAAT,GAAiBC,KAAjB,GAAyBN,QAAQO,KAF/B;EAGLtC,SAAGgC,QAAQI,KAAR,GAAgBL,QAAQM,KAAxB,GAAgCC;EAH9B,KAAP;EAKD,GA9B8D;EA+BhE;;ECxOD,SAASC,WAAT,CAAqB75B,IAArB,EAA2B;EACzB,SAAQA,SAASghB,UAAT,IAAuBhhB,SAASihB,UAAxC;EACD;;AAED,EAAe,0BAASxR,MAAT,EAAiBwnB,IAAjB,EAAuB6C,KAAvB,EAA8B;EAC3C;EACA,MAAI9C,cAAcvnB,MAAd,EAAsBwnB,IAAtB,CAAJ,EAAiC;EAC/B,WAAO6C,KAAP,CAD+B;EAE/B;EACA;EACD;;EAED;EACA,MAAIrqB,OAAO+iB,UAAP,KAAsBpR,WAAtB,IAAqC6V,KAAKzE,UAAL,KAAoBpR,WAA7D,EAA0E;EACxE,WAAO0Y,KAAP;EACD;;EAED;EACA,MAAIC,WAAWtqB,OAAOkB,CAAtB;EACA,MAAIqpB,YAAYvqB,OAAOyd,EAAvB;EACA,MAAIzd,OAAO+iB,UAAP,KAAsBtR,aAA1B,EAAyC;EACvC,QAAI+Y,gBAAgBC,eAAezqB,MAAf,EAAuB,KAAvB,EAA8BqqB,KAA9B,CAApB;EACA,QAAIG,kBAAkB,CAAtB,EAAyB;EACvB,aAAO/9B,SAAP;EACD;EACD69B,eAAW1Y,mBAAX;EACA2Y,gBAAYzY,kBAAZ;EACD;;EAED,MAAI4Y,SAASlD,KAAKtmB,CAAlB;EACA,MAAIypB,SAASnD,KAAKvR,CAAlB;EACA,MAAI2U,UAAUpD,KAAK/J,EAAnB;EACA,MAAI+J,KAAKzE,UAAL,KAAoBtR,aAAxB,EAAuC;EACrCiZ,aAAS9Y,mBAAT;EACA+Y,aAAS9Y,mBAAT;EACA+Y,cAAU9Y,kBAAV;EACD;;EAED;EACA,MAAIyY,cAAcK,OAAd,IAAyBN,aAAaI,MAAtC,IAAgD,CAACN,YAAYpqB,OAAO+iB,UAAnB,CAAjD,IAAoF,CAACqH,YAAY5C,KAAKzE,UAAjB,CAAzF,EAAuH;EACrH,WAAOsH,KAAP;EACD;;EAED;EACAA,UAAQ5C,qBAAqB4C,KAArB,EAA4BE,SAA5B,EAAuCD,QAAvC,CAAR;EACA;EACA,MAAIF,YAAYpqB,OAAO+iB,UAAnB,CAAJ,EAAoC;EAClCsH,YAAQb,kBAAkBa,KAAlB,EAAyBrqB,OAAO+iB,UAAhC,EAA4C/iB,OAAOyW,YAAnD,CAAR;EACD;EACD,MAAI2T,YAAY5C,KAAKzE,UAAjB,CAAJ,EAAkC;EAChCsH,YAAQL,oBAAoBK,KAApB,EAA2B7C,KAAKzE,UAAhC,EAA4CyE,KAAK/Q,YAAjD,CAAR;EACD;EACD4T,UAAQlC,qBAAqBkC,KAArB,EAA4BO,OAA5B,EAAqCF,MAArC,EAA6CC,MAA7C,CAAR;;EAEA,MAAInD,KAAKzE,UAAL,KAAoBtR,aAAxB,EAAuC;EACrC,QAAIoZ,sBAAsBJ,eAAejD,IAAf,EAAqB,IAArB,EAA2B6C,KAA3B,CAA1B;EACA,QAAIQ,wBAAwB,CAA5B,EAA+B;EAC7B,aAAOp+B,SAAP;EACD;EACF;;EAED,SAAO49B,KAAP;EACD;;AAED,EAAO,SAASI,cAAT,CAAwBzqB,MAAxB,EAAgCge,OAAhC,EAAyCqM,KAAzC,EAAgD;EACrD,MAAIrqB,OAAOgjB,KAAP,KAAiB,IAAjB,IAAyBhjB,OAAOgjB,KAAP,CAAa3zB,MAAb,KAAwB,CAArD,EAAwD;EACtD4N,YAAQI,GAAR,CAAY,4BAAZ;EACA,WAAO,CAAC,CAAR;EACD;EACD,MAAIhM,QAAQ,EAAC0U,GAAG,CAACskB,MAAMtkB,CAAX,EAAcC,GAAGqkB,MAAMrkB,CAAvB,EAAZ;EACA,MAAIiT,SAAS,EAAClT,GAAG3Q,OAAO01B,GAAX,EAAgB9kB,GAAG5Q,OAAO01B,GAA1B,EAAb;EACA,MAAIC,qBAAqB,KAAzB;EACA,MAAIC,iBAAiB,EAArB;EACAC,SACA,KAAK,IAAI37B,IAAI,CAAb,EAAgBA,IAAI0Q,OAAOgjB,KAAP,CAAa3zB,MAAjC,EAAyCC,GAAzC,EAA8C;EAC5C,QAAIs0B,OAAO5jB,OAAOgjB,KAAP,CAAa1zB,CAAb,CAAX;EACA07B,mBAAer9B,IAAf,CAAoBi2B,KAAKh4B,IAAzB;EACA,QAAIg4B,KAAKxvB,MAAT,EAAiB;EACf6kB,eAAS5nB,KAAT;EACA;EACD;EACD05B,yBAAqBnH,KAAKD,SAA1B;EACA,QAAIC,KAAKA,IAAL,KAAc,IAAlB,EAAwB;EACtB,UAAIA,KAAKD,SAAT,EAAoB;EAClB1mB,gBAAQI,GAAR,CAAY,oCAAoCumB,KAAKh4B,IAAzC,GAAgD,GAA5D;EACA,eAAO,CAAC,CAAR;EACD;EACD;EACD;EACD,QAAI03B,WAAWM,KAAKA,IAAL,CAAUN,QAAzB;EACA,SAAK,IAAIxqB,IAAI,CAAR,EAAWoyB,KAAK5H,SAASj0B,MAA9B,EAAsCyJ,IAAIoyB,EAA1C,EAA8CpyB,GAA9C,EAAmD;EACjD,UAAIqyB,UAAU7H,SAASxqB,CAAT,CAAd;EACA;EACA,UAAIsyB,UAAU,CAACxkB,KAAKC,GAAL,CAASskB,QAAQzF,GAAR,CAAY,CAAZ,CAAT,IAA2B9e,KAAKC,GAAL,CAASskB,QAAQzF,GAAR,CAAY,CAAZ,CAAT,CAA5B,IAAwD,OAAtE;EACA,UAAI2F,OAAOF,QAAQ1F,EAAR,CAAW,CAAX,IAAgB2F,OAA3B;EACA,UAAIE,OAAOH,QAAQ1F,EAAR,CAAW,CAAX,IAAgB2F,OAA3B;EACA,UAAIG,OAAOJ,QAAQ1F,EAAR,CAAW,CAAX,IAAgB,CAAC0F,QAAQxF,GAAR,CAAY,CAAZ,IAAiB,CAAlB,IAAuBwF,QAAQzF,GAAR,CAAY,CAAZ,CAAvC,GAAwD0F,OAAnE;EACA,UAAII,OAAOL,QAAQ1F,EAAR,CAAW,CAAX,IAAgB,CAAC0F,QAAQxF,GAAR,CAAY,CAAZ,IAAiB,CAAlB,IAAuBwF,QAAQzF,GAAR,CAAY,CAAZ,CAAvC,GAAwD0F,OAAnE;EACA,UAAIE,OAAOj6B,MAAM2U,CAAb,IAAkBqlB,OAAOh6B,MAAM0U,CAA/B,IAAoCylB,OAAOn6B,MAAM2U,CAAjD,IAAsDulB,OAAOl6B,MAAM0U,CAAvE,EAA2E;EACzE;EACD;EACDkT,eAASwS,kBAAkBp6B,KAAlB,EAAyB2sB,OAAzB,EAAkCmN,OAAlC,CAAT;EACA,UAAI,CAAC71B,MAAM2jB,OAAOlT,CAAb,CAAL,EAAsB;EACpB,cAAMklB,KAAN;EACD;EACF;EACF;EACD,MAAI31B,MAAM2jB,OAAOlT,CAAb,CAAJ,EAAqB;EACnB9I,YAAQI,GAAR,CAAY,qDACV,CAAChM,MAAM0U,CAAP,GAAWwM,GADD,GACO,GADP,GACalhB,MAAM2U,CAAN,GAAUuM,GADvB,GAC6B,WAD7B,GAC2CyY,cAD3C,GAC4D,GADxE;EAEA,WAAO,CAAC,CAAR;EACD;EACDX,QAAMtkB,CAAN,GAAU,CAACkT,OAAOlT,CAAlB;EACAskB,QAAMrkB,CAAN,GAAUiT,OAAOjT,CAAjB;EACA,SAAO,CAAP;EACD;;EAED,SAASylB,iBAAT,CAA2BC,GAA3B,EAAgC1N,OAAhC,EAAyC2N,EAAzC,EAA6C;EAC3C,MAAIC,MAAM,EAAC7lB,GAAG3Q,OAAO01B,GAAX,EAAgB9kB,GAAG5Q,OAAO01B,GAA1B,EAAV;EACA,MAAIx1B,MAAMo2B,IAAI3lB,CAAV,CAAJ,EAAkB;EAAE,WAAO6lB,GAAP;EAAa;EACjC,MAAIC,KAAK,EAAC9lB,GAAG2lB,IAAI3lB,CAAR,EAAWC,GAAG0lB,IAAI1lB,CAAlB,EAAT;EACA6lB,KAAG9lB,CAAH,IAAQ4lB,GAAGlG,EAAH,CAAM,CAAN,CAAR;EACAoG,KAAG7lB,CAAH,IAAQ2lB,GAAGlG,EAAH,CAAM,CAAN,CAAR;EACAoG,KAAG9lB,CAAH,GAAO+X,WAAW+N,GAAG9lB,CAAH,GAAOa,KAAKqL,EAAvB,IAA6BrL,KAAKqL,EAAzC;EACA,MAAIvW,IAAIowB,eAAeD,EAAf,EAAmBF,EAAnB,CAAR;EACA,MAAI3N,OAAJ,EAAa;EACX,QAAI1oB,MAAMoG,EAAEqK,CAAR,CAAJ,EAAgB;EACd,aAAO6lB,GAAP;EACD;EACDlwB,MAAEqK,CAAF,GAAM8lB,GAAG9lB,CAAH,GAAOrK,EAAEqK,CAAf;EACArK,MAAEsK,CAAF,GAAM6lB,GAAG7lB,CAAH,GAAOtK,EAAEsK,CAAf;EACA,QAAI1W,IAAI,CAAR;EAAA,QAAWy8B,MAAM,KAAjB;EACA,QAAIC,GAAJ,EAAStG,GAAT;EACA,OAAG;EACDA,YAAMoG,eAAepwB,CAAf,EAAkBiwB,EAAlB,CAAN;EACA,UAAIr2B,MAAMowB,IAAI3f,CAAV,CAAJ,EAAkB;EAChB9I,gBAAQI,GAAR,CAAY,2FAAZ;EACA;EACD;EACD2uB,YAAM,EAACjmB,GAAG8lB,GAAG9lB,CAAH,IAAQ2f,IAAI3f,CAAJ,GAAQrK,EAAEqK,CAAlB,CAAJ,EAA0BC,GAAG6lB,GAAG7lB,CAAH,IAAQ0f,IAAI1f,CAAJ,GAAQtK,EAAEsK,CAAlB,CAA7B,EAAN;EACAtK,QAAEqK,CAAF,IAAOimB,IAAIjmB,CAAX;EACArK,QAAEsK,CAAF,IAAOgmB,IAAIhmB,CAAX;EACD,KATD,QASS1W,OAAOsX,KAAKC,GAAL,CAASmlB,IAAIjmB,CAAb,IAAkBgmB,GAAzB,IAAgCnlB,KAAKC,GAAL,CAASmlB,IAAIhmB,CAAb,IAAkB+lB,GAT3D;EAUA,QAAIz8B,IAAI,CAAR,EAAW;EACT2N,cAAQI,GAAR,CAAY,iDAAZ;EACA,aAAOuuB,GAAP;EACD;EACDA,QAAI7lB,CAAJ,GAAQ+X,WAAWpiB,EAAEqK,CAAF,GAAM4lB,GAAGlG,EAAH,CAAM,CAAN,CAAjB,CAAR;EACAmG,QAAI5lB,CAAJ,GAAQtK,EAAEsK,CAAF,GAAM2lB,GAAGlG,EAAH,CAAM,CAAN,CAAd;EACD,GAxBD,MAwBO;EACL,QAAI,CAACnwB,MAAMoG,EAAEqK,CAAR,CAAL,EAAiB;EACf6lB,UAAI7lB,CAAJ,GAAQ2lB,IAAI3lB,CAAJ,GAAQrK,EAAEqK,CAAlB;EACA6lB,UAAI5lB,CAAJ,GAAQ0lB,IAAI1lB,CAAJ,GAAQtK,EAAEsK,CAAlB;EACD;EACF;EACD,SAAO4lB,GAAP;EACD;;EAED,SAASE,cAAT,CAAwBJ,GAAxB,EAA6BC,EAA7B,EAAiC;EAC/B,MAAIjwB,IAAI,EAACqK,GAAG2lB,IAAI3lB,CAAJ,GAAQ4lB,GAAGjG,GAAH,CAAO,CAAP,CAAZ,EAAuB1f,GAAG0lB,IAAI1lB,CAAJ,GAAQ2lB,GAAGjG,GAAH,CAAO,CAAP,CAAlC,EAAR;EACA,MAAIuG,OAAO,EAAClmB,GAAGa,KAAKslB,KAAL,CAAWxwB,EAAEqK,CAAb,CAAJ,EAAqBC,GAAGY,KAAKslB,KAAL,CAAWxwB,EAAEsK,CAAb,CAAxB,EAAX;EACA,MAAImmB,OAAO,EAACpmB,GAAGrK,EAAEqK,CAAF,GAAM,MAAMkmB,KAAKlmB,CAArB,EAAwBC,GAAGtK,EAAEsK,CAAF,GAAM,MAAMimB,KAAKjmB,CAA5C,EAAX;EACA,MAAI4lB,MAAK,EAAC7lB,GAAG3Q,OAAO01B,GAAX,EAAgB9kB,GAAG5Q,OAAO01B,GAA1B,EAAT;EACA,MAAIsB,GAAJ;EACA,MAAIH,KAAKlmB,CAAL,GAAS,CAAT,IAAckmB,KAAKlmB,CAAL,IAAU4lB,GAAGhG,GAAH,CAAO,CAAP,CAA5B,EAAuC;EACrC,WAAOiG,GAAP;EACD;EACD,MAAIK,KAAKjmB,CAAL,GAAS,CAAT,IAAcimB,KAAKjmB,CAAL,IAAU2lB,GAAGhG,GAAH,CAAO,CAAP,CAA5B,EAAuC;EACrC,WAAOiG,GAAP;EACD;EACDQ,QAAOH,KAAKjmB,CAAL,GAAS2lB,GAAGhG,GAAH,CAAO,CAAP,CAAV,GAAuBsG,KAAKlmB,CAAlC;EACA,MAAIsmB,MAAM,EAACtmB,GAAG4lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAJ,EAAoBpmB,GAAG2lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAvB,EAAV;EACAA;EACA,MAAIE,MAAK,EAACvmB,GAAG4lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAJ,EAAoBpmB,GAAG2lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAvB,EAAT;EACAA,SAAOT,GAAGhG,GAAH,CAAO,CAAP,CAAP;EACA,MAAI4G,MAAM,EAACxmB,GAAG4lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAJ,EAAoBpmB,GAAG2lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAvB,EAAV;EACAA;EACA,MAAII,MAAM,EAACzmB,GAAG4lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAJ,EAAoBpmB,GAAG2lB,GAAG7F,GAAH,CAAOsG,GAAP,EAAY,CAAZ,CAAvB,EAAV;EACA,MAAIK,MAAMN,KAAKpmB,CAAL,GAASomB,KAAKnmB,CAAxB;EAAA,MAA2B0mB,MAAMP,KAAKpmB,CAAL,IAAU,MAAMomB,KAAKnmB,CAArB,CAAjC;EAAA,MACE2mB,MAAM,CAAC,MAAMR,KAAKpmB,CAAZ,KAAkB,MAAMomB,KAAKnmB,CAA7B,CADR;EAAA,MACyC4mB,MAAM,CAAC,MAAMT,KAAKpmB,CAAZ,IAAiBomB,KAAKnmB,CADrE;EAEA4lB,MAAI7lB,CAAJ,GAAS4mB,MAAMN,IAAItmB,CAAV,GAAc2mB,MAAMJ,IAAIvmB,CAAxB,GAA4B6mB,MAAMJ,IAAIzmB,CAAtC,GAA0C0mB,MAAMF,IAAIxmB,CAA7D;EACA6lB,MAAI5lB,CAAJ,GAAS2mB,MAAMN,IAAIrmB,CAAV,GAAc0mB,MAAMJ,IAAItmB,CAAxB,GAA4B4mB,MAAMJ,IAAIxmB,CAAtC,GAA0CymB,MAAMF,IAAIvmB,CAA7D;EACA,SAAO4lB,GAAP;EACD;;ECnMc,sBAASpwB,GAAT,EAAcqxB,MAAd,EAAsBxC,KAAtB,EAA6B;EAC1C,MAAIyC,MAAMzC,MAAMtkB,CAAhB;EAAA,MACEgnB,MAAM1C,MAAMrkB,CADd;EAAA,MAEEgnB,MAAM3C,MAAMxC,CAAN,IAAW,GAFnB;EAGA,MAAI5zB,CAAJ,EAAOyH,CAAP,EAAUpM,CAAV;EACA,MAAIiqB,MAAM,EAAV;EACA,OAAKjqB,IAAI,CAAT,EAAYA,IAAI,CAAhB,EAAmBA,GAAnB,EAAwB;EACtB,QAAIu9B,UAAUv9B,MAAM,CAAhB,IAAqB+6B,MAAMxC,CAAN,KAAYp7B,SAArC,EAAgD;EAC9C;EACD;EACD,QAAI6C,MAAM,CAAV,EAAa;EACX2E,UAAI64B,GAAJ;EACA,UAAI,KAAKvhC,OAAL,CAAaiQ,IAAIyb,IAAJ,CAAS3nB,CAAT,CAAb,MAA8B,CAAC,CAAnC,EAAsC;EACpCoM,YAAI,GAAJ;EACD,OAFD,MAEO;EACLA,YAAI,GAAJ;EACD;EAEF,KARD,MASK,IAAIpM,MAAM,CAAV,EAAa;EAChB2E,UAAI84B,GAAJ;EACA,UAAI,KAAKxhC,OAAL,CAAaiQ,IAAIyb,IAAJ,CAAS3nB,CAAT,CAAb,MAA8B,CAAC,CAAnC,EAAsC;EACpCoM,YAAI,GAAJ;EACD,OAFD,MAEO;EACLA,YAAI,GAAJ;EACD;EACF,KAPI,MAQA;EACHzH,UAAI+4B,GAAJ;EACAtxB,UAAI,GAAJ;EACD;EACD,YAAQF,IAAIyb,IAAJ,CAAS3nB,CAAT,CAAR;EACA,WAAK,GAAL;EACEiqB,YAAI7d,CAAJ,IAASzH,CAAT;EACA;EACF,WAAK,GAAL;EACEslB,YAAI7d,CAAJ,IAAS,CAACzH,CAAV;EACA;EACF,WAAK,GAAL;EACEslB,YAAI7d,CAAJ,IAASzH,CAAT;EACA;EACF,WAAK,GAAL;EACEslB,YAAI7d,CAAJ,IAAS,CAACzH,CAAV;EACA;EACF,WAAK,GAAL;EACE,YAAIo2B,MAAM3uB,CAAN,MAAajP,SAAjB,EAA4B;EAC1B8sB,cAAIsO,CAAJ,GAAQ5zB,CAAR;EACD;EACD;EACF,WAAK,GAAL;EACE,YAAIo2B,MAAM3uB,CAAN,MAAajP,SAAjB,EAA4B;EAC1B8sB,cAAIsO,CAAJ,GAAQ,CAAC5zB,CAAT;EACD;EACD;EACF;EACE;EACA,eAAO,IAAP;EAzBF;EA2BD;EACD,SAAOslB,GAAP;EACD;;EC5Dc,kBAAU0T,KAAV,EAAgB;EAC7B,MAAI1T,MAAM;EACRxT,OAAGknB,MAAM,CAAN,CADK;EAERjnB,OAAGinB,MAAM,CAAN;EAFK,GAAV;EAIA,MAAIA,MAAM59B,MAAN,GAAa,CAAjB,EAAoB;EAClBkqB,QAAIsO,CAAJ,GAAQoF,MAAM,CAAN,CAAR;EACD;EACD,MAAIA,MAAM59B,MAAN,GAAa,CAAjB,EAAoB;EAClBkqB,QAAI2T,CAAJ,GAAQD,MAAM,CAAN,CAAR;EACD;EACD,SAAO1T,GAAP;EACD;;ECZc,sBAAU8Q,KAAV,EAAiB;EAC9B8C,aAAW9C,MAAMtkB,CAAjB;EACAonB,aAAW9C,MAAMrkB,CAAjB;EACD;EACD,SAASmnB,UAAT,CAAoBC,GAApB,EAAyB;EACvB,MAAI,OAAOh4B,OAAOC,QAAd,KAA2B,UAA/B,EAA2C;EACzC,QAAID,OAAOC,QAAP,CAAgB+3B,GAAhB,CAAJ,EAA0B;EACxB;EACD;EACD,UAAM,IAAIrhC,SAAJ,CAAc,oCAAd,CAAN;EACD;EACD,MAAI,OAAOqhC,GAAP,KAAe,QAAf,IAA2BA,QAAQA,GAAnC,IAA0C,CAAC/3B,SAAS+3B,GAAT,CAA/C,EAA8D;EAC5D,UAAM,IAAIrhC,SAAJ,CAAc,oCAAd,CAAN;EACD;EACF;;ECPD,SAASshC,WAAT,CAAqBrtB,MAArB,EAA6BwnB,IAA7B,EAAmC;EACjC,SACE,CAACxnB,OAAOsU,KAAP,CAAayO,UAAb,KAA4BxR,UAA5B,IAA0CvR,OAAOsU,KAAP,CAAayO,UAAb,KAA4BvR,UAAtE,IAAoFxR,OAAOsU,KAAP,CAAayO,UAAb,KAA4BtR,aAAjH,KAAmI+V,KAAKxQ,SAAL,KAAmB,OADjJ,IAEJ,CAACwQ,KAAKlT,KAAL,CAAWyO,UAAX,KAA0BxR,UAA1B,IAAwCiW,KAAKlT,KAAL,CAAWyO,UAAX,KAA0BvR,UAAlE,IAAgFgW,KAAKlT,KAAL,CAAWyO,UAAX,KAA0BtR,aAA3G,KAA6HzR,OAAOgX,SAAP,KAAqB,OAFrJ;EAGD;;AAED,EAAe,SAASsW,SAAT,CAAmBttB,MAAnB,EAA2BwnB,IAA3B,EAAiC6C,KAAjC,EAAwCkD,WAAxC,EAAqD;EAClE,MAAI3L,KAAJ;EACA,MAAI70B,MAAMC,OAAN,CAAcq9B,KAAd,CAAJ,EAA0B;EACxBA,YAAQmD,QAAQnD,KAAR,CAAR;EACD,GAFD,MAEO;EACL;EACAA,YAAQ;EACNtkB,SAAGskB,MAAMtkB,CADH;EAENC,SAAGqkB,MAAMrkB,CAFH;EAGN6hB,SAAGwC,MAAMxC,CAHH;EAINqF,SAAG7C,MAAM6C;EAJH,KAAR;EAMD;EACD,MAAIO,OAAOpD,MAAMxC,CAAN,KAAYp7B,SAAvB;EACAihC,cAAYrD,KAAZ;EACA;EACA,MAAIrqB,OAAOsU,KAAP,IAAgBkT,KAAKlT,KAArB,IAA8B+Y,YAAYrtB,MAAZ,EAAoBwnB,IAApB,CAAlC,EAA6D;EAC3D5F,YAAQ,IAAIzgB,UAAJ,CAAS,OAAT,CAAR;EACAkpB,YAAQiD,UAAUttB,MAAV,EAAkB4hB,KAAlB,EAAyByI,KAAzB,EAAgCkD,WAAhC,CAAR;EACAvtB,aAAS4hB,KAAT;EACD;EACD;EACA,MAAI2L,eAAevtB,OAAOiX,IAAP,KAAgB,KAAnC,EAA0C;EACxCoT,YAAQsD,YAAY3tB,MAAZ,EAAoB,KAApB,EAA2BqqB,KAA3B,CAAR;EACD;EACD;EACA,MAAIrqB,OAAOka,QAAP,KAAoB,SAAxB,EAAmC;EACjCmQ,YAAQ;EACNtkB,SAAGskB,MAAMtkB,CAAN,GAAUuM,GADP;EAENtM,SAAGqkB,MAAMrkB,CAAN,GAAUsM,GAFP;EAGNuV,SAAGwC,MAAMxC,CAAN,IAAW;EAHR,KAAR;EAKD,GAND,MAMO;EACL,QAAI7nB,OAAOyT,QAAX,EAAqB;EACnB4W,cAAQ;EACNtkB,WAAGskB,MAAMtkB,CAAN,GAAU/F,OAAOyT,QADd;EAENzN,WAAGqkB,MAAMrkB,CAAN,GAAUhG,OAAOyT,QAFd;EAGNoU,WAAGwC,MAAMxC,CAAN,IAAW;EAHR,OAAR;EAKD;EACDwC,YAAQrqB,OAAOge,OAAP,CAAeqM,KAAf,CAAR,CARK;EASL,QAAI,CAACA,KAAL,EAAY;EACV;EACD;EACF;EACD;EACA,MAAIrqB,OAAO4W,cAAX,EAA2B;EACzByT,UAAMtkB,CAAN,IAAW/F,OAAO4W,cAAlB;EACD;;EAED;EACAyT,UAAQuD,gBAAgB5tB,OAAOsU,KAAvB,EAA8BkT,KAAKlT,KAAnC,EAA0C+V,KAA1C,CAAR;EACA,MAAI,CAACA,KAAL,EAAY;EACV;EACD;;EAED;EACA,MAAI7C,KAAK5Q,cAAT,EAAyB;EACvByT,YAAQ;EACNtkB,SAAGskB,MAAMtkB,CAAN,GAAUyhB,KAAK5Q,cADZ;EAEN5Q,SAAGqkB,MAAMrkB,CAFH;EAGN6hB,SAAGwC,MAAMxC,CAAN,IAAW;EAHR,KAAR;EAKD;;EAED,MAAIL,KAAKtN,QAAL,KAAkB,SAAtB,EAAiC;EAC/B;EACAmQ,YAAQ;EACNtkB,SAAGskB,MAAMtkB,CAAN,GAAUwM,GADP;EAENvM,SAAGqkB,MAAMrkB,CAAN,GAAUuM,GAFP;EAGNsV,SAAGwC,MAAMxC,CAAN,IAAW;EAHR,KAAR;EAKD,GAPD,MAOO;EAAE;EACPwC,YAAQ7C,KAAK5J,OAAL,CAAayM,KAAb,CAAR;EACA,QAAI7C,KAAK/T,QAAT,EAAmB;EACjB4W,cAAQ;EACNtkB,WAAGskB,MAAMtkB,CAAN,GAAUyhB,KAAK/T,QADZ;EAENzN,WAAGqkB,MAAMrkB,CAAN,GAAUwhB,KAAK/T,QAFZ;EAGNoU,WAAGwC,MAAMxC,CAAN,IAAW;EAHR,OAAR;EAKD;EACF;;EAED;EACA,MAAI0F,eAAe/F,KAAKvQ,IAAL,KAAc,KAAjC,EAAwC;EACtC,WAAO0W,YAAYnG,IAAZ,EAAkB,IAAlB,EAAwB6C,KAAxB,CAAP;EACD;;EAED,MAAIA,SAAS,CAACoD,IAAd,EAAoB;EAClB,WAAOpD,MAAMxC,CAAb;EACD;EACD,SAAOwC,KAAP;EACD;;ECvGD,IAAIzI,QAAQzgB,WAAK,OAAL,CAAZ;;EAEA,SAAS0sB,WAAT,CAAqBC,IAArB,EAA2BC,EAA3B,EAA+BprB,MAA/B,EAAuC4qB,WAAvC,EAAoD;EAClD,MAAIS,gBAAJ,EAAsBzU,GAAtB,EAA2B7rB,IAA3B;EACA,MAAIX,MAAMC,OAAN,CAAc2V,MAAd,CAAJ,EAA2B;EACzBqrB,uBAAmBV,UAAUQ,IAAV,EAAgBC,EAAhB,EAAoBprB,MAApB,EAA4B4qB,WAA5B,KAA4C,EAACxnB,GAAG+kB,GAAJ,EAAS9kB,GAAG8kB,GAAZ,EAA/D;EACA,QAAInoB,OAAOtT,MAAP,GAAgB,CAApB,EAAuB;EACrB,UAAK,OAAOy+B,KAAKliC,IAAZ,KAAqB,WAArB,IAAoCkiC,KAAKliC,IAAL,KAAc,SAAnD,IAAkE,OAAOmiC,GAAGniC,IAAV,KAAmB,WAAnB,IAAkCmiC,GAAGniC,IAAH,KAAY,SAApH,EAAgI;EAC9H,YAAI,OAAOoiC,iBAAiBnG,CAAxB,KAA8B,QAAlC,EAA4C;EAC1C,iBAAO,CAACmG,iBAAiBjoB,CAAlB,EAAqBioB,iBAAiBhoB,CAAtC,EAAyCgoB,iBAAiBnG,CAA1D,EAA6DnuB,MAA7D,CAAoEiJ,OAAOgK,MAAP,CAAc,CAAd,CAApE,CAAP;EACD,SAFD,MAEO;EACL,iBAAO,CAACqhB,iBAAiBjoB,CAAlB,EAAqBioB,iBAAiBhoB,CAAtC,EAAyCrD,OAAO,CAAP,CAAzC,EAAoDjJ,MAApD,CAA2DiJ,OAAOgK,MAAP,CAAc,CAAd,CAA3D,CAAP;EACD;EACF,OAND,MAMO;EACL,eAAO,CAACqhB,iBAAiBjoB,CAAlB,EAAqBioB,iBAAiBhoB,CAAtC,EAAyCtM,MAAzC,CAAgDiJ,OAAOgK,MAAP,CAAc,CAAd,CAAhD,CAAP;EACD;EACF,KAVD,MAUO;EACL,aAAO,CAACqhB,iBAAiBjoB,CAAlB,EAAqBioB,iBAAiBhoB,CAAtC,CAAP;EACD;EACF,GAfD,MAeO;EACLuT,UAAM+T,UAAUQ,IAAV,EAAgBC,EAAhB,EAAoBprB,MAApB,EAA4B4qB,WAA5B,CAAN;EACA7/B,WAAOlC,OAAOkC,IAAP,CAAYiV,MAAZ,CAAP;EACA,QAAIjV,KAAK2B,MAAL,KAAgB,CAApB,EAAuB;EACrB,aAAOkqB,GAAP;EACD;EACD7rB,SAAKb,OAAL,CAAa,UAAU0F,GAAV,EAAe;EAC1B,UAAK,OAAOu7B,KAAKliC,IAAZ,KAAqB,WAArB,IAAoCkiC,KAAKliC,IAAL,KAAc,SAAnD,IAAkE,OAAOmiC,GAAGniC,IAAV,KAAmB,WAAnB,IAAkCmiC,GAAGniC,IAAH,KAAY,SAApH,EAAgI;EAC9H,YAAI2G,QAAQ,GAAR,IAAeA,QAAQ,GAAvB,IAA8BA,QAAQ,GAA1C,EAA+C;EAC7C;EACD;EACF,OAJD,MAIO;EACL,YAAIA,QAAQ,GAAR,IAAeA,QAAQ,GAA3B,EAAgC;EAC9B;EACD;EACF;EACDgnB,UAAIhnB,GAAJ,IAAWoQ,OAAOpQ,GAAP,CAAX;EACD,KAXD;EAYA,WAAOgnB,GAAP;EACD;EACF;;EAED,SAAS0U,SAAT,CAAmBxU,IAAnB,EAAyB;EACvB,MAAIA,gBAAgBtY,UAApB,EAA0B;EACxB,WAAOsY,IAAP;EACD;EACD,MAAIA,KAAKyU,KAAT,EAAgB;EACd,WAAOzU,KAAKyU,KAAZ;EACD;EACD,SAAO/sB,WAAKsY,IAAL,CAAP;EACD;;EAED,SAAS0U,KAAT,CAAeC,QAAf,EAAyBC,MAAzB,EAAiCC,KAAjC,EAAwC;EACtCF,aAAWH,UAAUG,QAAV,CAAX;EACA,MAAIG,SAAS,KAAb;EACA,MAAIvjC,GAAJ;EACA,MAAI,OAAOqjC,MAAP,KAAkB,WAAtB,EAAmC;EACjCA,aAASD,QAAT;EACAA,eAAWxM,KAAX;EACA2M,aAAS,IAAT;EACD,GAJD,MAIO,IAAI,OAAOF,OAAOtoB,CAAd,KAAoB,WAApB,IAAmChZ,MAAMC,OAAN,CAAcqhC,MAAd,CAAvC,EAA8D;EACnEC,YAAQD,MAAR;EACAA,aAASD,QAAT;EACAA,eAAWxM,KAAX;EACA2M,aAAS,IAAT;EACD;EACDF,WAASJ,UAAUI,MAAV,CAAT;EACA,MAAIC,KAAJ,EAAW;EACT,WAAOT,YAAYO,QAAZ,EAAsBC,MAAtB,EAA8BC,KAA9B,CAAP;EACD,GAFD,MAEO;EACLtjC,UAAM;EACJ4yB,eAAS,iBAAUjb,MAAV,EAAkB4qB,WAAlB,EAA+B;EACtC,eAAOM,YAAYO,QAAZ,EAAsBC,MAAtB,EAA8B1rB,MAA9B,EAAsC4qB,WAAtC,CAAP;EACD,OAHG;EAIJvP,eAAS,iBAAUrb,MAAV,EAAkB4qB,WAAlB,EAA+B;EACtC,eAAOM,YAAYQ,MAAZ,EAAoBD,QAApB,EAA8BzrB,MAA9B,EAAsC4qB,WAAtC,CAAP;EACD;EANG,KAAN;EAQA,QAAIgB,MAAJ,EAAY;EACVvjC,UAAIkjC,KAAJ,GAAYG,MAAZ;EACD;EACD,WAAOrjC,GAAP;EACD;EACF;;ECjFD;;;;;;EAMA,IAAIwjC,gBAAgB,CAApB;;EAEA;;;;;;EAMA,IAAIC,4BAA4B,QAAhC;;EAEA;;;;;;EAMA,IAAIC,yBAAyB,QAA7B;;EAEA,IAAIC,IAAI,EAAR;EACA,IAAIC,IAAI,EAAR;EACA,IAAIC,IAAI,EAAR;EACA,IAAIC,IAAI,EAAR;EACA,IAAIxF,IAAI,EAAR;AACA,aAAe;EACb1L,WAASA,SADI;EAEbI,WAASA,SAFI;EAGbwP,WAASA;EAHI,CAAf;EAKA;;;;;;;;;AASA,EAAO,SAAS5P,SAAT,CAAiB6H,EAAjB,EAAqBsJ,QAArB,EAA+B;EACpCA,aAAWA,YAAY,CAAvB,CADoC;EAEpC,SAAOC,OAAOC,QAAQ;EACpBzvB,SAAKimB,GAAG,CAAH,CADe;EAEpB5H,SAAK4H,GAAG,CAAH;EAFe,GAAR,CAAP,EAGHsJ,QAHG,CAAP;EAID;EAED;;;;;;;;AAQA,EAAO,SAAS/Q,SAAT,CAAiBkR,IAAjB,EAAuB;EAC5B,MAAIC,OAAOC,QAAQz+B,OAAOu+B,KAAK/9B,WAAL,EAAP,CAAR,CAAX;EACA,MAAIg+B,KAAK3vB,GAAL,IAAY2vB,KAAKtR,GAArB,EAA0B;EACxB,WAAO,CAACsR,KAAKtR,GAAN,EAAWsR,KAAK3vB,GAAhB,EAAqB2vB,KAAKtR,GAA1B,EAA+BsR,KAAK3vB,GAApC,CAAP;EACD;EACD,SAAO,CAAC2vB,KAAKE,IAAN,EAAYF,KAAKG,MAAjB,EAAyBH,KAAKI,KAA9B,EAAqCJ,KAAKK,GAA1C,CAAP;EACD;AAED,EAAO,SAAShC,SAAT,CAAiB0B,IAAjB,EAAuB;EAC5B,MAAIC,OAAOC,QAAQz+B,OAAOu+B,KAAK/9B,WAAL,EAAP,CAAR,CAAX;EACA,MAAIg+B,KAAK3vB,GAAL,IAAY2vB,KAAKtR,GAArB,EAA0B;EACxB,WAAO,CAACsR,KAAKtR,GAAN,EAAWsR,KAAK3vB,GAAhB,CAAP;EACD;EACD,SAAO,CAAC,CAAC2vB,KAAKE,IAAL,GAAYF,KAAKI,KAAlB,IAA2B,CAA5B,EAA+B,CAACJ,KAAKK,GAAL,GAAWL,KAAKG,MAAjB,IAA2B,CAA1D,CAAP;EACD,CACD;;;;;;;EAOA,SAASG,QAAT,CAAkBC,GAAlB,EAAuB;EACrB,SAAQA,OAAO9oB,KAAKqL,EAAL,GAAU,KAAjB,CAAR;EACD;;EAED;;;;;;;EAOA,SAAS0d,QAAT,CAAkBC,GAAlB,EAAuB;EACrB,SAAQ,SAASA,MAAMhpB,KAAKqL,EAApB,CAAR;EACD;;EAED;;;;;;;;;;;EAWA,SAASgd,OAAT,CAAiBxJ,EAAjB,EAAqB;EACnB,MAAIoK,MAAMpK,GAAGjmB,GAAb;EACA,MAAIswB,OAAOrK,GAAG5H,GAAd;EACA,MAAI3c,IAAI,SAAR,CAHmB;EAInB,MAAI6uB,aAAa,UAAjB,CAJmB;EAKnB,MAAIha,KAAK,MAAT;EACA,MAAIia,UAAJ;EACA,MAAIC,eAAJ;EACA,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,CAAV,EAAazB,CAAb,EAAgB0B,CAAhB;EACA,MAAIC,SAASb,SAASI,GAAT,CAAb;EACA,MAAIU,UAAUd,SAASK,IAAT,CAAd;EACA,MAAIU,aAAJ;EACA,MAAIC,UAAJ;EACA;EACAA,eAAa7pB,KAAKslB,KAAL,CAAW,CAAC4D,OAAO,GAAR,IAAe,CAA1B,IAA+B,CAA5C;;EAEA;EACA,MAAIA,SAAS,GAAb,EAAkB;EAChBW,iBAAa,EAAb;EACD;;EAED;EACA,MAAIZ,OAAO,IAAP,IAAeA,MAAM,IAArB,IAA6BC,QAAQ,GAArC,IAA4CA,OAAO,IAAvD,EAA6D;EAC3DW,iBAAa,EAAb;EACD;;EAED;EACA,MAAIZ,OAAO,IAAP,IAAeA,MAAM,IAAzB,EAA+B;EAC7B,QAAIC,QAAQ,GAAR,IAAeA,OAAO,GAA1B,EAA+B;EAC7BW,mBAAa,EAAb;EACD,KAFD,MAGK,IAAIX,QAAQ,GAAR,IAAeA,OAAO,IAA1B,EAAgC;EACnCW,mBAAa,EAAb;EACD,KAFI,MAGA,IAAIX,QAAQ,IAAR,IAAgBA,OAAO,IAA3B,EAAiC;EACpCW,mBAAa,EAAb;EACD,KAFI,MAGA,IAAIX,QAAQ,IAAR,IAAgBA,OAAO,IAA3B,EAAiC;EACpCW,mBAAa,EAAb;EACD;EACF;;EAEDT,eAAa,CAACS,aAAa,CAAd,IAAmB,CAAnB,GAAuB,GAAvB,GAA6B,CAA1C,CA1CmB;EA2CnB;EACA;EACAD,kBAAgBf,SAASO,UAAT,CAAhB;;EAEAC,oBAAmBF,UAAD,IAAgB,IAAIA,UAApB,CAAlB;;EAEAG,MAAIhvB,IAAI0F,KAAKoW,IAAL,CAAU,IAAI+S,aAAanpB,KAAKE,GAAL,CAASwpB,MAAT,CAAb,GAAgC1pB,KAAKE,GAAL,CAASwpB,MAAT,CAA9C,CAAR;EACAH,MAAIvpB,KAAKwW,GAAL,CAASkT,MAAT,IAAmB1pB,KAAKwW,GAAL,CAASkT,MAAT,CAAvB;EACAF,MAAIH,kBAAkBrpB,KAAK8W,GAAL,CAAS4S,MAAT,CAAlB,GAAqC1pB,KAAK8W,GAAL,CAAS4S,MAAT,CAAzC;EACA3B,MAAI/nB,KAAK8W,GAAL,CAAS4S,MAAT,KAAoBC,UAAUC,aAA9B,CAAJ;;EAEAH,MAAInvB,KAAK,CAAC,IAAI6uB,aAAa,CAAjB,GAAqB,IAAIA,UAAJ,GAAiBA,UAAjB,GAA8B,EAAnD,GAAwD,IAAIA,UAAJ,GAAiBA,UAAjB,GAA8BA,UAA9B,GAA2C,GAApG,IAA2GO,MAA3G,GAAoH,CAAC,IAAIP,UAAJ,GAAiB,CAAjB,GAAqB,IAAIA,UAAJ,GAAiBA,UAAjB,GAA8B,EAAnD,GAAwD,KAAKA,UAAL,GAAkBA,UAAlB,GAA+BA,UAA/B,GAA4C,IAArG,IAA6GnpB,KAAKE,GAAL,CAAS,IAAIwpB,MAAb,CAAjO,GAAwP,CAAC,KAAKP,UAAL,GAAkBA,UAAlB,GAA+B,GAA/B,GAAqC,KAAKA,UAAL,GAAkBA,UAAlB,GAA+BA,UAA/B,GAA4C,IAAlF,IAA0FnpB,KAAKE,GAAL,CAAS,IAAIwpB,MAAb,CAAlV,GAA0W,KAAKP,UAAL,GAAkBA,UAAlB,GAA+BA,UAA/B,GAA4C,IAA7C,GAAqDnpB,KAAKE,GAAL,CAAS,IAAIwpB,MAAb,CAAna,CAAJ;;EAEA,MAAII,aAAc3a,KAAKma,CAAL,IAAUvB,IAAI,CAAC,IAAIwB,CAAJ,GAAQC,CAAT,IAAczB,CAAd,GAAkBA,CAAlB,GAAsBA,CAAtB,GAA0B,GAA9B,GAAoC,CAAC,IAAI,KAAKwB,CAAT,GAAaA,IAAIA,CAAjB,GAAqB,KAAKC,CAA1B,GAA8B,KAAKH,eAApC,IAAuDtB,CAAvD,GAA2DA,CAA3D,GAA+DA,CAA/D,GAAmEA,CAAnE,GAAuEA,CAAvE,GAA2E,KAAzH,IAAkI,QAApJ;;EAEA,MAAIgC,cAAe5a,MAAMsa,IAAIH,IAAItpB,KAAKwW,GAAL,CAASkT,MAAT,CAAJ,IAAwB3B,IAAIA,CAAJ,GAAQ,CAAR,GAAY,CAAC,IAAIwB,CAAJ,GAAQ,IAAIC,CAAZ,GAAgB,IAAIA,CAAJ,GAAQA,CAAzB,IAA8BzB,CAA9B,GAAkCA,CAAlC,GAAsCA,CAAtC,GAA0CA,CAA1C,GAA8C,IAA1D,GAAiE,CAAC,KAAK,KAAKwB,CAAV,GAAcA,IAAIA,CAAlB,GAAsB,MAAMC,CAA5B,GAAgC,MAAMH,eAAvC,IAA0DtB,CAA1D,GAA8DA,CAA9D,GAAkEA,CAAlE,GAAsEA,CAAtE,GAA0EA,CAA1E,GAA8EA,CAA9E,GAAkF,KAA3K,CAAV,CAAnB;EACA,MAAIkB,MAAM,GAAV,EAAe;EACbc,mBAAe,UAAf,CADa;EAEb;EACD;;EAED,SAAO;EACLC,cAAUhqB,KAAKqe,KAAL,CAAW0L,WAAX,CADL;EAELE,aAASjqB,KAAKqe,KAAL,CAAWyL,UAAX,CAFJ;EAGLI,gBAAYL,UAHP;EAILM,gBAAYC,oBAAoBnB,GAApB;EAJP,GAAP;EAMD;;EAED;;;;;;;;;;;;;;;EAeA,SAAST,OAAT,CAAiB6B,GAAjB,EAAsB;;EAEpB,MAAIN,cAAcM,IAAIL,QAAtB;EACA,MAAIF,aAAaO,IAAIJ,OAArB;EACA,MAAIE,aAAaE,IAAIF,UAArB;EACA,MAAID,aAAaG,IAAIH,UAArB;EACA;EACA,MAAIA,aAAa,CAAb,IAAkBA,aAAa,EAAnC,EAAuC;EACrC,WAAO,IAAP;EACD;;EAED,MAAI/a,KAAK,MAAT;EACA,MAAI7U,IAAI,SAAR,CAZoB;EAapB,MAAI6uB,aAAa,UAAjB,CAboB;EAcpB,MAAIE,eAAJ;EACA,MAAIiB,KAAK,CAAC,IAAItqB,KAAKoW,IAAL,CAAU,IAAI+S,UAAd,CAAL,KAAmC,IAAInpB,KAAKoW,IAAL,CAAU,IAAI+S,UAAd,CAAvC,CAAT;EACA,MAAIoB,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,CAApB,EAAuBlB,CAAvB;EACA,MAAIL,UAAJ;EACA,MAAIwB,EAAJ,EAAQC,OAAR;;EAEA;EACA,MAAI1rB,IAAI2qB,aAAa,QAArB;EACA,MAAI1qB,IAAI2qB,WAAR;;EAEA;EACA;EACA;EACA;EACA,MAAII,aAAa,GAAjB,EAAsB;EACpB/qB,SAAK,UAAL,CADoB;EAEpB;EACD;;EAED;EACAgqB,eAAa,CAACc,aAAa,CAAd,IAAmB,CAAnB,GAAuB,GAAvB,GAA6B,CAA1C,CAlCoB;EAmCpB;EACA;;EAEAb,oBAAmBF,UAAD,IAAgB,IAAIA,UAApB,CAAlB;;EAEAM,MAAIrqB,IAAI+P,EAAR;EACAyb,OAAKnB,KAAKnvB,KAAK,IAAI6uB,aAAa,CAAjB,GAAqB,IAAIA,UAAJ,GAAiBA,UAAjB,GAA8B,EAAnD,GAAwD,IAAIA,UAAJ,GAAiBA,UAAjB,GAA8BA,UAA9B,GAA2C,GAAxG,CAAL,CAAL;;EAEA0B,YAAUD,KAAK,CAAC,IAAIN,EAAJ,GAAS,CAAT,GAAa,KAAKA,EAAL,GAAUA,EAAV,GAAeA,EAAf,GAAoB,EAAlC,IAAwCtqB,KAAKE,GAAL,CAAS,IAAI0qB,EAAb,CAA7C,GAAgE,CAAC,KAAKN,EAAL,GAAUA,EAAV,GAAe,EAAf,GAAoB,KAAKA,EAAL,GAAUA,EAAV,GAAeA,EAAf,GAAoBA,EAApB,GAAyB,EAA9C,IAAoDtqB,KAAKE,GAAL,CAAS,IAAI0qB,EAAb,CAApH,GAAwI,MAAMN,EAAN,GAAWA,EAAX,GAAgBA,EAAhB,GAAqB,EAAtB,GAA4BtqB,KAAKE,GAAL,CAAS,IAAI0qB,EAAb,CAA7K;EACA;;EAEAL,OAAKjwB,IAAI0F,KAAKoW,IAAL,CAAU,IAAI+S,aAAanpB,KAAKE,GAAL,CAAS2qB,OAAT,CAAb,GAAiC7qB,KAAKE,GAAL,CAAS2qB,OAAT,CAA/C,CAAT;EACAL,OAAKxqB,KAAKwW,GAAL,CAASqU,OAAT,IAAoB7qB,KAAKwW,GAAL,CAASqU,OAAT,CAAzB;EACAJ,OAAKpB,kBAAkBrpB,KAAK8W,GAAL,CAAS+T,OAAT,CAAlB,GAAsC7qB,KAAK8W,GAAL,CAAS+T,OAAT,CAA3C;EACAH,OAAKpwB,KAAK,IAAI6uB,UAAT,IAAuBnpB,KAAKK,GAAL,CAAS,IAAI8oB,aAAanpB,KAAKE,GAAL,CAAS2qB,OAAT,CAAb,GAAiC7qB,KAAKE,GAAL,CAAS2qB,OAAT,CAA9C,EAAiE,GAAjE,CAA5B;EACAF,MAAIxrB,KAAKorB,KAAKpb,EAAV,CAAJ;;EAEA,MAAIvW,MAAMiyB,UAAWN,KAAKvqB,KAAKwW,GAAL,CAASqU,OAAT,CAAL,GAAyBH,EAA1B,IAAiCC,IAAIA,CAAJ,GAAQ,CAAR,GAAY,CAAC,IAAI,IAAIH,EAAR,GAAa,KAAKC,EAAlB,GAAuB,IAAIA,EAAJ,GAASA,EAAhC,GAAqC,IAAIpB,eAA1C,IAA6DsB,CAA7D,GAAiEA,CAAjE,GAAqEA,CAArE,GAAyEA,CAAzE,GAA6E,EAAzF,GAA8F,CAAC,KAAK,KAAKH,EAAV,GAAe,MAAMC,EAArB,GAA0B,KAAKD,EAAL,GAAUA,EAApC,GAAyC,MAAMnB,eAA/C,GAAiE,IAAIoB,EAAJ,GAASA,EAA3E,IAAiFE,CAAjF,GAAqFA,CAArF,GAAyFA,CAAzF,GAA6FA,CAA7F,GAAiGA,CAAjG,GAAqGA,CAArG,GAAyG,GAAxO,CAApB;EACA/xB,QAAMmwB,SAASnwB,GAAT,CAAN;;EAEA,MAAIqe,MAAM,CAAC0T,IAAI,CAAC,IAAI,IAAIH,EAAR,GAAaC,EAAd,IAAoBE,CAApB,GAAwBA,CAAxB,GAA4BA,CAA5B,GAAgC,CAApC,GAAwC,CAAC,IAAI,IAAIF,EAAR,GAAa,KAAKD,EAAlB,GAAuB,IAAIC,EAAJ,GAASA,EAAhC,GAAqC,IAAIpB,eAAzC,GAA2D,KAAKmB,EAAL,GAAUA,EAAtE,IAA4EG,CAA5E,GAAgFA,CAAhF,GAAoFA,CAApF,GAAwFA,CAAxF,GAA4FA,CAA5F,GAAgG,GAAzI,IAAgJ3qB,KAAK8W,GAAL,CAAS+T,OAAT,CAA1J;EACA5T,QAAMmS,aAAaL,SAAS9R,GAAT,CAAnB;;EAEA,MAAItvB,MAAJ;EACA,MAAI0iC,IAAIlC,QAAR,EAAkB;EAChB,QAAI2C,WAAWtC,QAAQ;EACrBwB,gBAAUK,IAAIL,QAAJ,GAAeK,IAAIlC,QADR;EAErB8B,eAASI,IAAIJ,OAAJ,GAAcI,IAAIlC,QAFN;EAGrBgC,kBAAYE,IAAIF,UAHK;EAIrBD,kBAAYG,IAAIH;EAJK,KAAR,CAAf;EAMAviC,aAAS;EACPihC,WAAKkC,SAASlyB,GADP;EAEP+vB,aAAOmC,SAAS7T,GAFT;EAGPyR,cAAQ9vB,GAHD;EAIP6vB,YAAMxR;EAJC,KAAT;EAMD,GAbD,MAcK;EACHtvB,aAAS;EACPiR,WAAKA,GADE;EAEPqe,WAAKA;EAFE,KAAT;EAID;EACD,SAAOtvB,MAAP;EACD;;EAED;;;;;;;;EAQA,SAASyiC,mBAAT,CAA6BxxB,GAA7B,EAAkC;EAChC;EACA;EACA,MAAImyB,mBAAmB,GAAvB;;EAEA,MAAK,MAAMnyB,GAAP,IAAgBA,OAAO,EAA3B,EAAgC;EAC9BmyB,uBAAmB,GAAnB;EACD,GAFD,MAGK,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,EAA1B,EAA+B;EAClCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,EAA1B,EAA+B;EAClCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,EAA1B,EAA+B;EAClCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,EAA1B,EAA+B;EAClCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,EAA1B,EAA+B;EAClCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,EAA1B,EAA+B;EAClCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,EAA1B,EAA+B;EAClCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,KAAKnyB,GAAN,IAAeA,OAAO,CAA1B,EAA8B;EACjCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,IAAInyB,GAAL,IAAcA,OAAO,CAAzB,EAA6B;EAChCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,IAAInyB,GAAL,IAAcA,OAAO,CAAC,CAA1B,EAA8B;EACjCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,CAAD,GAAKnyB,GAAN,IAAeA,OAAO,CAAC,EAA3B,EAAgC;EACnCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD,GAFI,MAGA,IAAK,CAAC,EAAD,GAAMnyB,GAAP,IAAgBA,OAAO,CAAC,EAA5B,EAAiC;EACpCmyB,uBAAmB,GAAnB;EACD;EACD,SAAOA,gBAAP;EACD;;EAED;;;;;;;;;EASA,SAAS3C,MAAT,CAAgBiC,GAAhB,EAAqBlC,QAArB,EAA+B;EAC7B;EACA,MAAI6C,WAAW,UAAUX,IAAIJ,OAA7B;EAAA,MACEgB,YAAY,UAAUZ,IAAIL,QAD5B;;EAGA,SAAOK,IAAIH,UAAJ,GAAiBG,IAAIF,UAArB,GAAkCe,UAAUb,IAAIJ,OAAd,EAAuBI,IAAIL,QAA3B,EAAqCK,IAAIH,UAAzC,CAAlC,GAAyFc,SAASza,MAAT,CAAgBya,SAASviC,MAAT,GAAkB,CAAlC,EAAqC0/B,QAArC,CAAzF,GAA0I8C,UAAU1a,MAAV,CAAiB0a,UAAUxiC,MAAV,GAAmB,CAApC,EAAuC0/B,QAAvC,CAAjJ;EACD;;EAED;;;;;;;;;;EAUA,SAAS+C,SAAT,CAAmBjB,OAAnB,EAA4BD,QAA5B,EAAsCE,UAAtC,EAAkD;EAChD,MAAIiB,UAAUC,kBAAkBlB,UAAlB,CAAd;EACA,MAAImB,YAAYrrB,KAAKslB,KAAL,CAAW2E,UAAU,MAArB,CAAhB;EACA,MAAIqB,SAAStrB,KAAKslB,KAAL,CAAW0E,WAAW,MAAtB,IAAgC,EAA7C;EACA,SAAOuB,gBAAgBF,SAAhB,EAA2BC,MAA3B,EAAmCH,OAAnC,CAAP;EACD;;EAED;;;;;;;EAOA,SAASC,iBAAT,CAA2B1iC,CAA3B,EAA8B;EAC5B,MAAIyiC,UAAUziC,IAAIk/B,aAAlB;EACA,MAAIuD,YAAY,CAAhB,EAAmB;EACjBA,cAAUvD,aAAV;EACD;;EAED,SAAOuD,OAAP;EACD;;EAED;;;;;;;;;;;;;;;;EAgBA,SAASI,eAAT,CAAyBC,MAAzB,EAAiCC,GAAjC,EAAsCC,IAAtC,EAA4C;EAC1C;EACA,MAAI7tB,QAAQ6tB,OAAO,CAAnB;EACA,MAAIC,YAAY9D,0BAA0B+D,UAA1B,CAAqC/tB,KAArC,CAAhB;EACA,MAAIguB,YAAY/D,uBAAuB8D,UAAvB,CAAkC/tB,KAAlC,CAAhB;;EAEA;EACA,MAAIiuB,SAASH,YAAYH,MAAZ,GAAqB,CAAlC;EACA,MAAIO,SAASF,YAAYJ,GAAzB;EACA,MAAIO,WAAW,KAAf;;EAEA,MAAIF,SAASpJ,CAAb,EAAgB;EACdoJ,aAASA,SAASpJ,CAAT,GAAaqF,CAAb,GAAiB,CAA1B;EACAiE,eAAW,IAAX;EACD;;EAED,MAAIF,WAAW9D,CAAX,IAAiB2D,YAAY3D,CAAZ,IAAiB8D,SAAS9D,CAA3C,IAAkD,CAAC8D,SAAS9D,CAAT,IAAc2D,YAAY3D,CAA3B,KAAiCgE,QAAvF,EAAkG;EAChGF;EACD;;EAED,MAAIA,WAAW7D,CAAX,IAAiB0D,YAAY1D,CAAZ,IAAiB6D,SAAS7D,CAA3C,IAAkD,CAAC6D,SAAS7D,CAAT,IAAc0D,YAAY1D,CAA3B,KAAiC+D,QAAvF,EAAkG;EAChGF;;EAEA,QAAIA,WAAW9D,CAAf,EAAkB;EAChB8D;EACD;EACF;;EAED,MAAIA,SAASpJ,CAAb,EAAgB;EACdoJ,aAASA,SAASpJ,CAAT,GAAaqF,CAAb,GAAiB,CAA1B;EACD;;EAED,MAAIgE,SAAS7D,CAAb,EAAgB;EACd6D,aAASA,SAAS7D,CAAT,GAAaH,CAAb,GAAiB,CAA1B;EACAiE,eAAW,IAAX;EACD,GAHD,MAIK;EACHA,eAAW,KAAX;EACD;;EAED,MAAMD,WAAW/D,CAAZ,IAAoB6D,YAAY7D,CAAb,IAAoB+D,SAAS/D,CAAjD,IAA0D,CAAE+D,SAAS/D,CAAV,IAAiB6D,YAAY7D,CAA9B,KAAqCgE,QAAnG,EAA8G;EAC5GD;EACD;;EAED,MAAMA,WAAW9D,CAAZ,IAAoB4D,YAAY5D,CAAb,IAAoB8D,SAAS9D,CAAjD,IAA0D,CAAE8D,SAAS9D,CAAV,IAAiB4D,YAAY5D,CAA9B,KAAqC+D,QAAnG,EAA8G;EAC5GD;;EAEA,QAAIA,WAAW/D,CAAf,EAAkB;EAChB+D;EACD;EACF;;EAED,MAAIA,SAAS7D,CAAb,EAAgB;EACd6D,aAASA,SAAS7D,CAAT,GAAaH,CAAb,GAAiB,CAA1B;EACD;;EAED,MAAIkE,YAAYhnC,OAAO0D,YAAP,CAAoBmjC,MAApB,IAA8B7mC,OAAO0D,YAAP,CAAoBojC,MAApB,CAA9C;EACA,SAAOE,SAAP;EACD;;EAED;;;;;;;;EAQA,SAASliC,MAAT,CAAgBmiC,UAAhB,EAA4B;;EAE1B,MAAIA,cAAcA,WAAWzjC,MAAX,KAAsB,CAAxC,EAA2C;EACzC,UAAO,kCAAP;EACD;;EAED,MAAIA,SAASyjC,WAAWzjC,MAAxB;;EAEA,MAAI0jC,OAAO,IAAX;EACA,MAAIC,KAAK,EAAT;EACA,MAAIC,QAAJ;EACA,MAAI3jC,IAAI,CAAR;;EAEA;EACA,SAAO,CAAE,OAAD,CAAUxD,IAAV,CAAemnC,WAAWH,WAAWvX,MAAX,CAAkBjsB,CAAlB,CAA1B,CAAR,EAAyD;EACvD,QAAIA,KAAK,CAAT,EAAY;EACV,YAAO,oCAAoCwjC,UAA3C;EACD;EACDE,UAAMC,QAAN;EACA3jC;EACD;;EAED,MAAIwhC,aAAaza,SAAS2c,EAAT,EAAa,EAAb,CAAjB;;EAEA,MAAI1jC,MAAM,CAAN,IAAWA,IAAI,CAAJ,GAAQD,MAAvB,EAA+B;EAC7B;EACA;EACA,UAAO,oCAAoCyjC,UAA3C;EACD;;EAED,MAAI/B,aAAa+B,WAAWvX,MAAX,CAAkBjsB,GAAlB,CAAjB;;EAEA;EACA,MAAIyhC,cAAc,GAAd,IAAqBA,eAAe,GAApC,IAA2CA,eAAe,GAA1D,IAAiEA,cAAc,GAA/E,IAAsFA,eAAe,GAArG,IAA4GA,eAAe,GAA/H,EAAoI;EAClI,UAAO,2BAA2BA,UAA3B,GAAwC,gBAAxC,GAA2D+B,UAAlE;EACD;;EAEDC,SAAOD,WAAWI,SAAX,CAAqB5jC,CAArB,EAAwBA,KAAK,CAA7B,CAAP;;EAEA,MAAI/B,MAAMykC,kBAAkBlB,UAAlB,CAAV;;EAEA,MAAIqC,WAAWC,mBAAmBL,KAAKxX,MAAL,CAAY,CAAZ,CAAnB,EAAmChuB,GAAnC,CAAf;EACA,MAAI8lC,YAAYC,oBAAoBP,KAAKxX,MAAL,CAAY,CAAZ,CAApB,EAAoChuB,GAApC,CAAhB;;EAEA;EACA;EACA;;EAEA,SAAO8lC,YAAYE,eAAexC,UAAf,CAAnB,EAA+C;EAC7CsC,iBAAa,OAAb;EACD;;EAED;EACA,MAAIG,YAAYnkC,SAASC,CAAzB;;EAEA,MAAIkkC,YAAY,CAAZ,KAAkB,CAAtB,EAAyB;EACvB,UAAO,sKAAsKV,UAA7K;EACD;;EAED,MAAIW,MAAMD,YAAY,CAAtB;;EAEA,MAAIE,aAAa,GAAjB;EACA,MAAIC,cAAc,GAAlB;EACA,MAAIC,aAAJ,EAAmBC,gBAAnB,EAAqCC,iBAArC,EAAwDjD,OAAxD,EAAiED,QAAjE;EACA,MAAI6C,MAAM,CAAV,EAAa;EACXG,oBAAgB,WAAWhtB,KAAKK,GAAL,CAAS,EAAT,EAAawsB,GAAb,CAA3B;EACAI,uBAAmBf,WAAWI,SAAX,CAAqB5jC,CAArB,EAAwBA,IAAImkC,GAA5B,CAAnB;EACAC,iBAAal3B,WAAWq3B,gBAAX,IAA+BD,aAA5C;EACAE,wBAAoBhB,WAAWI,SAAX,CAAqB5jC,IAAImkC,GAAzB,CAApB;EACAE,kBAAcn3B,WAAWs3B,iBAAX,IAAgCF,aAA9C;EACD;;EAED/C,YAAU6C,aAAaP,QAAvB;EACAvC,aAAW+C,cAAcN,SAAzB;;EAEA,SAAO;EACLxC,aAASA,OADJ;EAELD,cAAUA,QAFL;EAGLG,gBAAYA,UAHP;EAILD,gBAAYA,UAJP;EAKL/B,cAAU6E;EALL,GAAP;EAOD;;EAED;;;;;;;;;;EAUA,SAASR,kBAAT,CAA4BzoC,CAA5B,EAA+B4C,GAA/B,EAAoC;EAClC;EACA;EACA,MAAIwmC,SAAStF,0BAA0B+D,UAA1B,CAAqCjlC,MAAM,CAA3C,CAAb;EACA,MAAIymC,eAAe,QAAnB;EACA,MAAIC,eAAe,KAAnB;;EAEA,SAAOF,WAAWppC,EAAE6nC,UAAF,CAAa,CAAb,CAAlB,EAAmC;EACjCuB;EACA,QAAIA,WAAWnF,CAAf,EAAkB;EAChBmF;EACD;EACD,QAAIA,WAAWlF,CAAf,EAAkB;EAChBkF;EACD;EACD,QAAIA,SAASzK,CAAb,EAAgB;EACd,UAAI2K,YAAJ,EAAkB;EAChB,cAAO,oBAAoBtpC,CAA3B;EACD;EACDopC,eAASpF,CAAT;EACAsF,qBAAe,IAAf;EACD;EACDD,oBAAgB,QAAhB;EACD;;EAED,SAAOA,YAAP;EACD;;EAED;;;;;;;;;;;;;;;;EAgBA,SAASV,mBAAT,CAA6BtyB,CAA7B,EAAgCzT,GAAhC,EAAqC;;EAEnC,MAAIyT,IAAI,GAAR,EAAa;EACX,UAAO,sCAAsCA,CAA7C;EACD;;EAED;EACA;EACA,MAAIkzB,SAASxF,uBAAuB8D,UAAvB,CAAkCjlC,MAAM,CAAxC,CAAb;EACA,MAAI4mC,gBAAgB,GAApB;EACA,MAAIF,eAAe,KAAnB;;EAEA,SAAOC,WAAWlzB,EAAEwxB,UAAF,CAAa,CAAb,CAAlB,EAAmC;EACjC0B;EACA,QAAIA,WAAWtF,CAAf,EAAkB;EAChBsF;EACD;EACD,QAAIA,WAAWrF,CAAf,EAAkB;EAChBqF;EACD;EACD;EACA;EACA,QAAIA,SAASpF,CAAb,EAAgB;EACd,UAAImF,YAAJ,EAAkB;EAAE;EAClB,cAAO,oBAAoBjzB,CAA3B;EACD;EACDkzB,eAASvF,CAAT;EACAsF,qBAAe,IAAf;EACD;EACDE,qBAAiB,QAAjB;EACD;;EAED,SAAOA,aAAP;EACD;;EAED;;;;;;;;;;EAUA,SAASZ,cAAT,CAAwBxC,UAAxB,EAAoC;EAClC,MAAIH,QAAJ;EACA,UAAQG,UAAR;EACA,SAAK,GAAL;EACEH,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,GAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,QAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF,SAAK,GAAL;EACEA,iBAAW,SAAX;EACA;EACF;EACEA,iBAAW,CAAC,GAAZ;EA9DF;EAgEA,MAAIA,YAAY,GAAhB,EAAqB;EACnB,WAAOA,QAAP;EACD,GAFD,MAGK;EACH,UAAO,0BAA0BG,UAAjC;EACD;EAEF;;ECvuBD,SAAStvB,KAAT,CAAesE,CAAf,EAAkBC,CAAlB,EAAqB6hB,CAArB,EAAwB;EACtB,MAAI,EAAE,gBAAgBpmB,KAAlB,CAAJ,EAA8B;EAC5B,WAAO,IAAIA,KAAJ,CAAUsE,CAAV,EAAaC,CAAb,EAAgB6hB,CAAhB,CAAP;EACD;EACD,MAAI96B,MAAMC,OAAN,CAAc+Y,CAAd,CAAJ,EAAsB;EACpB,SAAKA,CAAL,GAASA,EAAE,CAAF,CAAT;EACA,SAAKC,CAAL,GAASD,EAAE,CAAF,CAAT;EACA,SAAK8hB,CAAL,GAAS9hB,EAAE,CAAF,KAAQ,GAAjB;EACD,GAJD,MAIO,IAAG,QAAOA,CAAP,yCAAOA,CAAP,OAAa,QAAhB,EAA0B;EAC/B,SAAKA,CAAL,GAASA,EAAEA,CAAX;EACA,SAAKC,CAAL,GAASD,EAAEC,CAAX;EACA,SAAK6hB,CAAL,GAAS9hB,EAAE8hB,CAAF,IAAO,GAAhB;EACD,GAJM,MAIA,IAAI,OAAO9hB,CAAP,KAAa,QAAb,IAAyB,OAAOC,CAAP,KAAa,WAA1C,EAAuD;EAC5D,QAAIrD,SAASoD,EAAEjU,KAAF,CAAQ,GAAR,CAAb;EACA,SAAKiU,CAAL,GAASvJ,WAAWmG,OAAO,CAAP,CAAX,EAAsB,EAAtB,CAAT;EACA,SAAKqD,CAAL,GAASxJ,WAAWmG,OAAO,CAAP,CAAX,EAAsB,EAAtB,CAAT;EACA,SAAKklB,CAAL,GAASrrB,WAAWmG,OAAO,CAAP,CAAX,EAAsB,EAAtB,KAA6B,GAAtC;EACD,GALM,MAKA;EACL,SAAKoD,CAAL,GAASA,CAAT;EACA,SAAKC,CAAL,GAASA,CAAT;EACA,SAAK6hB,CAAL,GAASA,KAAK,GAAd;EACD;EACD5qB,UAAQC,IAAR,CAAa,6DAAb;EACD;;EAEDuE,MAAM2yB,QAAN,GAAiB,UAASC,OAAT,EAAkB;EACjC,SAAO,IAAI5yB,KAAJ,CAAU+rB,UAAQ6G,OAAR,CAAV,CAAP;EACD,CAFD;EAGA5yB,MAAMvW,SAAN,CAAgBopC,MAAhB,GAAyB,UAASvF,QAAT,EAAmB;EAC1C,SAAOnR,UAAQ,CAAC,KAAK7X,CAAN,EAAS,KAAKC,CAAd,CAAR,EAA0B+oB,QAA1B,CAAP;EACD,CAFD;;EC9BA,IAAIwF,MAAM,CAAV;EACA,IAAIC,MAAM,IAAV;EACA,IAAIC,MAAM,QAAV;EACA,IAAIC,MAAM,UAAV;EACA,IAAIC,MAAM,gBAAV;EACA,IAAIC,MAAM,IAAV;EACA,IAAIC,MAAM,OAAV;EACA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,YAAV;;AAEA,EAAe,kBAASzX,EAAT,EAAa;EAC1B,MAAI0X,KAAK,EAAT;EACAA,KAAG,CAAH,IAAQZ,MAAM9W,MAAM+W,MAAM/W,MAAMgX,MAAMhX,MAAMiX,MAAMjX,KAAKkX,GAAjB,CAAZ,CAAZ,CAAd;EACAQ,KAAG,CAAH,IAAQ1X,MAAMmX,MAAMnX,MAAMgX,MAAMhX,MAAMiX,MAAMjX,KAAKkX,GAAjB,CAAZ,CAAZ,CAAR;EACA,MAAIj5B,IAAI+hB,KAAKA,EAAb;EACA0X,KAAG,CAAH,IAAQz5B,KAAKm5B,MAAMpX,MAAMqX,MAAMrX,KAAKsX,GAAjB,CAAX,CAAR;EACAr5B,OAAK+hB,EAAL;EACA0X,KAAG,CAAH,IAAQz5B,KAAKs5B,MAAMvX,KAAKwX,GAAhB,CAAR;EACAE,KAAG,CAAH,IAAQz5B,IAAI+hB,EAAJ,GAASyX,GAAjB;EACA,SAAOC,EAAP;EACD;;ECvBc,kBAASjY,GAAT,EAAckY,IAAd,EAAoBC,IAApB,EAA0BF,EAA1B,EAA8B;EAC3CE,UAAQD,IAAR;EACAA,UAAQA,IAAR;EACA,SAAQD,GAAG,CAAH,IAAQjY,GAAR,GAAcmY,QAAQF,GAAG,CAAH,IAAQC,QAAQD,GAAG,CAAH,IAAQC,QAAQD,GAAG,CAAH,IAAQC,OAAOD,GAAG,CAAH,CAAvB,CAAhB,CAAhB,CAAtB;EACD;;ECDD,IAAIG,WAAW,EAAf;;AAEA,EAAe,sBAASC,GAAT,EAAc9X,EAAd,EAAkB0X,EAAlB,EAAsB;EACnC,MAAInf,IAAI,KAAK,IAAIyH,EAAT,CAAR;EACA,MAAIP,MAAMqY,GAAV;EACA,OAAK,IAAIjmC,IAAIgmC,QAAb,EAAuBhmC,CAAvB,EAA0B,EAAEA,CAA5B,EAA+B;EAAE;EAC/B,QAAI+R,IAAIuF,KAAKE,GAAL,CAASoW,GAAT,CAAR;EACA,QAAIxhB,IAAI,IAAI+hB,KAAKpc,CAAL,GAASA,CAArB;EACA;EACA;EACA3F,QAAI,CAAC85B,QAAQtY,GAAR,EAAa7b,CAAb,EAAgBuF,KAAK8W,GAAL,CAASR,GAAT,CAAhB,EAA+BiY,EAA/B,IAAqCI,GAAtC,KAA8C75B,IAAIkL,KAAKoW,IAAL,CAAUthB,CAAV,CAAlD,IAAkEsa,CAAtE;EACAkH,WAAOxhB,CAAP;EACA,QAAIkL,KAAKC,GAAL,CAASnL,CAAT,IAAc2W,KAAlB,EAAyB;EACvB,aAAO6K,GAAP;EACD;EACF;EACD;EACA,SAAOA,GAAP;EACD;;ECrBD;AACA;AAUA,EAAO,SAAShqB,MAAT,GAAgB;EACrB,OAAKyiB,EAAL,GAAU,KAAKA,EAAL,KAAYlpB,SAAZ,GAAwB,KAAKkpB,EAA7B,GAAkC,CAA5C;EACA,OAAKE,EAAL,GAAU,KAAKA,EAAL,KAAYppB,SAAZ,GAAwB,KAAKopB,EAA7B,GAAkC,CAA5C;EACA,OAAKb,KAAL,GAAa,KAAKA,KAAL,KAAevoB,SAAf,GAA2B,KAAKuoB,KAAhC,GAAwC,CAArD;EACA,OAAKP,IAAL,GAAY,KAAKA,IAAL,KAAchoB,SAAd,GAA0B,KAAKgoB,IAA/B,GAAsC,CAAlD;;EAEA,MAAI,KAAKgJ,EAAT,EAAa;EACX,SAAK0X,EAAL,GAAUM,QAAQ,KAAKhY,EAAb,CAAV;EACA,SAAKiY,GAAL,GAAWF,QAAQ,KAAK/gB,IAAb,EAAmB7N,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAnB,EAAwC7N,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAxC,EAA6D,KAAK0gB,EAAlE,CAAX;EACD;EACF;;EAED;;;;AAIA,EAAO,SAASvX,SAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEA,MAAI2vB,YAAY7X,WAAWD,MAAM,KAAK7I,KAAtB,CAAhB;EACA,MAAI+H,GAAJ;EACA,MAAIhX,CAAJ,EAAOC,CAAP;EACA,MAAI4vB,UAAUhvB,KAAKE,GAAL,CAAStH,GAAT,CAAd;EACA,MAAIq2B,UAAUjvB,KAAK8W,GAAL,CAASle,GAAT,CAAd;;EAEA,MAAI,CAAC,KAAKie,EAAV,EAAc;EACZ,QAAIxH,IAAI4f,UAAUjvB,KAAKE,GAAL,CAAS6uB,SAAT,CAAlB;;EAEA,QAAK/uB,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAASoP,CAAT,IAAc,CAAvB,CAAD,GAA8B5D,KAAlC,EAAyC;EACvC,aAAQ,EAAR;EACD,KAFD,MAGK;EACHtM,UAAI,MAAM,KAAK7E,CAAX,GAAe,KAAK6U,EAApB,GAAyBnP,KAAKvJ,GAAL,CAAS,CAAC,IAAI4Y,CAAL,KAAW,IAAIA,CAAf,CAAT,CAAzB,GAAuD,KAAKN,EAAhE;EACA3P,UAAI6vB,UAAUjvB,KAAK8W,GAAL,CAASiY,SAAT,CAAV,GAAgC/uB,KAAKoW,IAAL,CAAU,IAAIpW,KAAKK,GAAL,CAASgP,CAAT,EAAY,CAAZ,CAAd,CAApC;EACAA,UAAIrP,KAAKC,GAAL,CAASb,CAAT,CAAJ;;EAEA,UAAIiQ,KAAK,CAAT,EAAY;EACV,YAAKA,IAAI,CAAL,GAAU5D,KAAd,EAAqB;EACnB,iBAAQ,EAAR;EACD,SAFD,MAGK;EACHrM,cAAI,CAAJ;EACD;EACF,OAPD,MAQK;EACHA,YAAIY,KAAKkvB,IAAL,CAAU9vB,CAAV,CAAJ;EACD;;EAED,UAAIxG,MAAM,CAAV,EAAa;EACXwG,YAAI,CAACA,CAAL;EACD;;EAEDA,UAAI,KAAK9E,CAAL,GAAS,KAAK6U,EAAd,IAAoB/P,IAAI,KAAKyO,IAA7B,IAAqC,KAAKoB,EAA9C;EACD;EACF,GA7BD,MA8BK;EACH,QAAIkgB,KAAKF,UAAUF,SAAnB;EACA,QAAIK,MAAMpvB,KAAKK,GAAL,CAAS8uB,EAAT,EAAa,CAAb,CAAV;EACA,QAAI3uB,IAAI,KAAKqa,GAAL,GAAW7a,KAAKK,GAAL,CAAS4uB,OAAT,EAAkB,CAAlB,CAAnB;EACA,QAAII,KAAKrvB,KAAKK,GAAL,CAASG,CAAT,EAAY,CAAZ,CAAT;EACA,QAAI8uB,KAAKtvB,KAAKC,GAAL,CAASgvB,OAAT,IAAoBxjB,KAApB,GAA4BzL,KAAKwW,GAAL,CAAS5d,GAAT,CAA5B,GAA4C,CAArD;EACA,QAAI9D,IAAIkL,KAAKK,GAAL,CAASivB,EAAT,EAAa,CAAb,CAAR;EACA,QAAI7Y,KAAKzW,KAAKK,GAAL,CAASvL,CAAT,EAAY,CAAZ,CAAT;EACAqhB,UAAM,IAAI,KAAKU,EAAL,GAAU7W,KAAKK,GAAL,CAAS2uB,OAAT,EAAkB,CAAlB,CAApB;EACAG,SAAKA,KAAKnvB,KAAKoW,IAAL,CAAUD,GAAV,CAAV;EACA,QAAIoZ,KAAKX,QAAQh2B,GAAR,EAAao2B,OAAb,EAAsBC,OAAtB,EAA+B,KAAKV,EAApC,CAAT;;EAEApvB,QAAI,KAAK7E,CAAL,IAAU,KAAK6U,EAAL,GAAUggB,EAAV,IAAgB,IAC5BC,MAAM,CAAN,IAAW,IAAIt6B,CAAJ,GAAQ0L,CAAR,GACX4uB,MAAM,EAAN,IAAY,IAAI,KAAKt6B,CAAT,GAAa2hB,EAAb,GAAkB,KAAKjW,CAAvB,GAA2B,KAAK1L,CAAL,GAAS0L,CAApC,GACZ4uB,MAAM,EAAN,IAAY,KAAK,MAAM3Y,EAAX,GAAgBA,KAAK3hB,CAArB,GAAyB,MAAMA,CAA3C,CADA,CADA,CADY,CAAV,IAIF,KAAKia,EAJP;;EAMA3P,QAAI,KAAK9E,CAAL,IAAU,KAAK6U,EAAL,IAAWogB,KAAK,KAAKT,GAAV,GACvBE,UAAUD,SAAV,GAAsBI,EAAtB,GAA2B,CAA3B,IAAgC,IAChCC,MAAM,EAAN,IAAY,IAAIt6B,CAAJ,GAAQ,IAAI0L,CAAZ,GAAgB,IAAI6uB,EAApB,GACZD,MAAM,EAAN,IAAY,KAAK3Y,EAAL,GAAU,KAAK3hB,CAAf,GAAmB,MAAM0L,CAAzB,GAA6B,MAAM1L,CAAN,GAAU0L,CAAvC,GACZ4uB,MAAM,EAAN,IAAY,OAAO,MAAM3Y,EAAb,GAAkBA,KAAK3hB,CAAvB,GAA2B,OAAOA,CAA9C,CADA,CADA,CADA,CADY,CAAV,IAKF,KAAKma,EALP;EAMD;;EAED3B,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;;EAEA,SAAOkO,CAAP;EACD;;EAED;;;AAGA,EAAO,SAAS8J,SAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI6I,GAAJ,EAASG,GAAT;EACA,MAAI1d,GAAJ,EAASqe,GAAT;EACA,MAAI9X,IAAI,CAACmO,EAAEnO,CAAF,GAAM,KAAK4P,EAAZ,KAAmB,IAAI,KAAKzU,CAA5B,CAAR;EACA,MAAI8E,IAAI,CAACkO,EAAElO,CAAF,GAAM,KAAK6P,EAAZ,KAAmB,IAAI,KAAK3U,CAA5B,CAAR;;EAEA,MAAI,CAAC,KAAKuc,EAAV,EAAc;EACZ,QAAI7mB,IAAIgQ,KAAKqX,GAAL,CAASlY,IAAI,KAAKgQ,EAAlB,CAAR;EACA,QAAIqgB,IAAI,OAAOx/B,IAAI,IAAIA,CAAf,CAAR;EACA,QAAIy/B,OAAO,KAAK5hB,IAAL,GAAYzO,IAAI,KAAK+P,EAAhC;EACA,QAAIugB,IAAI1vB,KAAK8W,GAAL,CAAS2Y,IAAT,CAAR;EACAtZ,UAAMnW,KAAKoW,IAAL,CAAU,CAAC,IAAIpW,KAAKK,GAAL,CAASqvB,CAAT,EAAY,CAAZ,CAAL,KAAwB,IAAI1vB,KAAKK,GAAL,CAASmvB,CAAT,EAAY,CAAZ,CAA5B,CAAV,CAAN;EACA52B,UAAMoH,KAAK2vB,IAAL,CAAUxZ,GAAV,CAAN;;EAEA,QAAI/W,IAAI,CAAR,EAAW;EACTxG,YAAM,CAACA,GAAP;EACD;;EAED,QAAK42B,MAAM,CAAP,IAAcE,MAAM,CAAxB,EAA4B;EAC1BzY,YAAM,CAAN;EACD,KAFD,MAGK;EACHA,YAAMC,WAAWlX,KAAK2iB,KAAL,CAAW6M,CAAX,EAAcE,CAAd,IAAmB,KAAKthB,KAAnC,CAAN;EACD;EACF,GAlBD,MAmBK;EAAE;EACL+H,UAAM,KAAK2Y,GAAL,GAAW1vB,IAAI,KAAK+P,EAA1B;EACAmH,UAAMsZ,YAAYzZ,GAAZ,EAAiB,KAAKU,EAAtB,EAA0B,KAAK0X,EAA/B,CAAN;;EAEA,QAAIvuB,KAAKC,GAAL,CAASqW,GAAT,IAAgBlL,OAApB,EAA6B;EAC3B,UAAI4jB,UAAUhvB,KAAKE,GAAL,CAASoW,GAAT,CAAd;EACA,UAAI2Y,UAAUjvB,KAAK8W,GAAL,CAASR,GAAT,CAAd;EACA,UAAIuZ,UAAU7vB,KAAKC,GAAL,CAASgvB,OAAT,IAAoBxjB,KAApB,GAA4BzL,KAAKwW,GAAL,CAASF,GAAT,CAA5B,GAA4C,CAA1D;EACA,UAAI9V,IAAI,KAAKqa,GAAL,GAAW7a,KAAKK,GAAL,CAAS4uB,OAAT,EAAkB,CAAlB,CAAnB;EACA,UAAII,KAAKrvB,KAAKK,GAAL,CAASG,CAAT,EAAY,CAAZ,CAAT;EACA,UAAI1L,IAAIkL,KAAKK,GAAL,CAASwvB,OAAT,EAAkB,CAAlB,CAAR;EACA,UAAIpZ,KAAKzW,KAAKK,GAAL,CAASvL,CAAT,EAAY,CAAZ,CAAT;EACAqhB,YAAM,IAAI,KAAKU,EAAL,GAAU7W,KAAKK,GAAL,CAAS2uB,OAAT,EAAkB,CAAlB,CAApB;EACA,UAAItuB,IAAIvB,IAAIa,KAAKoW,IAAL,CAAUD,GAAV,CAAJ,GAAqB,KAAKhH,EAAlC;EACA,UAAI2gB,KAAK9vB,KAAKK,GAAL,CAASK,CAAT,EAAY,CAAZ,CAAT;EACAyV,YAAMA,MAAM0Z,OAAZ;;EAEAj3B,YAAM0d,MAAOH,MAAM2Z,EAAN,IAAY,IAAI,KAAKjZ,EAArB,CAAD,GAA6B,GAA7B,IAAoC,IAC9CiZ,KAAK,EAAL,IAAW,IAAI,IAAIh7B,CAAR,GAAY,IAAI0L,CAAJ,GAAQ1L,CAApB,GAAwB0L,CAAxB,GAA4B,IAAI6uB,EAAhC,GACXS,KAAK,EAAL,IAAW,KAAK,KAAKh7B,CAAV,GAAc,MAAM0L,CAAN,GAAU1L,CAAxB,GAA4B,KAAK2hB,EAAjC,GAAsC,KAAKjW,CAA3C,GACXsvB,KAAK,EAAL,IAAW,OAAO,OAAOh7B,CAAd,GAAkB,OAAO2hB,EAAzB,GAA8B,OAAOA,EAAP,GAAY3hB,CAArD,CADA,CADA,CADU,CAAZ;;EAKAmiB,YAAMC,WAAW,KAAK9I,KAAL,GAAc1N,KAAK,IAClCovB,KAAK,CAAL,IAAU,IAAI,IAAIh7B,CAAR,GAAY0L,CAAZ,GACVsvB,KAAK,EAAL,IAAW,IAAI,KAAKh7B,CAAT,GAAa,KAAK2hB,EAAlB,GAAuB,IAAIjW,CAAJ,GAAQ1L,CAA/B,GAAmC,IAAI0L,CAAvC,GACXsvB,KAAK,EAAL,IAAW,KAAK,MAAMh7B,CAAX,GAAe,OAAO2hB,EAAtB,GAA2B,MAAMA,EAAN,GAAW3hB,CAAjD,CADA,CADA,CAD6B,IAG4Bm6B,OAHrD,CAAN;EAID,KAtBD,MAuBK;EACHr2B,YAAMwS,UAAUiL,KAAKjX,CAAL,CAAhB;EACA6X,YAAM,CAAN;EACD;EACF;;EAED3J,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;;EAEA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,UAAQ,CAAC,0BAAD,EAA6B,0BAA7B,CAAZ;AACP,cAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA;EAJM,CAAf;;ECvKe,eAASpY,CAAT,EAAY;EACzB,MAAI5J,IAAIyK,KAAKqX,GAAL,CAASlY,CAAT,CAAR;EACA5J,MAAI,CAACA,IAAI,IAAIA,CAAT,IAAc,CAAlB;EACA,SAAOA,CAAP;EACD;;ECJc,gBAAS4J,CAAT,EAAYC,CAAZ,EAAe;EAC5BD,MAAIa,KAAKC,GAAL,CAASd,CAAT,CAAJ;EACAC,MAAIY,KAAKC,GAAL,CAASb,CAAT,CAAJ;EACA,MAAI9E,IAAI0F,KAAK+vB,GAAL,CAAS5wB,CAAT,EAAYC,CAAZ,CAAR;EACA,MAAIiQ,IAAIrP,KAAKgwB,GAAL,CAAS7wB,CAAT,EAAYC,CAAZ,KAAkB9E,IAAIA,CAAJ,GAAQ,CAA1B,CAAR;;EAEA,SAAOA,IAAI0F,KAAKoW,IAAL,CAAU,IAAIpW,KAAKK,GAAL,CAASgP,CAAT,EAAY,CAAZ,CAAd,CAAX;EACD;;ECPc,iBAASlQ,CAAT,EAAY;EACzB,MAAIC,IAAI,IAAID,CAAZ;EACA,MAAI8hB,IAAI7hB,IAAI,CAAZ;;EAEA,SAAO6hB,MAAM,CAAN,GAAU9hB,CAAV,GAAcA,IAAIa,KAAKvJ,GAAL,CAAS2I,CAAT,CAAJ,GAAkB6hB,CAAvC;EACD;;ECFc,iBAAS9hB,CAAT,EAAY;EACzB,MAAIC,IAAIY,KAAKC,GAAL,CAASd,CAAT,CAAR;EACAC,MAAI6wB,OAAO7wB,KAAK,IAAIA,KAAK8wB,MAAM,CAAN,EAAS9wB,CAAT,IAAc,CAAnB,CAAT,CAAP,CAAJ;;EAEA,SAAOD,IAAI,CAAJ,GAAQ,CAACC,CAAT,GAAaA,CAApB;EACD;;ECRc,eAAS+wB,EAAT,EAAaC,CAAb,EAAgB;EAC7B,MAAIC,SAAS,IAAIrwB,KAAK8W,GAAL,CAAS,IAAIsZ,CAAb,CAAjB;EACA,MAAI1nC,IAAIynC,GAAG1nC,MAAH,GAAY,CAApB;EACA,MAAI6nC,KAAKH,GAAGznC,CAAH,CAAT;EACA,MAAI6nC,KAAK,CAAT;EACA,MAAIb,CAAJ;;EAEA,SAAO,EAAEhnC,CAAF,IAAO,CAAd,EAAiB;EACfgnC,QAAI,CAACa,EAAD,GAAMF,SAASC,EAAf,GAAoBH,GAAGznC,CAAH,CAAxB;EACA6nC,SAAKD,EAAL;EACAA,SAAKZ,CAAL;EACD;;EAED,SAAQU,IAAIV,IAAI1vB,KAAKE,GAAL,CAAS,IAAIkwB,CAAb,CAAhB;EACD;;ECdc,gBAASD,EAAT,EAAaK,KAAb,EAAoB;EACjC,MAAIj7B,IAAI,IAAIyK,KAAK8W,GAAL,CAAS0Z,KAAT,CAAZ;EACA,MAAI9nC,IAAIynC,GAAG1nC,MAAH,GAAY,CAApB;EACA,MAAIgoC,MAAMN,GAAGznC,CAAH,CAAV;EACA,MAAIgoC,MAAM,CAAV;EACA,MAAIC,EAAJ;;EAEA,SAAO,EAAEjoC,CAAF,IAAO,CAAd,EAAiB;EACfioC,SAAK,CAACD,GAAD,GAAOn7B,IAAIk7B,GAAX,GAAiBN,GAAGznC,CAAH,CAAtB;EACAgoC,UAAMD,GAAN;EACAA,UAAME,EAAN;EACD;;EAED,SAAO3wB,KAAKE,GAAL,CAASswB,KAAT,IAAkBG,EAAzB;EACD;;ECdc,eAASxxB,CAAT,EAAY;EACzB,MAAI5J,IAAIyK,KAAKqX,GAAL,CAASlY,CAAT,CAAR;EACA5J,MAAI,CAACA,IAAI,IAAIA,CAAT,IAAc,CAAlB;EACA,SAAOA,CAAP;EACD;;ECDc,sBAAS46B,EAAT,EAAaK,KAAb,EAAoBI,KAApB,EAA2B;EACxC,MAAIC,YAAY7wB,KAAKE,GAAL,CAASswB,KAAT,CAAhB;EACA,MAAIM,YAAY9wB,KAAK8W,GAAL,CAAS0Z,KAAT,CAAhB;EACA,MAAIO,aAAaC,KAAKJ,KAAL,CAAjB;EACA,MAAIK,aAAaC,KAAKN,KAAL,CAAjB;EACA,MAAIr7B,IAAI,IAAIu7B,SAAJ,GAAgBG,UAAxB;EACA,MAAIvoC,IAAI,CAAC,CAAD,GAAKmoC,SAAL,GAAiBE,UAAzB;EACA,MAAI7+B,IAAIi+B,GAAG1nC,MAAH,GAAY,CAApB;EACA,MAAIkoC,KAAKR,GAAGj+B,CAAH,CAAT;EACA,MAAIi/B,MAAM,CAAV;EACA,MAAIV,MAAM,CAAV;EACA,MAAIW,KAAK,CAAT;EACA,MAAIV,GAAJ;EACA,MAAIW,GAAJ;;EAEA,SAAO,EAAEn/B,CAAF,IAAO,CAAd,EAAiB;EACfw+B,UAAMD,GAAN;EACAY,UAAMF,GAAN;EACAV,UAAME,EAAN;EACAQ,UAAMC,EAAN;EACAT,SAAK,CAACD,GAAD,GAAOn7B,IAAIk7B,GAAX,GAAiB/nC,IAAIyoC,GAArB,GAA2BhB,GAAGj+B,CAAH,CAAhC;EACAk/B,SAAK,CAACC,GAAD,GAAO3oC,IAAI+nC,GAAX,GAAiBl7B,IAAI47B,GAA1B;EACD;;EAED57B,MAAIs7B,YAAYI,UAAhB;EACAvoC,MAAIooC,YAAYC,UAAhB;;EAEA,SAAO,CAACx7B,IAAIo7B,EAAJ,GAASjoC,IAAI0oC,EAAd,EAAkB77B,IAAI67B,EAAJ,GAAS1oC,IAAIioC,EAA/B,CAAP;EACD;;EC/BD;AACA;AAWA,EAAO,SAASrkC,MAAT,GAAgB;EACrB,MAAI,CAAC,KAAKkkB,MAAN,KAAiB9hB,MAAM,KAAKmoB,EAAX,KAAkB,KAAKA,EAAL,IAAW,CAA9C,CAAJ,EAAsD;EACpD,UAAM,IAAIntB,KAAJ,CAAU,oIAAV,CAAN;EACD;EACD,MAAI,KAAK8mB,MAAT,EAAiB;EACf;EACA8gB,UAAMhlC,IAAN,CAAW0Z,KAAX,CAAiB,IAAjB;EACA,SAAKgR,OAAL,GAAesa,MAAMta,OAArB;EACA,SAAKI,OAAL,GAAeka,MAAMla,OAArB;EACD;;EAED,OAAKrI,EAAL,GAAU,KAAKA,EAAL,KAAYlpB,SAAZ,GAAwB,KAAKkpB,EAA7B,GAAkC,CAA5C;EACA,OAAKE,EAAL,GAAU,KAAKA,EAAL,KAAYppB,SAAZ,GAAwB,KAAKopB,EAA7B,GAAkC,CAA5C;EACA,OAAKb,KAAL,GAAa,KAAKA,KAAL,KAAevoB,SAAf,GAA2B,KAAKuoB,KAAhC,GAAwC,CAArD;EACA,OAAKP,IAAL,GAAY,KAAKA,IAAL,KAAchoB,SAAd,GAA0B,KAAKgoB,IAA/B,GAAsC,CAAlD;;EAEA,OAAK0jB,GAAL,GAAW,EAAX;EACA,OAAKC,GAAL,GAAW,EAAX;EACA,OAAKC,GAAL,GAAW,EAAX;EACA,OAAKC,GAAL,GAAW,EAAX;;EAEA,MAAI1hC,IAAI,KAAK6mB,EAAL,IAAW,IAAI7W,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAnB,CAAf,CAAR;EACA,MAAIzc,IAAIpK,KAAK,IAAIA,CAAT,CAAR;EACA,MAAI2hC,KAAKv3B,CAAT;;EAEA,OAAKm3B,GAAL,CAAS,CAAT,IAAcn3B,KAAK,IAAIA,KAAK,CAAC,CAAD,GAAK,CAAL,GAASA,KAAK,CAAC,CAAD,GAAKA,KAAK,MAAM,EAAN,GAAWA,KAAK,KAAK,EAAL,GAAUA,KAAK,CAAC,IAAD,GAAQ,GAAb,CAAf,CAAhB,CAAV,CAAd,CAAT,CAAd;EACA,OAAKo3B,GAAL,CAAS,CAAT,IAAcp3B,KAAK,CAAC,CAAD,GAAKA,KAAM,IAAI,CAAJ,GAAQA,KAAM,IAAI,CAAJ,GAAQA,KAAK,CAAC,EAAD,GAAM,EAAN,GAAWA,KAAK,KAAK,EAAL,GAAUA,KAAK,OAAO,IAAZ,CAAf,CAAhB,CAAd,CAAd,CAAV,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKm3B,GAAL,CAAS,CAAT,IAAcI,MAAM,IAAI,CAAJ,GAAQv3B,KAAK,CAAC,CAAD,GAAK,CAAL,GAASA,KAAK,CAAC,GAAD,GAAO,EAAP,GAAYA,KAAK,OAAO,GAAP,GAAaA,KAAK,OAAO,GAAZ,CAAlB,CAAjB,CAAd,CAAd,CAAd;EACA,OAAKo3B,GAAL,CAAS,CAAT,IAAcG,MAAM,IAAI,CAAJ,GAAQv3B,KAAK,CAAC,EAAD,GAAM,EAAN,GAAWA,KAAM,CAAC,EAAD,GAAM,CAAN,GAAUA,KAAK,MAAM,GAAN,GAAYA,KAAK,CAAC,IAAD,GAAQ,GAAb,CAAjB,CAAhB,CAAhB,CAAd,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKm3B,GAAL,CAAS,CAAT,IAAcI,MAAM,KAAK,EAAL,GAAUv3B,KAAK,CAAC,GAAD,GAAO,EAAP,GAAYA,KAAK,CAAC,IAAD,GAAQ,GAAR,GAAcA,KAAK,QAAQ,IAAb,CAAnB,CAAjB,CAAhB,CAAd;EACA,OAAKo3B,GAAL,CAAS,CAAT,IAAcG,MAAM,CAAC,EAAD,GAAM,EAAN,GAAWv3B,KAAK,KAAK,EAAL,GAAUA,KAAK,IAAI,CAAJ,GAAQA,KAAK,CAAC,KAAD,GAAS,IAAd,CAAb,CAAf,CAAjB,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKm3B,GAAL,CAAS,CAAT,IAAcI,MAAM,OAAO,GAAP,GAAav3B,KAAK,CAAC,GAAD,GAAO,EAAP,GAAYA,KAAK,CAAC,MAAD,GAAU,KAAf,CAAjB,CAAnB,CAAd;EACA,OAAKo3B,GAAL,CAAS,CAAT,IAAcG,MAAM,OAAO,GAAP,GAAav3B,KAAK,CAAC,EAAD,GAAM,CAAN,GAAUA,KAAM,CAAC,KAAD,GAAS,KAAf,CAAf,CAAnB,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKm3B,GAAL,CAAS,CAAT,IAAcI,MAAM,OAAO,GAAP,GAAav3B,KAAK,CAAC,MAAD,GAAU,IAAf,CAAnB,CAAd;EACA,OAAKo3B,GAAL,CAAS,CAAT,IAAcG,MAAM,CAAC,GAAD,GAAO,GAAP,GAAav3B,KAAK,SAAS,KAAd,CAAnB,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKm3B,GAAL,CAAS,CAAT,IAAcI,MAAM,SAAS,KAAf,CAAd;EACA,OAAKH,GAAL,CAAS,CAAT,IAAcG,MAAM,SAAS,MAAf,CAAd;;EAEAA,OAAK3xB,KAAKK,GAAL,CAASjG,CAAT,EAAY,CAAZ,CAAL;EACA,OAAKw3B,EAAL,GAAU,KAAKziB,EAAL,IAAW,IAAI/U,CAAf,KAAqB,IAAIu3B,MAAM,IAAI,CAAJ,GAAQA,MAAM,IAAI,EAAJ,GAASA,KAAK,GAApB,CAAd,CAAzB,CAAV;;EAEA,OAAKF,GAAL,CAAS,CAAT,IAAcr3B,KAAK,CAAC,GAAD,GAAOA,KAAM,IAAI,CAAJ,GAAQA,KAAK,CAAC,EAAD,GAAM,EAAN,GAAWA,KAAM,IAAI,GAAJ,GAAUA,KAAK,KAAK,GAAL,GAAWA,KAAK,CAAC,KAAD,GAAS,MAAd,CAAhB,CAAhB,CAAhB,CAAd,CAAZ,CAAd;EACA,OAAKs3B,GAAL,CAAS,CAAT,IAAct3B,KAAK,MAAMA,KAAK,CAAC,CAAD,GAAK,CAAL,GAASA,KAAK,IAAI,EAAJ,GAASA,KAAK,KAAK,GAAL,GAAWA,KAAK,CAAC,GAAD,GAAO,GAAP,GAAaA,KAAK,OAAO,KAAZ,CAAlB,CAAhB,CAAd,CAAd,CAAX,CAAd;;EAEA,OAAKq3B,GAAL,CAAS,CAAT,IAAcE,MAAM,CAAC,CAAD,GAAK,EAAL,GAAUv3B,KAAK,CAAC,CAAD,GAAK,EAAL,GAAUA,KAAK,MAAM,IAAN,GAAaA,KAAK,CAAC,EAAD,GAAM,GAAN,GAAYA,KAAK,UAAU,OAAf,CAAjB,CAAlB,CAAf,CAAhB,CAAd;EACA,OAAKs3B,GAAL,CAAS,CAAT,IAAcC,MAAM,KAAK,EAAL,GAAUv3B,KAAK,CAAC,CAAD,GAAK,CAAL,GAASA,KAAK,MAAM,IAAN,GAAaA,KAAK,MAAM,GAAN,GAAYA,KAAK,CAAC,OAAD,GAAW,OAAhB,CAAjB,CAAlB,CAAd,CAAhB,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKq3B,GAAL,CAAS,CAAT,IAAcE,MAAM,CAAC,EAAD,GAAM,GAAN,GAAYv3B,KAAK,KAAK,GAAL,GAAWA,KAAK,MAAM,IAAN,GAAaA,KAAK,CAAC,IAAD,GAAQ,KAAb,CAAlB,CAAhB,CAAlB,CAAd;EACA,OAAKs3B,GAAL,CAAS,CAAT,IAAcC,MAAM,KAAK,GAAL,GAAWv3B,KAAK,CAAC,GAAD,GAAO,GAAP,GAAaA,KAAK,QAAQ,KAAR,GAAgBA,KAAK,SAAS,MAAd,CAArB,CAAlB,CAAjB,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKq3B,GAAL,CAAS,CAAT,IAAcE,MAAM,CAAC,IAAD,GAAQ,MAAR,GAAiBv3B,KAAK,KAAK,GAAL,GAAWA,KAAK,SAAS,OAAd,CAAhB,CAAvB,CAAd;EACA,OAAKs3B,GAAL,CAAS,CAAT,IAAcC,MAAM,QAAQ,MAAR,GAAiBv3B,KAAK,CAAC,GAAD,GAAO,GAAP,GAAaA,KAAK,UAAU,OAAf,CAAlB,CAAvB,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKq3B,GAAL,CAAS,CAAT,IAAcE,MAAM,CAAC,IAAD,GAAQ,MAAR,GAAiBv3B,KAAK,SAAS,OAAd,CAAvB,CAAd;EACA,OAAKs3B,GAAL,CAAS,CAAT,IAAcC,MAAM,QAAQ,KAAR,GAAgBv3B,KAAK,CAAC,OAAD,GAAW,OAAhB,CAAtB,CAAd;;EAEAu3B,OAAKA,KAAKv3B,CAAV;EACA,OAAKq3B,GAAL,CAAS,CAAT,IAAcE,MAAM,CAAC,QAAD,GAAY,SAAlB,CAAd;EACA,OAAKD,GAAL,CAAS,CAAT,IAAcC,MAAM,YAAY,SAAlB,CAAd;;EAEA,MAAIjP,IAAImP,KAAK,KAAKL,GAAV,EAAe,KAAK3jB,IAApB,CAAR;EACA,OAAKikB,EAAL,GAAU,CAAC,KAAKF,EAAN,IAAYlP,IAAIqP,MAAM,KAAKL,GAAX,EAAgB,IAAIhP,CAApB,CAAhB,CAAV;EACD;;AAED,EAAO,SAAS1L,SAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI0kB,KAAK9a,WAAW5J,EAAEnO,CAAF,GAAM,KAAKiP,KAAtB,CAAT;EACA,MAAI6jB,KAAK3kB,EAAElO,CAAX;;EAEA6yB,OAAKJ,KAAK,KAAKL,GAAV,EAAeS,EAAf,CAAL;EACA,MAAIC,SAASlyB,KAAKE,GAAL,CAAS+xB,EAAT,CAAb;EACA,MAAIE,SAASnyB,KAAK8W,GAAL,CAASmb,EAAT,CAAb;EACA,MAAIG,SAASpyB,KAAKE,GAAL,CAAS8xB,EAAT,CAAb;EACA,MAAIK,SAASryB,KAAK8W,GAAL,CAASkb,EAAT,CAAb;;EAEAC,OAAKjyB,KAAK2iB,KAAL,CAAWuP,MAAX,EAAmBG,SAASF,MAA5B,CAAL;EACAH,OAAKhyB,KAAK2iB,KAAL,CAAWyP,SAASD,MAApB,EAA4BjC,MAAMgC,MAAN,EAAcC,SAASE,MAAvB,CAA5B,CAAL;EACAL,OAAKM,OAAOtyB,KAAKwW,GAAL,CAASwb,EAAT,CAAP,CAAL;;EAEA,MAAIO,MAAMC,YAAY,KAAKd,GAAjB,EAAsB,IAAIO,EAA1B,EAA8B,IAAID,EAAlC,CAAV;;EAEAC,OAAKA,KAAKM,IAAI,CAAJ,CAAV;EACAP,OAAKA,KAAKO,IAAI,CAAJ,CAAV;;EAEA,MAAIpzB,CAAJ;EACA,MAAIC,CAAJ;;EAEA,MAAIY,KAAKC,GAAL,CAAS+xB,EAAT,KAAgB,cAApB,EAAoC;EAClC7yB,QAAI,KAAK7E,CAAL,IAAU,KAAKs3B,EAAL,GAAUI,EAApB,IAA0B,KAAKjjB,EAAnC;EACA3P,QAAI,KAAK9E,CAAL,IAAU,KAAKs3B,EAAL,GAAUK,EAAV,GAAe,KAAKH,EAA9B,IAAoC,KAAK7iB,EAA7C;EACD,GAHD,MAIK;EACH9P,QAAImiB,QAAJ;EACAliB,QAAIkiB,QAAJ;EACD;;EAEDhU,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;;EAEA,SAAOkO,CAAP;EACD;;AAED,EAAO,SAAS8J,SAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI0kB,KAAK,CAAC1kB,EAAEnO,CAAF,GAAM,KAAK4P,EAAZ,KAAmB,IAAI,KAAKzU,CAA5B,CAAT;EACA,MAAI23B,KAAK,CAAC3kB,EAAElO,CAAF,GAAM,KAAK6P,EAAZ,KAAmB,IAAI,KAAK3U,CAA5B,CAAT;;EAEA23B,OAAK,CAACA,KAAK,KAAKH,EAAX,IAAiB,KAAKF,EAA3B;EACAI,OAAKA,KAAK,KAAKJ,EAAf;;EAEA,MAAI3a,GAAJ;EACA,MAAIre,GAAJ;;EAEA,MAAIoH,KAAKC,GAAL,CAAS+xB,EAAT,KAAgB,cAApB,EAAoC;EAClC,QAAIO,MAAMC,YAAY,KAAKf,GAAjB,EAAsB,IAAIQ,EAA1B,EAA8B,IAAID,EAAlC,CAAV;;EAEAC,SAAKA,KAAKM,IAAI,CAAJ,CAAV;EACAP,SAAKA,KAAKO,IAAI,CAAJ,CAAV;EACAP,SAAKhyB,KAAK4W,IAAL,CAAUoa,KAAKgB,EAAL,CAAV,CAAL;;EAEA,QAAIE,SAASlyB,KAAKE,GAAL,CAAS+xB,EAAT,CAAb;EACA,QAAIE,SAASnyB,KAAK8W,GAAL,CAASmb,EAAT,CAAb;EACA,QAAIG,SAASpyB,KAAKE,GAAL,CAAS8xB,EAAT,CAAb;EACA,QAAIK,SAASryB,KAAK8W,GAAL,CAASkb,EAAT,CAAb;;EAEAC,SAAKjyB,KAAK2iB,KAAL,CAAWuP,SAASG,MAApB,EAA4BnC,MAAMkC,MAAN,EAAcC,SAASF,MAAvB,CAA5B,CAAL;EACAH,SAAKhyB,KAAK2iB,KAAL,CAAWyP,MAAX,EAAmBC,SAASF,MAA5B,CAAL;;EAEAlb,UAAMC,WAAW8a,KAAK,KAAK5jB,KAArB,CAAN;EACAxV,UAAMi5B,KAAK,KAAKN,GAAV,EAAeU,EAAf,CAAN;EACD,GAjBD,MAkBK;EACHhb,UAAMqK,QAAN;EACA1oB,UAAM0oB,QAAN;EACD;;EAEDhU,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;;EAEA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,UAAQ,CAAC,8BAAD,EAAiC,8BAAjC,EAAiE,QAAjE,EAA2E,qBAA3E,EAAkG,qBAAlG,EAAyH,cAAzH,EAAyI,cAAzI,EAAyJ,OAAzJ,CAAZ;AACP,eAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA;EAJM,CAAf;;ECpKe,sBAAS/H,IAAT,EAAeyH,GAAf,EAAoB;EACjC,MAAIzH,SAAS3pB,SAAb,EAAwB;EACtB2pB,WAAOxP,KAAKslB,KAAL,CAAW,CAACpO,WAAWD,GAAX,IAAkBjX,KAAKqL,EAAxB,IAA8B,EAA9B,GAAmCrL,KAAKqL,EAAnD,IAAyD,CAAhE;;EAEA,QAAImE,OAAO,CAAX,EAAc;EACZ,aAAO,CAAP;EACD,KAFD,MAEO,IAAIA,OAAO,EAAX,EAAe;EACpB,aAAO,EAAP;EACD;EACF;EACD,SAAOA,IAAP;EACD;;ECXM,IAAIijB,YAAY,QAAhB;AACP;AAGA,EAAO,SAASnmC,MAAT,GAAgB;EACrB,MAAIkjB,OAAOkjB,YAAY,KAAKljB,IAAjB,EAAuB,KAAKpB,KAA5B,CAAX;EACA,MAAIoB,SAAS3pB,SAAb,EAAwB;EACtB,UAAM,IAAI6D,KAAJ,CAAU,kBAAV,CAAN;EACD;EACD,OAAKmkB,IAAL,GAAY,CAAZ;EACA,OAAKO,KAAL,GAAc,CAAE,IAAIpO,KAAKC,GAAL,CAASuP,IAAT,CAAL,GAAuB,GAAxB,IAA+B9D,GAA7C;EACA,OAAKqD,EAAL,GAAU,MAAV;EACA,OAAKE,EAAL,GAAU,KAAKU,QAAL,GAAgB,QAAhB,GAA2B,CAArC;EACA,OAAKR,EAAL,GAAU,MAAV;;EAEAwjB,SAAOrmC,IAAP,CAAY0Z,KAAZ,CAAkB,IAAlB;EACA,OAAKgR,OAAL,GAAe2b,OAAO3b,OAAtB;EACA,OAAKI,OAAL,GAAeub,OAAOvb,OAAtB;EACD;;AAED,EAAO,IAAIG,UAAQ,CAAC,sCAAD,EAAyC,KAAzC,CAAZ;AACP,YAAe;EACbjrB,QAAMA,MADO;EAEbirB,SAAOA,OAFM;EAGbkb,aAAWA;EAHE,CAAf;;ECvBe,eAASG,KAAT,EAAgBvb,GAAhB,EAAqB;EAClC,SAAQrX,KAAKK,GAAL,CAAS,CAAC,IAAIuyB,KAAL,KAAe,IAAIA,KAAnB,CAAT,EAAoCvb,GAApC,CAAR;EACD;;ECDD,IAAIqX,aAAW,EAAf;AACA;AAEA,EAAO,SAASpiC,MAAT,GAAgB;EACrB,MAAIkiC,OAAOxuB,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAX;EACA,MAAI4gB,OAAOzuB,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAX;EACA4gB,UAAQA,IAAR;EACA,OAAKoE,EAAL,GAAU7yB,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAnB,KAA0B,IAAI,KAAKA,EAAL,GAAU2X,IAAV,GAAiBA,IAA/C,CAAV;EACA,OAAKhF,CAAL,GAASxpB,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAL,GAAU4X,IAAV,GAAiBA,IAAjB,IAAyB,IAAI,KAAK5X,EAAlC,CAAd,CAAT;EACA,OAAKic,KAAL,GAAa9yB,KAAK2vB,IAAL,CAAUnB,OAAO,KAAKhF,CAAtB,CAAb;EACA,OAAKuJ,MAAL,GAAc,MAAM,KAAKvJ,CAAX,GAAe,KAAKzlC,CAAlC;EACA,OAAKivC,CAAL,GAAShzB,KAAKwW,GAAL,CAAS,MAAM,KAAKsc,KAAX,GAAmBlnB,MAA5B,KAAuC5L,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS,MAAM,KAAK3I,IAAX,GAAkBjC,MAA3B,CAAT,EAA6C,KAAK4d,CAAlD,IAAuDyJ,KAAK,KAAKlvC,CAAL,GAASyqC,IAAd,EAAoB,KAAKuE,MAAzB,CAA9F,CAAT;EACD;;AAED,EAAO,SAAS/b,SAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEAkO,IAAElO,CAAF,GAAM,IAAIY,KAAK4W,IAAL,CAAU,KAAKoc,CAAL,GAAShzB,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS,MAAM5d,GAAN,GAAYgT,MAArB,CAAT,EAAuC,KAAK4d,CAA5C,CAAT,GAA0DyJ,KAAK,KAAKlvC,CAAL,GAASic,KAAKE,GAAL,CAAStH,GAAT,CAAd,EAA6B,KAAKm6B,MAAlC,CAApE,CAAJ,GAAqH3nB,OAA3H;EACAkC,IAAEnO,CAAF,GAAM,KAAKqqB,CAAL,GAASvS,GAAf;EACA,SAAO3J,CAAP;EACD;;AAED,EAAO,SAAS8J,SAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI4lB,UAAU,KAAd;EACA,MAAIjc,MAAM3J,EAAEnO,CAAF,GAAM,KAAKqqB,CAArB;EACA,MAAI5wB,MAAM0U,EAAElO,CAAZ;EACA,MAAIonB,MAAMxmB,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS,MAAM5d,GAAN,GAAYgT,MAArB,IAA+B,KAAKonB,CAA7C,EAAgD,IAAI,KAAKxJ,CAAzD,CAAV;EACA,OAAK,IAAI9gC,IAAIgmC,UAAb,EAAuBhmC,IAAI,CAA3B,EAA8B,EAAEA,CAAhC,EAAmC;EACjCkQ,UAAM,IAAIoH,KAAK4W,IAAL,CAAU4P,MAAMyM,KAAK,KAAKlvC,CAAL,GAASic,KAAKE,GAAL,CAASoN,EAAElO,CAAX,CAAd,EAA6B,CAAE,GAAF,GAAQ,KAAKrb,CAA1C,CAAhB,CAAJ,GAAoEqnB,OAA1E;EACA,QAAIpL,KAAKC,GAAL,CAASrH,MAAM0U,EAAElO,CAAjB,IAAsB8zB,OAA1B,EAAmC;EACjC;EACD;EACD5lB,MAAElO,CAAF,GAAMxG,GAAN;EACD;EACD;EACA,MAAI,CAAClQ,CAAL,EAAQ;EACN,WAAO,IAAP;EACD;EACD4kB,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,UAAQ,CAAC,OAAD,CAAZ;AACP,cAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA;EAJM,CAAf;;EC1CO,SAASjrB,MAAT,GAAgB;EACrB6mC,QAAM7mC,IAAN,CAAW0Z,KAAX,CAAiB,IAAjB;EACA,MAAI,CAAC,KAAK6sB,EAAV,EAAc;EACZ;EACD;EACD,OAAKO,KAAL,GAAapzB,KAAKE,GAAL,CAAS,KAAK4yB,KAAd,CAAb;EACA,OAAKO,KAAL,GAAarzB,KAAK8W,GAAL,CAAS,KAAKgc,KAAd,CAAb;EACA,OAAKQ,EAAL,GAAU,IAAI,KAAKT,EAAnB;EACA,MAAI,CAAC,KAAK3xB,KAAV,EAAiB;EACf,SAAKA,KAAL,GAAa,mCAAb;EACD;EACF;;AAED,EAAO,SAAS8V,SAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAIimB,IAAJ,EAAUC,IAAV,EAAgBC,IAAhB,EAAsBrkB,CAAtB;EACA9B,IAAEnO,CAAF,GAAM+X,WAAW5J,EAAEnO,CAAF,GAAM,KAAKiP,KAAtB,CAAN;EACA+kB,QAAMnc,OAAN,CAAchR,KAAd,CAAoB,IAApB,EAA0B,CAACsH,CAAD,CAA1B;EACAimB,SAAOvzB,KAAKE,GAAL,CAASoN,EAAElO,CAAX,CAAP;EACAo0B,SAAOxzB,KAAK8W,GAAL,CAASxJ,EAAElO,CAAX,CAAP;EACAq0B,SAAOzzB,KAAK8W,GAAL,CAASxJ,EAAEnO,CAAX,CAAP;EACAiQ,MAAI,KAAKD,EAAL,GAAU,KAAKmkB,EAAf,IAAqB,IAAI,KAAKF,KAAL,GAAaG,IAAjB,GAAwB,KAAKF,KAAL,GAAaG,IAAb,GAAoBC,IAAjE,CAAJ;EACAnmB,IAAEnO,CAAF,GAAMiQ,IAAIokB,IAAJ,GAAWxzB,KAAKE,GAAL,CAASoN,EAAEnO,CAAX,CAAjB;EACAmO,IAAElO,CAAF,GAAMgQ,KAAK,KAAKikB,KAAL,GAAaE,IAAb,GAAoB,KAAKH,KAAL,GAAaI,IAAb,GAAoBC,IAA7C,CAAN;EACAnmB,IAAEnO,CAAF,GAAM,KAAK7E,CAAL,GAASgT,EAAEnO,CAAX,GAAe,KAAK4P,EAA1B;EACAzB,IAAElO,CAAF,GAAM,KAAK9E,CAAL,GAASgT,EAAElO,CAAX,GAAe,KAAK6P,EAA1B;EACA,SAAO3B,CAAP;EACD;;AAED,EAAO,SAAS8J,SAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAIimB,IAAJ,EAAUC,IAAV,EAAgBvc,GAAhB,EAAqBre,GAArB,EAA0B86B,GAA1B;EACApmB,IAAEnO,CAAF,GAAM,CAACmO,EAAEnO,CAAF,GAAM,KAAK4P,EAAZ,IAAkB,KAAKzU,CAA7B;EACAgT,IAAElO,CAAF,GAAM,CAACkO,EAAElO,CAAF,GAAM,KAAK6P,EAAZ,IAAkB,KAAK3U,CAA7B;;EAEAgT,IAAEnO,CAAF,IAAO,KAAKgQ,EAAZ;EACA7B,IAAElO,CAAF,IAAO,KAAK+P,EAAZ;EACA,MAAKukB,MAAMxD,MAAM5iB,EAAEnO,CAAR,EAAWmO,EAAElO,CAAb,CAAX,EAA6B;EAC3B,QAAIoB,IAAI,IAAIR,KAAK2iB,KAAL,CAAW+Q,GAAX,EAAgB,KAAKJ,EAArB,CAAZ;EACAC,WAAOvzB,KAAKE,GAAL,CAASM,CAAT,CAAP;EACAgzB,WAAOxzB,KAAK8W,GAAL,CAAStW,CAAT,CAAP;EACA5H,UAAMoH,KAAK2vB,IAAL,CAAU6D,OAAO,KAAKJ,KAAZ,GAAoB9lB,EAAElO,CAAF,GAAMm0B,IAAN,GAAa,KAAKF,KAAlB,GAA0BK,GAAxD,CAAN;EACAzc,UAAMjX,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAF,GAAMo0B,IAAjB,EAAuBG,MAAM,KAAKL,KAAX,GAAmBG,IAAnB,GAA0BlmB,EAAElO,CAAF,GAAM,KAAKg0B,KAAX,GAAmBG,IAApE,CAAN;EACD,GAND,MAOK;EACH36B,UAAM,KAAKk6B,KAAX;EACA7b,UAAM,CAAN;EACD;;EAED3J,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACAu6B,QAAM/b,OAAN,CAAcpR,KAAd,CAAoB,IAApB,EAA0B,CAACsH,CAAD,CAA1B;EACAA,IAAEnO,CAAF,GAAM+X,WAAW5J,EAAEnO,CAAF,GAAM,KAAKiP,KAAtB,CAAN;EACA,SAAOd,CAAP;EACD;;AAED,EAAO,IAAIiK,UAAQ,CAAC,0BAAD,EAA6B,uBAA7B,EAAsD,QAAtD,EAA+D,mCAA/D,EAAmG,sBAAnG,CAAZ;AACP,eAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA;EAJM,CAAf;;ECnDO,SAASoc,KAAT,CAAeC,IAAf,EAAqB3d,MAArB,EAA6B4d,KAA7B,EAAoC;EACzC5d,YAAU4d,KAAV;EACA,SAAQ7zB,KAAKwW,GAAL,CAAS,OAAOpL,UAAUwoB,IAAjB,CAAT,IAAmC5zB,KAAKK,GAAL,CAAS,CAAC,IAAI4V,MAAL,KAAgB,IAAIA,MAApB,CAAT,EAAsC,MAAM4d,KAA5C,CAA3C;EACD;;AAED,EAAO,SAASvnC,MAAT,GAAgB;;EAErB;EACA,OAAKyiB,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,OAAKE,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,OAAKpB,IAAL,GAAY,KAAKA,IAAL,IAAa,CAAzB;EACA,OAAKO,KAAL,GAAa,KAAKA,KAAL,IAAc,CAA3B;;EAEA,OAAK0lB,OAAL,GAAe9zB,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAf;EACA,OAAKkmB,OAAL,GAAe/zB,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAf;EACA,MAAI,KAAKoG,MAAT,EAAiB;EACf,QAAI,KAAK9E,EAAL,KAAY,CAAZ,IAAiB,CAACzgB,MAAM,KAAKwf,MAAX,CAAlB,IAAwClO,KAAKC,GAAL,CAAS,KAAK6zB,OAAd,KAA0BroB,KAAtE,EAA6E;EAC3E,WAAK0D,EAAL,GAAU,OAAO,IAAIkH,KAAK,KAAKxI,IAAV,IAAkB7N,KAAKE,GAAL,CAAS,KAAKgO,MAAd,CAA7B,CAAV;EACD;EACF,GAJD,MAKK;EACH,QAAIlO,KAAKC,GAAL,CAAS,KAAK6zB,OAAd,KAA0BroB,KAA9B,EAAqC;EACnC,UAAI,KAAKoC,IAAL,GAAY,CAAhB,EAAmB;EACjB;EACA;EACA,aAAKsI,GAAL,GAAW,CAAX;EACD,OAJD,MAKK;EACH;EACA;EACA,aAAKA,GAAL,GAAW,CAAC,CAAZ;EACD;EACF;EACD,SAAK6d,IAAL,GAAYh0B,KAAKoW,IAAL,CAAUpW,KAAKK,GAAL,CAAS,IAAI,KAAKtc,CAAlB,EAAqB,IAAI,KAAKA,CAA9B,IAAmCic,KAAKK,GAAL,CAAS,IAAI,KAAKtc,CAAlB,EAAqB,IAAI,KAAKA,CAA9B,CAA7C,CAAZ;EACA,QAAI,KAAKorB,EAAL,KAAY,CAAZ,IAAiB,CAACzgB,MAAM,KAAKwf,MAAX,CAAlB,IAAwClO,KAAKC,GAAL,CAAS,KAAK6zB,OAAd,KAA0BroB,KAAlE,IAA2EzL,KAAKC,GAAL,CAASD,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAAT,IAAkCzC,KAAjH,EAAwH;EACtH;EACA;EACA,WAAK0D,EAAL,GAAU,MAAM,KAAK6kB,IAAX,GAAkBjd,MAAM,KAAKhzB,CAAX,EAAcic,KAAKE,GAAL,CAAS,KAAKgO,MAAd,CAAd,EAAqClO,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAArC,CAAlB,GAAgFiJ,MAAM,KAAKpzB,CAAX,EAAc,KAAKoyB,GAAL,GAAW,KAAKjI,MAA9B,EAAsC,KAAKiI,GAAL,GAAWnW,KAAKE,GAAL,CAAS,KAAKgO,MAAd,CAAjD,CAA1F;EACD;EACD,SAAK+lB,GAAL,GAAWld,MAAM,KAAKhzB,CAAX,EAAc,KAAKgwC,OAAnB,EAA4B,KAAKD,OAAjC,CAAX;EACA,SAAKI,EAAL,GAAU,IAAIl0B,KAAK4W,IAAL,CAAU,KAAK+c,KAAL,CAAW,KAAK9lB,IAAhB,EAAsB,KAAKkmB,OAA3B,EAAoC,KAAKhwC,CAAzC,CAAV,CAAJ,GAA6DqnB,OAAvE;EACA,SAAK+oB,KAAL,GAAan0B,KAAK8W,GAAL,CAAS,KAAKod,EAAd,CAAb;EACA,SAAKE,KAAL,GAAap0B,KAAKE,GAAL,CAAS,KAAKg0B,EAAd,CAAb;EACD;EACF;;EAED;AACA,EAAO,SAASld,SAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA,MAAIi1B,SAASr0B,KAAKE,GAAL,CAAStH,GAAT,CAAb;EACA,MAAI07B,SAASt0B,KAAK8W,GAAL,CAASle,GAAT,CAAb;EACA,MAAImvB,CAAJ,EAAOvF,CAAP,EAAU+R,IAAV,EAAgBC,IAAhB,EAAsB/d,EAAtB,EAA0Bge,EAA1B;EACA,MAAIC,OAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAX;;EAEA,MAAIpO,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAASgX,MAAM,KAAK7I,KAApB,IAA6BpO,KAAKqL,EAA3C,KAAkDI,KAAlD,IAA2DzL,KAAKC,GAAL,CAASrH,MAAM,KAAKiV,IAApB,KAA6BpC,KAA5F,EAAmG;EACjG;EACA;EACA6B,MAAEnO,CAAF,GAAM+kB,GAAN;EACA5W,MAAElO,CAAF,GAAM8kB,GAAN;EACA,WAAO5W,CAAP;EACD;EACD,MAAI,KAAK2G,MAAT,EAAiB;EACf;EACA8T,QAAI,IAAI,KAAK5Y,EAAT,IAAe,IAAI,KAAK4kB,OAAL,GAAeM,MAAnB,GAA4B,KAAKP,OAAL,GAAeQ,MAAf,GAAwBt0B,KAAK8W,GAAL,CAAS4d,IAAT,CAAnE,CAAJ;EACApnB,MAAEnO,CAAF,GAAM,KAAK7E,CAAL,GAASytB,CAAT,GAAauM,MAAb,GAAsBt0B,KAAKE,GAAL,CAASw0B,IAAT,CAAtB,GAAuC,KAAK3lB,EAAlD;EACAzB,MAAElO,CAAF,GAAM,KAAK9E,CAAL,GAASytB,CAAT,IAAc,KAAK+L,OAAL,GAAeO,MAAf,GAAwB,KAAKN,OAAL,GAAeO,MAAf,GAAwBt0B,KAAK8W,GAAL,CAAS4d,IAAT,CAA9D,IAAgF,KAAKzlB,EAA3F;EACA,WAAO3B,CAAP;EACD,GAND,MAOK;EACHkV,QAAI,IAAIxiB,KAAK4W,IAAL,CAAU,KAAK+c,KAAL,CAAW/6B,GAAX,EAAgBy7B,MAAhB,EAAwB,KAAKtwC,CAA7B,CAAV,CAAJ,GAAiDqnB,OAArD;EACAopB,WAAOx0B,KAAK8W,GAAL,CAAS0L,CAAT,CAAP;EACA+R,WAAOv0B,KAAKE,GAAL,CAASsiB,CAAT,CAAP;EACA,QAAIxiB,KAAKC,GAAL,CAAS,KAAK6zB,OAAd,KAA0BroB,KAA9B,EAAqC;EACnCgL,WAAKU,MAAM,KAAKpzB,CAAX,EAAc6U,MAAM,KAAKud,GAAzB,EAA8B,KAAKA,GAAL,GAAWke,MAAzC,CAAL;EACAI,WAAK,IAAI,KAAKn6B,CAAT,GAAa,KAAK6U,EAAlB,GAAuBsH,EAAvB,GAA4B,KAAKud,IAAtC;EACA1mB,QAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAU0lB,KAAKz0B,KAAKE,GAAL,CAAS+W,MAAM,KAAK7I,KAApB,CAArB;EACAd,QAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAU,KAAKkH,GAAL,GAAWse,EAAX,GAAgBz0B,KAAK8W,GAAL,CAASG,MAAM,KAAK7I,KAApB,CAAhC;EACA;EACA,aAAOd,CAAP;EACD,KAPD,MAQK,IAAItN,KAAKC,GAAL,CAAS,KAAK8zB,OAAd,IAAyBtoB,KAA7B,EAAoC;EACvC;EACA;EACAsc,UAAI,IAAI,KAAKztB,CAAT,GAAa,KAAK6U,EAAlB,IAAwB,IAAIqlB,OAAOx0B,KAAK8W,GAAL,CAAS4d,IAAT,CAAnC,CAAJ;EACApnB,QAAElO,CAAF,GAAM2oB,IAAIwM,IAAV;EACD,KALI,MAMA;EACH;EACA;EACAxM,UAAI,IAAI,KAAKztB,CAAT,GAAa,KAAK6U,EAAlB,GAAuB,KAAK8kB,GAA5B,IAAmC,KAAKE,KAAL,IAAc,IAAI,KAAKC,KAAL,GAAaG,IAAjB,GAAwB,KAAKJ,KAAL,GAAaK,IAAb,GAAoBx0B,KAAK8W,GAAL,CAAS4d,IAAT,CAA1D,CAAnC,CAAJ;EACApnB,QAAElO,CAAF,GAAM2oB,KAAK,KAAKoM,KAAL,GAAaI,IAAb,GAAoB,KAAKH,KAAL,GAAaI,IAAb,GAAoBx0B,KAAK8W,GAAL,CAAS4d,IAAT,CAA7C,IAA+D,KAAKzlB,EAA1E;EACD;EACD3B,MAAEnO,CAAF,GAAM4oB,IAAIyM,IAAJ,GAAWx0B,KAAKE,GAAL,CAASw0B,IAAT,CAAX,GAA4B,KAAK3lB,EAAvC;EACD;EACD;EACA,SAAOzB,CAAP;EACD;;EAED;AACA,EAAO,SAAS8J,SAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACA,MAAIgI,GAAJ,EAASre,GAAT,EAAc6d,EAAd,EAAkBke,EAAlB,EAAsBC,GAAtB;EACA,MAAIH,KAAKz0B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAT;EACA,MAAI,KAAK6U,MAAT,EAAiB;EACf,QAAIzT,IAAI,IAAIR,KAAK4W,IAAL,CAAU6d,MAAM,IAAI,KAAKn6B,CAAT,GAAa,KAAK6U,EAAxB,CAAV,CAAZ;EACA8H,UAAM,KAAK7I,KAAX;EACAxV,UAAM,KAAKiV,IAAX;EACA,QAAI4mB,MAAMhpB,KAAV,EAAiB;EACf6B,QAAEnO,CAAF,GAAM8X,GAAN;EACA3J,QAAElO,CAAF,GAAMxG,GAAN;EACA,aAAO0U,CAAP;EACD;EACD1U,UAAMoH,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAAStW,CAAT,IAAc,KAAKuzB,OAAnB,GAA6BzmB,EAAElO,CAAF,GAAMY,KAAKE,GAAL,CAASM,CAAT,CAAN,GAAoB,KAAKszB,OAAzB,GAAmCW,EAA1E,CAAN;EACA,QAAIz0B,KAAKC,GAAL,CAAS,KAAK6zB,OAAd,IAAyBroB,KAA7B,EAAoC;EAClC,UAAI,KAAKoC,IAAL,GAAY,CAAhB,EAAmB;EACjBoJ,cAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgB,CAAE,CAAF,GAAMmO,EAAElO,CAAxB,CAAxB,CAAN;EACD,OAFD,MAGK;EACH6X,cAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgBmO,EAAElO,CAAlB,CAAxB,CAAN;EACD;EACF,KAPD,MAQK;EACH6X,YAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAF,GAAMa,KAAKE,GAAL,CAASM,CAAT,CAAjB,EAA8Bi0B,KAAK,KAAKX,OAAV,GAAoB9zB,KAAK8W,GAAL,CAAStW,CAAT,CAApB,GAAkC8M,EAAElO,CAAF,GAAM,KAAK20B,OAAX,GAAqB/zB,KAAKE,GAAL,CAASM,CAAT,CAArF,CAAxB,CAAN;EACD;EACD8M,MAAEnO,CAAF,GAAM8X,GAAN;EACA3J,MAAElO,CAAF,GAAMxG,GAAN;EACA,WAAO0U,CAAP;EACD,GAxBD,MAyBK;EACH,QAAItN,KAAKC,GAAL,CAAS,KAAK6zB,OAAd,KAA0BroB,KAA9B,EAAqC;EACnC,UAAIgpB,MAAMhpB,KAAV,EAAiB;EACf7S,cAAM,KAAKiV,IAAX;EACAoJ,cAAM,KAAK7I,KAAX;EACAd,UAAEnO,CAAF,GAAM8X,GAAN;EACA3J,UAAElO,CAAF,GAAMxG,GAAN;EACA;EACA,eAAO0U,CAAP;EACD;EACDA,QAAEnO,CAAF,IAAO,KAAKgX,GAAZ;EACA7I,QAAElO,CAAF,IAAO,KAAK+W,GAAZ;EACAM,WAAKge,KAAK,KAAKT,IAAV,IAAkB,IAAI,KAAK15B,CAAT,GAAa,KAAK6U,EAApC,CAAL;EACAvW,YAAM,KAAKud,GAAL,GAAWmB,MAAM,KAAKvzB,CAAX,EAAc0yB,EAAd,CAAjB;EACAQ,YAAM,KAAKd,GAAL,GAAWe,WAAW,KAAKf,GAAL,GAAW,KAAK/H,KAAhB,GAAwBpO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgB,CAAE,CAAF,GAAMmO,EAAElO,CAAxB,CAAnC,CAAjB;EACD,KAdD,MAeK;EACHu1B,WAAK,IAAI30B,KAAK4W,IAAL,CAAU6d,KAAK,KAAKN,KAAV,IAAmB,IAAI,KAAK75B,CAAT,GAAa,KAAK6U,EAAlB,GAAuB,KAAK8kB,GAA/C,CAAV,CAAT;EACAhd,YAAM,KAAK7I,KAAX;EACA,UAAIqmB,MAAMhpB,KAAV,EAAiB;EACfmpB,cAAM,KAAKV,EAAX;EACD,OAFD,MAGK;EACHU,cAAM50B,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAAS6d,EAAT,IAAe,KAAKP,KAApB,GAA4B9mB,EAAElO,CAAF,GAAMY,KAAKE,GAAL,CAASy0B,EAAT,CAAN,GAAqB,KAAKR,KAA1B,GAAkCM,EAAxE,CAAN;EACAxd,cAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAF,GAAMa,KAAKE,GAAL,CAASy0B,EAAT,CAAjB,EAA+BF,KAAK,KAAKN,KAAV,GAAkBn0B,KAAK8W,GAAL,CAAS6d,EAAT,CAAlB,GAAiCrnB,EAAElO,CAAF,GAAM,KAAKg1B,KAAX,GAAmBp0B,KAAKE,GAAL,CAASy0B,EAAT,CAAnF,CAAxB,CAAN;EACD;EACD/7B,YAAM,CAAC,CAAD,GAAK0e,MAAM,KAAKvzB,CAAX,EAAcic,KAAKwW,GAAL,CAAS,OAAOpL,UAAUwpB,GAAjB,CAAT,CAAd,CAAX;EACD;EACF;EACDtnB,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;;EAEA;EACA,SAAO0U,CAAP;EAED;;AAED,EAAO,IAAIiK,UAAQ,CAAC,OAAD,EAAU,0BAAV,EAAsC,iCAAtC,EAAyE,qBAAzE,CAAZ;AACP,cAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA,OAJM;EAKboc,SAAOA;EALM,CAAf;;EChLA;;;;;;;;AAQA,EAAO,SAASrnC,MAAT,GAAgB;EACrB,MAAIuoC,OAAO,KAAKhnB,IAAhB;EACA,OAAKinB,OAAL,GAAe,KAAK1mB,KAApB;EACA,MAAI2mB,UAAU/0B,KAAKE,GAAL,CAAS20B,IAAT,CAAd;EACA,MAAIG,gBAAgB,KAAK16B,CAAzB;EACA,MAAI26B,OAAO,KAAKtnB,EAAhB;EACA,MAAIunB,aAAa,IAAID,IAArB;EACA,MAAIE,KAAK,IAAID,UAAJ,GAAiBl1B,KAAKK,GAAL,CAAS60B,UAAT,EAAqB,CAArB,CAA1B;EACA,MAAInxC,IAAI,KAAKA,CAAL,GAASic,KAAKoW,IAAL,CAAU+e,EAAV,CAAjB;EACA,OAAKC,CAAL,GAAS,KAAKjmB,EAAL,GAAU6lB,aAAV,GAA0Bh1B,KAAKoW,IAAL,CAAU,IAAI+e,EAAd,CAA1B,IAA+C,IAAIA,KAAKn1B,KAAKK,GAAL,CAAS00B,OAAT,EAAkB,CAAlB,CAAxD,CAAT;EACA,OAAKtmB,KAAL,GAAazO,KAAKoW,IAAL,CAAU,IAAI+e,MAAM,IAAIA,EAAV,IAAgBn1B,KAAKK,GAAL,CAASL,KAAK8W,GAAL,CAAS+d,IAAT,CAAT,EAAyB,CAAzB,CAA9B,CAAb;EACA,OAAKQ,EAAL,GAAUr1B,KAAK2vB,IAAL,CAAUoF,UAAU,KAAKtmB,KAAzB,CAAV;EACA,MAAI6mB,KAAKt1B,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAASxW,KAAKqL,EAAL,GAAU,CAAV,GAAc,KAAKgqB,EAAL,GAAU,CAAjC,CAAT,CAAT;EACA,MAAIE,KAAKv1B,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAASxW,KAAKqL,EAAL,GAAU,CAAV,GAAcwpB,OAAO,CAA9B,CAAT,CAAT;EACA,MAAIW,KAAKx1B,KAAKvJ,GAAL,CAAS,CAAC,IAAI1S,IAAIgxC,OAAT,KAAqB,IAAIhxC,IAAIgxC,OAA7B,CAAT,CAAT;EACA,OAAK/B,CAAL,GAASsC,KAAK,KAAK7mB,KAAL,GAAa8mB,EAAlB,GAAuB,KAAK9mB,KAAL,GAAa1qB,CAAb,GAAiB,CAAjB,GAAqByxC,EAArD;EACD;;AAED,EAAO,SAASxe,SAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAImoB,MAAMz1B,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAASxW,KAAKqL,EAAL,GAAU,CAAV,GAAciC,EAAElO,CAAF,GAAM,CAA7B,CAAT,CAAV;EACA,MAAIs2B,MAAM,KAAK3xC,CAAL,GAAS,CAAT,GAAaic,KAAKvJ,GAAL,CAAS,CAAC,IAAI,KAAK1S,CAAL,GAASic,KAAKE,GAAL,CAASoN,EAAElO,CAAX,CAAd,KAAgC,IAAI,KAAKrb,CAAL,GAASic,KAAKE,GAAL,CAASoN,EAAElO,CAAX,CAA7C,CAAT,CAAvB;EACA,MAAIu2B,IAAI,CAAC,KAAKlnB,KAAN,IAAegnB,MAAMC,GAArB,IAA4B,KAAK1C,CAAzC;;EAEA;EACA,MAAI3jB,IAAI,KAAKrP,KAAK4W,IAAL,CAAU5W,KAAKqX,GAAL,CAASse,CAAT,CAAV,IAAyB31B,KAAKqL,EAAL,GAAU,CAAxC,CAAR;;EAEA;EACA,MAAI2c,IAAI,KAAKvZ,KAAL,IAAcnB,EAAEnO,CAAF,GAAM,KAAK21B,OAAzB,CAAR;;EAEA;EACA,MAAIc,OAAO51B,KAAK4W,IAAL,CAAU5W,KAAKE,GAAL,CAAS8nB,CAAT,KAAehoB,KAAKE,GAAL,CAAS,KAAKm1B,EAAd,IAAoBr1B,KAAKwW,GAAL,CAASnH,CAAT,CAApB,GAAkCrP,KAAK8W,GAAL,CAAS,KAAKue,EAAd,IAAoBr1B,KAAK8W,GAAL,CAASkR,CAAT,CAArE,CAAV,CAAX;;EAEA,MAAI6N,OAAO71B,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAAS,KAAKue,EAAd,IAAoBr1B,KAAKE,GAAL,CAASmP,CAAT,CAApB,GAAkCrP,KAAKE,GAAL,CAAS,KAAKm1B,EAAd,IAAoBr1B,KAAK8W,GAAL,CAASzH,CAAT,CAApB,GAAkCrP,KAAK8W,GAAL,CAASkR,CAAT,CAA9E,CAAX;;EAEA1a,IAAElO,CAAF,GAAM,KAAKg2B,CAAL,GAAS,CAAT,GAAap1B,KAAKvJ,GAAL,CAAS,CAAC,IAAIuJ,KAAKE,GAAL,CAAS21B,IAAT,CAAL,KAAwB,IAAI71B,KAAKE,GAAL,CAAS21B,IAAT,CAA5B,CAAT,CAAb,GAAqE,KAAK5mB,EAAhF;EACA3B,IAAEnO,CAAF,GAAM,KAAKi2B,CAAL,GAASQ,IAAT,GAAgB,KAAK7mB,EAA3B;EACA,SAAOzB,CAAP;EACD;;AAED,EAAO,SAAS8J,SAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAImV,IAAInV,EAAEnO,CAAF,GAAM,KAAK4P,EAAnB;EACA,MAAIyT,IAAIlV,EAAElO,CAAF,GAAM,KAAK6P,EAAnB;;EAEA,MAAI2mB,OAAOnT,IAAI,KAAK2S,CAApB;EACA,MAAIS,OAAO,KAAK71B,KAAK4W,IAAL,CAAU5W,KAAKqX,GAAL,CAASmL,IAAI,KAAK4S,CAAlB,CAAV,IAAkCp1B,KAAKqL,EAAL,GAAU,CAAjD,CAAX;;EAEA,MAAIgE,IAAIrP,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAAS,KAAKue,EAAd,IAAoBr1B,KAAKE,GAAL,CAAS21B,IAAT,CAApB,GAAqC71B,KAAKE,GAAL,CAAS,KAAKm1B,EAAd,IAAoBr1B,KAAK8W,GAAL,CAAS+e,IAAT,CAApB,GAAqC71B,KAAK8W,GAAL,CAAS8e,IAAT,CAApF,CAAR;EACA,MAAI5N,IAAIhoB,KAAK4W,IAAL,CAAU5W,KAAKE,GAAL,CAAS01B,IAAT,KAAkB51B,KAAK8W,GAAL,CAAS,KAAKue,EAAd,IAAoBr1B,KAAK8W,GAAL,CAAS8e,IAAT,CAApB,GAAqC51B,KAAKE,GAAL,CAAS,KAAKm1B,EAAd,IAAoBr1B,KAAKwW,GAAL,CAASqf,IAAT,CAA3E,CAAV,CAAR;;EAEA,MAAIC,SAAS,KAAKhB,OAAL,GAAe9M,IAAI,KAAKvZ,KAArC;;EAEA,MAAIknB,IAAI,CAAR;EACA,MAAII,MAAM1mB,CAAV;EACA,MAAI2mB,UAAU,CAAC,IAAf;EACA,MAAIC,YAAY,CAAhB;EACA,SAAOj2B,KAAKC,GAAL,CAAS81B,MAAMC,OAAf,IAA0B,SAAjC,EAA4C;EAC1C,QAAI,EAAEC,SAAF,GAAc,EAAlB,EAAsB;EACpB;EACA;EACD;EACD;EACAN,QAAI,IAAI,KAAKlnB,KAAT,IAAkBzO,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAASxW,KAAKqL,EAAL,GAAU,CAAV,GAAcgE,IAAI,CAA3B,CAAT,IAA0C,KAAK2jB,CAAjE,IAAsE,KAAKjvC,CAAL,GAASic,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAASxW,KAAKqL,EAAL,GAAU,CAAV,GAAcrL,KAAK2vB,IAAL,CAAU,KAAK5rC,CAAL,GAASic,KAAKE,GAAL,CAAS61B,GAAT,CAAnB,IAAoC,CAA3D,CAAT,CAAnF;EACAC,cAAUD,GAAV;EACAA,UAAM,IAAI/1B,KAAK4W,IAAL,CAAU5W,KAAKqX,GAAL,CAASse,CAAT,CAAV,CAAJ,GAA6B31B,KAAKqL,EAAL,GAAU,CAA7C;EACD;;EAEDiC,IAAEnO,CAAF,GAAM22B,MAAN;EACAxoB,IAAElO,CAAF,GAAM22B,GAAN;EACA,SAAOzoB,CAAP;EACD;;AAED,EAAO,IAAIiK,UAAQ,CAAC,QAAD,CAAZ;AACP,eAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA;EAJM,CAAf;;EC3EA,IAAI2e,MAAM,IAAV;;EAEA,SAASC,OAAT,CAAiBxU,CAAjB,EAAoB;EAClB,MAAIyU,mBAAmB,CAAC,yBAAD,EAA2B,gDAA3B,CAAvB;EACA,MAAIC,iBAAiBtmC,QAAO4xB,EAAEnO,UAAT,MAAwB,QAAxB,GAAmC5uB,OAAOkC,IAAP,CAAY66B,EAAEnO,UAAd,EAA0B,CAA1B,CAAnC,GAAkEmO,EAAEnO,UAAzF;;EAEA,SAAO,aAAamO,CAAb,IAAkB,YAAYA,CAA9B,IAAmCyU,iBAAiBzxC,OAAjB,CAAyB0xC,cAAzB,MAA6C,CAAC,CAAxF;EACD;;EAGD;;AAEA,EAAO,SAAS/pC,MAAT,GAAgB;EACrB,MAAI6pB,GAAJ;EAAA,MAASI,GAAT;EAAA,MAAc+f,MAAd;EAAA,MAAsB3L,CAAtB;EAAA,MAAyB4L,CAAzB;EAAA,MAA4BC,CAA5B;EAAA,MAA+B3/B,CAA/B;EAAA,MAAkC4/B,MAAlC;EAAA,MAA0CnpB,CAA1C;EAAA,MAA6CopB,CAA7C;EAAA,MAAgDhoB,QAAQ,CAAxD;EAAA,MACEioB,MADF;EAAA,MACUC,OAAO,CADjB;EAAA,MACoBC,OAAO,CAD3B;EAAA,MAC8BC,OAAO,CADrC;EAAA,MACwCC,OAAO,CAD/C;EAAA,MACkDC,OAAO,CADzD;EAAA,MAC4DC,UAAU,CADtE;EAAA,MACyEC,EADzE;;EAGA;EACA;EACA,OAAKC,MAAL,GAAchB,QAAQ,IAAR,CAAd;EACA,OAAKiB,MAAL,GAAc,YAAY,IAA1B;;EAEA,MAAIC,MAAM,KAAV;EACA,MAAI,WAAW,IAAf,EAAqB;EACnBA,UAAM,IAAN;EACD;;EAED,MAAIC,MAAM,KAAV;EACA,MAAI,0BAA0B,IAA9B,EAAoC;EAClCA,UAAM,IAAN;EACD;;EAED,MAAID,GAAJ,EAAS;EACPJ,cAAU,KAAKxoB,KAAf;EACD;;EAED,MAAI6oB,GAAJ,EAAS;EACP5oB,YAAS,KAAKC,oBAAL,GAA4BjD,GAArC;EACD;;EAED,MAAI2rB,OAAOC,GAAX,EAAgB;EACdV,WAAO,KAAK/nB,KAAZ;EACD,GAFD,MAEO;EACLgoB,WAAO,KAAKvoB,KAAZ;EACAyoB,WAAO,KAAKhpB,IAAZ;EACA+oB,WAAO,KAAKtoB,KAAZ;EACAwoB,WAAO,KAAK/oB,IAAZ;;EAEA,QAAIjO,KAAKC,GAAL,CAAS82B,OAAOC,IAAhB,KAAyBd,GAAzB,IAAgC,CAAC/f,MAAMnW,KAAKC,GAAL,CAAS82B,IAAT,CAAP,KAA0Bb,GAA1D,IACAl2B,KAAKC,GAAL,CAASkW,MAAM/K,OAAf,KAA2B8qB,GAD3B,IACkCl2B,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAAS,KAAK4N,IAAd,IAAsBzC,OAA/B,KAA2C8qB,GAD7E,IAEAl2B,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAAS+2B,IAAT,IAAiB5rB,OAA1B,KAAsC8qB,GAF1C,EAE+C;EAC7C,YAAM,IAAIxsC,KAAJ,EAAN;EACD;EACF;;EAED,MAAI6tC,SAAS,MAAM,KAAK1gB,EAAxB;EACAN,QAAMvW,KAAKoW,IAAL,CAAUmhB,MAAV,CAAN;;EAEA,MAAIv3B,KAAKC,GAAL,CAAS,KAAK4N,IAAd,IAAsBpC,KAA1B,EAAiC;EAC/BgrB,aAASz2B,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAT;EACAyoB,aAASt2B,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAT;EACAsI,UAAM,IAAI,KAAKU,EAAL,GAAU4f,MAAV,GAAmBA,MAA7B;EACA,SAAKrG,CAAL,GAASkG,SAASA,MAAlB;EACA,SAAKlG,CAAL,GAASpwB,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAL,GAAU,KAAKuZ,CAAf,GAAmB,KAAKA,CAAxB,GAA4BmH,MAA1C,CAAT;EACA,SAAKxP,CAAL,GAAS,KAAKqI,CAAL,GAAS,KAAKjhB,EAAd,GAAmBoH,GAAnB,GAAyBJ,GAAlC;EACAwU,QAAI,KAAKyF,CAAL,GAAS7Z,GAAT,IAAgB+f,SAASt2B,KAAKoW,IAAL,CAAUD,GAAV,CAAzB,CAAJ;EACAogB,QAAI5L,IAAIA,CAAJ,GAAO,CAAX;;EAEA,QAAI4L,KAAK,CAAT,EAAY;EACVA,UAAI,CAAJ;EACD,KAFD,MAEO;EACLA,UAAIv2B,KAAKoW,IAAL,CAAUmgB,CAAV,CAAJ;EACA,UAAI,KAAK1oB,IAAL,GAAY,CAAhB,EAAmB;EACjB0oB,YAAI,CAACA,CAAL;EACD;EACF;;EAED,SAAKiB,CAAL,GAASjB,KAAK5L,CAAd;EACA,SAAK6M,CAAL,IAAUx3B,KAAKK,GAAL,CAAS8W,MAAM,KAAKpzB,CAAX,EAAc,KAAK8pB,IAAnB,EAAyB4oB,MAAzB,CAAT,EAA2C,KAAKrG,CAAhD,CAAV;EACD,GArBD,MAqBO;EACL,SAAKA,CAAL,GAAS,IAAI7Z,GAAb;EACA,SAAKwR,CAAL,GAAS,KAAK5Y,EAAd;EACA,SAAKqoB,CAAL,GAAS7M,IAAI4L,IAAI,CAAjB;EACD;;EAED,MAAIc,OAAOC,GAAX,EAAgB;EACd,QAAID,GAAJ,EAAS;EACPV,eAAS32B,KAAK2vB,IAAL,CAAU3vB,KAAKE,GAAL,CAAS+2B,OAAT,IAAoBtM,CAA9B,CAAT;EACA,UAAI,CAAC2M,GAAL,EAAU;EACR5oB,gBAAQuoB,OAAR;EACD;EACF,KALD,MAKO;EACLN,eAASjoB,KAAT;EACAuoB,gBAAUj3B,KAAK2vB,IAAL,CAAUhF,IAAI3qB,KAAKE,GAAL,CAASy2B,MAAT,CAAd,CAAV;EACD;EACD,SAAKc,IAAL,GAAYb,OAAO52B,KAAK2vB,IAAL,CAAU,OAAO4G,IAAI,IAAIA,CAAf,IAAoBv2B,KAAKwW,GAAL,CAASmgB,MAAT,CAA9B,IAAkD,KAAKvG,CAA1E;EACD,GAXD,MAWO;EACLoG,QAAIx2B,KAAKK,GAAL,CAAS8W,MAAM,KAAKpzB,CAAX,EAAcgzC,IAAd,EAAoB/2B,KAAKE,GAAL,CAAS62B,IAAT,CAApB,CAAT,EAA8C,KAAK3G,CAAnD,CAAJ;EACAv5B,QAAImJ,KAAKK,GAAL,CAAS8W,MAAM,KAAKpzB,CAAX,EAAcizC,IAAd,EAAoBh3B,KAAKE,GAAL,CAAS82B,IAAT,CAApB,CAAT,EAA8C,KAAK5G,CAAnD,CAAJ;EACAmG,QAAI,KAAKiB,CAAL,GAAShB,CAAb;EACAlpB,QAAI,CAACzW,IAAI2/B,CAAL,KAAW3/B,IAAI2/B,CAAf,CAAJ;EACAE,QAAI,KAAKc,CAAL,GAAS,KAAKA,CAAlB;EACAd,QAAI,CAACA,IAAI7/B,IAAI2/B,CAAT,KAAeE,IAAI7/B,IAAI2/B,CAAvB,CAAJ;EACArgB,UAAM0gB,OAAOC,IAAb;;EAEA,QAAI3gB,MAAM,CAACnW,KAAK03B,EAAhB,EAAoB;EAClBZ,cAAOjrB,MAAP;EACD,KAFD,MAEO,IAAIsK,MAAMnW,KAAK03B,EAAf,EAAmB;EACxBZ,cAAQjrB,MAAR;EACD;;EAED,SAAK4rB,IAAL,GAAYvgB,WAAW,OAAO2f,OAAOC,IAAd,IAAsB92B,KAAK4W,IAAL,CAAU8f,IAAI12B,KAAKwW,GAAL,CAAS,MAAM,KAAK4Z,CAAX,IAAgByG,OAAOC,IAAvB,CAAT,CAAJ,GAA6CxpB,CAAvD,IAA4D,KAAK8iB,CAAlG,CAAZ;EACAuG,aAAS32B,KAAK4W,IAAL,CAAU,IAAI5W,KAAKE,GAAL,CAAS,KAAKkwB,CAAL,GAASlZ,WAAW2f,OAAO,KAAKY,IAAvB,CAAlB,CAAJ,IAAuDlB,IAAI,IAAIA,CAA/D,CAAV,CAAT;EACA7nB,YAAQuoB,UAAUj3B,KAAK2vB,IAAL,CAAUhF,IAAI3qB,KAAKE,GAAL,CAASy2B,MAAT,CAAd,CAAlB;EACD;;EAED,OAAKgB,MAAL,GAAc33B,KAAKE,GAAL,CAASy2B,MAAT,CAAd;EACA,OAAKiB,MAAL,GAAc53B,KAAK8W,GAAL,CAAS6f,MAAT,CAAd;EACA,OAAKkB,MAAL,GAAc73B,KAAKE,GAAL,CAASwO,KAAT,CAAd;EACA,OAAKopB,MAAL,GAAc93B,KAAK8W,GAAL,CAASpI,KAAT,CAAd;;EAEA,OAAKqpB,EAAL,GAAU,IAAI,KAAK3H,CAAnB;EACA,OAAK4H,GAAL,GAAW,KAAKjQ,CAAL,GAAS,KAAKgQ,EAAzB;EACA,OAAKE,GAAL,GAAW,IAAI,KAAKD,GAApB;EACAd,OAAK,KAAKnP,CAAL,GAAS,KAAKqI,CAAnB;;EAEA,MAAI,KAAK+G,MAAT,EAAiB;EACf,SAAKe,GAAL,GAAW,CAAX;EACD,GAFD,MAEO;EACL,SAAKA,GAAL,GAAWl4B,KAAKC,GAAL,CAAS,KAAK+3B,GAAL,GAAWh4B,KAAK4W,IAAL,CAAU5W,KAAKoW,IAAL,CAAUuU,IAAIA,CAAJ,GAAQ,CAAlB,IAAuB3qB,KAAK8W,GAAL,CAASmgB,OAAT,CAAjC,CAApB,CAAX;;EAEA,QAAI,KAAKppB,IAAL,GAAY,CAAhB,EAAmB;EACjB,WAAKqqB,GAAL,GAAW,CAAE,KAAKA,GAAlB;EACD;EACF;;EAED3B,MAAI,MAAMI,MAAV;EACA,OAAKwB,QAAL,GAAgB,KAAKH,GAAL,GAAWh4B,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAAS5K,SAAS2qB,CAAlB,CAAT,CAA3B;EACA,OAAK6B,QAAL,GAAgB,KAAKJ,GAAL,GAAWh4B,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAAS5K,SAAS2qB,CAAlB,CAAT,CAA3B;EACD;;EAGD;;AAEA,EAAO,SAASvf,SAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAIvR,SAAS,EAAb;EACA,MAAI45B,CAAJ,EAAOpM,CAAP,EAAU8O,CAAV,EAAanQ,CAAb,EAAgBoQ,CAAhB,EAAmB7I,IAAnB,EAAyBhvB,CAAzB,EAA4BpT,CAA5B;EACAigB,IAAEnO,CAAF,GAAMmO,EAAEnO,CAAF,GAAM,KAAKs4B,IAAjB;;EAEA,MAAIz3B,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAASqN,EAAElO,CAAX,IAAgBgM,OAAzB,IAAoCK,KAAxC,EAA+C;EAC7C6sB,QAAI,KAAKd,CAAL,GAASx3B,KAAKK,GAAL,CAAS8W,MAAM,KAAKpzB,CAAX,EAAcupB,EAAElO,CAAhB,EAAmBY,KAAKE,GAAL,CAASoN,EAAElO,CAAX,CAAnB,CAAT,EAA4C,KAAKgxB,CAAjD,CAAb;;EAEAX,WAAO,IAAI6I,CAAX;EACA3C,QAAI,OAAO2C,IAAI7I,IAAX,CAAJ;EACAlG,QAAI,OAAO+O,IAAI7I,IAAX,CAAJ;EACAvH,QAAIloB,KAAKE,GAAL,CAAS,KAAKkwB,CAAL,GAAS9iB,EAAEnO,CAApB,CAAJ;EACAk5B,QAAI,CAAC1C,IAAI,KAAKgC,MAAT,GAAkBzP,IAAI,KAAK0P,MAA5B,IAAsCrO,CAA1C;;EAEA,QAAIvpB,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAASo4B,CAAT,IAAc,GAAvB,IAA8B5sB,KAAlC,EAAyC;EACvC,YAAM,IAAI/hB,KAAJ,EAAN;EACD;;EAED2D,QAAI,MAAM,KAAK2qC,GAAX,GAAiBh4B,KAAKvJ,GAAL,CAAS,CAAC,IAAI4hC,CAAL,KAAS,IAAIA,CAAb,CAAT,CAArB;EACA5I,WAAOzvB,KAAK8W,GAAL,CAAS,KAAKsZ,CAAL,GAAS9iB,EAAEnO,CAApB,CAAP;;EAEA,QAAIa,KAAKC,GAAL,CAASwvB,IAAT,IAAiByG,GAArB,EAA0B;EACxBz1B,UAAI,KAAKsnB,CAAL,GAASza,EAAEnO,CAAf;EACD,KAFD,MAEO;EACLsB,UAAI,KAAKu3B,GAAL,GAAWh4B,KAAK2iB,KAAL,CAAYgT,IAAI,KAAKiC,MAAT,GAAkB1P,IAAI,KAAKyP,MAAvC,EAAgDlI,IAAhD,CAAf;EACD;EACF,GArBD,MAqBO;EACLpiC,QAAIigB,EAAElO,CAAF,GAAM,CAAN,GAAU,KAAK+4B,QAAf,GAA0B,KAAKC,QAAnC;EACA33B,QAAI,KAAKu3B,GAAL,GAAW1qB,EAAElO,CAAjB;EACD;;EAED,MAAI,KAAKg4B,MAAT,EAAiB;EACfr7B,WAAOoD,CAAP,GAAWsB,CAAX;EACA1E,WAAOqD,CAAP,GAAW/R,CAAX;EACD,GAHD,MAGO;EACLoT,SAAK,KAAKy3B,GAAV;EACAn8B,WAAOoD,CAAP,GAAW9R,IAAI,KAAKyqC,MAAT,GAAkBr3B,IAAI,KAAKo3B,MAAtC;EACA97B,WAAOqD,CAAP,GAAWqB,IAAI,KAAKq3B,MAAT,GAAkBzqC,IAAI,KAAKwqC,MAAtC;EACD;;EAED97B,SAAOoD,CAAP,GAAY,KAAK7E,CAAL,GAASyB,OAAOoD,CAAhB,GAAoB,KAAK4P,EAArC;EACAhT,SAAOqD,CAAP,GAAY,KAAK9E,CAAL,GAASyB,OAAOqD,CAAhB,GAAoB,KAAK6P,EAArC;;EAEA,SAAOlT,MAAP;EACD;;AAED,EAAO,SAASqb,SAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI7M,CAAJ,EAAOpT,CAAP,EAAUkrC,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B;EACA,MAAI58B,SAAS,EAAb;;EAEAuR,IAAEnO,CAAF,GAAM,CAACmO,EAAEnO,CAAF,GAAM,KAAK4P,EAAZ,KAAmB,MAAM,KAAKzU,CAA9B,CAAN;EACAgT,IAAElO,CAAF,GAAM,CAACkO,EAAElO,CAAF,GAAM,KAAK6P,EAAZ,KAAmB,MAAM,KAAK3U,CAA9B,CAAN;;EAEA,MAAI,KAAK88B,MAAT,EAAiB;EACf/pC,QAAIigB,EAAElO,CAAN;EACAqB,QAAI6M,EAAEnO,CAAN;EACD,GAHD,MAGO;EACL9R,QAAIigB,EAAEnO,CAAF,GAAM,KAAK24B,MAAX,GAAoBxqB,EAAElO,CAAF,GAAM,KAAKy4B,MAAnC;EACAp3B,QAAI6M,EAAElO,CAAF,GAAM,KAAK04B,MAAX,GAAoBxqB,EAAEnO,CAAF,GAAM,KAAK04B,MAA/B,GAAwC,KAAKK,GAAjD;EACD;;EAEDK,OAAKv4B,KAAKqX,GAAL,CAAS,CAAC,KAAK4gB,GAAN,GAAY5qC,CAArB,CAAL;EACAmrC,OAAK,OAAOD,KAAK,IAAIA,EAAhB,CAAL;EACAE,OAAK,OAAOF,KAAK,IAAIA,EAAhB,CAAL;EACAG,OAAK14B,KAAKE,GAAL,CAAS,KAAK+3B,GAAL,GAAWx3B,CAApB,CAAL;EACAk4B,OAAK,CAACD,KAAK,KAAKd,MAAV,GAAmBY,KAAK,KAAKb,MAA9B,IAAwCc,EAA7C;;EAEA,MAAIz4B,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAAS04B,EAAT,IAAe,CAAxB,IAA6BltB,KAAjC,EAAwC;EACtC1P,WAAOoD,CAAP,GAAW,CAAX;EACApD,WAAOqD,CAAP,GAAWu5B,KAAK,CAAL,GAAS,CAACvtB,OAAV,GAAoBA,OAA/B;EACD,GAHD,MAGO;EACLrP,WAAOqD,CAAP,GAAW,KAAKo4B,CAAL,GAASx3B,KAAKoW,IAAL,CAAU,CAAC,IAAIuiB,EAAL,KAAY,IAAIA,EAAhB,CAAV,CAApB;EACA58B,WAAOqD,CAAP,GAAWkY,MAAM,KAAKvzB,CAAX,EAAcic,KAAKK,GAAL,CAAStE,OAAOqD,CAAhB,EAAmB,IAAI,KAAKgxB,CAA5B,CAAd,CAAX;;EAEA,QAAIr0B,OAAOqD,CAAP,KAAakiB,QAAjB,EAA2B;EACzB,YAAM,IAAI53B,KAAJ,EAAN;EACD;;EAEDqS,WAAOoD,CAAP,GAAW,CAAC,KAAK44B,EAAN,GAAW/3B,KAAK2iB,KAAL,CAAY6V,KAAK,KAAKZ,MAAV,GAAmBc,KAAK,KAAKf,MAAzC,EAAkD33B,KAAK8W,GAAL,CAAS,KAAKmhB,GAAL,GAAWx3B,CAApB,CAAlD,CAAtB;EACD;;EAED1E,SAAOoD,CAAP,IAAY,KAAKs4B,IAAjB;;EAEA,SAAO17B,MAAP;EACD;;AAED,EAAO,IAAIwb,WAAQ,CAAC,yBAAD,EAA4B,yBAA5B,EAAuD,gDAAvD,EAAyG,kDAAzG,EAA6J,wCAA7J,EAAuM,kBAAvM,EAA2N,OAA3N,CAAZ;AACP,cAAe;EACbjrB,QAAMA,MADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA;EAJM,CAAf;;ECrOO,SAASjrB,OAAT,GAAgB;;EAErB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA,MAAI,CAAC,KAAK2hB,IAAV,EAAgB;EACd,SAAKA,IAAL,GAAY,KAAKF,IAAjB;EACD,GAhBoB;EAiBrB,MAAI,CAAC,KAAKoB,EAAV,EAAc;EACZ,SAAKA,EAAL,GAAU,CAAV;EACD;EACD,OAAKJ,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,OAAKE,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA;EACA,MAAIjP,KAAKC,GAAL,CAAS,KAAK8N,IAAL,GAAY,KAAKE,IAA1B,IAAkCxC,KAAtC,EAA6C;EAC3C;EACD;;EAED,MAAIgkB,OAAO,KAAKpgB,CAAL,GAAS,KAAK/U,CAAzB;EACA,OAAKvW,CAAL,GAASic,KAAKoW,IAAL,CAAU,IAAIqZ,OAAOA,IAArB,CAAT;;EAEA,MAAImJ,OAAO54B,KAAKE,GAAL,CAAS,KAAK6N,IAAd,CAAX;EACA,MAAI8qB,OAAO74B,KAAK8W,GAAL,CAAS,KAAK/I,IAAd,CAAX;EACA,MAAIkmB,MAAMld,MAAM,KAAKhzB,CAAX,EAAc60C,IAAd,EAAoBC,IAApB,CAAV;EACA,MAAIC,MAAM3hB,MAAM,KAAKpzB,CAAX,EAAc,KAAKgqB,IAAnB,EAAyB6qB,IAAzB,CAAV;;EAEA,MAAIG,OAAO/4B,KAAKE,GAAL,CAAS,KAAK+N,IAAd,CAAX;EACA,MAAI+qB,OAAOh5B,KAAK8W,GAAL,CAAS,KAAK7I,IAAd,CAAX;EACA,MAAIgrB,MAAMliB,MAAM,KAAKhzB,CAAX,EAAcg1C,IAAd,EAAoBC,IAApB,CAAV;EACA,MAAIE,MAAM/hB,MAAM,KAAKpzB,CAAX,EAAc,KAAKkqB,IAAnB,EAAyB8qB,IAAzB,CAAV;;EAEA,MAAII,MAAMhiB,MAAM,KAAKpzB,CAAX,EAAc,KAAK8pB,IAAnB,EAAyB7N,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAzB,CAAV;;EAEA,MAAI7N,KAAKC,GAAL,CAAS,KAAK8N,IAAL,GAAY,KAAKE,IAA1B,IAAkCxC,KAAtC,EAA6C;EAC3C,SAAK2tB,EAAL,GAAUp5B,KAAKvJ,GAAL,CAASw9B,MAAMgF,GAAf,IAAsBj5B,KAAKvJ,GAAL,CAASqiC,MAAMI,GAAf,CAAhC;EACD,GAFD,MAGK;EACH,SAAKE,EAAL,GAAUR,IAAV;EACD;EACD,MAAIlqC,MAAM,KAAK0qC,EAAX,CAAJ,EAAoB;EAClB,SAAKA,EAAL,GAAUR,IAAV;EACD;EACD,OAAKS,EAAL,GAAUpF,OAAO,KAAKmF,EAAL,GAAUp5B,KAAKK,GAAL,CAASy4B,GAAT,EAAc,KAAKM,EAAnB,CAAjB,CAAV;EACA,OAAK3E,EAAL,GAAU,KAAKn6B,CAAL,GAAS,KAAK++B,EAAd,GAAmBr5B,KAAKK,GAAL,CAAS84B,GAAT,EAAc,KAAKC,EAAnB,CAA7B;EACA,MAAI,CAAC,KAAKl4B,KAAV,EAAiB;EACf,SAAKA,KAAL,GAAa,yBAAb;EACD;EACF;;EAED;EACA;AACA,EAAO,SAAS8V,SAAT,CAAiB1J,CAAjB,EAAoB;;EAEzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEA;EACA,MAAIY,KAAKC,GAAL,CAAS,IAAID,KAAKC,GAAL,CAASrH,GAAT,CAAJ,GAAoBoH,KAAKqL,EAAlC,KAAyCI,KAA7C,EAAoD;EAClD7S,UAAMyd,KAAKzd,GAAL,KAAawS,UAAU,IAAIK,KAA3B,CAAN;EACD;;EAED,MAAI0K,MAAMnW,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAASrH,GAAT,IAAgBwS,OAAzB,CAAV;EACA,MAAIqL,EAAJ,EAAQ6iB,GAAR;EACA,MAAInjB,MAAM1K,KAAV,EAAiB;EACfgL,SAAKU,MAAM,KAAKpzB,CAAX,EAAc6U,GAAd,EAAmBoH,KAAKE,GAAL,CAAStH,GAAT,CAAnB,CAAL;EACA0gC,UAAM,KAAKh/B,CAAL,GAAS,KAAK++B,EAAd,GAAmBr5B,KAAKK,GAAL,CAASoW,EAAT,EAAa,KAAK2iB,EAAlB,CAAzB;EACD,GAHD,MAIK;EACHjjB,UAAMvd,MAAM,KAAKwgC,EAAjB;EACA,QAAIjjB,OAAO,CAAX,EAAc;EACZ,aAAO,IAAP;EACD;EACDmjB,UAAM,CAAN;EACD;EACD,MAAIC,QAAQ,KAAKH,EAAL,GAAUliB,WAAWD,MAAM,KAAK7I,KAAtB,CAAtB;EACAd,IAAEnO,CAAF,GAAM,KAAKgQ,EAAL,IAAWmqB,MAAMt5B,KAAKE,GAAL,CAASq5B,KAAT,CAAjB,IAAoC,KAAKxqB,EAA/C;EACAzB,IAAElO,CAAF,GAAM,KAAK+P,EAAL,IAAW,KAAKslB,EAAL,GAAU6E,MAAMt5B,KAAK8W,GAAL,CAASyiB,KAAT,CAA3B,IAA8C,KAAKtqB,EAAzD;;EAEA,SAAO3B,CAAP;EACD;;EAED;EACA;AACA,EAAO,SAAS8J,SAAT,CAAiB9J,CAAjB,EAAoB;;EAEzB,MAAIgsB,GAAJ,EAASnjB,GAAT,EAAcM,EAAd;EACA,MAAI7d,GAAJ,EAASqe,GAAT;EACA,MAAI9X,IAAI,CAACmO,EAAEnO,CAAF,GAAM,KAAK4P,EAAZ,IAAkB,KAAKI,EAA/B;EACA,MAAI/P,IAAK,KAAKq1B,EAAL,GAAU,CAACnnB,EAAElO,CAAF,GAAM,KAAK6P,EAAZ,IAAkB,KAAKE,EAA1C;EACA,MAAI,KAAKiqB,EAAL,GAAU,CAAd,EAAiB;EACfE,UAAMt5B,KAAKoW,IAAL,CAAUjX,IAAIA,CAAJ,GAAQC,IAAIA,CAAtB,CAAN;EACA+W,UAAM,CAAN;EACD,GAHD,MAIK;EACHmjB,UAAM,CAACt5B,KAAKoW,IAAL,CAAUjX,IAAIA,CAAJ,GAAQC,IAAIA,CAAtB,CAAP;EACA+W,UAAM,CAAC,CAAP;EACD;EACD,MAAIojB,QAAQ,CAAZ;EACA,MAAID,QAAQ,CAAZ,EAAe;EACbC,YAAQv5B,KAAK2iB,KAAL,CAAYxM,MAAMhX,CAAlB,EAAuBgX,MAAM/W,CAA7B,CAAR;EACD;EACD,MAAKk6B,QAAQ,CAAT,IAAgB,KAAKF,EAAL,GAAU,CAA9B,EAAkC;EAChCjjB,UAAM,IAAI,KAAKijB,EAAf;EACA3iB,SAAKzW,KAAKK,GAAL,CAAUi5B,OAAO,KAAKh/B,CAAL,GAAS,KAAK++B,EAArB,CAAV,EAAqCljB,GAArC,CAAL;EACAvd,UAAM0e,MAAM,KAAKvzB,CAAX,EAAc0yB,EAAd,CAAN;EACA,QAAI7d,QAAQ,CAAC,IAAb,EAAmB;EACjB,aAAO,IAAP;EACD;EACF,GAPD,MAQK;EACHA,UAAM,CAACwS,OAAP;EACD;EACD6L,QAAMC,WAAWqiB,QAAQ,KAAKH,EAAb,GAAkB,KAAKhrB,KAAlC,CAAN;;EAEAd,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CACjB,+CADiB,EAEjB,yBAFiB,EAGjB,6BAHiB,EAIjB,6BAJiB,EAKjB,KALiB,EAMjB,+BANiB,EAOjB,+BAPiB,CAAZ;;AAUP,YAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,SAFI;EAGbI,WAASA,SAHI;EAIbG,SAAOA;EAJM,CAAf;;EC9IO,SAASjrB,OAAT,GAAgB;EACrB,OAAKgO,CAAL,GAAS,WAAT;EACA,OAAKuc,EAAL,GAAU,iBAAV;EACA,OAAK9yB,CAAL,GAASic,KAAKoW,IAAL,CAAU,KAAKS,EAAf,CAAT;EACA,MAAI,CAAC,KAAKhJ,IAAV,EAAgB;EACd,SAAKA,IAAL,GAAY,iBAAZ;EACD;EACD,MAAI,CAAC,KAAKO,KAAV,EAAiB;EACf,SAAKA,KAAL,GAAa,qBAAqB,iBAAlC;EACD;EACD;EACA,MAAI,CAAC,KAAKe,EAAV,EAAc;EACZ,SAAKA,EAAL,GAAU,MAAV;EACD;EACD,OAAKqqB,GAAL,GAAW,iBAAX,CAdqB;EAerB,OAAKC,GAAL,GAAW,IAAI,KAAKD,GAApB;EACA,OAAKE,GAAL,GAAW,KAAK7rB,IAAhB;EACA,OAAKsnB,EAAL,GAAU,KAAKte,EAAf;EACA,OAAK9yB,CAAL,GAASic,KAAKoW,IAAL,CAAU,KAAK+e,EAAf,CAAT;EACA,OAAKwE,IAAL,GAAY35B,KAAKoW,IAAL,CAAU,IAAK,KAAK+e,EAAL,GAAUn1B,KAAKK,GAAL,CAASL,KAAK8W,GAAL,CAAS,KAAK4iB,GAAd,CAAT,EAA6B,CAA7B,CAAX,IAA+C,IAAI,KAAKvE,EAAxD,CAAd,CAAZ;EACA,OAAKyE,EAAL,GAAU,gBAAV;EACA,OAAKC,EAAL,GAAU75B,KAAK2vB,IAAL,CAAU3vB,KAAKE,GAAL,CAAS,KAAKw5B,GAAd,IAAqB,KAAKC,IAApC,CAAV;EACA,OAAKnK,CAAL,GAASxvB,KAAKK,GAAL,CAAS,CAAC,IAAI,KAAKtc,CAAL,GAASic,KAAKE,GAAL,CAAS,KAAKw5B,GAAd,CAAd,KAAqC,IAAI,KAAK31C,CAAL,GAASic,KAAKE,GAAL,CAAS,KAAKw5B,GAAd,CAAlD,CAAT,EAAgF,KAAKC,IAAL,GAAY,KAAK51C,CAAjB,GAAqB,CAArG,CAAT;EACA,OAAKqrB,CAAL,GAASpP,KAAKwW,GAAL,CAAS,KAAKqjB,EAAL,GAAU,CAAV,GAAc,KAAKL,GAA5B,IAAmCx5B,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS,KAAKkjB,GAAL,GAAW,CAAX,GAAe,KAAKF,GAA7B,CAAT,EAA4C,KAAKG,IAAjD,CAAnC,GAA4F,KAAKnK,CAA1G;EACA,OAAK8F,EAAL,GAAU,KAAKnmB,EAAf;EACA,OAAK2qB,EAAL,GAAU,KAAKx/B,CAAL,GAAS0F,KAAKoW,IAAL,CAAU,IAAI,KAAK+e,EAAnB,CAAT,IAAmC,IAAI,KAAKA,EAAL,GAAUn1B,KAAKK,GAAL,CAASL,KAAKE,GAAL,CAAS,KAAKw5B,GAAd,CAAT,EAA6B,CAA7B,CAAjD,CAAV;EACA,OAAKK,EAAL,GAAU,gBAAV;EACA,OAAK3/B,CAAL,GAAS4F,KAAKE,GAAL,CAAS,KAAK65B,EAAd,CAAT;EACA,OAAKC,GAAL,GAAW,KAAK1E,EAAL,GAAU,KAAKwE,EAAf,GAAoB95B,KAAKwW,GAAL,CAAS,KAAKujB,EAAd,CAA/B;EACA,OAAKjqC,EAAL,GAAU,KAAK2pC,GAAL,GAAW,KAAKG,EAA1B;EACD;;EAED;EACA;EACA;AACA,EAAO,SAAS5iB,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2sB,GAAJ,EAASx5B,CAAT,EAAYy5B,MAAZ,EAAoBz/B,CAApB,EAAuBiG,CAAvB,EAA0By5B,GAA1B,EAA+BC,EAA/B;EACA,MAAInjB,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA,MAAI2vB,YAAY7X,WAAWD,MAAM,KAAK7I,KAAtB,CAAhB;EACA;EACA6rB,QAAMj6B,KAAKK,GAAL,CAAU,CAAC,IAAI,KAAKtc,CAAL,GAASic,KAAKE,GAAL,CAAStH,GAAT,CAAd,KAAgC,IAAI,KAAK7U,CAAL,GAASic,KAAKE,GAAL,CAAStH,GAAT,CAA7C,CAAV,EAAyE,KAAK+gC,IAAL,GAAY,KAAK51C,CAAjB,GAAqB,CAA9F,CAAN;EACA0c,MAAI,KAAKT,KAAK4W,IAAL,CAAU,KAAKxH,CAAL,GAASpP,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS5d,MAAM,CAAN,GAAU,KAAK4gC,GAAxB,CAAT,EAAuC,KAAKG,IAA5C,CAAT,GAA6DM,GAAvE,IAA8E,KAAKT,GAAxF,CAAJ;EACAU,WAAS,CAACnL,SAAD,GAAa,KAAK4K,IAA3B;EACAl/B,MAAIuF,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAAS,KAAKhnB,EAAd,IAAoBkQ,KAAKE,GAAL,CAASO,CAAT,CAApB,GAAkCT,KAAKE,GAAL,CAAS,KAAKpQ,EAAd,IAAoBkQ,KAAK8W,GAAL,CAASrW,CAAT,CAApB,GAAkCT,KAAK8W,GAAL,CAASojB,MAAT,CAA9E,CAAJ;EACAx5B,MAAIV,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAASrW,CAAT,IAAcT,KAAKE,GAAL,CAASg6B,MAAT,CAAd,GAAiCl6B,KAAK8W,GAAL,CAASrc,CAAT,CAA3C,CAAJ;EACA0/B,QAAM,KAAK//B,CAAL,GAASsG,CAAf;EACA05B,OAAK,KAAKJ,GAAL,GAAWh6B,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS,KAAKujB,EAAL,GAAU,CAAV,GAAc,KAAKP,GAA5B,CAAT,EAA2C,KAAKp/B,CAAhD,CAAX,GAAgE4F,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS/b,IAAI,CAAJ,GAAQ,KAAK++B,GAAtB,CAAT,EAAqC,KAAKp/B,CAA1C,CAArE;EACAkT,IAAElO,CAAF,GAAMg7B,KAAKp6B,KAAK8W,GAAL,CAASqjB,GAAT,CAAL,GAAqB,CAA3B;EACA7sB,IAAEnO,CAAF,GAAMi7B,KAAKp6B,KAAKE,GAAL,CAASi6B,GAAT,CAAL,GAAqB,CAA3B;;EAEA,MAAI,CAAC,KAAKE,KAAV,EAAiB;EACf/sB,MAAElO,CAAF,IAAO,CAAC,CAAR;EACAkO,MAAEnO,CAAF,IAAO,CAAC,CAAR;EACD;EACD,SAAQmO,CAAR;EACD;;EAED;AACA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI7M,CAAJ,EAAOy5B,MAAP,EAAez/B,CAAf,EAAkBiG,CAAlB,EAAqBy5B,GAArB,EAA0BC,EAA1B,EAA8BE,GAA9B;EACA,MAAIvuC,EAAJ;;EAEA;EACA;EACA,MAAIwmC,MAAMjlB,EAAEnO,CAAZ;EACAmO,IAAEnO,CAAF,GAAMmO,EAAElO,CAAR;EACAkO,IAAElO,CAAF,GAAMmzB,GAAN;EACA,MAAI,CAAC,KAAK8H,KAAV,EAAiB;EACf/sB,MAAElO,CAAF,IAAO,CAAC,CAAR;EACAkO,MAAEnO,CAAF,IAAO,CAAC,CAAR;EACD;EACDi7B,OAAKp6B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAL;EACA+6B,QAAMn6B,KAAK2iB,KAAL,CAAWrV,EAAElO,CAAb,EAAgBkO,EAAEnO,CAAlB,CAAN;EACAuB,MAAIy5B,MAAMn6B,KAAKE,GAAL,CAAS,KAAK65B,EAAd,CAAV;EACAt/B,MAAI,KAAKuF,KAAK4W,IAAL,CAAU5W,KAAKK,GAAL,CAAS,KAAK25B,GAAL,GAAWI,EAApB,EAAwB,IAAI,KAAKhgC,CAAjC,IAAsC4F,KAAKwW,GAAL,CAAS,KAAKujB,EAAL,GAAU,CAAV,GAAc,KAAKP,GAA5B,CAAhD,IAAoF,KAAKA,GAA9F,CAAJ;EACA/4B,MAAIT,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAAS,KAAKhnB,EAAd,IAAoBkQ,KAAKE,GAAL,CAASzF,CAAT,CAApB,GAAkCuF,KAAKE,GAAL,CAAS,KAAKpQ,EAAd,IAAoBkQ,KAAK8W,GAAL,CAASrc,CAAT,CAApB,GAAkCuF,KAAK8W,GAAL,CAASpW,CAAT,CAA9E,CAAJ;EACAw5B,WAASl6B,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAASrc,CAAT,IAAcuF,KAAKE,GAAL,CAASQ,CAAT,CAAd,GAA4BV,KAAK8W,GAAL,CAASrW,CAAT,CAAtC,CAAT;EACA6M,IAAEnO,CAAF,GAAM,KAAKiP,KAAL,GAAa8rB,SAAS,KAAKP,IAAjC;EACAW,QAAM75B,CAAN;EACA1U,OAAK,CAAL;EACA,MAAIw2B,OAAO,CAAX;EACA,KAAG;EACDjV,MAAElO,CAAF,GAAM,KAAKY,KAAK4W,IAAL,CAAU5W,KAAKK,GAAL,CAAS,KAAK+O,CAAd,EAAiB,CAAE,CAAF,GAAM,KAAKuqB,IAA5B,IAAoC35B,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAAS/V,IAAI,CAAJ,GAAQ,KAAK+4B,GAAtB,CAAT,EAAqC,IAAI,KAAKG,IAA9C,CAApC,GAA0F35B,KAAKK,GAAL,CAAS,CAAC,IAAI,KAAKtc,CAAL,GAASic,KAAKE,GAAL,CAASo6B,GAAT,CAAd,KAAgC,IAAI,KAAKv2C,CAAL,GAASic,KAAKE,GAAL,CAASo6B,GAAT,CAA7C,CAAT,EAAsE,KAAKv2C,CAAL,GAAS,CAA/E,CAApG,IAAyL,KAAKy1C,GAAnM,CAAN;EACA,QAAIx5B,KAAKC,GAAL,CAASq6B,MAAMhtB,EAAElO,CAAjB,IAAsB,YAA1B,EAAwC;EACtCrT,WAAK,CAAL;EACD;EACDuuC,UAAMhtB,EAAElO,CAAR;EACAmjB,YAAQ,CAAR;EACD,GAPD,QAOSx2B,OAAO,CAAP,IAAYw2B,OAAO,EAP5B;EAQA,MAAIA,QAAQ,EAAZ,EAAgB;EACd,WAAO,IAAP;EACD;;EAED,SAAQjV,CAAR;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,QAAD,EAAW,QAAX,CAAZ;AACP,eAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;ECpGe,eAASgjB,EAAT,EAAajQ,EAAb,EAAiB6K,EAAjB,EAAqBqF,EAArB,EAAyBlkB,GAAzB,EAA8B;EAC3C,SAAQikB,KAAKjkB,GAAL,GAAWgU,KAAKtqB,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAAhB,GAAoC6e,KAAKn1B,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAAzC,GAA6DkkB,KAAKx6B,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAA1E;EACD;;ECFc,eAASnX,CAAT,EAAY;EACzB,SAAQ,IAAI,OAAOA,CAAP,IAAY,IAAIA,IAAI,EAAJ,IAAU,IAAI,OAAOA,CAArB,CAAhB,CAAZ;EACD;;ECFc,eAASA,CAAT,EAAY;EACzB,SAAQ,QAAQA,CAAR,IAAa,IAAI,OAAOA,CAAP,IAAY,IAAI,UAAUA,CAA1B,CAAjB,CAAR;EACD;;ECFc,eAASA,CAAT,EAAY;EACzB,SAAQ,aAAaA,CAAb,GAAiBA,CAAjB,IAAsB,IAAI,OAAOA,CAAjC,CAAR;EACD;;ECFc,eAASA,CAAT,EAAY;EACzB,SAAQA,IAAIA,CAAJ,GAAQA,CAAR,IAAa,KAAK,IAAlB,CAAR;EACD;;ECFc,aAAS7E,CAAT,EAAYvW,CAAZ,EAAekyB,MAAf,EAAuB;EACpC,MAAIwZ,OAAO1rC,IAAIkyB,MAAf;EACA,SAAO3b,IAAI0F,KAAKoW,IAAL,CAAU,IAAIqZ,OAAOA,IAArB,CAAX;EACD;;ECAc,qBAAStwB,CAAT,EAAY;EACzB,SAAQa,KAAKC,GAAL,CAASd,CAAT,IAAciM,OAAf,GAA0BjM,CAA1B,GAA+BA,IAAKkX,KAAKlX,CAAL,IAAUa,KAAKqL,EAA1D;EACD;;ECLc,gBAASkkB,EAAT,EAAagL,EAAb,EAAiBjQ,EAAjB,EAAqB6K,EAArB,EAAyBqF,EAAzB,EAA6B;EAC1C,MAAIlkB,GAAJ;EACA,MAAIK,IAAJ;;EAEAL,QAAMiZ,KAAKgL,EAAX;EACA,OAAK,IAAI7xC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;EAC3BiuB,WAAO,CAAC4Y,MAAMgL,KAAKjkB,GAAL,GAAWgU,KAAKtqB,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAAhB,GAAoC6e,KAAKn1B,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAAzC,GAA6DkkB,KAAKx6B,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAAxE,CAAD,KAAgGikB,KAAK,IAAIjQ,EAAJ,GAAStqB,KAAK8W,GAAL,CAAS,IAAIR,GAAb,CAAd,GAAkC,IAAI6e,EAAJ,GAASn1B,KAAK8W,GAAL,CAAS,IAAIR,GAAb,CAA3C,GAA+D,IAAIkkB,EAAJ,GAASx6B,KAAK8W,GAAL,CAAS,IAAIR,GAAb,CAAxK,CAAP;EACAA,WAAOK,IAAP;EACA,QAAI3W,KAAKC,GAAL,CAAS0W,IAAT,KAAkB,YAAtB,EAAoC;EAClC,aAAOL,GAAP;EACD;EACF;;EAED;EACA,SAAO4N,GAAP;EACD;;ECJM,SAAS53B,OAAT,GAAgB;EACrB,MAAI,CAAC,KAAK2nB,MAAV,EAAkB;EAChB,SAAKsmB,EAAL,GAAUE,KAAK,KAAK5jB,EAAV,CAAV;EACA,SAAKyT,EAAL,GAAUoQ,KAAK,KAAK7jB,EAAV,CAAV;EACA,SAAKse,EAAL,GAAUwF,KAAK,KAAK9jB,EAAV,CAAV;EACA,SAAK2jB,EAAL,GAAUI,KAAK,KAAK/jB,EAAV,CAAV;EACA,SAAKiY,GAAL,GAAW,KAAKx0B,CAAL,GAASugC,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyC,KAAK3sB,IAA9C,CAApB;EACD;EACF;;EAED;;AAEA,EAAO,SAASmJ,UAAT,CAAiB1J,CAAjB,EAAoB;;EAEzB;;EAEA,MAAInO,CAAJ,EAAOC,CAAP;EACA,MAAI07B,MAAMxtB,EAAEnO,CAAZ;EACA,MAAImX,MAAMhJ,EAAElO,CAAZ;EACA07B,QAAM5jB,WAAW4jB,MAAM,KAAK1sB,KAAtB,CAAN;;EAEA,MAAI,KAAK6F,MAAT,EAAiB;EACf9U,QAAI,KAAK7E,CAAL,GAAS0F,KAAK2vB,IAAL,CAAU3vB,KAAK8W,GAAL,CAASR,GAAT,IAAgBtW,KAAKE,GAAL,CAAS46B,GAAT,CAA1B,CAAb;EACA17B,QAAI,KAAK9E,CAAL,IAAU0F,KAAK2iB,KAAL,CAAW3iB,KAAKwW,GAAL,CAASF,GAAT,CAAX,EAA0BtW,KAAK8W,GAAL,CAASgkB,GAAT,CAA1B,IAA2C,KAAKjtB,IAA1D,CAAJ;EACD,GAHD,MAIK;EACH;EACA,QAAIoI,SAASjW,KAAKE,GAAL,CAASoW,GAAT,CAAb;EACA,QAAIJ,SAASlW,KAAK8W,GAAL,CAASR,GAAT,CAAb;EACA,QAAIykB,KAAKC,GAAG,KAAK1gC,CAAR,EAAW,KAAKvW,CAAhB,EAAmBkyB,MAAnB,CAAT;EACA,QAAIglB,KAAKj7B,KAAKwW,GAAL,CAASF,GAAT,IAAgBtW,KAAKwW,GAAL,CAASF,GAAT,CAAzB;EACA,QAAI6Y,KAAK2L,MAAM96B,KAAK8W,GAAL,CAASR,GAAT,CAAf;EACA,QAAI4kB,MAAM/L,KAAKA,EAAf;EACA,QAAIgM,KAAK,KAAKtkB,EAAL,GAAUX,MAAV,GAAmBA,MAAnB,IAA6B,IAAI,KAAKW,EAAtC,CAAT;EACA,QAAI0Y,KAAK,KAAKj1B,CAAL,GAASugC,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyClkB,GAAzC,CAAlB;;EAEAnX,QAAI47B,KAAK5L,EAAL,IAAW,IAAI+L,MAAMD,EAAN,IAAY,IAAI,CAAJ,GAAQ,CAAC,IAAIA,EAAJ,GAAS,IAAIE,EAAd,IAAoBD,GAApB,GAA0B,GAA9C,CAAf,CAAJ;EACA97B,QAAImwB,KAAK,KAAKT,GAAV,GAAgBiM,KAAK9kB,MAAL,GAAcC,MAAd,GAAuBglB,GAAvB,IAA8B,MAAM,CAAC,IAAID,EAAJ,GAAS,IAAIE,EAAd,IAAoBD,GAApB,GAA0B,EAA9D,CAApB;EAGD;;EAED5tB,IAAEnO,CAAF,GAAMA,IAAI,KAAK4P,EAAf;EACAzB,IAAElO,CAAF,GAAMA,IAAI,KAAK6P,EAAf;EACA,SAAO3B,CAAP;EACD;;EAED;;AAEA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACA,MAAI9P,IAAImO,EAAEnO,CAAF,GAAM,KAAK7E,CAAnB;EACA,MAAI8E,IAAIkO,EAAElO,CAAF,GAAM,KAAK9E,CAAnB;EACA,MAAIgc,GAAJ,EAASwkB,GAAT;;EAEA,MAAI,KAAK7mB,MAAT,EAAiB;EACf,QAAImnB,KAAKh8B,IAAI,KAAKyO,IAAlB;EACAyI,UAAMtW,KAAK2vB,IAAL,CAAU3vB,KAAKE,GAAL,CAASk7B,EAAT,IAAep7B,KAAK8W,GAAL,CAAS3X,CAAT,CAAzB,CAAN;EACA27B,UAAM96B,KAAK2iB,KAAL,CAAW3iB,KAAKwW,GAAL,CAASrX,CAAT,CAAX,EAAwBa,KAAK8W,GAAL,CAASskB,EAAT,CAAxB,CAAN;EACD,GAJD,MAKK;EACH;EACA,QAAIC,MAAM,KAAKvM,GAAL,GAAW,KAAKx0B,CAAhB,GAAoB8E,CAA9B;EACA,QAAI23B,OAAOuE,MAAMD,GAAN,EAAW,KAAKd,EAAhB,EAAoB,KAAKjQ,EAAzB,EAA6B,KAAK6K,EAAlC,EAAsC,KAAKqF,EAA3C,CAAX;EACA,QAAIx6B,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAAS82B,IAAT,IAAiB3rB,OAA1B,KAAsCK,KAA1C,EAAiD;EAC/C6B,QAAEnO,CAAF,GAAM,KAAKiP,KAAX;EACAd,QAAElO,CAAF,GAAMgM,OAAN;EACA,UAAIhM,IAAI,CAAR,EAAW;EACTkO,UAAElO,CAAF,IAAO,CAAC,CAAR;EACD;EACD,aAAOkO,CAAP;EACD;EACD,QAAIiuB,MAAMP,GAAG,KAAK1gC,CAAR,EAAW,KAAKvW,CAAhB,EAAmBic,KAAKE,GAAL,CAAS62B,IAAT,CAAnB,CAAV;;EAEA,QAAIyE,MAAMD,MAAMA,GAAN,GAAYA,GAAZ,GAAkB,KAAKjhC,CAAvB,GAA2B,KAAKA,CAAhC,IAAqC,IAAI,KAAKuc,EAA9C,CAAV;EACA,QAAI4kB,MAAMz7B,KAAKK,GAAL,CAASL,KAAKwW,GAAL,CAASugB,IAAT,CAAT,EAAyB,CAAzB,CAAV;EACA,QAAI2E,KAAKv8B,IAAI,KAAK7E,CAAT,GAAaihC,GAAtB;EACA,QAAII,MAAMD,KAAKA,EAAf;EACAplB,UAAMygB,OAAOwE,MAAMv7B,KAAKwW,GAAL,CAASugB,IAAT,CAAN,GAAuByE,GAAvB,GAA6BE,EAA7B,GAAkCA,EAAlC,IAAwC,MAAM,CAAC,IAAI,IAAID,GAAT,IAAgBC,EAAhB,GAAqBA,EAArB,GAA0B,EAAxE,CAAb;EACAZ,UAAMY,MAAM,IAAIC,OAAOF,MAAM,CAAN,GAAU,CAAC,IAAI,IAAIA,GAAT,IAAgBA,GAAhB,GAAsBE,GAAtB,GAA4B,EAA7C,CAAV,IAA8D37B,KAAK8W,GAAL,CAASigB,IAAT,CAApE;EAED;;EAEDzpB,IAAEnO,CAAF,GAAM+X,WAAW4jB,MAAM,KAAK1sB,KAAtB,CAAN;EACAd,IAAElO,CAAF,GAAMw8B,WAAWtlB,GAAX,CAAN;EACA,SAAOhJ,CAAP;EAED;;AAED,EAAO,IAAIiK,WAAQ,CAAC,SAAD,EAAY,iBAAZ,EAA+B,MAA/B,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;ECtGe,gBAASvB,MAAT,EAAiBC,MAAjB,EAAyB;EACtC,MAAIE,GAAJ;EACA,MAAIH,SAAS,MAAb,EAAqB;EACnBG,UAAMH,SAASC,MAAf;EACA,WAAQ,CAAC,IAAID,SAASA,MAAd,KAAyBC,UAAU,IAAIE,MAAMA,GAApB,IAA4B,MAAMH,MAAP,GAAiBhW,KAAKvJ,GAAL,CAAS,CAAC,IAAI0f,GAAL,KAAa,IAAIA,GAAjB,CAAT,CAArE,CAAR;EACD,GAHD,MAIK;EACH,WAAQ,IAAIF,MAAZ;EACD;EACF;;ECHD;;;;;;AAMA,EAAO,IAAI4lB,SAAS,CAAb;;AAEP,EAAO,IAAIC,SAAS,CAAb;AACP,EAAO,IAAIC,QAAQ,CAAZ;AACP,EAAO,IAAIC,QAAQ,CAAZ;;EAEP;;AAEA,EAAO,SAAS1vC,OAAT,GAAgB;EACrB,MAAIwI,IAAIkL,KAAKC,GAAL,CAAS,KAAK4N,IAAd,CAAR;EACA,MAAI7N,KAAKC,GAAL,CAASnL,IAAIsW,OAAb,IAAwBK,KAA5B,EAAmC;EACjC,SAAK5gB,IAAL,GAAY,KAAKgjB,IAAL,GAAY,CAAZ,GAAgB,KAAKguB,MAArB,GAA8B,KAAKC,MAA/C;EACD,GAFD,MAGK,IAAI97B,KAAKC,GAAL,CAASnL,CAAT,IAAc2W,KAAlB,EAAyB;EAC5B,SAAK5gB,IAAL,GAAY,KAAKkxC,KAAjB;EACD,GAFI,MAGA;EACH,SAAKlxC,IAAL,GAAY,KAAKmxC,KAAjB;EACD;EACD,MAAI,KAAKnlB,EAAL,GAAU,CAAd,EAAiB;EACf,QAAIZ,MAAJ;;EAEA,SAAKgmB,EAAL,GAAUC,MAAM,KAAKn4C,CAAX,EAAc,CAAd,CAAV;EACA,SAAKo4C,GAAL,GAAW,OAAO,IAAI,KAAKtlB,EAAhB,CAAX;EACA,SAAKulB,GAAL,GAAWC,QAAQ,KAAKxlB,EAAb,CAAX;EACA,YAAQ,KAAKhsB,IAAb;EACA,WAAK,KAAKixC,MAAV;EACE,aAAKV,EAAL,GAAU,CAAV;EACA;EACF,WAAK,KAAKS,MAAV;EACE,aAAKT,EAAL,GAAU,CAAV;EACA;EACF,WAAK,KAAKW,KAAV;EACE,aAAKO,EAAL,GAAUt8B,KAAKoW,IAAL,CAAU,MAAM,KAAK6lB,EAArB,CAAV;EACA,aAAKb,EAAL,GAAU,IAAI,KAAKkB,EAAnB;EACA,aAAKC,GAAL,GAAW,CAAX;EACA,aAAKC,GAAL,GAAW,MAAM,KAAKP,EAAtB;EACA;EACF,WAAK,KAAKD,KAAV;EACE,aAAKM,EAAL,GAAUt8B,KAAKoW,IAAL,CAAU,MAAM,KAAK6lB,EAArB,CAAV;EACAhmB,iBAASjW,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAT;EACA,aAAK4uB,KAAL,GAAaP,MAAM,KAAKn4C,CAAX,EAAckyB,MAAd,IAAwB,KAAKgmB,EAA1C;EACA,aAAKS,KAAL,GAAa18B,KAAKoW,IAAL,CAAU,IAAI,KAAKqmB,KAAL,GAAa,KAAKA,KAAhC,CAAb;EACA,aAAKrB,EAAL,GAAUp7B,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,KAAuB7N,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAL,GAAUZ,MAAV,GAAmBA,MAAjC,IAA2C,KAAKqmB,EAAhD,GAAqD,KAAKI,KAAjF,CAAV;EACA,aAAKF,GAAL,GAAW,CAAC,KAAKD,GAAL,GAAW,KAAKD,EAAjB,IAAuB,KAAKlB,EAAvC;EACA,aAAKmB,GAAL,IAAY,KAAKnB,EAAjB;EACA;EArBF;EAuBD,GA7BD,MA8BK;EACH,QAAI,KAAKvwC,IAAL,KAAc,KAAKmxC,KAAvB,EAA8B;EAC5B,WAAKvF,MAAL,GAAcz2B,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAd;EACA,WAAKyoB,MAAL,GAAct2B,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAd;EACD;EACF;EACF;;EAED;;AAEA,EAAO,SAASmJ,UAAT,CAAiB1J,CAAjB,EAAoB;;EAEzB;;EAEA,MAAInO,CAAJ,EAAOC,CAAP,EAAUu9B,MAAV,EAAkBC,MAAlB,EAA0B3mB,MAA1B,EAAkC4mB,CAAlC,EAAqCC,IAArC,EAA2CC,IAA3C,EAAiD1tB,CAAjD,EAAoD6G,MAApD;EACA,MAAI4kB,MAAMxtB,EAAEnO,CAAZ;EACA,MAAImX,MAAMhJ,EAAElO,CAAZ;;EAEA07B,QAAM5jB,WAAW4jB,MAAM,KAAK1sB,KAAtB,CAAN;EACA,MAAI,KAAK6F,MAAT,EAAiB;EACfgC,aAASjW,KAAKE,GAAL,CAASoW,GAAT,CAAT;EACAJ,aAASlW,KAAK8W,GAAL,CAASR,GAAT,CAAT;EACAqmB,aAAS38B,KAAK8W,GAAL,CAASgkB,GAAT,CAAT;EACA,QAAI,KAAKjwC,IAAL,KAAc,KAAKmxC,KAAnB,IAA4B,KAAKnxC,IAAL,KAAc,KAAKkxC,KAAnD,EAA0D;EACxD38B,UAAK,KAAKvU,IAAL,KAAc,KAAKkxC,KAApB,GAA6B,IAAI7lB,SAASymB,MAA1C,GAAmD,IAAI,KAAKlG,MAAL,GAAcxgB,MAAlB,GAA2B,KAAKqgB,MAAL,GAAcpgB,MAAd,GAAuBymB,MAAzG;EACA,UAAIv9B,KAAKqM,KAAT,EAAgB;EACd,eAAO,IAAP;EACD;EACDrM,UAAIY,KAAKoW,IAAL,CAAU,IAAIhX,CAAd,CAAJ;EACAD,UAAIC,IAAI8W,MAAJ,GAAalW,KAAKE,GAAL,CAAS46B,GAAT,CAAjB;EACA17B,WAAM,KAAKvU,IAAL,KAAc,KAAKkxC,KAApB,GAA6B9lB,MAA7B,GAAsC,KAAKqgB,MAAL,GAAcrgB,MAAd,GAAuB,KAAKwgB,MAAL,GAAcvgB,MAAd,GAAuBymB,MAAzF;EACD,KARD,MASK,IAAI,KAAK9xC,IAAL,KAAc,KAAKixC,MAAnB,IAA6B,KAAKjxC,IAAL,KAAc,KAAKgxC,MAApD,EAA4D;EAC/D,UAAI,KAAKhxC,IAAL,KAAc,KAAKixC,MAAvB,EAA+B;EAC7Ba,iBAAS,CAACA,MAAV;EACD;EACD,UAAI38B,KAAKC,GAAL,CAASqW,MAAM,KAAKzI,IAApB,IAA4BpC,KAAhC,EAAuC;EACrC,eAAO,IAAP;EACD;EACDrM,UAAIwM,SAAS0K,MAAM,GAAnB;EACAlX,UAAI,KAAM,KAAKvU,IAAL,KAAc,KAAKgxC,MAApB,GAA8B77B,KAAK8W,GAAL,CAAS1X,CAAT,CAA9B,GAA4CY,KAAKE,GAAL,CAASd,CAAT,CAAjD,CAAJ;EACAD,UAAIC,IAAIY,KAAKE,GAAL,CAAS46B,GAAT,CAAR;EACA17B,WAAKu9B,MAAL;EACD;EACF,GAzBD,MA0BK;EACHG,WAAO,CAAP;EACAC,WAAO,CAAP;EACA1tB,QAAI,CAAJ;EACAstB,aAAS38B,KAAK8W,GAAL,CAASgkB,GAAT,CAAT;EACA8B,aAAS58B,KAAKE,GAAL,CAAS46B,GAAT,CAAT;EACA7kB,aAASjW,KAAKE,GAAL,CAASoW,GAAT,CAAT;EACAumB,QAAIX,MAAM,KAAKn4C,CAAX,EAAckyB,MAAd,CAAJ;EACA,QAAI,KAAKprB,IAAL,KAAc,KAAKmxC,KAAnB,IAA4B,KAAKnxC,IAAL,KAAc,KAAKkxC,KAAnD,EAA0D;EACxDe,aAAOD,IAAI,KAAKZ,EAAhB;EACAc,aAAO/8B,KAAKoW,IAAL,CAAU,IAAI0mB,OAAOA,IAArB,CAAP;EACD;EACD,YAAQ,KAAKjyC,IAAb;EACA,WAAK,KAAKmxC,KAAV;EACE3sB,YAAI,IAAI,KAAKotB,KAAL,GAAaK,IAAjB,GAAwB,KAAKJ,KAAL,GAAaK,IAAb,GAAoBJ,MAAhD;EACA;EACF,WAAK,KAAKZ,KAAV;EACE1sB,YAAI,IAAI0tB,OAAOJ,MAAf;EACA;EACF,WAAK,KAAKb,MAAV;EACEzsB,YAAIjE,UAAUkL,GAAd;EACAumB,YAAI,KAAKZ,EAAL,GAAUY,CAAd;EACA;EACF,WAAK,KAAKhB,MAAV;EACExsB,YAAIiH,MAAMlL,OAAV;EACAyxB,YAAI,KAAKZ,EAAL,GAAUY,CAAd;EACA;EAdF;EAgBA,QAAI78B,KAAKC,GAAL,CAASoP,CAAT,IAAc5D,KAAlB,EAAyB;EACvB,aAAO,IAAP;EACD;EACD,YAAQ,KAAK5gB,IAAb;EACA,WAAK,KAAKmxC,KAAV;EACA,WAAK,KAAKD,KAAV;EACE1sB,YAAIrP,KAAKoW,IAAL,CAAU,IAAI/G,CAAd,CAAJ;EACA,YAAI,KAAKxkB,IAAL,KAAc,KAAKmxC,KAAvB,EAA8B;EAC5B58B,cAAI,KAAKo9B,GAAL,GAAWntB,CAAX,IAAgB,KAAKqtB,KAAL,GAAaI,IAAb,GAAoB,KAAKL,KAAL,GAAaM,IAAb,GAAoBJ,MAAxD,CAAJ;EACD,SAFD,MAGK;EACHv9B,cAAI,CAACiQ,IAAIrP,KAAKoW,IAAL,CAAU,KAAK,IAAI2mB,OAAOJ,MAAhB,CAAV,CAAL,IAA2CG,IAA3C,GAAkD,KAAKN,GAA3D;EACD;EACDr9B,YAAI,KAAKo9B,GAAL,GAAWltB,CAAX,GAAe0tB,IAAf,GAAsBH,MAA1B;EACA;EACF,WAAK,KAAKd,MAAV;EACA,WAAK,KAAKD,MAAV;EACE,YAAIgB,KAAK,CAAT,EAAY;EACV19B,cAAI,CAACkQ,IAAIrP,KAAKoW,IAAL,CAAUymB,CAAV,CAAL,IAAqBD,MAAzB;EACAx9B,cAAIu9B,UAAW,KAAK9xC,IAAL,KAAc,KAAKgxC,MAApB,GAA8BxsB,CAA9B,GAAkC,CAACA,CAA7C,CAAJ;EACD,SAHD,MAIK;EACHlQ,cAAIC,IAAI,CAAR;EACD;EACD;EArBF;EAuBD;;EAEDkO,IAAEnO,CAAF,GAAM,KAAK7E,CAAL,GAAS6E,CAAT,GAAa,KAAK4P,EAAxB;EACAzB,IAAElO,CAAF,GAAM,KAAK9E,CAAL,GAAS8E,CAAT,GAAa,KAAK6P,EAAxB;EACA,SAAO3B,CAAP;EACD;;EAED;;AAEA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACA,MAAI9P,IAAImO,EAAEnO,CAAF,GAAM,KAAK7E,CAAnB;EACA,MAAI8E,IAAIkO,EAAElO,CAAF,GAAM,KAAK9E,CAAnB;EACA,MAAIwgC,GAAJ,EAASxkB,GAAT,EAAc0mB,GAAd,EAAmBC,GAAnB,EAAwBJ,CAAxB,EAA2BnJ,GAA3B,EAAgCwJ,EAAhC;EACA,MAAI,KAAKjpB,MAAT,EAAiB;EACf,QAAIkpB,OAAO,CAAX;EAAA,QACE1I,EADF;EAAA,QACM2I,OAAO,CADb;;EAGA3I,SAAKz0B,KAAKoW,IAAL,CAAUjX,IAAIA,CAAJ,GAAQC,IAAIA,CAAtB,CAAL;EACAkX,UAAMme,KAAK,GAAX;EACA,QAAIne,MAAM,CAAV,EAAa;EACX,aAAO,IAAP;EACD;EACDA,UAAM,IAAItW,KAAK2vB,IAAL,CAAUrZ,GAAV,CAAV;EACA,QAAI,KAAKzrB,IAAL,KAAc,KAAKmxC,KAAnB,IAA4B,KAAKnxC,IAAL,KAAc,KAAKkxC,KAAnD,EAA0D;EACxDqB,aAAOp9B,KAAKE,GAAL,CAASoW,GAAT,CAAP;EACA6mB,aAAOn9B,KAAK8W,GAAL,CAASR,GAAT,CAAP;EACD;EACD,YAAQ,KAAKzrB,IAAb;EACA,WAAK,KAAKkxC,KAAV;EACEzlB,cAAOtW,KAAKC,GAAL,CAASw0B,EAAT,KAAgBhpB,KAAjB,GAA0B,CAA1B,GAA8BzL,KAAK2vB,IAAL,CAAUvwB,IAAIg+B,IAAJ,GAAW3I,EAArB,CAApC;EACAt1B,aAAKi+B,IAAL;EACAh+B,YAAI+9B,OAAO1I,EAAX;EACA;EACF,WAAK,KAAKuH,KAAV;EACE1lB,cAAOtW,KAAKC,GAAL,CAASw0B,EAAT,KAAgBhpB,KAAjB,GAA0B,KAAKoC,IAA/B,GAAsC7N,KAAK2vB,IAAL,CAAUwN,OAAO,KAAK1G,MAAZ,GAAqBr3B,IAAIg+B,IAAJ,GAAW,KAAK9G,MAAhB,GAAyB7B,EAAxD,CAA5C;EACAt1B,aAAKi+B,OAAO,KAAK9G,MAAjB;EACAl3B,YAAI,CAAC+9B,OAAOn9B,KAAKE,GAAL,CAASoW,GAAT,IAAgB,KAAKmgB,MAA7B,IAAuChC,EAA3C;EACA;EACF,WAAK,KAAKqH,MAAV;EACE18B,YAAI,CAACA,CAAL;EACAkX,cAAMlL,UAAUkL,GAAhB;EACA;EACF,WAAK,KAAKulB,MAAV;EACEvlB,eAAOlL,OAAP;EACA;EAjBF;EAmBA0vB,UAAO17B,MAAM,CAAN,KAAY,KAAKvU,IAAL,KAAc,KAAKkxC,KAAnB,IAA4B,KAAKlxC,IAAL,KAAc,KAAKmxC,KAA3D,CAAD,GAAsE,CAAtE,GAA0Eh8B,KAAK2iB,KAAL,CAAWxjB,CAAX,EAAcC,CAAd,CAAhF;EACD,GAlCD,MAmCK;EACH89B,SAAK,CAAL;EACA,QAAI,KAAKryC,IAAL,KAAc,KAAKmxC,KAAnB,IAA4B,KAAKnxC,IAAL,KAAc,KAAKkxC,KAAnD,EAA0D;EACxD58B,WAAK,KAAKi8B,EAAV;EACAh8B,WAAK,KAAKg8B,EAAV;EACA1H,YAAM1zB,KAAKoW,IAAL,CAAUjX,IAAIA,CAAJ,GAAQC,IAAIA,CAAtB,CAAN;EACA,UAAIs0B,MAAMjoB,KAAV,EAAiB;EACf6B,UAAEnO,CAAF,GAAM,KAAKiP,KAAX;EACAd,UAAElO,CAAF,GAAM,KAAKyO,IAAX;EACA,eAAOP,CAAP;EACD;EACD2vB,YAAM,IAAIj9B,KAAK2vB,IAAL,CAAU,MAAM+D,GAAN,GAAY,KAAK4I,EAA3B,CAAV;EACAU,YAAMh9B,KAAK8W,GAAL,CAASmmB,GAAT,CAAN;EACA99B,WAAM89B,MAAMj9B,KAAKE,GAAL,CAAS+8B,GAAT,CAAZ;EACA,UAAI,KAAKpyC,IAAL,KAAc,KAAKmxC,KAAvB,EAA8B;EAC5BkB,aAAKF,MAAM,KAAKP,KAAX,GAAmBr9B,IAAI69B,GAAJ,GAAU,KAAKP,KAAf,GAAuBhJ,GAA/C;EACAmJ,YAAI,KAAKZ,EAAL,GAAUiB,EAAd;EACA99B,YAAIs0B,MAAM,KAAKgJ,KAAX,GAAmBM,GAAnB,GAAyB59B,IAAI,KAAKq9B,KAAT,GAAiBQ,GAA9C;EACD,OAJD,MAKK;EACHC,aAAK99B,IAAI69B,GAAJ,GAAUvJ,GAAf;EACAmJ,YAAI,KAAKZ,EAAL,GAAUiB,EAAd;EACA99B,YAAIs0B,MAAMsJ,GAAV;EACD;EACF,KAtBD,MAuBK,IAAI,KAAKnyC,IAAL,KAAc,KAAKixC,MAAnB,IAA6B,KAAKjxC,IAAL,KAAc,KAAKgxC,MAApD,EAA4D;EAC/D,UAAI,KAAKhxC,IAAL,KAAc,KAAKixC,MAAvB,EAA+B;EAC7B18B,YAAI,CAACA,CAAL;EACD;EACDy9B,UAAK19B,IAAIA,CAAJ,GAAQC,IAAIA,CAAjB;EACA,UAAI,CAACy9B,CAAL,EAAQ;EACNvvB,UAAEnO,CAAF,GAAM,KAAKiP,KAAX;EACAd,UAAElO,CAAF,GAAM,KAAKyO,IAAX;EACA,eAAOP,CAAP;EACD;EACD4vB,WAAK,IAAIL,IAAI,KAAKZ,EAAlB;EACA,UAAI,KAAKpxC,IAAL,KAAc,KAAKgxC,MAAvB,EAA+B;EAC7BqB,aAAK,CAACA,EAAN;EACD;EACF;EACDpC,UAAM96B,KAAK2iB,KAAL,CAAWxjB,CAAX,EAAcC,CAAd,CAAN;EACAkX,UAAM+mB,QAAQr9B,KAAK2vB,IAAL,CAAUuN,EAAV,CAAR,EAAuB,KAAKd,GAA5B,CAAN;EACD;;EAED9uB,IAAEnO,CAAF,GAAM+X,WAAW,KAAK9I,KAAL,GAAa0sB,GAAxB,CAAN;EACAxtB,IAAElO,CAAF,GAAMkX,GAAN;EACA,SAAOhJ,CAAP;EACD;;EAED;EACA,IAAIgwB,MAAM,sBAAV;;EAEA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,sBAAV;EACA,IAAIC,MAAM,sBAAV;;EAEA,SAAStB,OAAT,CAAiBxlB,EAAjB,EAAqB;EACnB,MAAI/hB,CAAJ;EACA,MAAI8oC,MAAM,EAAV;EACAA,MAAI,CAAJ,IAAS/mB,KAAKymB,GAAd;EACAxoC,MAAI+hB,KAAKA,EAAT;EACA+mB,MAAI,CAAJ,KAAU9oC,IAAIyoC,GAAd;EACAK,MAAI,CAAJ,IAAS9oC,IAAI2oC,GAAb;EACA3oC,OAAK+hB,EAAL;EACA+mB,MAAI,CAAJ,KAAU9oC,IAAI0oC,GAAd;EACAI,MAAI,CAAJ,KAAU9oC,IAAI4oC,GAAd;EACAE,MAAI,CAAJ,IAAS9oC,IAAI6oC,GAAb;EACA,SAAOC,GAAP;EACD;;EAED,SAASP,OAAT,CAAiBQ,IAAjB,EAAuBD,GAAvB,EAA4B;EAC1B,MAAI9oC,IAAI+oC,OAAOA,IAAf;EACA,SAAQA,OAAOD,IAAI,CAAJ,IAAS59B,KAAKE,GAAL,CAASpL,CAAT,CAAhB,GAA8B8oC,IAAI,CAAJ,IAAS59B,KAAKE,GAAL,CAASpL,IAAIA,CAAb,CAAvC,GAAyD8oC,IAAI,CAAJ,IAAS59B,KAAKE,GAAL,CAASpL,IAAIA,CAAJ,GAAQA,CAAjB,CAA1E;EACD;;AAED,EAAO,IAAIyiB,WAAQ,CAAC,8BAAD,EAAiC,8BAAjC,EAAiE,MAAjE,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA,QAJM;EAKbskB,UAAQA,MALK;EAMbC,UAAQA,MANK;EAObC,SAAOA,KAPM;EAQbC,SAAOA;EARM,CAAf;;EChSe,gBAAS78B,CAAT,EAAY;EACzB,MAAIa,KAAKC,GAAL,CAASd,CAAT,IAAc,CAAlB,EAAqB;EACnBA,QAAKA,IAAI,CAAL,GAAU,CAAV,GAAc,CAAC,CAAnB;EACD;EACD,SAAOa,KAAK2vB,IAAL,CAAUxwB,CAAV,CAAP;EACD;;ECCM,SAAS7S,OAAT,GAAgB;;EAErB,MAAI0T,KAAKC,GAAL,CAAS,KAAK8N,IAAL,GAAY,KAAKE,IAA1B,IAAkCxC,KAAtC,EAA6C;EAC3C;EACD;EACD,OAAKgkB,IAAL,GAAY,KAAKpgB,CAAL,GAAS,KAAK/U,CAA1B;EACA,OAAKuc,EAAL,GAAU,IAAI7W,KAAKK,GAAL,CAAS,KAAKovB,IAAd,EAAoB,CAApB,CAAd;EACA,OAAK+K,EAAL,GAAUx6B,KAAKoW,IAAL,CAAU,KAAKS,EAAf,CAAV;;EAEA,OAAKinB,MAAL,GAAc99B,KAAKE,GAAL,CAAS,KAAK6N,IAAd,CAAd;EACA,OAAKgwB,MAAL,GAAc/9B,KAAK8W,GAAL,CAAS,KAAK/I,IAAd,CAAd;EACA,OAAKiwB,EAAL,GAAU,KAAKF,MAAf;EACA,OAAK3nB,GAAL,GAAW,KAAK2nB,MAAhB;EACA,OAAK7J,GAAL,GAAWld,MAAM,KAAKyjB,EAAX,EAAe,KAAKsD,MAApB,EAA4B,KAAKC,MAAjC,CAAX;EACA,OAAKE,GAAL,GAAW/B,MAAM,KAAK1B,EAAX,EAAe,KAAKsD,MAApB,CAAX;;EAEA,OAAKA,MAAL,GAAc99B,KAAKE,GAAL,CAAS,KAAK+N,IAAd,CAAd;EACA,OAAK8vB,MAAL,GAAc/9B,KAAK8W,GAAL,CAAS,KAAK7I,IAAd,CAAd;EACA,OAAKiwB,EAAL,GAAU,KAAKJ,MAAf;EACA,OAAK7E,GAAL,GAAWliB,MAAM,KAAKyjB,EAAX,EAAe,KAAKsD,MAApB,EAA4B,KAAKC,MAAjC,CAAX;EACA,OAAKI,GAAL,GAAWjC,MAAM,KAAK1B,EAAX,EAAe,KAAKsD,MAApB,CAAX;;EAEA,OAAKA,MAAL,GAAc99B,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAd;EACA,OAAKkwB,MAAL,GAAc/9B,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAd;EACA,OAAKuwB,EAAL,GAAU,KAAKN,MAAf;EACA,OAAKO,GAAL,GAAWnC,MAAM,KAAK1B,EAAX,EAAe,KAAKsD,MAApB,CAAX;;EAEA,MAAI99B,KAAKC,GAAL,CAAS,KAAK8N,IAAL,GAAY,KAAKE,IAA1B,IAAkCxC,KAAtC,EAA6C;EAC3C,SAAK6yB,GAAL,GAAW,CAAC,KAAKrK,GAAL,GAAW,KAAKA,GAAhB,GAAsB,KAAKgF,GAAL,GAAW,KAAKA,GAAvC,KAA+C,KAAKkF,GAAL,GAAW,KAAKF,GAA/D,CAAX;EACD,GAFD,MAGK;EACH,SAAKK,GAAL,GAAW,KAAKnoB,GAAhB;EACD;EACD,OAAK3V,CAAL,GAAS,KAAKyzB,GAAL,GAAW,KAAKA,GAAhB,GAAsB,KAAKqK,GAAL,GAAW,KAAKL,GAA/C;EACA,OAAKxJ,EAAL,GAAU,KAAKn6B,CAAL,GAAS0F,KAAKoW,IAAL,CAAU,KAAK5V,CAAL,GAAS,KAAK89B,GAAL,GAAW,KAAKD,GAAnC,CAAT,GAAmD,KAAKC,GAAlE;EACD;;EAED;;AAEA,EAAO,SAAStnB,UAAT,CAAiB1J,CAAjB,EAAoB;;EAEzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEA,OAAK4vB,OAAL,GAAehvB,KAAKE,GAAL,CAAStH,GAAT,CAAf;EACA,OAAKq2B,OAAL,GAAejvB,KAAK8W,GAAL,CAASle,GAAT,CAAf;;EAEA,MAAI2lC,KAAKrC,MAAM,KAAK1B,EAAX,EAAe,KAAKxL,OAApB,CAAT;EACA,MAAIsK,MAAM,KAAKh/B,CAAL,GAAS0F,KAAKoW,IAAL,CAAU,KAAK5V,CAAL,GAAS,KAAK89B,GAAL,GAAWC,EAA9B,CAAT,GAA6C,KAAKD,GAA5D;EACA,MAAI/E,QAAQ,KAAK+E,GAAL,GAAWpnB,WAAWD,MAAM,KAAK7I,KAAtB,CAAvB;EACA,MAAIjP,IAAIm6B,MAAMt5B,KAAKE,GAAL,CAASq5B,KAAT,CAAN,GAAwB,KAAKxqB,EAArC;EACA,MAAI3P,IAAI,KAAKq1B,EAAL,GAAU6E,MAAMt5B,KAAK8W,GAAL,CAASyiB,KAAT,CAAhB,GAAkC,KAAKtqB,EAA/C;;EAEA3B,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;AAED,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAIgsB,GAAJ,EAASiF,EAAT,EAAapoB,GAAb,EAAkBojB,KAAlB,EAAyBtiB,GAAzB,EAA8Bre,GAA9B;;EAEA0U,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,GAAM,KAAKq1B,EAAL,GAAUnnB,EAAElO,CAAZ,GAAgB,KAAK6P,EAA3B;EACA,MAAI,KAAKqvB,GAAL,IAAY,CAAhB,EAAmB;EACjBhF,UAAMt5B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAN;EACA+W,UAAM,CAAN;EACD,GAHD,MAIK;EACHmjB,UAAM,CAACt5B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAP;EACA+W,UAAM,CAAC,CAAP;EACD;EACDojB,UAAQ,CAAR;EACA,MAAID,QAAQ,CAAZ,EAAe;EACbC,YAAQv5B,KAAK2iB,KAAL,CAAWxM,MAAM7I,EAAEnO,CAAnB,EAAsBgX,MAAM7I,EAAElO,CAA9B,CAAR;EACD;EACD+W,QAAMmjB,MAAM,KAAKgF,GAAX,GAAiB,KAAKhkC,CAA5B;EACA,MAAI,KAAK2Z,MAAT,EAAiB;EACfrb,UAAMoH,KAAK2vB,IAAL,CAAU,CAAC,KAAKnvB,CAAL,GAAS2V,MAAMA,GAAhB,KAAwB,IAAI,KAAKmoB,GAAjC,CAAV,CAAN;EACD,GAFD,MAGK;EACHC,SAAK,CAAC,KAAK/9B,CAAL,GAAS2V,MAAMA,GAAhB,IAAuB,KAAKmoB,GAAjC;EACA1lC,UAAM,KAAK4lC,KAAL,CAAW,KAAKhE,EAAhB,EAAoB+D,EAApB,CAAN;EACD;;EAEDtnB,QAAMC,WAAWqiB,QAAQ,KAAK+E,GAAb,GAAmB,KAAKlwB,KAAnC,CAAN;EACAd,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;EAED;;;AAGA,EAAO,SAASkxB,KAAT,CAAexoB,MAAf,EAAuBuoB,EAAvB,EAA2B;EAChC,MAAItoB,MAAJ,EAAYC,MAAZ,EAAoBC,GAApB,EAAyBI,GAAzB,EAA8BI,IAA9B;EACA,MAAIL,MAAMmoB,MAAM,MAAMF,EAAZ,CAAV;EACA,MAAIvoB,SAASvK,KAAb,EAAoB;EAClB,WAAO6K,GAAP;EACD;;EAED,MAAIooB,SAAS1oB,SAASA,MAAtB;EACA,OAAK,IAAIttB,IAAI,CAAb,EAAgBA,KAAK,EAArB,EAAyBA,GAAzB,EAA8B;EAC5ButB,aAASjW,KAAKE,GAAL,CAASoW,GAAT,CAAT;EACAJ,aAASlW,KAAK8W,GAAL,CAASR,GAAT,CAAT;EACAH,UAAMH,SAASC,MAAf;EACAM,UAAM,IAAIJ,MAAMA,GAAhB;EACAQ,WAAO,MAAMJ,GAAN,GAAYA,GAAZ,GAAkBL,MAAlB,IAA4BqoB,MAAM,IAAIG,MAAV,IAAoBzoB,SAASM,GAA7B,GAAmC,MAAMP,MAAN,GAAehW,KAAKvJ,GAAL,CAAS,CAAC,IAAI0f,GAAL,KAAa,IAAIA,GAAjB,CAAT,CAA9E,CAAP;EACAG,UAAMA,MAAMK,IAAZ;EACA,QAAI3W,KAAKC,GAAL,CAAS0W,IAAT,KAAkB,IAAtB,EAA4B;EAC1B,aAAOL,GAAP;EACD;EACF;EACD,SAAO,IAAP;EACD;;AAED,EAAO,IAAIiB,WAAQ,CAAC,yBAAD,EAA4B,QAA5B,EAAsC,KAAtC,CAAZ;AACP,YAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA,QAJM;EAKbinB,SAAOA;EALM,CAAf;;ECtHA;;;;;;AAMA,EAAO,SAASlyC,OAAT,GAAgB;;EAErB;;EAEA,OAAKqyC,OAAL,GAAe3+B,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAf;EACA,OAAK+wB,OAAL,GAAe5+B,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAf;EACA;EACA,OAAKgxB,aAAL,GAAqB,OAAO,KAAKvkC,CAAjC;EACA,OAAKu4B,EAAL,GAAU,CAAV;EACD;;EAED;;AAEA,EAAO,SAAS7b,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2I,MAAJ,EAAYC,MAAZ,CADyB;EAEzB,MAAIwe,IAAJ,CAFyB;EAGzB,MAAIoK,MAAJ,CAHyB;EAIzB,MAAIC,GAAJ,CAJyB;EAKzB,MAAIvP,CAAJ;EACA,MAAIrwB,CAAJ,EAAOC,CAAP;EACA,MAAI6X,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA;;EAEAs1B,SAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAP;;EAEA6H,WAASjW,KAAKE,GAAL,CAAStH,GAAT,CAAT;EACAsd,WAASlW,KAAK8W,GAAL,CAASle,GAAT,CAAT;;EAEAkmC,WAAS9+B,KAAK8W,GAAL,CAAS4d,IAAT,CAAT;EACAlF,MAAI,KAAKmP,OAAL,GAAe1oB,MAAf,GAAwB,KAAK2oB,OAAL,GAAe1oB,MAAf,GAAwB4oB,MAApD;EACAC,QAAM,CAAN;EACA,MAAKvP,IAAI,CAAL,IAAYxvB,KAAKC,GAAL,CAASuvB,CAAT,KAAe/jB,KAA/B,EAAuC;EACrCtM,QAAI,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,GAASykC,GAAT,GAAe7oB,MAAf,GAAwBlW,KAAKE,GAAL,CAASw0B,IAAT,CAAxB,GAAyClF,CAAvD;EACApwB,QAAI,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAASykC,GAAT,IAAgB,KAAKH,OAAL,GAAe3oB,MAAf,GAAwB,KAAK0oB,OAAL,GAAezoB,MAAf,GAAwB4oB,MAAhE,IAA0EtP,CAAxF;EACD,GAHD,MAIK;;EAEH;EACA;EACA;EACA;EACA;EACA;;EAEArwB,QAAI,KAAK4P,EAAL,GAAU,KAAK8vB,aAAL,GAAqB3oB,MAArB,GAA8BlW,KAAKE,GAAL,CAASw0B,IAAT,CAA5C;EACAt1B,QAAI,KAAK6P,EAAL,GAAU,KAAK4vB,aAAL,IAAsB,KAAKD,OAAL,GAAe3oB,MAAf,GAAwB,KAAK0oB,OAAL,GAAezoB,MAAf,GAAwB4oB,MAAtE,CAAd;EAED;EACDxxB,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;AAED,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAImnB,EAAJ,CADyB;EAEzB,MAAIlB,IAAJ,EAAUC,IAAV;EACA,MAAIhzB,CAAJ;EACA,MAAIyW,GAAJ,EAASre,GAAT;;EAEA;;EAEA0U,IAAEnO,CAAF,GAAM,CAACmO,EAAEnO,CAAF,GAAM,KAAK4P,EAAZ,IAAkB,KAAKzU,CAA7B;EACAgT,IAAElO,CAAF,GAAM,CAACkO,EAAElO,CAAF,GAAM,KAAK6P,EAAZ,IAAkB,KAAK3U,CAA7B;;EAEAgT,IAAEnO,CAAF,IAAO,KAAKgQ,EAAZ;EACA7B,IAAElO,CAAF,IAAO,KAAK+P,EAAZ;;EAEA,MAAKslB,KAAKz0B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAV,EAA6C;EAC3CoB,QAAIR,KAAK2iB,KAAL,CAAW8R,EAAX,EAAe,KAAK5B,EAApB,CAAJ;EACAU,WAAOvzB,KAAKE,GAAL,CAASM,CAAT,CAAP;EACAgzB,WAAOxzB,KAAK8W,GAAL,CAAStW,CAAT,CAAP;;EAEA5H,UAAM6lC,MAAMjL,OAAO,KAAKmL,OAAZ,GAAuBrxB,EAAElO,CAAF,GAAMm0B,IAAN,GAAa,KAAKqL,OAAnB,GAA8BnK,EAA1D,CAAN;EACAxd,UAAMjX,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAF,GAAMo0B,IAAjB,EAAuBkB,KAAK,KAAKmK,OAAV,GAAoBpL,IAApB,GAA2BlmB,EAAElO,CAAF,GAAM,KAAKu/B,OAAX,GAAqBpL,IAAvE,CAAN;EACAtc,UAAMC,WAAW,KAAK9I,KAAL,GAAa6I,GAAxB,CAAN;EACD,GARD,MASK;EACHre,UAAM,KAAKk6B,KAAX;EACA7b,UAAM,CAAN;EACD;;EAED3J,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,MAAD,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EChGe,iBAASvB,MAAT,EAAiB6mB,CAAjB,EAAoB;EACjC,MAAIpN,OAAO,IAAI,CAAC,IAAIzZ,SAASA,MAAd,KAAyB,IAAIA,MAA7B,IAAuChW,KAAKvJ,GAAL,CAAS,CAAC,IAAIuf,MAAL,KAAgB,IAAIA,MAApB,CAAT,CAAtD;EACA,MAAIhW,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAAS48B,CAAT,IAAcpN,IAAvB,IAA+B,MAAnC,EAA2C;EACzC,QAAIoN,IAAI,CAAR,EAAW;EACT,aAAQ,CAAC,CAAD,GAAKzxB,OAAb;EACD,KAFD,MAGK;EACH,aAAOA,OAAP;EACD;EACF;EACD;EACA,MAAIkL,MAAMtW,KAAK2vB,IAAL,CAAU,MAAMkN,CAAhB,CAAV;EACA,MAAIlmB,IAAJ;EACA,MAAIqY,OAAJ;EACA,MAAIC,OAAJ;EACA,MAAI9Y,GAAJ;EACA,OAAK,IAAIztB,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;EAC3BsmC,cAAUhvB,KAAKE,GAAL,CAASoW,GAAT,CAAV;EACA2Y,cAAUjvB,KAAK8W,GAAL,CAASR,GAAT,CAAV;EACAH,UAAMH,SAASgZ,OAAf;EACArY,WAAO3W,KAAKK,GAAL,CAAS,IAAI8V,MAAMA,GAAnB,EAAwB,CAAxB,KAA8B,IAAI8Y,OAAlC,KAA8C4N,KAAK,IAAI7mB,SAASA,MAAlB,IAA4BgZ,WAAW,IAAI7Y,MAAMA,GAArB,CAA5B,GAAwD,MAAMH,MAAN,GAAehW,KAAKvJ,GAAL,CAAS,CAAC,IAAI0f,GAAL,KAAa,IAAIA,GAAjB,CAAT,CAArH,CAAP;EACAG,WAAOK,IAAP;EACA,QAAI3W,KAAKC,GAAL,CAAS0W,IAAT,KAAkB,YAAtB,EAAoC;EAClC,aAAOL,GAAP;EACD;EACF;;EAED;EACA,SAAO4N,GAAP;EACD;;EC1BD;;;;;;AAMA,EAAO,SAAS53B,OAAT,GAAgB;EACrB;EACA,MAAI,CAAC,KAAK2nB,MAAV,EAAkB;EAChB,SAAK9E,EAAL,GAAU4H,MAAM,KAAKhzB,CAAX,EAAcic,KAAKE,GAAL,CAAS,KAAKgO,MAAd,CAAd,EAAqClO,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAArC,CAAV;EACD;EACF;;EAED;;AAEA,EAAO,SAAS8I,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA,MAAID,CAAJ,EAAOC,CAAP;EACA;;EAEA,MAAIs1B,OAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAX;EACA,MAAI,KAAK6F,MAAT,EAAiB;EACf9U,QAAI,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,GAASo6B,IAAT,GAAgB10B,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAA9B;EACA9O,QAAI,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAAS0F,KAAKE,GAAL,CAAStH,GAAT,CAAT,GAAyBoH,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAAvC;EACD,GAHD,MAIK;EACH,QAAIqwB,KAAKrC,MAAM,KAAKn4C,CAAX,EAAcic,KAAKE,GAAL,CAAStH,GAAT,CAAd,CAAT;EACAuG,QAAI,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,GAAS,KAAK6U,EAAd,GAAmBulB,IAAjC;EACAt1B,QAAI,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAASikC,EAAT,GAAc,GAAd,GAAoB,KAAKpvB,EAAvC;EACD;;EAED7B,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;EAED;;AAEA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACA,MAAIgI,GAAJ,EAASre,GAAT;;EAEA,MAAI,KAAKqb,MAAT,EAAiB;EACfgD,UAAMC,WAAW,KAAK9I,KAAL,GAAcd,EAAEnO,CAAF,GAAM,KAAK7E,CAAZ,GAAiB0F,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAAzC,CAAN;EACAtV,UAAMoH,KAAK2vB,IAAL,CAAWriB,EAAElO,CAAF,GAAM,KAAK9E,CAAZ,GAAiB0F,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAA3B,CAAN;EACD,GAHD,MAIK;EACHtV,UAAMomC,OAAO,KAAKj7C,CAAZ,EAAe,IAAIupB,EAAElO,CAAN,GAAU,KAAK+P,EAAf,GAAoB,KAAK7U,CAAxC,CAAN;EACA2c,UAAMC,WAAW,KAAK9I,KAAL,GAAad,EAAEnO,CAAF,IAAO,KAAK7E,CAAL,GAAS,KAAK6U,EAArB,CAAxB,CAAN;EACD;;EAED7B,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,KAAD,CAAZ;AACP,YAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EC7DO,SAASjrB,OAAT,GAAgB;;EAErB,OAAKyiB,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,OAAKE,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,OAAKpB,IAAL,GAAY,KAAKA,IAAL,IAAa,CAAzB;EACA,OAAKO,KAAL,GAAa,KAAKA,KAAL,IAAc,CAA3B;EACA,OAAKF,MAAL,GAAc,KAAKA,MAAL,IAAe,CAA7B;EACA,OAAKhN,KAAL,GAAa,KAAKA,KAAL,IAAc,uCAA3B;;EAEA,OAAK2xB,EAAL,GAAU7yB,KAAK8W,GAAL,CAAS,KAAK5I,MAAd,CAAV;EACD;;EAED;EACA;AACA,EAAO,SAAS8I,UAAT,CAAiB1J,CAAjB,EAAoB;;EAEzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEA,MAAIs1B,OAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAX;EACA,MAAI6wB,OAAOrD,WAAWhjC,MAAM,KAAKiV,IAAtB,CAAX;EACAP,IAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAW,KAAKzU,CAAL,GAASo6B,IAAT,GAAgB,KAAK7B,EAAtC;EACAvlB,IAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAW,KAAK3U,CAAL,GAAS2kC,IAA1B;EACA,SAAO3xB,CAAP;EACD;;EAED;EACA;AACA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;;EAEzB,MAAInO,IAAImO,EAAEnO,CAAV;EACA,MAAIC,IAAIkO,EAAElO,CAAV;;EAEAkO,IAAEnO,CAAF,GAAM+X,WAAW,KAAK9I,KAAL,GAAc,CAACjP,IAAI,KAAK4P,EAAV,KAAiB,KAAKzU,CAAL,GAAS,KAAKu4B,EAA/B,CAAzB,CAAN;EACAvlB,IAAElO,CAAF,GAAMw8B,WAAW,KAAK/tB,IAAL,GAAa,CAACzO,IAAI,KAAK6P,EAAV,IAAiB,KAAK3U,CAA9C,CAAN;EACA,SAAOgT,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,iBAAD,EAAoB,yBAApB,EAA+C,KAA/C,CAAZ;AACP,YAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EChCA,IAAImX,aAAW,EAAf;;AAEA,EAAO,SAASpiC,OAAT,GAAgB;EACrB;;EAEA,OAAKmjC,IAAL,GAAY,KAAKpgB,CAAL,GAAS,KAAK/U,CAA1B;EACA,OAAKuc,EAAL,GAAU,IAAI7W,KAAKK,GAAL,CAAS,KAAKovB,IAAd,EAAoB,CAApB,CAAd,CAJqB;EAKrB,OAAK1rC,CAAL,GAASic,KAAKoW,IAAL,CAAU,KAAKS,EAAf,CAAT;EACA,OAAK0jB,EAAL,GAAUE,KAAK,KAAK5jB,EAAV,CAAV;EACA,OAAKyT,EAAL,GAAUoQ,KAAK,KAAK7jB,EAAV,CAAV;EACA,OAAKse,EAAL,GAAUwF,KAAK,KAAK9jB,EAAV,CAAV;EACA,OAAK2jB,EAAL,GAAUI,KAAK,KAAK/jB,EAAV,CAAV;EACA,OAAKiY,GAAL,GAAW,KAAKx0B,CAAL,GAASugC,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyC,KAAK3sB,IAA9C,CAApB,CAVqB;EAWtB;;EAED;;AAEA,EAAO,SAASmJ,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA,MAAID,CAAJ,EAAOC,CAAP,EAAU8/B,EAAV;EACA,MAAIxK,OAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAX;EACA8wB,OAAKxK,OAAO10B,KAAKE,GAAL,CAAStH,GAAT,CAAZ;EACA,MAAI,KAAKqb,MAAT,EAAiB;EACf,QAAIjU,KAAKC,GAAL,CAASrH,GAAT,KAAiB6S,KAArB,EAA4B;EAC1BtM,UAAI,KAAK7E,CAAL,GAASo6B,IAAb;EACAt1B,UAAI,CAAC,CAAD,GAAK,KAAK9E,CAAV,GAAc,KAAKuT,IAAvB;EACD,KAHD,MAIK;EACH1O,UAAI,KAAK7E,CAAL,GAAS0F,KAAKE,GAAL,CAASg/B,EAAT,CAAT,GAAwBl/B,KAAKwW,GAAL,CAAS5d,GAAT,CAA5B;EACAwG,UAAI,KAAK9E,CAAL,IAAUshC,WAAWhjC,MAAM,KAAKiV,IAAtB,IAA8B,CAAC,IAAI7N,KAAK8W,GAAL,CAASooB,EAAT,CAAL,IAAqBl/B,KAAKwW,GAAL,CAAS5d,GAAT,CAA7D,CAAJ;EACD;EACF,GATD,MAUK;EACH,QAAIoH,KAAKC,GAAL,CAASrH,GAAT,KAAiB6S,KAArB,EAA4B;EAC1BtM,UAAI,KAAK7E,CAAL,GAASo6B,IAAb;EACAt1B,UAAI,CAAC,CAAD,GAAK,KAAK0vB,GAAd;EACD,KAHD,MAIK;EACH,UAAIiM,KAAKC,GAAG,KAAK1gC,CAAR,EAAW,KAAKvW,CAAhB,EAAmBic,KAAKE,GAAL,CAAStH,GAAT,CAAnB,IAAoCoH,KAAKwW,GAAL,CAAS5d,GAAT,CAA7C;EACAuG,UAAI47B,KAAK/6B,KAAKE,GAAL,CAASg/B,EAAT,CAAT;EACA9/B,UAAI,KAAK9E,CAAL,GAASugC,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyC5hC,GAAzC,CAAT,GAAyD,KAAKk2B,GAA9D,GAAoEiM,MAAM,IAAI/6B,KAAK8W,GAAL,CAASooB,EAAT,CAAV,CAAxE;EACD;EAEF;EACD5xB,IAAEnO,CAAF,GAAMA,IAAI,KAAK4P,EAAf;EACAzB,IAAElO,CAAF,GAAMA,IAAI,KAAK6P,EAAf;EACA,SAAO3B,CAAP;EACD;;EAED;;AAEA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI2J,GAAJ,EAASre,GAAT,EAAcuG,CAAd,EAAiBC,CAAjB,EAAoB1W,CAApB;EACA,MAAIymC,EAAJ,EAAQgQ,EAAR;EACA,MAAI7oB,GAAJ,EAASK,IAAT;EACAxX,MAAImO,EAAEnO,CAAF,GAAM,KAAK4P,EAAf;EACA3P,MAAIkO,EAAElO,CAAF,GAAM,KAAK6P,EAAf;;EAEA,MAAI,KAAKgF,MAAT,EAAiB;EACf,QAAIjU,KAAKC,GAAL,CAASb,IAAI,KAAK9E,CAAL,GAAS,KAAKuT,IAA3B,KAAoCpC,KAAxC,EAA+C;EAC7CwL,YAAMC,WAAW/X,IAAI,KAAK7E,CAAT,GAAa,KAAK8T,KAA7B,CAAN;EACAxV,YAAM,CAAN;EACD,KAHD,MAIK;EACHu2B,WAAK,KAAKthB,IAAL,GAAYzO,IAAI,KAAK9E,CAA1B;EACA6kC,WAAKhgC,IAAIA,CAAJ,GAAQ,KAAK7E,CAAb,GAAiB,KAAKA,CAAtB,GAA0B60B,KAAKA,EAApC;EACA7Y,YAAM6Y,EAAN;EACA,UAAIiQ,MAAJ;EACA,WAAK12C,IAAIgmC,UAAT,EAAmBhmC,CAAnB,EAAsB,EAAEA,CAAxB,EAA2B;EACzB02C,iBAASp/B,KAAKwW,GAAL,CAASF,GAAT,CAAT;EACAK,eAAO,CAAC,CAAD,IAAMwY,MAAM7Y,MAAM8oB,MAAN,GAAe,CAArB,IAA0B9oB,GAA1B,GAAgC,OAAOA,MAAMA,GAAN,GAAY6oB,EAAnB,IAAyBC,MAA/D,KAA0E,CAAC9oB,MAAM6Y,EAAP,IAAaiQ,MAAb,GAAsB,CAAhG,CAAP;EACA9oB,eAAOK,IAAP;EACA,YAAI3W,KAAKC,GAAL,CAAS0W,IAAT,KAAkBlL,KAAtB,EAA6B;EAC3B7S,gBAAM0d,GAAN;EACA;EACD;EACF;EACDW,YAAMC,WAAW,KAAK9I,KAAL,GAAcpO,KAAK2vB,IAAL,CAAUxwB,IAAIa,KAAKwW,GAAL,CAASF,GAAT,CAAJ,GAAoB,KAAKhc,CAAnC,CAAD,GAA0C0F,KAAKE,GAAL,CAAStH,GAAT,CAAlE,CAAN;EACD;EACF,GArBD,MAsBK;EACH,QAAIoH,KAAKC,GAAL,CAASb,IAAI,KAAK0vB,GAAlB,KAA0BrjB,KAA9B,EAAqC;EACnC7S,YAAM,CAAN;EACAqe,YAAMC,WAAW,KAAK9I,KAAL,GAAajP,IAAI,KAAK7E,CAAjC,CAAN;EACD,KAHD,MAIK;;EAEH60B,WAAK,CAAC,KAAKL,GAAL,GAAW1vB,CAAZ,IAAiB,KAAK9E,CAA3B;EACA6kC,WAAKhgC,IAAIA,CAAJ,GAAQ,KAAK7E,CAAb,GAAiB,KAAKA,CAAtB,GAA0B60B,KAAKA,EAApC;EACA7Y,YAAM6Y,EAAN;EACA,UAAIgM,EAAJ,EAAQkE,GAAR,EAAaC,IAAb,EAAmBC,EAAnB;EACA,UAAIppB,GAAJ;EACA,WAAKztB,IAAIgmC,UAAT,EAAmBhmC,CAAnB,EAAsB,EAAEA,CAAxB,EAA2B;EACzBytB,cAAM,KAAKpyB,CAAL,GAASic,KAAKE,GAAL,CAASoW,GAAT,CAAf;EACA6kB,aAAKn7B,KAAKoW,IAAL,CAAU,IAAID,MAAMA,GAApB,IAA2BnW,KAAKwW,GAAL,CAASF,GAAT,CAAhC;EACA+oB,cAAM,KAAK/kC,CAAL,GAASugC,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyClkB,GAAzC,CAAf;EACAgpB,eAAO,KAAK/E,EAAL,GAAU,IAAI,KAAKjQ,EAAT,GAActqB,KAAK8W,GAAL,CAAS,IAAIR,GAAb,CAAxB,GAA4C,IAAI,KAAK6e,EAAT,GAAcn1B,KAAK8W,GAAL,CAAS,IAAIR,GAAb,CAA1D,GAA8E,IAAI,KAAKkkB,EAAT,GAAcx6B,KAAK8W,GAAL,CAAS,IAAIR,GAAb,CAAnG;EACAipB,aAAKF,MAAM,KAAK/kC,CAAhB;EACAqc,eAAO,CAACwY,MAAMgM,KAAKoE,EAAL,GAAU,CAAhB,IAAqBA,EAArB,GAA0B,MAAMpE,EAAN,IAAYoE,KAAKA,EAAL,GAAUJ,EAAtB,CAA3B,KAAyD,KAAKtoB,EAAL,GAAU7W,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAAV,IAA+BipB,KAAKA,EAAL,GAAUJ,EAAV,GAAe,IAAIhQ,EAAJ,GAASoQ,EAAvD,KAA8D,IAAIpE,EAAlE,IAAwE,CAAChM,KAAKoQ,EAAN,KAAapE,KAAKmE,IAAL,GAAY,IAAIt/B,KAAKE,GAAL,CAAS,IAAIoW,GAAb,CAA7B,CAAxE,GAA0HgpB,IAAnL,CAAP;EACAhpB,eAAOK,IAAP;EACA,YAAI3W,KAAKC,GAAL,CAAS0W,IAAT,KAAkBlL,KAAtB,EAA6B;EAC3B7S,gBAAM0d,GAAN;EACA;EACD;EACF;;EAED;EACA6kB,WAAKn7B,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAL,GAAU7W,KAAKK,GAAL,CAASL,KAAKE,GAAL,CAAStH,GAAT,CAAT,EAAwB,CAAxB,CAAxB,IAAsDoH,KAAKwW,GAAL,CAAS5d,GAAT,CAA3D;EACAqe,YAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2vB,IAAL,CAAUxwB,IAAIg8B,EAAJ,GAAS,KAAK7gC,CAAxB,IAA6B0F,KAAKE,GAAL,CAAStH,GAAT,CAArD,CAAN;EACD;EACF;;EAED0U,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,WAAD,EAAc,MAAd,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EC/GO,SAASjrB,OAAT,GAAgB;EACrB,OAAKy7B,CAAL,GAAS,EAAT;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,YAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,YAAb;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,WAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,UAAb;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,SAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,SAAb;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,SAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,QAAb;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,OAAZ;EACA,OAAKA,CAAL,CAAO,EAAP,IAAa,CAAC,OAAd;;EAEA,OAAKyX,IAAL,GAAY,EAAZ;EACA,OAAKC,IAAL,GAAY,EAAZ;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,YAAf;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,CAAf;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,WAAf;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,WAAf;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,CAAC,WAAhB;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,WAAf;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,CAAC,UAAhB;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,UAAf;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,CAAC,UAAhB;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,CAAC,UAAhB;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,CAAC,SAAhB;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,CAAC,SAAhB;;EAEA,OAAKC,IAAL,GAAY,EAAZ;EACA,OAAKC,IAAL,GAAY,EAAZ;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,YAAf;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,CAAf;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,CAAC,WAAhB;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,CAAC,WAAhB;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,WAAf;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,CAAC,WAAhB;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,CAAC,UAAhB;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,UAAf;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,UAAf;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,UAAf;EACA,OAAKD,IAAL,CAAU,CAAV,IAAe,SAAf;EACA,OAAKC,IAAL,CAAU,CAAV,IAAe,SAAf;;EAEA,OAAKhV,CAAL,GAAS,EAAT;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,YAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,YAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,UAAb;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,SAAb;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,SAAb;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,QAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,OAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,OAAZ;EACA,OAAKA,CAAL,CAAO,CAAP,IAAY,CAAC,MAAb;EACD;;EAED;;;;AAIA,EAAO,SAAS3T,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAIlT,CAAJ;EACA,MAAI6c,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEA,MAAIwgC,YAAYhnC,MAAM,KAAKiV,IAA3B;EACA,MAAIkhB,YAAY9X,MAAM,KAAK7I,KAA3B;;EAEA;EACA;EACA,MAAIyxB,QAAQD,YAAYz0B,UAAZ,GAAyB,IAArC;EACA,MAAI20B,WAAW/Q,SAAf;EACA,MAAIgR,UAAU,CAAd,CAZyB;;EAczB,MAAIC,QAAQ,CAAZ;EACA,OAAK5lC,IAAI,CAAT,EAAYA,KAAK,EAAjB,EAAqBA,GAArB,EAA0B;EACxB2lC,cAAUA,UAAUF,KAApB;EACAG,YAAQA,QAAQ,KAAKjY,CAAL,CAAO3tB,CAAP,IAAY2lC,OAA5B;EACD;;EAED;EACA,MAAIE,QAAQD,KAAZ;EACA,MAAIE,QAAQJ,QAAZ;;EAEA;EACA,MAAIK,UAAU,CAAd;EACA,MAAIC,UAAU,CAAd,CA1ByB;EA2BzB,MAAIC,QAAJ;EACA,MAAIC,QAAJ;;EAEA,MAAIC,OAAO,CAAX;EACA,MAAIC,OAAO,CAAX;EACA,OAAKpmC,IAAI,CAAT,EAAYA,KAAK,CAAjB,EAAoBA,GAApB,EAAyB;EACvBimC,eAAWF,UAAUF,KAAV,GAAkBG,UAAUF,KAAvC;EACAI,eAAWF,UAAUH,KAAV,GAAkBE,UAAUD,KAAvC;EACAC,cAAUE,QAAV;EACAD,cAAUE,QAAV;EACAC,WAAOA,OAAO,KAAKf,IAAL,CAAUplC,CAAV,IAAe+lC,OAAtB,GAAgC,KAAKV,IAAL,CAAUrlC,CAAV,IAAegmC,OAAtD;EACAI,WAAOA,OAAO,KAAKf,IAAL,CAAUrlC,CAAV,IAAe+lC,OAAtB,GAAgC,KAAKX,IAAL,CAAUplC,CAAV,IAAegmC,OAAtD;EACD;;EAED;EACA9yB,IAAEnO,CAAF,GAAOqhC,OAAO,KAAKlmC,CAAb,GAAkB,KAAKyU,EAA7B;EACAzB,IAAElO,CAAF,GAAOmhC,OAAO,KAAKjmC,CAAb,GAAkB,KAAK2U,EAA7B;;EAEA,SAAO3B,CAAP;EACD;;EAED;;;AAGA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAIlT,CAAJ;EACA,MAAI+E,IAAImO,EAAEnO,CAAV;EACA,MAAIC,IAAIkO,EAAElO,CAAV;;EAEA,MAAIqhC,UAAUthC,IAAI,KAAK4P,EAAvB;EACA,MAAI2xB,UAAUthC,IAAI,KAAK6P,EAAvB;;EAEA;EACA,MAAIsxB,OAAOG,UAAU,KAAKpmC,CAA1B;EACA,MAAIkmC,OAAOC,UAAU,KAAKnmC,CAA1B;;EAEA;EACA,MAAIqmC,SAAS,CAAb;EACA,MAAIC,SAAS,CAAb,CAdyB;EAezB,MAAIC,OAAJ;EACA,MAAIC,OAAJ;;EAEA,MAAIb,QAAQ,CAAZ;EACA,MAAIC,QAAQ,CAAZ;EACA,OAAK9lC,IAAI,CAAT,EAAYA,KAAK,CAAjB,EAAoBA,GAApB,EAAyB;EACvBymC,cAAUF,SAASJ,IAAT,GAAgBK,SAASJ,IAAnC;EACAM,cAAUF,SAASL,IAAT,GAAgBI,SAASH,IAAnC;EACAG,aAASE,OAAT;EACAD,aAASE,OAAT;EACAb,YAAQA,QAAQ,KAAKP,IAAL,CAAUtlC,CAAV,IAAeumC,MAAvB,GAAgC,KAAKhB,IAAL,CAAUvlC,CAAV,IAAewmC,MAAvD;EACAV,YAAQA,QAAQ,KAAKP,IAAL,CAAUvlC,CAAV,IAAeumC,MAAvB,GAAgC,KAAKjB,IAAL,CAAUtlC,CAAV,IAAewmC,MAAvD;EACD;;EAED;EACA;EACA;EACA;EACA,OAAK,IAAIl4C,IAAI,CAAb,EAAgBA,IAAI,KAAKq4C,UAAzB,EAAqCr4C,GAArC,EAA0C;EACxC,QAAIy3C,UAAUF,KAAd;EACA,QAAIG,UAAUF,KAAd;EACA,QAAIG,QAAJ;EACA,QAAIC,QAAJ;;EAEA,QAAIU,SAAST,IAAb;EACA,QAAIU,SAAST,IAAb;EACA,SAAKpmC,IAAI,CAAT,EAAYA,KAAK,CAAjB,EAAoBA,GAApB,EAAyB;EACvBimC,iBAAWF,UAAUF,KAAV,GAAkBG,UAAUF,KAAvC;EACAI,iBAAWF,UAAUH,KAAV,GAAkBE,UAAUD,KAAvC;EACAC,gBAAUE,QAAV;EACAD,gBAAUE,QAAV;EACAU,eAASA,SAAS,CAAC5mC,IAAI,CAAL,KAAW,KAAKolC,IAAL,CAAUplC,CAAV,IAAe+lC,OAAf,GAAyB,KAAKV,IAAL,CAAUrlC,CAAV,IAAegmC,OAAnD,CAAlB;EACAa,eAASA,SAAS,CAAC7mC,IAAI,CAAL,KAAW,KAAKqlC,IAAL,CAAUrlC,CAAV,IAAe+lC,OAAf,GAAyB,KAAKX,IAAL,CAAUplC,CAAV,IAAegmC,OAAnD,CAAlB;EACD;;EAEDD,cAAU,CAAV;EACAC,cAAU,CAAV;EACA,QAAIc,SAAS,KAAK1B,IAAL,CAAU,CAAV,CAAb;EACA,QAAI2B,SAAS,KAAK1B,IAAL,CAAU,CAAV,CAAb;EACA,SAAKrlC,IAAI,CAAT,EAAYA,KAAK,CAAjB,EAAoBA,GAApB,EAAyB;EACvBimC,iBAAWF,UAAUF,KAAV,GAAkBG,UAAUF,KAAvC;EACAI,iBAAWF,UAAUH,KAAV,GAAkBE,UAAUD,KAAvC;EACAC,gBAAUE,QAAV;EACAD,gBAAUE,QAAV;EACAY,eAASA,SAAS9mC,KAAK,KAAKolC,IAAL,CAAUplC,CAAV,IAAe+lC,OAAf,GAAyB,KAAKV,IAAL,CAAUrlC,CAAV,IAAegmC,OAA7C,CAAlB;EACAe,eAASA,SAAS/mC,KAAK,KAAKqlC,IAAL,CAAUrlC,CAAV,IAAe+lC,OAAf,GAAyB,KAAKX,IAAL,CAAUplC,CAAV,IAAegmC,OAA7C,CAAlB;EACD;;EAED;EACA,QAAIgB,OAAOF,SAASA,MAAT,GAAkBC,SAASA,MAAtC;EACAlB,YAAQ,CAACe,SAASE,MAAT,GAAkBD,SAASE,MAA5B,IAAsCC,IAA9C;EACAlB,YAAQ,CAACe,SAASC,MAAT,GAAkBF,SAASG,MAA5B,IAAsCC,IAA9C;EACD;;EAED;EACA,MAAIpB,QAAQC,KAAZ;EACA,MAAIH,WAAWI,KAAf;EACA,MAAImB,UAAU,CAAd,CAxEyB;;EA0EzB,MAAIxB,QAAQ,CAAZ;EACA,OAAKzlC,IAAI,CAAT,EAAYA,KAAK,CAAjB,EAAoBA,GAApB,EAAyB;EACvBinC,cAAUA,UAAUrB,KAApB;EACAH,YAAQA,QAAQ,KAAKlV,CAAL,CAAOvwB,CAAP,IAAYinC,OAA5B;EACD;;EAED;EACA;EACA,MAAIzoC,MAAM,KAAKiV,IAAL,GAAagyB,QAAQ10B,UAAR,GAAqB,GAA5C;EACA,MAAI8L,MAAM,KAAK7I,KAAL,GAAa0xB,QAAvB;;EAEAxyB,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;;EAEA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,sBAAD,EAAyB,MAAzB,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EC1NA;;;;;;EAOA;;AAEA,EAAO,SAASjrB,OAAT,GAAgB;EACrB;;;EAGF;;AAEA,EAAO,SAAS0qB,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA;;EAEA,MAAIs1B,OAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAX;EACA,MAAIjP,IAAI,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,GAASo6B,IAA3B;EACA,MAAIt1B,IAAI,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAAS0F,KAAKvJ,GAAL,CAASuJ,KAAKwW,GAAL,CAAUxW,KAAKqL,EAAL,GAAU,CAAX,GAAiBzS,MAAM,GAAhC,CAAT,CAAT,GAA2D,IAA7E;;EAEA0U,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;EAED;;AAEA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;;EAEA,MAAIgI,MAAMC,WAAW,KAAK9I,KAAL,GAAad,EAAEnO,CAAF,GAAM,KAAK7E,CAAnC,CAAV;EACA,MAAI1B,MAAM,OAAOoH,KAAK4W,IAAL,CAAU5W,KAAKqX,GAAL,CAAS,MAAM/J,EAAElO,CAAR,GAAY,KAAK9E,CAA1B,CAAV,IAA0C0F,KAAKqL,EAAL,GAAU,CAA3D,CAAV;;EAEAiC,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,oBAAD,EAAuB,MAAvB,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EC3CA,IAAImX,aAAW,EAAf;AACA;AAOA,EAAO,SAASpiC,OAAT,GAAgB;EACrB;;;EAIA,MAAI,CAAC,KAAK2nB,MAAV,EAAkB;EAChB,SAAKsa,EAAL,GAAUM,QAAQ,KAAKhY,EAAb,CAAV;EACD,GAFD,MAGK;EACH,SAAKzc,CAAL,GAAS,CAAT;EACA,SAAKksB,CAAL,GAAS,CAAT;EACA,SAAKzP,EAAL,GAAU,CAAV;EACA,SAAKyqB,GAAL,GAAWthC,KAAKoW,IAAL,CAAU,CAAC,KAAKkQ,CAAL,GAAS,CAAV,IAAe,KAAKlsB,CAA9B,CAAX;EACA,SAAKmnC,GAAL,GAAW,KAAKD,GAAL,IAAY,KAAKhb,CAAL,GAAS,CAArB,CAAX;EACD;EAEF;;EAED;;AAEA,EAAO,SAAStP,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAInO,CAAJ,EAAOC,CAAP;EACA,MAAI6X,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA;;EAEA6X,QAAMC,WAAWD,MAAM,KAAK7I,KAAtB,CAAN;;EAEA,MAAI,KAAK6F,MAAT,EAAiB;EACf,QAAI,CAAC,KAAKqS,CAAV,EAAa;EACX1tB,YAAM,KAAKwB,CAAL,KAAW,CAAX,GAAe4F,KAAK2vB,IAAL,CAAU,KAAKv1B,CAAL,GAAS4F,KAAKE,GAAL,CAAStH,GAAT,CAAnB,CAAf,GAAmDA,GAAzD;EACD,KAFD,MAGK;EACH,UAAIwW,IAAI,KAAKhV,CAAL,GAAS4F,KAAKE,GAAL,CAAStH,GAAT,CAAjB;EACA,WAAK,IAAIlQ,IAAIgmC,UAAb,EAAuBhmC,CAAvB,EAA0B,EAAEA,CAA5B,EAA+B;EAC7B,YAAIw/B,IAAI,CAAC,KAAK5B,CAAL,GAAS1tB,GAAT,GAAeoH,KAAKE,GAAL,CAAStH,GAAT,CAAf,GAA+BwW,CAAhC,KAAsC,KAAKkX,CAAL,GAAStmB,KAAK8W,GAAL,CAASle,GAAT,CAA/C,CAAR;EACAA,eAAOsvB,CAAP;EACA,YAAIloB,KAAKC,GAAL,CAASioB,CAAT,IAAczc,KAAlB,EAAyB;EACvB;EACD;EACF;EACF;EACDtM,QAAI,KAAK7E,CAAL,GAAS,KAAKinC,GAAd,GAAoBtqB,GAApB,IAA2B,KAAKqP,CAAL,GAAStmB,KAAK8W,GAAL,CAASle,GAAT,CAApC,CAAJ;EACAwG,QAAI,KAAK9E,CAAL,GAAS,KAAKgnC,GAAd,GAAoB1oC,GAAxB;EAED,GAjBD,MAkBK;;EAEH,QAAI6B,IAAIuF,KAAKE,GAAL,CAAStH,GAAT,CAAR;EACA,QAAI4H,IAAIR,KAAK8W,GAAL,CAASle,GAAT,CAAR;EACAwG,QAAI,KAAK9E,CAAL,GAASs0B,QAAQh2B,GAAR,EAAa6B,CAAb,EAAgB+F,CAAhB,EAAmB,KAAK+tB,EAAxB,CAAb;EACApvB,QAAI,KAAK7E,CAAL,GAAS2c,GAAT,GAAezW,CAAf,GAAmBR,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAL,GAAUpc,CAAV,GAAcA,CAA5B,CAAvB;EACD;;EAED6S,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;AAED,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI1U,GAAJ,EAAS62B,IAAT,EAAexY,GAAf,EAAoBxc,CAApB;;EAEA6S,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAkI,QAAM3J,EAAEnO,CAAF,GAAM,KAAK7E,CAAjB;EACAgT,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACArW,QAAM0U,EAAElO,CAAF,GAAM,KAAK9E,CAAjB;;EAEA,MAAI,KAAK2Z,MAAT,EAAiB;EACfrb,WAAO,KAAK0oC,GAAZ;EACArqB,UAAMA,OAAO,KAAKsqB,GAAL,IAAY,KAAKjb,CAAL,GAAStmB,KAAK8W,GAAL,CAASle,GAAT,CAArB,CAAP,CAAN;EACA,QAAI,KAAK0tB,CAAT,EAAY;EACV1tB,YAAM6lC,MAAM,CAAC,KAAKnY,CAAL,GAAS1tB,GAAT,GAAeoH,KAAKE,GAAL,CAAStH,GAAT,CAAhB,IAAiC,KAAKwB,CAA5C,CAAN;EACD,KAFD,MAGK,IAAI,KAAKA,CAAL,KAAW,CAAf,EAAkB;EACrBxB,YAAM6lC,MAAMz+B,KAAKE,GAAL,CAAStH,GAAT,IAAgB,KAAKwB,CAA3B,CAAN;EACD;EACD6c,UAAMC,WAAWD,MAAM,KAAK7I,KAAtB,CAAN;EACAxV,UAAMgjC,WAAWhjC,GAAX,CAAN;EACD,GAXD,MAYK;EACHA,UAAMg3B,YAAYtiB,EAAElO,CAAF,GAAM,KAAK9E,CAAvB,EAA0B,KAAKuc,EAA/B,EAAmC,KAAK0X,EAAxC,CAAN;EACA9zB,QAAIuF,KAAKC,GAAL,CAASrH,GAAT,CAAJ;EACA,QAAI6B,IAAI2Q,OAAR,EAAiB;EACf3Q,UAAIuF,KAAKE,GAAL,CAAStH,GAAT,CAAJ;EACA62B,aAAO,KAAKrhB,KAAL,GAAad,EAAEnO,CAAF,GAAMa,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAL,GAAUpc,CAAV,GAAcA,CAA5B,CAAN,IAAwC,KAAKH,CAAL,GAAS0F,KAAK8W,GAAL,CAASle,GAAT,CAAjD,CAApB;EACA;EACAqe,YAAMC,WAAWuY,IAAX,CAAN;EACD,KALD,MAMK,IAAKh1B,IAAIgR,KAAL,GAAcL,OAAlB,EAA2B;EAC9B6L,YAAM,KAAK7I,KAAX;EACD;EACF;EACDd,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,YAAD,EAAe,MAAf,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EC5GO,SAASjrB,OAAT,GAAgB;AACvB,EACA;;AAEA,EAAO,SAAS0qB,UAAT,CAAiB1J,CAAjB,EAAoB;;EAEzB;;EAEA,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEA,MAAI2vB,YAAY7X,WAAWD,MAAM,KAAK7I,KAAtB,CAAhB;EACA,MAAImrB,QAAQ3gC,GAAZ;EACA,MAAIud,MAAMnW,KAAKqL,EAAL,GAAUrL,KAAKE,GAAL,CAAStH,GAAT,CAApB;;EAEA;;EAEA,SAAO,IAAP,EAAa;EACX,QAAI4oC,cAAc,EAAEjI,QAAQv5B,KAAKE,GAAL,CAASq5B,KAAT,CAAR,GAA0BpjB,GAA5B,KAAoC,IAAInW,KAAK8W,GAAL,CAASyiB,KAAT,CAAxC,CAAlB;EACAA,aAASiI,WAAT;EACA,QAAIxhC,KAAKC,GAAL,CAASuhC,WAAT,IAAwB/1B,KAA5B,EAAmC;EACjC;EACD;EACF;EACD8tB,WAAS,CAAT;;EAEA;;;EAGA,MAAIv5B,KAAKqL,EAAL,GAAU,CAAV,GAAcrL,KAAKC,GAAL,CAASrH,GAAT,CAAd,GAA8B6S,KAAlC,EAAyC;EACvCsjB,gBAAY,CAAZ;EACD;EACD,MAAI5vB,IAAI,iBAAiB,KAAK7E,CAAtB,GAA0By0B,SAA1B,GAAsC/uB,KAAK8W,GAAL,CAASyiB,KAAT,CAAtC,GAAwD,KAAKxqB,EAArE;EACA,MAAI3P,IAAI,kBAAkB,KAAK9E,CAAvB,GAA2B0F,KAAKE,GAAL,CAASq5B,KAAT,CAA3B,GAA6C,KAAKtqB,EAA1D;;EAEA3B,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;AAED,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAIisB,KAAJ;EACA,MAAI5K,GAAJ;;EAEA;;EAEArhB,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACA0f,QAAMrhB,EAAElO,CAAF,IAAO,kBAAkB,KAAK9E,CAA9B,CAAN;;EAEA;;;EAGA,MAAI0F,KAAKC,GAAL,CAAS0uB,GAAT,IAAgB,cAApB,EAAoC;EAClCA,UAAM,cAAN;EACD;EACD4K,UAAQv5B,KAAK2vB,IAAL,CAAUhB,GAAV,CAAR;EACA,MAAI1X,MAAMC,WAAW,KAAK9I,KAAL,GAAcd,EAAEnO,CAAF,IAAO,iBAAiB,KAAK7E,CAAtB,GAA0B0F,KAAK8W,GAAL,CAASyiB,KAAT,CAAjC,CAAzB,CAAV;EACA,MAAItiB,MAAO,CAACjX,KAAKqL,EAAjB,EAAsB;EACpB4L,UAAM,CAACjX,KAAKqL,EAAZ;EACD;EACD,MAAI4L,MAAMjX,KAAKqL,EAAf,EAAmB;EACjB4L,UAAMjX,KAAKqL,EAAX;EACD;EACDsjB,QAAM,CAAC,IAAI4K,KAAJ,GAAYv5B,KAAKE,GAAL,CAAS,IAAIq5B,KAAb,CAAb,IAAoCv5B,KAAKqL,EAA/C;EACA,MAAIrL,KAAKC,GAAL,CAAS0uB,GAAT,IAAgB,CAApB,EAAuB;EACrBA,UAAM,CAAN;EACD;EACD,MAAI/1B,MAAMoH,KAAK2vB,IAAL,CAAUhB,GAAV,CAAV;;EAEArhB,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,WAAD,EAAc,MAAd,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EClEO,SAASjrB,OAAT,GAAgB;;EAErB;;EAEA;EACA,MAAI0T,KAAKC,GAAL,CAAS,KAAK8N,IAAL,GAAY,KAAKE,IAA1B,IAAkCxC,KAAtC,EAA6C;EAC3C;EACD;EACD,OAAKwC,IAAL,GAAY,KAAKA,IAAL,IAAa,KAAKF,IAA9B;EACA,OAAK0hB,IAAL,GAAY,KAAKpgB,CAAL,GAAS,KAAK/U,CAA1B;EACA,OAAKuc,EAAL,GAAU,IAAI7W,KAAKK,GAAL,CAAS,KAAKovB,IAAd,EAAoB,CAApB,CAAd;EACA,OAAK1rC,CAAL,GAASic,KAAKoW,IAAL,CAAU,KAAKS,EAAf,CAAT;EACA,OAAK0jB,EAAL,GAAUE,KAAK,KAAK5jB,EAAV,CAAV;EACA,OAAKyT,EAAL,GAAUoQ,KAAK,KAAK7jB,EAAV,CAAV;EACA,OAAKse,EAAL,GAAUwF,KAAK,KAAK9jB,EAAV,CAAV;EACA,OAAK2jB,EAAL,GAAUI,KAAK,KAAK/jB,EAAV,CAAV;;EAEA,OAAKZ,MAAL,GAAcjW,KAAKE,GAAL,CAAS,KAAK6N,IAAd,CAAd;EACA,OAAKmI,MAAL,GAAclW,KAAK8W,GAAL,CAAS,KAAK/I,IAAd,CAAd;;EAEA,OAAKkmB,GAAL,GAAWld,MAAM,KAAKhzB,CAAX,EAAc,KAAKkyB,MAAnB,EAA2B,KAAKC,MAAhC,CAAX;EACA,OAAKmlB,GAAL,GAAWR,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyC,KAAKzsB,IAA9C,CAAX;;EAEA,MAAI/N,KAAKC,GAAL,CAAS,KAAK8N,IAAL,GAAY,KAAKE,IAA1B,IAAkCxC,KAAtC,EAA6C;EAC3C,SAAK2tB,EAAL,GAAU,KAAKnjB,MAAf;EACD,GAFD,MAGK;EACH,SAAKA,MAAL,GAAcjW,KAAKE,GAAL,CAAS,KAAK+N,IAAd,CAAd;EACA,SAAKiI,MAAL,GAAclW,KAAK8W,GAAL,CAAS,KAAK7I,IAAd,CAAd;EACA,SAAKgrB,GAAL,GAAWliB,MAAM,KAAKhzB,CAAX,EAAc,KAAKkyB,MAAnB,EAA2B,KAAKC,MAAhC,CAAX;EACA,SAAKurB,GAAL,GAAW5G,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyC,KAAKvsB,IAA9C,CAAX;EACA,SAAKmrB,EAAL,GAAU,CAAC,KAAKnF,GAAL,GAAW,KAAKgF,GAAjB,KAAyB,KAAKwI,GAAL,GAAW,KAAKpG,GAAzC,CAAV;EACD;EACD,OAAK7L,CAAL,GAAS,KAAK6L,GAAL,GAAW,KAAKpH,GAAL,GAAW,KAAKmF,EAApC;EACA,OAAKtK,GAAL,GAAW+L,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyC,KAAK3sB,IAA9C,CAAX;EACA,OAAK4mB,EAAL,GAAU,KAAKn6B,CAAL,IAAU,KAAKk1B,CAAL,GAAS,KAAKV,GAAxB,CAAV;EACD;;EAED;;AAEA,EAAO,SAAS9X,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA,MAAIk6B,GAAJ;;EAEA;;EAEA,MAAI,KAAKrlB,MAAT,EAAiB;EACfqlB,UAAM,KAAKh/B,CAAL,IAAU,KAAKk1B,CAAL,GAAS52B,GAAnB,CAAN;EACD,GAFD,MAGK;EACH,QAAI22B,KAAKsL,KAAK,KAAKN,EAAV,EAAc,KAAKjQ,EAAnB,EAAuB,KAAK6K,EAA5B,EAAgC,KAAKqF,EAArC,EAAyC5hC,GAAzC,CAAT;EACA0gC,UAAM,KAAKh/B,CAAL,IAAU,KAAKk1B,CAAL,GAASD,EAAnB,CAAN;EACD;EACD,MAAIgK,QAAQ,KAAKH,EAAL,GAAUliB,WAAWD,MAAM,KAAK7I,KAAtB,CAAtB;EACA,MAAIjP,IAAI,KAAK4P,EAAL,GAAUuqB,MAAMt5B,KAAKE,GAAL,CAASq5B,KAAT,CAAxB;EACA,MAAIn6B,IAAI,KAAK6P,EAAL,GAAU,KAAKwlB,EAAf,GAAoB6E,MAAMt5B,KAAK8W,GAAL,CAASyiB,KAAT,CAAlC;EACAjsB,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;EAED;;AAEA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,GAAM,KAAKq1B,EAAL,GAAUnnB,EAAElO,CAAZ,GAAgB,KAAK6P,EAA3B;EACA,MAAIkH,GAAJ,EAASmjB,GAAT,EAAc1gC,GAAd,EAAmBqe,GAAnB;EACA,MAAI,KAAKmiB,EAAL,IAAW,CAAf,EAAkB;EAChBE,UAAMt5B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAN;EACA+W,UAAM,CAAN;EACD,GAHD,MAIK;EACHmjB,UAAM,CAACt5B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAP;EACA+W,UAAM,CAAC,CAAP;EACD;EACD,MAAIojB,QAAQ,CAAZ;EACA,MAAID,QAAQ,CAAZ,EAAe;EACbC,YAAQv5B,KAAK2iB,KAAL,CAAWxM,MAAM7I,EAAEnO,CAAnB,EAAsBgX,MAAM7I,EAAElO,CAA9B,CAAR;EACD;;EAED,MAAI,KAAK6U,MAAT,EAAiB;EACfgD,UAAMC,WAAW,KAAK9I,KAAL,GAAamrB,QAAQ,KAAKH,EAArC,CAAN;EACAxgC,UAAMgjC,WAAW,KAAKpM,CAAL,GAAS8J,MAAM,KAAKh/B,CAA/B,CAAN;EACAgT,MAAEnO,CAAF,GAAM8X,GAAN;EACA3J,MAAElO,CAAF,GAAMxG,GAAN;EACA,WAAO0U,CAAP;EACD,GAND,MAOK;EACH,QAAIiiB,KAAK,KAAKC,CAAL,GAAS8J,MAAM,KAAKh/B,CAA7B;EACA1B,UAAM0iC,MAAM/L,EAAN,EAAU,KAAKgL,EAAf,EAAmB,KAAKjQ,EAAxB,EAA4B,KAAK6K,EAAjC,EAAqC,KAAKqF,EAA1C,CAAN;EACAvjB,UAAMC,WAAW,KAAK9I,KAAL,GAAamrB,QAAQ,KAAKH,EAArC,CAAN;EACA9rB,MAAEnO,CAAF,GAAM8X,GAAN;EACA3J,MAAElO,CAAF,GAAMxG,GAAN;EACA,WAAO0U,CAAP;EACD;EAEF;;AAED,EAAO,IAAIiK,WAAQ,CAAC,mBAAD,EAAsB,MAAtB,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;ECzGA;;AAEA,EAAO,SAASjrB,OAAT,GAAgB;EACrB;EACA,OAAK8oC,CAAL,GAAS,KAAK96B,CAAd;EACD;;AAED,EAAO,SAAS0c,UAAT,CAAiB1J,CAAjB,EAAoB;;EAEzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;;EAEA;;EAEA,MAAIs1B,OAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAX;EACA,MAAIjP,CAAJ,EAAOC,CAAP;;EAEA,MAAIY,KAAKC,GAAL,CAASrH,GAAT,KAAiB6S,KAArB,EAA4B;EAC1BtM,QAAI,KAAK4P,EAAL,GAAU,KAAKqmB,CAAL,GAASV,IAAvB;EACAt1B,QAAI,KAAK6P,EAAT;EACD;EACD,MAAIsqB,QAAQkF,MAAM,IAAIz+B,KAAKC,GAAL,CAASrH,MAAMoH,KAAKqL,EAApB,CAAV,CAAZ;EACA,MAAKrL,KAAKC,GAAL,CAASy0B,IAAT,KAAkBjpB,KAAnB,IAA8BzL,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAASrH,GAAT,IAAgBwS,OAAzB,KAAqCK,KAAvE,EAA+E;EAC7EtM,QAAI,KAAK4P,EAAT;EACA,QAAInW,OAAO,CAAX,EAAc;EACZwG,UAAI,KAAK6P,EAAL,GAAUjP,KAAKqL,EAAL,GAAU,KAAK+pB,CAAf,GAAmBp1B,KAAKwW,GAAL,CAAS,MAAM+iB,KAAf,CAAjC;EACD,KAFD,MAGK;EACHn6B,UAAI,KAAK6P,EAAL,GAAUjP,KAAKqL,EAAL,GAAU,KAAK+pB,CAAf,GAAmB,CAACp1B,KAAKwW,GAAL,CAAS,MAAM+iB,KAAf,CAAlC;EACD;EACD;EACD;EACD,MAAIpK,KAAK,MAAMnvB,KAAKC,GAAL,CAAUD,KAAKqL,EAAL,GAAUqpB,IAAX,GAAoBA,OAAO10B,KAAKqL,EAAzC,CAAf;EACA,MAAI6vB,MAAM/L,KAAKA,EAAf;EACA,MAAIuS,QAAQ1hC,KAAKE,GAAL,CAASq5B,KAAT,CAAZ;EACA,MAAIoI,QAAQ3hC,KAAK8W,GAAL,CAASyiB,KAAT,CAAZ;;EAEA,MAAI/J,IAAImS,SAASD,QAAQC,KAAR,GAAgB,CAAzB,CAAR;EACA,MAAIC,MAAMpS,IAAIA,CAAd;EACA,MAAIlJ,IAAIkJ,KAAK,IAAIkS,KAAJ,GAAY,CAAjB,CAAR;EACA,MAAIG,MAAMvb,IAAIA,CAAd;EACA,MAAInQ,MAAMnW,KAAKqL,EAAL,GAAU,KAAK+pB,CAAf,IAAoBjG,MAAMK,IAAIqS,GAAV,IAAiB7hC,KAAKoW,IAAL,CAAU8kB,OAAO1L,IAAIqS,GAAX,KAAmBrS,IAAIqS,GAAvB,IAA8B,CAACA,MAAM3G,GAAP,KAAe0G,MAAMC,GAArB,CAAxC,CAArC,KAA4GA,MAAM3G,GAAlH,CAAV;EACA,MAAIxG,OAAO,CAAX,EAAc;EACZve,UAAM,CAACA,GAAP;EACD;EACDhX,MAAI,KAAK4P,EAAL,GAAUoH,GAAd;EACA;EACA,MAAI0mB,IAAI3B,MAAM1L,CAAd;EACArZ,QAAMnW,KAAKqL,EAAL,GAAU,KAAK+pB,CAAf,IAAoB9O,IAAIuW,CAAJ,GAAQ1N,KAAKnvB,KAAKoW,IAAL,CAAU,CAACyrB,MAAM3G,GAAP,KAAeA,MAAM,CAArB,IAA0B2B,IAAIA,CAAxC,CAAjC,KAAgFgF,MAAM3G,GAAtF,CAAN;EACA,MAAItiC,OAAO,CAAX,EAAc;EACZ;EACAwG,QAAI,KAAK6P,EAAL,GAAUkH,GAAd;EACD,GAHD,MAIK;EACH;EACA/W,QAAI,KAAK6P,EAAL,GAAUkH,GAAd;EACD;EACD7I,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;EAED;;AAEA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAI2J,GAAJ,EAASre,GAAT;EACA,MAAIkpC,EAAJ,EAAQC,EAAR,EAAYC,GAAZ,EAAiBC,EAAjB,EAAqBC,EAArB,EAAyBC,EAAzB;EACA,MAAIC,EAAJ;EACA,MAAIC,EAAJ;EACA,MAAIlsB,GAAJ;EACA,MAAImsB,GAAJ;EACA,MAAI5hC,CAAJ;;EAEA;;EAEA4M,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACAkH,QAAMnW,KAAKqL,EAAL,GAAU,KAAK+pB,CAArB;EACA0M,OAAKx0B,EAAEnO,CAAF,GAAMgX,GAAX;EACA4rB,OAAKz0B,EAAElO,CAAF,GAAM+W,GAAX;EACA6rB,QAAMF,KAAKA,EAAL,GAAUC,KAAKA,EAArB;EACAE,OAAK,CAACjiC,KAAKC,GAAL,CAAS8hC,EAAT,CAAD,IAAiB,IAAIC,GAArB,CAAL;EACAE,OAAKD,KAAK,IAAIF,EAAJ,GAASA,EAAd,GAAmBD,KAAKA,EAA7B;EACAK,OAAK,CAAC,CAAD,GAAKF,EAAL,GAAU,CAAV,GAAc,IAAIF,EAAJ,GAASA,EAAvB,GAA4BC,MAAMA,GAAvC;EACAthC,MAAIqhC,KAAKA,EAAL,GAAUI,EAAV,GAAe,CAAC,IAAID,EAAJ,GAASA,EAAT,GAAcA,EAAd,GAAmBC,EAAnB,GAAwBA,EAAxB,GAA6BA,EAA7B,GAAkC,IAAIF,EAAJ,GAASC,EAAT,GAAcC,EAAd,GAAmBA,EAAtD,IAA4D,EAA/E;EACAC,OAAK,CAACH,KAAKC,KAAKA,EAAL,GAAU,CAAV,GAAcC,EAApB,IAA0BA,EAA/B;EACAE,OAAK,IAAIriC,KAAKoW,IAAL,CAAU,CAACgsB,EAAD,GAAM,CAAhB,CAAT;EACAjsB,QAAQ,IAAIzV,CAAL,GAAU0hC,EAAX,GAAiBC,EAAvB;EACA,MAAIriC,KAAKC,GAAL,CAASkW,GAAT,IAAgB,CAApB,EAAuB;EACrB,QAAIA,OAAO,CAAX,EAAc;EACZA,YAAM,CAAN;EACD,KAFD,MAGK;EACHA,YAAM,CAAC,CAAP;EACD;EACF;EACDmsB,QAAMtiC,KAAKkvB,IAAL,CAAU/Y,GAAV,IAAiB,CAAvB;EACA,MAAI7I,EAAElO,CAAF,IAAO,CAAX,EAAc;EACZxG,UAAM,CAAC,CAACypC,EAAD,GAAMriC,KAAK8W,GAAL,CAASwrB,MAAMtiC,KAAKqL,EAAL,GAAU,CAAzB,CAAN,GAAoC62B,KAAK,CAAL,GAASC,EAA9C,IAAoDniC,KAAKqL,EAA/D;EACD,GAFD,MAGK;EACHzS,UAAM,EAAE,CAACypC,EAAD,GAAMriC,KAAK8W,GAAL,CAASwrB,MAAMtiC,KAAKqL,EAAL,GAAU,CAAzB,CAAN,GAAoC62B,KAAK,CAAL,GAASC,EAA/C,IAAqDniC,KAAKqL,EAAhE;EACD;;EAED,MAAIrL,KAAKC,GAAL,CAAS6hC,EAAT,IAAer2B,KAAnB,EAA0B;EACxBwL,UAAM,KAAK7I,KAAX;EACD,GAFD,MAGK;EACH6I,UAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAKqL,EAAL,IAAW22B,MAAM,CAAN,GAAUhiC,KAAKoW,IAAL,CAAU,IAAI,KAAK0rB,KAAKA,EAAL,GAAUC,KAAKA,EAApB,CAAJ,GAA8BC,MAAMA,GAA9C,CAArB,IAA2E,CAA3E,GAA+EF,EAAvG,CAAN;EACD;;EAEDx0B,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,mBAAD,EAAsB,eAAtB,EAAuC,OAAvC,CAAZ;AACP,cAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;EC7GO,SAASjrB,OAAT,GAAgB;EACrB,OAAKi2C,OAAL,GAAeviC,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAf;EACA,OAAK20B,OAAL,GAAexiC,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAf;EACD;;AAED,EAAO,SAASmJ,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA,MAAI6W,SAASjW,KAAKE,GAAL,CAASoN,EAAElO,CAAX,CAAb;EACA,MAAI8W,SAASlW,KAAK8W,GAAL,CAASxJ,EAAElO,CAAX,CAAb;EACA,MAAIs1B,OAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAX;EACA,MAAImsB,EAAJ,EAAQjQ,EAAR,EAAY6K,EAAZ,EAAgBqF,EAAhB,EAAoBiI,GAApB,EAAyBC,EAAzB,EAA6BtD,MAA7B,EAAqCuD,GAArC,EAA0CC,EAA1C,EAA8CC,GAA9C,EAAmDC,EAAnD,EAAuDC,CAAvD,EAA0DvM,CAA1D,EAA6DwM,EAA7D,EAAiEC,EAAjE,EAAqEziC,CAArE,EAAwE0iC,EAAxE,EAA4EC,KAA5E,EAAmF1oC,CAAnF,EAAsF2oC,EAAtF,EAA0FC,EAA1F,EAA8FC,EAA9F,EAAkGC,EAAlG;EACA,MAAI,KAAKtvB,MAAT,EAAiB;EACf,QAAIjU,KAAKC,GAAL,CAAS,KAAKsiC,OAAL,GAAe,CAAxB,KAA8B92B,KAAlC,EAAyC;EACvC;EACA6B,QAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,IAAU8Q,UAAUxS,GAApB,IAA2BoH,KAAKE,GAAL,CAASw0B,IAAT,CAA3C;EACApnB,QAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,IAAU8Q,UAAUxS,GAApB,IAA2BoH,KAAK8W,GAAL,CAAS4d,IAAT,CAA3C;EACA,aAAOpnB,CAAP;EACD,KALD,MAMK,IAAItN,KAAKC,GAAL,CAAS,KAAKsiC,OAAL,GAAe,CAAxB,KAA8B92B,KAAlC,EAAyC;EAC5C;EACA6B,QAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,IAAU8Q,UAAUxS,GAApB,IAA2BoH,KAAKE,GAAL,CAASw0B,IAAT,CAA3C;EACApnB,QAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,IAAU8Q,UAAUxS,GAApB,IAA2BoH,KAAK8W,GAAL,CAAS4d,IAAT,CAA3C;EACA,aAAOpnB,CAAP;EACD,KALI,MAMA;EACH;EACA61B,cAAQ,KAAKZ,OAAL,GAAetsB,MAAf,GAAwB,KAAKusB,OAAL,GAAetsB,MAAf,GAAwBlW,KAAK8W,GAAL,CAAS4d,IAAT,CAAxD;EACAl0B,UAAIR,KAAKkvB,IAAL,CAAUiU,KAAV,CAAJ;EACAD,WAAK1iC,IAAIA,IAAIR,KAAKE,GAAL,CAASM,CAAT,CAAR,GAAsB,CAA3B;EACA8M,QAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAU,KAAKzU,CAAL,GAAS4oC,EAAT,GAAchtB,MAAd,GAAuBlW,KAAKE,GAAL,CAASw0B,IAAT,CAAvC;EACApnB,QAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAAS4oC,EAAT,IAAe,KAAKV,OAAL,GAAevsB,MAAf,GAAwB,KAAKssB,OAAL,GAAersB,MAAf,GAAwBlW,KAAK8W,GAAL,CAAS4d,IAAT,CAA/D,CAAhB;EACA,aAAOpnB,CAAP;EACD;EACF,GAtBD,MAuBK;EACHitB,SAAKE,KAAK,KAAK5jB,EAAV,CAAL;EACAyT,SAAKoQ,KAAK,KAAK7jB,EAAV,CAAL;EACAse,SAAKwF,KAAK,KAAK9jB,EAAV,CAAL;EACA2jB,SAAKI,KAAK,KAAK/jB,EAAV,CAAL;EACA,QAAI7W,KAAKC,GAAL,CAAS,KAAKsiC,OAAL,GAAe,CAAxB,KAA8B92B,KAAlC,EAAyC;EACvC;EACAg3B,YAAM,KAAKnoC,CAAL,GAASugC,KAAKN,EAAL,EAASjQ,EAAT,EAAa6K,EAAb,EAAiBqF,EAAjB,EAAqBpvB,OAArB,CAAf;EACAs3B,WAAK,KAAKpoC,CAAL,GAASugC,KAAKN,EAAL,EAASjQ,EAAT,EAAa6K,EAAb,EAAiBqF,EAAjB,EAAqB5hC,GAArB,CAAd;EACA0U,QAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAU,CAAC0zB,MAAMC,EAAP,IAAa1iC,KAAKE,GAAL,CAASw0B,IAAT,CAA7B;EACApnB,QAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAU,CAACwzB,MAAMC,EAAP,IAAa1iC,KAAK8W,GAAL,CAAS4d,IAAT,CAA7B;EACA,aAAOpnB,CAAP;EACD,KAPD,MAQK,IAAItN,KAAKC,GAAL,CAAS,KAAKsiC,OAAL,GAAe,CAAxB,KAA8B92B,KAAlC,EAAyC;EAC5C;EACAg3B,YAAM,KAAKnoC,CAAL,GAASugC,KAAKN,EAAL,EAASjQ,EAAT,EAAa6K,EAAb,EAAiBqF,EAAjB,EAAqBpvB,OAArB,CAAf;EACAs3B,WAAK,KAAKpoC,CAAL,GAASugC,KAAKN,EAAL,EAASjQ,EAAT,EAAa6K,EAAb,EAAiBqF,EAAjB,EAAqB5hC,GAArB,CAAd;EACA0U,QAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAU,CAAC0zB,MAAMC,EAAP,IAAa1iC,KAAKE,GAAL,CAASw0B,IAAT,CAA7B;EACApnB,QAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAU,CAACwzB,MAAMC,EAAP,IAAa1iC,KAAK8W,GAAL,CAAS4d,IAAT,CAA7B;EACA,aAAOpnB,CAAP;EACD,KAPI,MAQA;EACH;EACA8xB,eAASnpB,SAASC,MAAlB;EACAysB,YAAM3H,GAAG,KAAK1gC,CAAR,EAAW,KAAKvW,CAAhB,EAAmB,KAAKw+C,OAAxB,CAAN;EACAK,WAAK5H,GAAG,KAAK1gC,CAAR,EAAW,KAAKvW,CAAhB,EAAmBkyB,MAAnB,CAAL;EACA4sB,YAAM7iC,KAAK4W,IAAL,CAAU,CAAC,IAAI,KAAKC,EAAV,IAAgBuoB,MAAhB,GAAyB,KAAKvoB,EAAL,GAAU8rB,GAAV,GAAgB,KAAKJ,OAArB,IAAgCK,KAAK1sB,MAArC,CAAnC,CAAN;EACA4sB,WAAK9iC,KAAK2iB,KAAL,CAAW3iB,KAAKE,GAAL,CAASw0B,IAAT,CAAX,EAA2B,KAAK8N,OAAL,GAAexiC,KAAKwW,GAAL,CAASqsB,GAAT,CAAf,GAA+B,KAAKN,OAAL,GAAeviC,KAAK8W,GAAL,CAAS4d,IAAT,CAAzE,CAAL;EACA,UAAIoO,OAAO,CAAX,EAAc;EACZroC,YAAIuF,KAAK2vB,IAAL,CAAU,KAAK6S,OAAL,GAAexiC,KAAKE,GAAL,CAAS2iC,GAAT,CAAf,GAA+B,KAAKN,OAAL,GAAeviC,KAAK8W,GAAL,CAAS+rB,GAAT,CAAxD,CAAJ;EACD,OAFD,MAGK,IAAI7iC,KAAKC,GAAL,CAASD,KAAKC,GAAL,CAAS6iC,EAAT,IAAe9iC,KAAKqL,EAA7B,KAAoCI,KAAxC,EAA+C;EAClDhR,YAAI,CAACuF,KAAK2vB,IAAL,CAAU,KAAK6S,OAAL,GAAexiC,KAAKE,GAAL,CAAS2iC,GAAT,CAAf,GAA+B,KAAKN,OAAL,GAAeviC,KAAK8W,GAAL,CAAS+rB,GAAT,CAAxD,CAAL;EACD,OAFI,MAGA;EACHpoC,YAAIuF,KAAK2vB,IAAL,CAAU3vB,KAAKE,GAAL,CAASw0B,IAAT,IAAiB10B,KAAK8W,GAAL,CAAS+rB,GAAT,CAAjB,GAAiC7iC,KAAKE,GAAL,CAAS4iC,EAAT,CAA3C,CAAJ;EACD;EACDC,UAAI,KAAKh/C,CAAL,GAAS,KAAKw+C,OAAd,GAAwBviC,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAnB,CAA5B;EACA2f,UAAI,KAAKzyC,CAAL,GAAS,KAAKy+C,OAAd,GAAwBxiC,KAAK8W,GAAL,CAASgsB,EAAT,CAAxB,GAAuC9iC,KAAKoW,IAAL,CAAU,IAAI,KAAKS,EAAnB,CAA3C;EACAmsB,WAAKD,IAAIvM,CAAT;EACAyM,WAAKzM,IAAIA,CAAT;EACA4M,WAAK3oC,IAAIA,CAAT;EACA4oC,WAAKD,KAAK3oC,CAAV;EACA6oC,WAAKD,KAAK5oC,CAAV;EACA8oC,WAAKD,KAAK7oC,CAAV;EACA+F,UAAImiC,MAAMloC,CAAN,IAAW,IAAI2oC,KAAKH,EAAL,IAAW,IAAIA,EAAf,IAAqB,CAAzB,GAA6BI,KAAK,CAAL,GAASL,EAAT,IAAe,IAAI,IAAIC,EAAvB,CAA7B,GAA0DK,KAAK,GAAL,IAAYL,MAAM,IAAI,IAAIA,EAAd,IAAoB,IAAIF,CAAJ,GAAQA,CAAR,IAAa,IAAI,IAAIE,EAArB,CAAhC,CAA1D,GAAsHM,KAAK,EAAL,GAAUP,EAA3I,CAAJ;EACA11B,QAAEnO,CAAF,GAAM,KAAK4P,EAAL,GAAUvO,IAAIR,KAAKE,GAAL,CAAS4iC,EAAT,CAApB;EACAx1B,QAAElO,CAAF,GAAM,KAAK6P,EAAL,GAAUzO,IAAIR,KAAK8W,GAAL,CAASgsB,EAAT,CAApB;EACA,aAAOx1B,CAAP;EACD;EACF;EAGF;;AAED,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACA,MAAIwlB,EAAJ,EAAQxT,CAAR,EAAWmc,IAAX,EAAiBD,IAAjB,EAAuBlmB,GAAvB,EAA4Bre,GAA5B,EAAiCud,GAAjC,EAAsCokB,EAAtC,EAA0CjQ,EAA1C,EAA8C6K,EAA9C,EAAkDqF,EAAlD,EAAsDiI,GAAtD,EAA2DhZ,CAA3D,EAA8Dc,EAA9D,EAAkEsY,GAAlE,EAAuEC,EAAvE,EAA2EU,KAA3E,EAAkFjR,GAAlF,EAAuFxK,CAAvF,EAA0FqI,CAA1F,EAA6FzF,CAA7F,EAAgG8Y,EAAhG,EAAoGlN,CAApG,EAAuGmN,MAAvG;EACA,MAAI,KAAKzvB,MAAT,EAAiB;EACfwgB,SAAKz0B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAL;EACA,QAAIq1B,KAAM,IAAIrpB,OAAJ,GAAc,KAAK9Q,CAA7B,EAAiC;EAC/B;EACD;EACD2mB,QAAIwT,KAAK,KAAKn6B,CAAd;;EAEA8iC,WAAOp9B,KAAKE,GAAL,CAAS+gB,CAAT,CAAP;EACAkc,WAAOn9B,KAAK8W,GAAL,CAASmK,CAAT,CAAP;;EAEAhK,UAAM,KAAK7I,KAAX;EACA,QAAIpO,KAAKC,GAAL,CAASw0B,EAAT,KAAgBhpB,KAApB,EAA2B;EACzB7S,YAAM,KAAKiV,IAAX;EACD,KAFD,MAGK;EACHjV,YAAM6lC,MAAMtB,OAAO,KAAKoF,OAAZ,GAAuBj1B,EAAElO,CAAF,GAAMg+B,IAAN,GAAa,KAAKoF,OAAnB,GAA8B/N,EAA1D,CAAN;EACAte,YAAMnW,KAAKC,GAAL,CAAS,KAAK4N,IAAd,IAAsBzC,OAA5B;EACA,UAAIpL,KAAKC,GAAL,CAASkW,GAAT,KAAiB1K,KAArB,EAA4B;EAC1B,YAAI,KAAKoC,IAAL,IAAa,CAAjB,EAAoB;EAClBoJ,gBAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgB,CAAEmO,EAAElO,CAApB,CAAxB,CAAN;EACD,SAFD,MAGK;EACH6X,gBAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAW,CAACrV,EAAEnO,CAAd,EAAiBmO,EAAElO,CAAnB,CAAxB,CAAN;EACD;EACF,OAPD,MAQK;EACH;;;;;;;EAOA6X,cAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAF,GAAMi+B,IAAjB,EAAuB3I,KAAK,KAAK+N,OAAV,GAAoBrF,IAApB,GAA2B7vB,EAAElO,CAAF,GAAM,KAAKmjC,OAAX,GAAqBnF,IAAvE,CAAxB,CAAN;EACD;EACF;;EAED9vB,MAAEnO,CAAF,GAAM8X,GAAN;EACA3J,MAAElO,CAAF,GAAMxG,GAAN;EACA,WAAO0U,CAAP;EACD,GAxCD,MAyCK;EACHitB,SAAKE,KAAK,KAAK5jB,EAAV,CAAL;EACAyT,SAAKoQ,KAAK,KAAK7jB,EAAV,CAAL;EACAse,SAAKwF,KAAK,KAAK9jB,EAAV,CAAL;EACA2jB,SAAKI,KAAK,KAAK/jB,EAAV,CAAL;EACA,QAAI7W,KAAKC,GAAL,CAAS,KAAKsiC,OAAL,GAAe,CAAxB,KAA8B92B,KAAlC,EAAyC;EACvC;EACAg3B,YAAM,KAAKnoC,CAAL,GAASugC,KAAKN,EAAL,EAASjQ,EAAT,EAAa6K,EAAb,EAAiBqF,EAAjB,EAAqBpvB,OAArB,CAAf;EACAqpB,WAAKz0B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAL;EACAqqB,UAAIgZ,MAAMhO,EAAV;EACA77B,YAAM0iC,MAAM7R,IAAI,KAAKnvB,CAAf,EAAkBigC,EAAlB,EAAsBjQ,EAAtB,EAA0B6K,EAA1B,EAA8BqF,EAA9B,CAAN;EACAvjB,YAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgB,CAAE,CAAF,GAAMmO,EAAElO,CAAxB,CAAxB,CAAN;EACAkO,QAAEnO,CAAF,GAAM8X,GAAN;EACA3J,QAAElO,CAAF,GAAMxG,GAAN;EACA,aAAO0U,CAAP;EACD,KAVD,MAWK,IAAItN,KAAKC,GAAL,CAAS,KAAKsiC,OAAL,GAAe,CAAxB,KAA8B92B,KAAlC,EAAyC;EAC5C;EACAg3B,YAAM,KAAKnoC,CAAL,GAASugC,KAAKN,EAAL,EAASjQ,EAAT,EAAa6K,EAAb,EAAiBqF,EAAjB,EAAqBpvB,OAArB,CAAf;EACAqpB,WAAKz0B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAL;EACAqqB,UAAIgL,KAAKgO,GAAT;;EAEA7pC,YAAM0iC,MAAM7R,IAAI,KAAKnvB,CAAf,EAAkBigC,EAAlB,EAAsBjQ,EAAtB,EAA0B6K,EAA1B,EAA8BqF,EAA9B,CAAN;EACAvjB,YAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgBmO,EAAElO,CAAlB,CAAxB,CAAN;EACAkO,QAAEnO,CAAF,GAAM8X,GAAN;EACA3J,QAAElO,CAAF,GAAMxG,GAAN;EACA,aAAO0U,CAAP;EACD,KAXI,MAYA;EACH;EACAmnB,WAAKz0B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAL;EACA0jC,WAAK9iC,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgBmO,EAAElO,CAAlB,CAAL;EACAmrB,WAAKyQ,GAAG,KAAK1gC,CAAR,EAAW,KAAKvW,CAAhB,EAAmB,KAAKw+C,OAAxB,CAAL;EACAiB,cAAQxjC,KAAK8W,GAAL,CAASgsB,EAAT,CAAR;EACAvQ,YAAM,KAAKxuC,CAAL,GAAS,KAAKy+C,OAAd,GAAwBgB,KAA9B;EACAzb,UAAI,CAACwK,GAAD,GAAOA,GAAP,IAAc,IAAI,KAAK1b,EAAvB,CAAJ;EACAuZ,UAAI,IAAI,KAAKvZ,EAAT,IAAe,IAAIkR,CAAnB,IAAwB,KAAKwa,OAA7B,GAAuC,KAAKC,OAA5C,GAAsDgB,KAAtD,IAA+D,IAAI,KAAK3sB,EAAxE,CAAJ;EACA8T,UAAI8J,KAAKlK,EAAT;EACAkZ,WAAK9Y,IAAI5C,KAAK,IAAIA,CAAT,IAAc/nB,KAAKK,GAAL,CAASsqB,CAAT,EAAY,CAAZ,CAAd,GAA+B,CAAnC,GAAuCyF,KAAK,IAAI,IAAIrI,CAAb,IAAkB/nB,KAAKK,GAAL,CAASsqB,CAAT,EAAY,CAAZ,CAAlB,GAAmC,EAA/E;EACA4L,UAAI,IAAIxO,IAAI0b,EAAJ,GAASA,EAAT,GAAc,CAAlB,GAAsB9Y,IAAI8Y,EAAJ,GAASA,EAAT,GAAcA,EAAd,GAAmB,CAA7C;EACAZ,YAAM7iC,KAAK2vB,IAAL,CAAU,KAAK4S,OAAL,GAAeviC,KAAK8W,GAAL,CAAS2sB,EAAT,CAAf,GAA8B,KAAKjB,OAAL,GAAexiC,KAAKE,GAAL,CAASujC,EAAT,CAAf,GAA8BD,KAAtE,CAAN;EACAvsB,YAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2vB,IAAL,CAAU3vB,KAAKE,GAAL,CAAS4iC,EAAT,IAAe9iC,KAAKE,GAAL,CAASujC,EAAT,CAAf,GAA8BzjC,KAAK8W,GAAL,CAAS+rB,GAAT,CAAxC,CAAxB,CAAN;EACAa,eAAS1jC,KAAKE,GAAL,CAAS2iC,GAAT,CAAT;EACAjqC,YAAMoH,KAAK2iB,KAAL,CAAW,CAAC+gB,SAAS,KAAK7sB,EAAL,GAAU0f,CAAV,GAAc,KAAKgM,OAA7B,IAAwCviC,KAAKwW,GAAL,CAASqsB,GAAT,CAAnD,EAAkEa,UAAU,IAAI,KAAK7sB,EAAnB,CAAlE,CAAN;EACAvJ,QAAEnO,CAAF,GAAM8X,GAAN;EACA3J,QAAElO,CAAF,GAAMxG,GAAN;EACA,aAAO0U,CAAP;EACD;EACF;EAEF;;AAED,EAAO,IAAIiK,WAAQ,CAAC,uBAAD,EAA0B,MAA1B,CAAZ;AACP,aAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;ECtMO,SAASjrB,OAAT,GAAgB;EACrB;;EAEA;;EAEA,OAAKqyC,OAAL,GAAe3+B,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAf;EACA,OAAK+wB,OAAL,GAAe5+B,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAf;EACD;;EAED;;AAEA,EAAO,SAASmJ,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAI2I,MAAJ,EAAYC,MAAZ,CADyB;EAEzB,MAAIwe,IAAJ,CAFyB;EAGzB,MAAIoK,MAAJ,CAHyB;EAIzB,MAAIC,GAAJ,CAJyB;EAKzB,MAAIvP,CAAJ,EAAOrwB,CAAP,EAAUC,CAAV;EACA,MAAI6X,MAAM3J,EAAEnO,CAAZ;EACA,MAAIvG,MAAM0U,EAAElO,CAAZ;EACA;;EAEAs1B,SAAOxd,WAAWD,MAAM,KAAK7I,KAAtB,CAAP;;EAEA6H,WAASjW,KAAKE,GAAL,CAAStH,GAAT,CAAT;EACAsd,WAASlW,KAAK8W,GAAL,CAASle,GAAT,CAAT;;EAEAkmC,WAAS9+B,KAAK8W,GAAL,CAAS4d,IAAT,CAAT;EACAlF,MAAI,KAAKmP,OAAL,GAAe1oB,MAAf,GAAwB,KAAK2oB,OAAL,GAAe1oB,MAAf,GAAwB4oB,MAApD;EACAC,QAAM,CAAN;EACA,MAAKvP,IAAI,CAAL,IAAYxvB,KAAKC,GAAL,CAASuvB,CAAT,KAAe/jB,KAA/B,EAAuC;EACrCtM,QAAI,KAAK7E,CAAL,GAASykC,GAAT,GAAe7oB,MAAf,GAAwBlW,KAAKE,GAAL,CAASw0B,IAAT,CAA5B;EACAt1B,QAAI,KAAK6P,EAAL,GAAU,KAAK3U,CAAL,GAASykC,GAAT,IAAgB,KAAKH,OAAL,GAAe3oB,MAAf,GAAwB,KAAK0oB,OAAL,GAAezoB,MAAf,GAAwB4oB,MAAhE,CAAd;EACD;EACDxxB,IAAEnO,CAAF,GAAMA,CAAN;EACAmO,IAAElO,CAAF,GAAMA,CAAN;EACA,SAAOkO,CAAP;EACD;;AAED,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAImnB,EAAJ,CADyB;EAEzB,MAAIxT,CAAJ,CAFyB;EAGzB,MAAImc,IAAJ,EAAUD,IAAV,CAHyB;EAIzB,MAAIhnB,GAAJ;EACA,MAAIc,GAAJ,EAASre,GAAT;EACA;;EAEA0U,IAAEnO,CAAF,IAAO,KAAK4P,EAAZ;EACAzB,IAAElO,CAAF,IAAO,KAAK6P,EAAZ;EACAwlB,OAAKz0B,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAL;EACA6hB,MAAIwd,MAAMhK,KAAK,KAAKn6B,CAAhB,CAAJ;;EAEA8iC,SAAOp9B,KAAKE,GAAL,CAAS+gB,CAAT,CAAP;EACAkc,SAAOn9B,KAAK8W,GAAL,CAASmK,CAAT,CAAP;;EAEAhK,QAAM,KAAK7I,KAAX;EACA,MAAIpO,KAAKC,GAAL,CAASw0B,EAAT,KAAgBhpB,KAApB,EAA2B;EACzB7S,UAAM,KAAKiV,IAAX;EACAP,MAAEnO,CAAF,GAAM8X,GAAN;EACA3J,MAAElO,CAAF,GAAMxG,GAAN;EACA,WAAO0U,CAAP;EACD;EACD1U,QAAM6lC,MAAMtB,OAAO,KAAKwB,OAAZ,GAAuBrxB,EAAElO,CAAF,GAAMg+B,IAAN,GAAa,KAAKwB,OAAnB,GAA8BnK,EAA1D,CAAN;EACAte,QAAMnW,KAAKC,GAAL,CAAS,KAAK4N,IAAd,IAAsBzC,OAA5B;EACA,MAAIpL,KAAKC,GAAL,CAASkW,GAAT,KAAiB1K,KAArB,EAA4B;EAC1B,QAAI,KAAKoC,IAAL,IAAa,CAAjB,EAAoB;EAClBoJ,YAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgB,CAAEmO,EAAElO,CAApB,CAAxB,CAAN;EACD,KAFD,MAGK;EACH6X,YAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAW,CAACrV,EAAEnO,CAAd,EAAiBmO,EAAElO,CAAnB,CAAxB,CAAN;EACD;EACDkO,MAAEnO,CAAF,GAAM8X,GAAN;EACA3J,MAAElO,CAAF,GAAMxG,GAAN;EACA,WAAO0U,CAAP;EACD;EACD2J,QAAMC,WAAW,KAAK9I,KAAL,GAAapO,KAAK2iB,KAAL,CAAYrV,EAAEnO,CAAF,GAAMi+B,IAAlB,EAAyB3I,KAAK,KAAKmK,OAAV,GAAoBzB,IAApB,GAA2B7vB,EAAElO,CAAF,GAAM,KAAKu/B,OAAX,GAAqBvB,IAAzE,CAAxB,CAAN;EACA9vB,IAAEnO,CAAF,GAAM8X,GAAN;EACA3J,IAAElO,CAAF,GAAMxG,GAAN;EACA,SAAO0U,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,OAAD,CAAZ;AACP,cAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;ECrFA;AACA;EAIA;EACA,IAAIosB,YAAY;EACZC,SAAO,CADK;EAEZC,SAAO,CAFK;EAGZC,QAAM,CAHM;EAIZC,QAAM,CAJM;EAKZC,OAAK,CALO;EAMZC,UAAQ;EANI,CAAhB;;EASA,IAAIC,YAAY;EACZC,UAAQ,CADI;EAEZC,UAAQ,CAFI;EAGZC,UAAQ,CAHI;EAIZC,UAAQ;EAJI,CAAhB;;AAOA,EAAO,SAASh4C,OAAT,GAAgB;;EAErB,OAAKyiB,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,OAAKE,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,OAAKpB,IAAL,GAAY,KAAKA,IAAL,IAAa,CAAzB;EACA,OAAKO,KAAL,GAAa,KAAKA,KAAL,IAAc,CAA3B;EACA,OAAKF,MAAL,GAAc,KAAKA,MAAL,IAAe,CAA7B;EACA,OAAKhN,KAAL,GAAa,KAAKA,KAAL,IAAc,kCAA3B;;EAEA;EACA,MAAI,KAAK2M,IAAL,IAAazC,UAAUQ,SAAS,GAApC,EAAyC;EACvC,SAAK24B,IAAL,GAAYZ,UAAUK,GAAtB;EACD,GAFD,MAEO,IAAI,KAAKn2B,IAAL,IAAa,EAAEzC,UAAUQ,SAAS,GAArB,CAAjB,EAA4C;EACjD,SAAK24B,IAAL,GAAYZ,UAAUM,MAAtB;EACD,GAFM,MAEA,IAAIjkC,KAAKC,GAAL,CAAS,KAAKmO,KAAd,KAAwBxC,MAA5B,EAAoC;EACzC,SAAK24B,IAAL,GAAYZ,UAAUC,KAAtB;EACD,GAFM,MAEA,IAAI5jC,KAAKC,GAAL,CAAS,KAAKmO,KAAd,KAAwBhD,UAAUQ,MAAtC,EAA8C;EACnD,SAAK24B,IAAL,GAAY,KAAKn2B,KAAL,GAAa,GAAb,GAAmBu1B,UAAUE,KAA7B,GAAqCF,UAAUI,IAA3D;EACD,GAFM,MAEA;EACL,SAAKQ,IAAL,GAAYZ,UAAUG,IAAtB;EACD;;EAED;;EAEA,MAAI,KAAKjtB,EAAL,KAAY,CAAhB,EAAmB;EACjB,SAAK2tB,WAAL,GAAmB,IAAI,CAAC,KAAKlqC,CAAL,GAAS,KAAK+U,CAAf,IAAoB,KAAK/U,CAAhD;EACA,SAAKmqC,mBAAL,GAA2B,KAAKD,WAAL,GAAmB,KAAKA,WAAnD;EACD;EACF;;EAED;EACA;AACA,EAAO,SAASxtB,UAAT,CAAiB1J,CAAjB,EAAoB;EACzB,MAAIo3B,KAAK,EAACvlC,GAAG,CAAJ,EAAOC,GAAG,CAAV,EAAT;EACA,MAAIxG,GAAJ,EAASqe,GAAT;EACA,MAAIsiB,KAAJ,EAAWjjB,GAAX;EACA,MAAIxhB,CAAJ,EAAO81B,EAAP;EACA;EACA,MAAI+Z,OAAO,EAACr/C,OAAO,CAAR,EAAX;;EAEA;EACAgoB,IAAEnO,CAAF,IAAO,KAAKiP,KAAZ;;EAEA;;;EAGA,MAAI,KAAKyI,EAAL,KAAY,CAAhB,EAAmB;EAAC;EAClBje,UAAMoH,KAAK4W,IAAL,CAAU,KAAK6tB,mBAAL,GAA2BzkC,KAAKwW,GAAL,CAASlJ,EAAElO,CAAX,CAArC,CAAN;EACD,GAFD,MAEO;EACLxG,UAAM0U,EAAElO,CAAR;EACD;;EAED;;;;;EAKA6X,QAAM3J,EAAEnO,CAAR,CAzByB;EA0BzB,MAAI,KAAKolC,IAAL,KAAcZ,UAAUK,GAA5B,EAAiC;EAC/B1tB,UAAMlL,UAAUxS,GAAhB;EACA,QAAIqe,OAAOrL,MAAP,IAAiBqL,OAAO7L,UAAUQ,MAAtC,EAA8C;EAC5C+4B,WAAKr/C,KAAL,GAAa4+C,UAAUC,MAAvB;EACA5K,cAAQtiB,MAAM7L,OAAd;EACD,KAHD,MAGO,IAAI6L,MAAM7L,UAAUQ,MAAhB,IAA0BqL,OAAO,EAAE7L,UAAUQ,MAAZ,CAArC,EAA0D;EAC/D+4B,WAAKr/C,KAAL,GAAa4+C,UAAUE,MAAvB;EACA7K,cAAStiB,MAAM,GAAN,GAAYA,MAAMnL,GAAlB,GAAwBmL,MAAMnL,GAAvC;EACD,KAHM,MAGA,IAAImL,MAAM,EAAE7L,UAAUQ,MAAZ,CAAN,IAA6BqL,OAAO,CAACrL,MAAzC,EAAiD;EACtD+4B,WAAKr/C,KAAL,GAAa4+C,UAAUG,MAAvB;EACA9K,cAAQtiB,MAAM7L,OAAd;EACD,KAHM,MAGA;EACLu5B,WAAKr/C,KAAL,GAAa4+C,UAAUI,MAAvB;EACA/K,cAAQtiB,GAAR;EACD;EACF,GAfD,MAeO,IAAI,KAAKstB,IAAL,KAAcZ,UAAUM,MAA5B,EAAoC;EACzC3tB,UAAMlL,UAAUxS,GAAhB;EACA,QAAIqe,OAAOrL,MAAP,IAAiBqL,OAAO7L,UAAUQ,MAAtC,EAA8C;EAC5C+4B,WAAKr/C,KAAL,GAAa4+C,UAAUC,MAAvB;EACA5K,cAAQ,CAACtiB,GAAD,GAAO7L,OAAf;EACD,KAHD,MAGO,IAAI6L,MAAMrL,MAAN,IAAgBqL,OAAO,CAACrL,MAA5B,EAAoC;EACzC+4B,WAAKr/C,KAAL,GAAa4+C,UAAUE,MAAvB;EACA7K,cAAQ,CAACtiB,GAAT;EACD,KAHM,MAGA,IAAIA,MAAM,CAACrL,MAAP,IAAiBqL,OAAO,EAAE7L,UAAUQ,MAAZ,CAA5B,EAAiD;EACtD+4B,WAAKr/C,KAAL,GAAa4+C,UAAUG,MAAvB;EACA9K,cAAQ,CAACtiB,GAAD,GAAO7L,OAAf;EACD,KAHM,MAGA;EACLu5B,WAAKr/C,KAAL,GAAa4+C,UAAUI,MAAvB;EACA/K,cAAStiB,MAAM,GAAN,GAAY,CAACA,GAAD,GAAOnL,GAAnB,GAAyB,CAACmL,GAAD,GAAOnL,GAAzC;EACD;EACF,GAfM,MAeA;EACL,QAAI+wB,CAAJ,EAAOtnC,CAAP,EAAUkF,CAAV;EACA,QAAI45B,MAAJ,EAAYC,MAAZ;EACA,QAAIsQ,MAAJ,EAAY9F,MAAZ;;EAEA,QAAI,KAAKyF,IAAL,KAAcZ,UAAUE,KAA5B,EAAmC;EACjC5sB,YAAM4tB,qBAAqB5tB,GAArB,EAA0B,CAAC7L,OAA3B,CAAN;EACD,KAFD,MAEO,IAAI,KAAKm5B,IAAL,KAAcZ,UAAUG,IAA5B,EAAkC;EACvC7sB,YAAM4tB,qBAAqB5tB,GAArB,EAA0B,CAACnL,GAA3B,CAAN;EACD,KAFM,MAEA,IAAI,KAAKy4B,IAAL,KAAcZ,UAAUI,IAA5B,EAAkC;EACvC9sB,YAAM4tB,qBAAqB5tB,GAArB,EAA0B,CAAC7L,OAA3B,CAAN;EACD;EACDipB,aAASr0B,KAAKE,GAAL,CAAStH,GAAT,CAAT;EACA07B,aAASt0B,KAAK8W,GAAL,CAASle,GAAT,CAAT;EACAgsC,aAAS5kC,KAAKE,GAAL,CAAS+W,GAAT,CAAT;EACA6nB,aAAS9+B,KAAK8W,GAAL,CAASG,GAAT,CAAT;EACA4lB,QAAIvI,SAASwK,MAAb;EACAvpC,QAAI++B,SAASsQ,MAAb;EACAnqC,QAAI45B,MAAJ;;EAEA,QAAI,KAAKkQ,IAAL,KAAcZ,UAAUC,KAA5B,EAAmC;EACjCttB,YAAMtW,KAAKkvB,IAAL,CAAU2N,CAAV,CAAN;EACAtD,cAAQuL,yBAAyBxuB,GAAzB,EAA8B7b,CAA9B,EAAiClF,CAAjC,EAAoCovC,IAApC,CAAR;EACD,KAHD,MAGO,IAAI,KAAKJ,IAAL,KAAcZ,UAAUE,KAA5B,EAAmC;EACxCvtB,YAAMtW,KAAKkvB,IAAL,CAAU35B,CAAV,CAAN;EACAgkC,cAAQuL,yBAAyBxuB,GAAzB,EAA8B7b,CAA9B,EAAiC,CAACoiC,CAAlC,EAAqC8H,IAArC,CAAR;EACD,KAHM,MAGA,IAAI,KAAKJ,IAAL,KAAcZ,UAAUG,IAA5B,EAAkC;EACvCxtB,YAAMtW,KAAKkvB,IAAL,CAAU,CAAC2N,CAAX,CAAN;EACAtD,cAAQuL,yBAAyBxuB,GAAzB,EAA8B7b,CAA9B,EAAiC,CAAClF,CAAlC,EAAqCovC,IAArC,CAAR;EACD,KAHM,MAGA,IAAI,KAAKJ,IAAL,KAAcZ,UAAUI,IAA5B,EAAkC;EACvCztB,YAAMtW,KAAKkvB,IAAL,CAAU,CAAC35B,CAAX,CAAN;EACAgkC,cAAQuL,yBAAyBxuB,GAAzB,EAA8B7b,CAA9B,EAAiCoiC,CAAjC,EAAoC8H,IAApC,CAAR;EACD,KAHM,MAGA;EACL;EACAruB,YAAMijB,QAAQ,CAAd;EACAoL,WAAKr/C,KAAL,GAAa4+C,UAAUC,MAAvB;EACD;EACF;;EAED;;;EAGAvZ,OAAK5qB,KAAK4W,IAAL,CAAW,KAAK9K,GAAN,IAAcytB,QAAQv5B,KAAKkvB,IAAL,CAAUlvB,KAAKE,GAAL,CAASq5B,KAAT,IAAkBv5B,KAAK8W,GAAL,CAASlL,MAAT,CAA5B,CAAR,GAAwDR,OAAtE,CAAV,CAAL;EACAtW,MAAIkL,KAAKoW,IAAL,CAAU,CAAC,IAAIpW,KAAK8W,GAAL,CAASR,GAAT,CAAL,KAAuBtW,KAAK8W,GAAL,CAAS8T,EAAT,IAAe5qB,KAAK8W,GAAL,CAAS8T,EAAT,CAAtC,KAAuD,IAAI5qB,KAAK8W,GAAL,CAAS9W,KAAK4W,IAAL,CAAU,IAAI5W,KAAK8W,GAAL,CAASyiB,KAAT,CAAd,CAAT,CAA3D,CAAV,CAAJ;;EAEA;EACA,MAAIoL,KAAKr/C,KAAL,KAAe4+C,UAAUE,MAA7B,EAAqC;EACnCxZ,UAAMxf,OAAN;EACD,GAFD,MAEO,IAAIu5B,KAAKr/C,KAAL,KAAe4+C,UAAUG,MAA7B,EAAqC;EAC1CzZ,UAAM9e,GAAN;EACD,GAFM,MAEA,IAAI64B,KAAKr/C,KAAL,KAAe4+C,UAAUI,MAA7B,EAAqC;EAC1C1Z,UAAM,MAAM9e,GAAZ;EACD;;EAED;EACA44B,KAAGvlC,CAAH,GAAOrK,IAAIkL,KAAK8W,GAAL,CAAS8T,EAAT,CAAX;EACA8Z,KAAGtlC,CAAH,GAAOtK,IAAIkL,KAAKE,GAAL,CAAS0qB,EAAT,CAAX;EACA8Z,KAAGvlC,CAAH,GAAOulC,GAAGvlC,CAAH,GAAO,KAAK7E,CAAZ,GAAgB,KAAKyU,EAA5B;EACA21B,KAAGtlC,CAAH,GAAOslC,GAAGtlC,CAAH,GAAO,KAAK9E,CAAZ,GAAgB,KAAK2U,EAA5B;;EAEA3B,IAAEnO,CAAF,GAAMulC,GAAGvlC,CAAT;EACAmO,IAAElO,CAAF,GAAMslC,GAAGtlC,CAAT;EACA,SAAOkO,CAAP;EACD;;EAED;EACA;AACA,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzB,MAAIy3B,KAAK,EAACjK,KAAK,CAAN,EAASxkB,KAAK,CAAd,EAAT;EACA,MAAIsU,EAAJ,EAAQoa,EAAR,EAAYC,KAAZ,EAAmBC,KAAnB;EACA,MAAIC,QAAJ,EAAc5L,KAAd,EAAqBrjB,MAArB,EAA6BI,GAA7B;EACA,MAAIxhB,CAAJ;EACA,MAAI6vC,OAAO,EAACr/C,OAAO,CAAR,EAAX;;EAEA;EACAgoB,IAAEnO,CAAF,GAAM,CAACmO,EAAEnO,CAAF,GAAM,KAAK4P,EAAZ,IAAkB,KAAKzU,CAA7B;EACAgT,IAAElO,CAAF,GAAM,CAACkO,EAAElO,CAAF,GAAM,KAAK6P,EAAZ,IAAkB,KAAK3U,CAA7B;;EAEA;;EAEA0qC,OAAKhlC,KAAK4W,IAAL,CAAU5W,KAAKoW,IAAL,CAAU9I,EAAEnO,CAAF,GAAMmO,EAAEnO,CAAR,GAAYmO,EAAElO,CAAF,GAAMkO,EAAElO,CAA9B,CAAV,CAAL;EACAwrB,OAAK5qB,KAAK2iB,KAAL,CAAWrV,EAAElO,CAAb,EAAgBkO,EAAEnO,CAAlB,CAAL;EACA,MAAImO,EAAEnO,CAAF,IAAO,GAAP,IAAcmO,EAAEnO,CAAF,IAAOa,KAAKC,GAAL,CAASqN,EAAElO,CAAX,CAAzB,EAAwC;EACtCulC,SAAKr/C,KAAL,GAAa4+C,UAAUC,MAAvB;EACD,GAFD,MAEO,IAAI72B,EAAElO,CAAF,IAAO,GAAP,IAAckO,EAAElO,CAAF,IAAOY,KAAKC,GAAL,CAASqN,EAAEnO,CAAX,CAAzB,EAAwC;EAC7CwlC,SAAKr/C,KAAL,GAAa4+C,UAAUE,MAAvB;EACAxZ,UAAMxf,OAAN;EACD,GAHM,MAGA,IAAIkC,EAAEnO,CAAF,GAAM,GAAN,IAAa,CAACmO,EAAEnO,CAAH,IAAQa,KAAKC,GAAL,CAASqN,EAAElO,CAAX,CAAzB,EAAwC;EAC7CulC,SAAKr/C,KAAL,GAAa4+C,UAAUG,MAAvB;EACAzZ,SAAMA,KAAK,GAAL,GAAWA,KAAK9e,GAAhB,GAAsB8e,KAAK9e,GAAjC;EACD,GAHM,MAGA;EACL64B,SAAKr/C,KAAL,GAAa4+C,UAAUI,MAAvB;EACA1Z,UAAMxf,OAAN;EACD;;EAED;;;;;EAKAtW,MAAKgX,MAAM,EAAP,GAAa9L,KAAKwW,GAAL,CAASoU,EAAT,CAAjB;EACAua,aAAWnlC,KAAKE,GAAL,CAASpL,CAAT,KAAekL,KAAK8W,GAAL,CAAShiB,CAAT,IAAe,IAAIkL,KAAKoW,IAAL,CAAU,CAAV,CAAlC,CAAX;EACAmjB,UAAQv5B,KAAK4W,IAAL,CAAUuuB,QAAV,CAAR;EACAF,UAAQjlC,KAAK8W,GAAL,CAAS8T,EAAT,CAAR;EACAsa,UAAQllC,KAAKwW,GAAL,CAASwuB,EAAT,CAAR;EACA9uB,WAAS,IAAI+uB,QAAQA,KAAR,GAAgBC,KAAhB,GAAwBA,KAAxB,IAAiC,IAAIllC,KAAK8W,GAAL,CAAS9W,KAAK4W,IAAL,CAAU,IAAI5W,KAAK8W,GAAL,CAASyiB,KAAT,CAAd,CAAT,CAArC,CAAb;EACA,MAAIrjB,SAAS,CAAC,CAAd,EAAiB;EACfA,aAAS,CAAC,CAAV;EACD,GAFD,MAEO,IAAIA,SAAS,CAAC,CAAd,EAAiB;EACtBA,aAAS,CAAC,CAAV;EACD;;EAED;;;;EAIA,MAAI,KAAKquB,IAAL,KAAcZ,UAAUK,GAA5B,EAAiC;EAC/B1tB,UAAMtW,KAAKkvB,IAAL,CAAUhZ,MAAV,CAAN;EACA6uB,OAAGzuB,GAAH,GAASlL,UAAUkL,GAAnB;EACA,QAAIquB,KAAKr/C,KAAL,KAAe4+C,UAAUC,MAA7B,EAAqC;EACnCY,SAAGjK,GAAH,GAASvB,QAAQnuB,OAAjB;EACD,KAFD,MAEO,IAAIu5B,KAAKr/C,KAAL,KAAe4+C,UAAUE,MAA7B,EAAqC;EAC1CW,SAAGjK,GAAH,GAAUvB,QAAQ,GAAR,GAAcA,QAAQztB,GAAtB,GAA4BytB,QAAQztB,GAA9C;EACD,KAFM,MAEA,IAAI64B,KAAKr/C,KAAL,KAAe4+C,UAAUG,MAA7B,EAAqC;EAC1CU,SAAGjK,GAAH,GAASvB,QAAQnuB,OAAjB;EACD,KAFM,0CAEqC;EAC1C25B,WAAGjK,GAAH,GAASvB,KAAT;EACD;EACF,GAZD,MAYO,IAAI,KAAKgL,IAAL,KAAcZ,UAAUM,MAA5B,EAAoC;EACzC3tB,UAAMtW,KAAKkvB,IAAL,CAAUhZ,MAAV,CAAN;EACA6uB,OAAGzuB,GAAH,GAASA,MAAMlL,OAAf;EACA,QAAIu5B,KAAKr/C,KAAL,KAAe4+C,UAAUC,MAA7B,EAAqC;EACnCY,SAAGjK,GAAH,GAAS,CAACvB,KAAD,GAASnuB,OAAlB;EACD,KAFD,MAEO,IAAIu5B,KAAKr/C,KAAL,KAAe4+C,UAAUE,MAA7B,EAAqC;EAC1CW,SAAGjK,GAAH,GAAS,CAACvB,KAAV;EACD,KAFM,MAEA,IAAIoL,KAAKr/C,KAAL,KAAe4+C,UAAUG,MAA7B,EAAqC;EAC1CU,SAAGjK,GAAH,GAAS,CAACvB,KAAD,GAASnuB,OAAlB;EACD,KAFM,0CAEqC;EAC1C25B,WAAGjK,GAAH,GAAUvB,QAAQ,GAAR,GAAc,CAACA,KAAD,GAASztB,GAAvB,GAA6B,CAACytB,KAAD,GAASztB,GAAhD;EACD;EACF,GAZM,MAYA;EACL;EACA,QAAI+wB,CAAJ,EAAOtnC,CAAP,EAAUkF,CAAV;EACAoiC,QAAI3mB,MAAJ;EACAphB,QAAI+nC,IAAIA,CAAR;EACA,QAAI/nC,KAAK,CAAT,EAAY;EACV2F,UAAI,CAAJ;EACD,KAFD,MAEO;EACLA,UAAIuF,KAAKoW,IAAL,CAAU,IAAIthB,CAAd,IAAmBkL,KAAKE,GAAL,CAASq5B,KAAT,CAAvB;EACD;EACDzkC,SAAK2F,IAAIA,CAAT;EACA,QAAI3F,KAAK,CAAT,EAAY;EACVS,UAAI,CAAJ;EACD,KAFD,MAEO;EACLA,UAAIyK,KAAKoW,IAAL,CAAU,IAAIthB,CAAd,CAAJ;EACD;EACD;EACA,QAAI6vC,KAAKr/C,KAAL,KAAe4+C,UAAUE,MAA7B,EAAqC;EACnCtvC,UAAIS,CAAJ;EACAA,UAAI,CAACkF,CAAL;EACAA,UAAI3F,CAAJ;EACD,KAJD,MAIO,IAAI6vC,KAAKr/C,KAAL,KAAe4+C,UAAUG,MAA7B,EAAqC;EAC1C9uC,UAAI,CAACA,CAAL;EACAkF,UAAI,CAACA,CAAL;EACD,KAHM,MAGA,IAAIkqC,KAAKr/C,KAAL,KAAe4+C,UAAUI,MAA7B,EAAqC;EAC1CxvC,UAAIS,CAAJ;EACAA,UAAIkF,CAAJ;EACAA,UAAI,CAAC3F,CAAL;EACD;EACD;EACA,QAAI,KAAKyvC,IAAL,KAAcZ,UAAUE,KAA5B,EAAmC;EACjC/uC,UAAI+nC,CAAJ;EACAA,UAAI,CAACtnC,CAAL;EACAA,UAAIT,CAAJ;EACD,KAJD,MAIO,IAAI,KAAKyvC,IAAL,KAAcZ,UAAUG,IAA5B,EAAkC;EACvCjH,UAAI,CAACA,CAAL;EACAtnC,UAAI,CAACA,CAAL;EACD,KAHM,MAGA,IAAI,KAAKgvC,IAAL,KAAcZ,UAAUI,IAA5B,EAAkC;EACvCjvC,UAAI+nC,CAAJ;EACAA,UAAItnC,CAAJ;EACAA,UAAI,CAACT,CAAL;EACD;EACD;EACAiwC,OAAGzuB,GAAH,GAAStW,KAAKkvB,IAAL,CAAU,CAACz0B,CAAX,IAAgB2Q,OAAzB;EACA25B,OAAGjK,GAAH,GAAS96B,KAAK2iB,KAAL,CAAWptB,CAAX,EAAcsnC,CAAd,CAAT;EACA,QAAI,KAAK0H,IAAL,KAAcZ,UAAUE,KAA5B,EAAmC;EACjCkB,SAAGjK,GAAH,GAAS+J,qBAAqBE,GAAGjK,GAAxB,EAA6B,CAAC1vB,OAA9B,CAAT;EACD,KAFD,MAEO,IAAI,KAAKm5B,IAAL,KAAcZ,UAAUG,IAA5B,EAAkC;EACvCiB,SAAGjK,GAAH,GAAS+J,qBAAqBE,GAAGjK,GAAxB,EAA6B,CAAChvB,GAA9B,CAAT;EACD,KAFM,MAEA,IAAI,KAAKy4B,IAAL,KAAcZ,UAAUI,IAA5B,EAAkC;EACvCgB,SAAGjK,GAAH,GAAS+J,qBAAqBE,GAAGjK,GAAxB,EAA6B,CAAC1vB,OAA9B,CAAT;EACD;EACF;;EAED;;EAEA,MAAI,KAAKyL,EAAL,KAAY,CAAhB,EAAmB;EACjB,QAAIuuB,WAAJ;EACA,QAAIhG,MAAJ,EAAYiG,EAAZ;EACAD,kBAAeL,GAAGzuB,GAAH,GAAS,CAAT,GAAa,CAAb,GAAiB,CAAhC;EACA8oB,aAASp/B,KAAKwW,GAAL,CAASuuB,GAAGzuB,GAAZ,CAAT;EACA+uB,SAAK,KAAKh2B,CAAL,GAASrP,KAAKoW,IAAL,CAAUgpB,SAASA,MAAT,GAAkB,KAAKqF,mBAAjC,CAAd;EACAM,OAAGzuB,GAAH,GAAStW,KAAK4W,IAAL,CAAU5W,KAAKoW,IAAL,CAAU,KAAK9b,CAAL,GAAS,KAAKA,CAAd,GAAkB+qC,KAAKA,EAAjC,KAAwC,KAAKb,WAAL,GAAmBa,EAA3D,CAAV,CAAT;EACA,QAAID,WAAJ,EAAiB;EACfL,SAAGzuB,GAAH,GAAS,CAACyuB,GAAGzuB,GAAb;EACD;EACF;;EAEDyuB,KAAGjK,GAAH,IAAU,KAAK1sB,KAAf;EACAd,IAAEnO,CAAF,GAAM4lC,GAAGjK,GAAT;EACAxtB,IAAElO,CAAF,GAAM2lC,GAAGzuB,GAAT;EACA,SAAOhJ,CAAP;EACD;;EAED;;EAEA,SAASw3B,wBAAT,CAAkCxuB,GAAlC,EAAuClX,CAAvC,EAA0CD,CAA1C,EAA6CwlC,IAA7C,EAAmD;EACjD,MAAIpL,KAAJ;EACA,MAAIjjB,MAAM7K,KAAV,EAAiB;EACfk5B,SAAKr/C,KAAL,GAAa4+C,UAAUC,MAAvB;EACA5K,YAAQ,GAAR;EACD,GAHD,MAGO;EACLA,YAAQv5B,KAAK2iB,KAAL,CAAWvjB,CAAX,EAAcD,CAAd,CAAR;EACA,QAAIa,KAAKC,GAAL,CAASs5B,KAAT,KAAmB3tB,MAAvB,EAA+B;EAC7B+4B,WAAKr/C,KAAL,GAAa4+C,UAAUC,MAAvB;EACD,KAFD,MAEO,IAAI5K,QAAQ3tB,MAAR,IAAkB2tB,SAASnuB,UAAUQ,MAAzC,EAAiD;EACtD+4B,WAAKr/C,KAAL,GAAa4+C,UAAUE,MAAvB;EACA7K,eAASnuB,OAAT;EACD,KAHM,MAGA,IAAImuB,QAAQnuB,UAAUQ,MAAlB,IAA4B2tB,SAAS,EAAEnuB,UAAUQ,MAAZ,CAAzC,EAA8D;EACnE+4B,WAAKr/C,KAAL,GAAa4+C,UAAUG,MAAvB;EACA9K,cAASA,SAAS,GAAT,GAAeA,QAAQztB,GAAvB,GAA6BytB,QAAQztB,GAA9C;EACD,KAHM,MAGA;EACL64B,WAAKr/C,KAAL,GAAa4+C,UAAUI,MAAvB;EACA/K,eAASnuB,OAAT;EACD;EACF;EACD,SAAOmuB,KAAP;EACD;;EAED;EACA,SAASsL,oBAAT,CAA8B5tB,GAA9B,EAAmC3U,MAAnC,EAA2C;EACzC,MAAIgjC,OAAOruB,MAAM3U,MAAjB;EACA,MAAIgjC,OAAO,CAACx5B,GAAZ,EAAiB;EACfw5B,YAAQz5B,MAAR;EACD,GAFD,MAEO,IAAIy5B,OAAO,CAACx5B,GAAZ,EAAiB;EACtBw5B,YAAQz5B,MAAR;EACD;EACD,SAAOy5B,IAAP;EACD;;AAED,EAAO,IAAI/tB,WAAQ,CAAC,kCAAD,EAAqC,kCAArC,EAAyE,KAAzE,CAAZ;AACP,YAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;ECzWA;AACA;EAMA,IAAIguB,UAAU,CACV,CAAC,MAAD,EAAS,UAAT,EAAqB,CAAC,WAAtB,EAAmC,UAAnC,CADU,EAEV,CAAC,MAAD,EAAS,CAAC,WAAV,EAAuB,CAAC,UAAxB,EAAoC,CAAC,UAArC,CAFU,EAGV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,CAAC,WAArC,CAHU,EAIV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,UAAvB,EAAmC,UAAnC,CAJU,EAKV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,CAAC,WAArC,CALU,EAMV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,UAApC,CANU,EAOV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,WAApC,CAPU,EAQV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,CAAC,UAArC,CARU,EASV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,UAAvB,EAAmC,WAAnC,CATU,EAUV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,CAAC,WAArC,CAVU,EAWV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,WAApC,CAXU,EAYV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,WAApC,CAZU,EAaV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,WAApC,CAbU,EAcV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,UAAvB,EAAmC,CAAC,WAApC,CAdU,EAeV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,CAAC,UAArC,CAfU,EAgBV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,CAAC,WAAvB,EAAoC,WAApC,CAhBU,EAiBV,CAAC,MAAD,EAAS,CAAC,QAAV,EAAoB,WAApB,EAAiC,WAAjC,CAjBU,EAkBV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,QAAtB,EAAgC,WAAhC,CAlBU,EAmBV,CAAC,MAAD,EAAS,CAAC,UAAV,EAAsB,WAAtB,EAAmC,WAAnC,CAnBU,CAAd;;EAsBA,IAAIC,UAAU,CACV,CAAC,CAAC,WAAF,EAAe,MAAf,EAAuB,WAAvB,EAAoC,CAAC,WAArC,CADU,EAEV,CAAC,MAAD,EAAS,MAAT,EAAiB,CAAC,WAAlB,EAA+B,WAA/B,CAFU,EAGV,CAAC,MAAD,EAAS,MAAT,EAAiB,WAAjB,EAA8B,CAAC,WAA/B,CAHU,EAIV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,WAAlC,CAJU,EAKV,CAAC,MAAD,EAAS,SAAT,EAAoB,WAApB,EAAiC,CAAC,QAAlC,CALU,EAMV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,WAAlC,CANU,EAOV,CAAC,MAAD,EAAS,SAAT,EAAoB,WAApB,EAAiC,CAAC,WAAlC,CAPU,EAQV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,CAAC,WAAnC,CARU,EASV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,CAAC,WAAnC,CATU,EAUV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,CAAC,WAAnC,CAVU,EAWV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,CAAC,WAAnC,CAXU,EAYV,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAC,WAApB,EAAiC,CAAC,WAAlC,CAZU,EAaV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,CAAC,WAAnC,CAbU,EAcV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,WAArB,EAAkC,CAAC,WAAnC,CAdU,EAeV,CAAC,MAAD,EAAS,SAAT,EAAoB,CAAC,UAArB,EAAiC,CAAC,WAAlC,CAfU,EAgBV,CAAC,MAAD,EAAS,UAAT,EAAqB,CAAC,UAAtB,EAAkC,CAAC,SAAnC,CAhBU,EAiBV,CAAC,MAAD,EAAS,UAAT,EAAqB,CAAC,WAAtB,EAAmC,CAAC,UAApC,CAjBU,EAkBV,CAAC,MAAD,EAAS,UAAT,EAAqB,CAAC,QAAtB,EAAgC,CAAC,UAAjC,CAlBU,EAmBV,CAAC,MAAD,EAAS,UAAT,EAAqB,CAAC,WAAtB,EAAmC,CAAC,UAApC,CAnBU,CAAd;;EAsBA,IAAIC,MAAM,MAAV;EACA,IAAIC,MAAM,MAAV;EACA,IAAIjb,KAAK9e,MAAI,CAAb;EACA,IAAIg6B,MAAM,IAAElb,EAAZ;EACA,IAAImb,QAAQ,EAAZ;;EAEA,IAAIC,YAAY,SAAZA,SAAY,CAASC,KAAT,EAAgB3mC,CAAhB,EAAmB;EAC/B,WAAO2mC,MAAM,CAAN,IAAW3mC,KAAK2mC,MAAM,CAAN,IAAW3mC,KAAK2mC,MAAM,CAAN,IAAW3mC,IAAI2mC,MAAM,CAAN,CAApB,CAAhB,CAAlB;EACH,CAFD;;EAIA,IAAIC,YAAY,SAAZA,SAAY,CAASD,KAAT,EAAgB3mC,CAAhB,EAAmB;EAC/B,WAAO2mC,MAAM,CAAN,IAAW3mC,KAAK,IAAI2mC,MAAM,CAAN,CAAJ,GAAe3mC,IAAI,CAAJ,GAAQ2mC,MAAM,CAAN,CAA5B,CAAlB;EACH,CAFD;;EAIA,SAASE,cAAT,CAAwBC,IAAxB,EAA8B3pC,KAA9B,EAAqC4pC,OAArC,EAA8CC,KAA9C,EAAqD;EACjD,QAAIhnC,IAAI7C,KAAR;EACA,WAAO6pC,KAAP,EAAc,EAAEA,KAAhB,EAAuB;EACnB,YAAIC,MAAMH,KAAK9mC,CAAL,CAAV;EACAA,aAAKinC,GAAL;EACA,YAAIpmC,KAAKC,GAAL,CAASmmC,GAAT,IAAgBF,OAApB,EAA6B;EACzB;EACH;EACJ;EACD,WAAO/mC,CAAP;EACH;;AAED,EAAO,SAAS7S,OAAT,GAAgB;EACnB,SAAKyiB,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,SAAKE,EAAL,GAAU,KAAKA,EAAL,IAAW,CAArB;EACA,SAAKb,KAAL,GAAa,KAAKA,KAAL,IAAc,CAA3B;EACA,SAAKyI,EAAL,GAAU,CAAV;EACA,SAAK3V,KAAL,GAAa,KAAKA,KAAL,IAAc,UAA3B;EACH;;AAED,EAAO,SAAS8V,UAAT,CAAiB6H,EAAjB,EAAqB;EACxB,QAAI5H,MAAMC,WAAW2H,GAAG1f,CAAH,GAAO,KAAKiP,KAAvB,CAAV;;EAEA,QAAIuI,OAAO3W,KAAKC,GAAL,CAAS4e,GAAGzf,CAAZ,CAAX;EACA,QAAI1W,IAAIsX,KAAKslB,KAAL,CAAW3O,OAAO8T,EAAlB,CAAR;EACA,QAAI/hC,IAAI,CAAR,EAAW;EACPA,YAAI,CAAJ;EACH,KAFD,MAEO,IAAIA,KAAKk9C,KAAT,EAAgB;EACnBl9C,YAAIk9C,QAAQ,CAAZ;EACH;EACDjvB,WAAOhL,OAAOgL,OAAOgvB,MAAMj9C,CAApB,CAAP;EACA,QAAIg8C,KAAK;EACLvlC,WAAG0mC,UAAUN,QAAQ78C,CAAR,CAAV,EAAsBiuB,IAAtB,IAA8BM,GAD5B;EAEL7X,WAAGymC,UAAUL,QAAQ98C,CAAR,CAAV,EAAsBiuB,IAAtB;EAFE,KAAT;EAIA,QAAIkI,GAAGzf,CAAH,GAAO,CAAX,EAAc;EACVslC,WAAGtlC,CAAH,GAAO,CAACslC,GAAGtlC,CAAX;EACH;;EAEDslC,OAAGvlC,CAAH,GAAOulC,GAAGvlC,CAAH,GAAO,KAAK7E,CAAZ,GAAgBmrC,GAAhB,GAAsB,KAAK12B,EAAlC;EACA21B,OAAGtlC,CAAH,GAAOslC,GAAGtlC,CAAH,GAAO,KAAK9E,CAAZ,GAAgBorC,GAAhB,GAAsB,KAAKz2B,EAAlC;EACA,WAAOy1B,EAAP;EACH;;AAED,EAAO,SAASttB,UAAT,CAAiBstB,EAAjB,EAAqB;EACxB,QAAI7lB,KAAK;EACL1f,WAAG,CAACulC,GAAGvlC,CAAH,GAAO,KAAK4P,EAAb,KAAoB,KAAKzU,CAAL,GAASmrC,GAA7B,CADE;EAELrmC,WAAGY,KAAKC,GAAL,CAASykC,GAAGtlC,CAAH,GAAO,KAAK6P,EAArB,KAA4B,KAAK3U,CAAL,GAASorC,GAArC;EAFE,KAAT;;EAKA,QAAI7mB,GAAGzf,CAAH,IAAQ,CAAZ,EAAe;EAAE;EACbyf,WAAG1f,CAAH,IAAQomC,QAAQK,KAAR,EAAe,CAAf,CAAR;EACA/mB,WAAGzf,CAAH,GAAOslC,GAAGtlC,CAAH,GAAO,CAAP,GAAW,CAACgM,OAAZ,GAAsBA,OAA7B;EACH,KAHD,MAGO;EACH;EACA,YAAI1iB,IAAIsX,KAAKslB,KAAL,CAAWzG,GAAGzf,CAAH,GAAOwmC,KAAlB,CAAR;EACA,YAAIl9C,IAAI,CAAR,EAAW;EACPA,gBAAI,CAAJ;EACH,SAFD,MAEO,IAAIA,KAAKk9C,KAAT,EAAgB;EACnBl9C,gBAAIk9C,QAAQ,CAAZ;EACH;EACD,iBAAS;EACL,gBAAIJ,QAAQ98C,CAAR,EAAW,CAAX,IAAgBm2B,GAAGzf,CAAvB,EAA0B;EACtB,kBAAE1W,CAAF;EACH,aAFD,MAEO,IAAI88C,QAAQ98C,IAAE,CAAV,EAAa,CAAb,KAAmBm2B,GAAGzf,CAA1B,EAA6B;EAChC,kBAAE1W,CAAF;EACH,aAFM,MAEA;EACH;EACH;EACJ;EACD;EACA,YAAIo9C,QAAQN,QAAQ98C,CAAR,CAAZ;EACA,YAAIoM,IAAI,KAAK+pB,GAAGzf,CAAH,GAAO0mC,MAAM,CAAN,CAAZ,KAAyBN,QAAQ98C,IAAE,CAAV,EAAa,CAAb,IAAkBo9C,MAAM,CAAN,CAA3C,CAAR;EACA;EACAhxC,YAAIkxC,eAAe,UAAS7mC,CAAT,EAAY;EAC3B,mBAAO,CAAC0mC,UAAUC,KAAV,EAAiB3mC,CAAjB,IAAsB0f,GAAGzf,CAA1B,IAA+B2mC,UAAUD,KAAV,EAAiB3mC,CAAjB,CAAtC;EACH,SAFG,EAEDrK,CAFC,EAEE2W,KAFF,EAES,GAFT,CAAJ;;EAIAoT,WAAG1f,CAAH,IAAQ0mC,UAAUN,QAAQ78C,CAAR,CAAV,EAAsBoM,CAAtB,CAAR;EACA+pB,WAAGzf,CAAH,GAAO,CAAC,IAAI1W,CAAJ,GAAQoM,CAAT,IAAc4W,GAArB;EACA,YAAIg5B,GAAGtlC,CAAH,GAAO,CAAX,EAAc;EACVyf,eAAGzf,CAAH,GAAO,CAACyf,GAAGzf,CAAX;EACH;EACJ;;EAEDyf,OAAG1f,CAAH,GAAO+X,WAAW2H,GAAG1f,CAAH,GAAO,KAAKiP,KAAvB,CAAP;EACA,WAAOyQ,EAAP;EACH;;AAED,EAAO,IAAItH,WAAQ,CAAC,UAAD,EAAa,OAAb,CAAZ;AACP,cAAe;EACbjrB,UAAMA,OADO;EAEb0qB,aAASA,UAFI;EAGbI,aAASA,UAHI;EAIbG,WAAOA;EAJM,CAAf;;ECtJO,SAASjrB,OAAT,GAAgB;EACnB,SAAKtH,IAAL,GAAY,SAAZ;EAEH;;AAED,EAAO,SAASgyB,UAAT,CAAiB1J,CAAjB,EAAoB;EACvB,QAAImW,QAAQ5C,qBAAqBvT,CAArB,EAAwB,KAAKuJ,EAA7B,EAAiC,KAAKvc,CAAtC,CAAZ;EACA,WAAOmpB,KAAP;EACH;;AAED,EAAO,SAASrM,UAAT,CAAiB9J,CAAjB,EAAoB;EACvB,QAAImW,QAAQlC,qBAAqBjU,CAArB,EAAwB,KAAKuJ,EAA7B,EAAiC,KAAKvc,CAAtC,EAAyC,KAAK+U,CAA9C,CAAZ;EACA,WAAOoU,KAAP;EACH;;AAED,EAAO,IAAIlM,WAAQ,CAAC,YAAD,EAAe,YAAf,EAA6B,SAA7B,EAAwC,SAAxC,CAAZ;AACP,gBAAe;EACXjrB,UAAMA,OADK;EAEX0qB,aAASA,UAFE;EAGXI,aAASA,UAHE;EAIXG,WAAOA;EAJI,CAAf;;ECpBA,IAAI1sB,OAAO;EACTixC,UAAQ,CADC;EAETD,UAAQ,CAFC;EAGTE,SAAO,CAHE;EAITC,SAAO;EAJE,CAAX;;EAUA,IAAI5gC,SAAS;EACXs0B,KAAO,EAAEhb,KAAK,MAAP,EAAe8R,KAAK,IAApB,EADI;EAEX6f,OAAO,EAAE3xB,KAAK,CAAP,EAAU8R,KAAK,IAAf,EAAqB8f,SAAS,IAA9B,EAFI;EAGXC,QAAO,EAAE7xB,KAAK,CAAP,EAAU8R,KAAK,IAAf,EAAqB8f,SAAS,IAA9B,EAHI;EAIXl4B,SAAO,EAAEsG,KAAK,CAAP,EAAU8R,KAAK,IAAf,EAJI;EAKX3Y,QAAO,EAAE6G,KAAK,CAAP,EAAU8R,KAAK,IAAf;EAAA,GALI,EAAb;;AAQA,EAAO,SAASl6B,OAAT,GAAgB;EACrB1H,SAAOkC,IAAP,CAAYsU,MAAZ,EAAoBnV,OAApB,CAA4B,UAAUqnB,CAAV,EAAa;EACvC,QAAI,OAAO,KAAKA,CAAL,CAAP,KAAmB,WAAvB,EAAoC;EAClC,WAAKA,CAAL,IAAUlS,OAAOkS,CAAP,EAAUoH,GAApB;EACD,KAFD,MAEO,IAAItZ,OAAOkS,CAAP,EAAUkZ,GAAV,IAAiB93B,MAAM,KAAK4e,CAAL,CAAN,CAArB,EAAqC;EAC1C,YAAM,IAAI5jB,KAAJ,CAAU,8CAA8C4jB,CAA9C,GAAkD,KAAlD,GAA0D,KAAKA,CAAL,CAApE,CAAN;EACD,KAFM,MAEA,IAAIlS,OAAOkS,CAAP,EAAUkZ,GAAd,EAAmB;EACxB,WAAKlZ,CAAL,IAAU1X,WAAW,KAAK0X,CAAL,CAAX,CAAV;EACD;EACD,QAAIlS,OAAOkS,CAAP,EAAUg5B,OAAd,EAAuB;EACrB,WAAKh5B,CAAL,IAAU,KAAKA,CAAL,IAAU5B,GAApB;EACD;EACF,GAX2B,CAW1BjC,IAX0B,CAWrB,IAXqB,CAA5B;;EAaA,MAAIzJ,KAAKC,GAAL,CAAUD,KAAKC,GAAL,CAAS,KAAK4N,IAAd,IAAsBzC,OAAhC,IAA4CK,KAAhD,EAAuD;EACrD,SAAK5gB,IAAL,GAAY,KAAKgjB,IAAL,GAAY,CAAZ,GAAgBhjB,KAAKgxC,MAArB,GAA8BhxC,KAAKixC,MAA/C;EACD,GAFD,MAEO,IAAI97B,KAAKC,GAAL,CAAS,KAAK4N,IAAd,IAAsBpC,KAA1B,EAAiC;EACtC,SAAK5gB,IAAL,GAAYA,KAAKkxC,KAAjB;EACD,GAFM,MAEA;EACL,SAAKlxC,IAAL,GAAYA,KAAKmxC,KAAjB;EACA,SAAKvF,MAAL,GAAcz2B,KAAKE,GAAL,CAAS,KAAK2N,IAAd,CAAd;EACA,SAAKyoB,MAAL,GAAct2B,KAAK8W,GAAL,CAAS,KAAKjJ,IAAd,CAAd;EACD;;EAED,OAAK24B,GAAL,GAAW,KAAK9W,CAAL,GAAS,KAAKp1B,CAAzB,CAxBqB;;EA0BrB,MAAI,KAAKksC,GAAL,IAAY,CAAZ,IAAiB,KAAKA,GAAL,GAAW,IAAhC,EAAsC;EACpC,UAAM,IAAI98C,KAAJ,CAAU,gBAAV,CAAN;EACD;;EAED,OAAK4jB,CAAL,GAAS,IAAI,KAAKk5B,GAAlB;EACA,OAAKC,EAAL,GAAU,IAAI,KAAKn5B,CAAnB;EACA,OAAKgjB,EAAL,GAAU,IAAI,KAAKkW,GAAnB;EACA,OAAKE,KAAL,GAAa,CAAC,KAAKp5B,CAAL,GAAS,CAAV,IAAe,KAAKgjB,EAAjC;EACA,OAAKzZ,EAAL,GAAU,CAAV;;EAEA,MAAI8vB,QAAQ,KAAKJ,IAAjB;EACA,MAAI73B,QAAQ,KAAK23B,GAAjB;EACA,OAAKO,EAAL,GAAU5mC,KAAK8W,GAAL,CAASpI,KAAT,CAAV;EACA,OAAKm4B,EAAL,GAAU7mC,KAAKE,GAAL,CAASwO,KAAT,CAAV;EACA,OAAKo4B,EAAL,GAAU9mC,KAAK8W,GAAL,CAAS6vB,KAAT,CAAV;EACA,OAAKI,EAAL,GAAU/mC,KAAKE,GAAL,CAASymC,KAAT,CAAV;EACD;;AAED,EAAO,SAAS3vB,UAAT,CAAiB1J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAKiP,KAAZ;EACA,MAAI6H,SAASjW,KAAKE,GAAL,CAASoN,EAAElO,CAAX,CAAb;EACA,MAAI8W,SAASlW,KAAK8W,GAAL,CAASxJ,EAAElO,CAAX,CAAb;EACA,MAAIu9B,SAAS38B,KAAK8W,GAAL,CAASxJ,EAAEnO,CAAX,CAAb;EACA,MAAIA,CAAJ,EAAOC,CAAP;EACA,UAAQ,KAAKvU,IAAb;EACE,SAAKA,KAAKmxC,KAAV;EACE58B,UAAI,KAAKq3B,MAAL,GAAcxgB,MAAd,GAAuB,KAAKqgB,MAAL,GAAcpgB,MAAd,GAAuBymB,MAAlD;EACA;EACF,SAAK9xC,KAAKkxC,KAAV;EACE38B,UAAI8W,SAASymB,MAAb;EACA;EACF,SAAK9xC,KAAKgxC,MAAV;EACEz8B,UAAI,CAAC6W,MAAL;EACA;EACF,SAAKprB,KAAKixC,MAAV;EACE18B,UAAI6W,MAAJ;EACA;EAZJ;EAcA7W,MAAI,KAAKonC,GAAL,IAAY,KAAKl5B,CAAL,GAASlO,CAArB,CAAJ;EACAD,MAAIC,IAAI8W,MAAJ,GAAalW,KAAKE,GAAL,CAASoN,EAAEnO,CAAX,CAAjB;;EAEA,UAAQ,KAAKtU,IAAb;EACE,SAAKA,KAAKmxC,KAAV;EACE58B,WAAK,KAAKk3B,MAAL,GAAcrgB,MAAd,GAAuB,KAAKwgB,MAAL,GAAcvgB,MAAd,GAAuBymB,MAAnD;EACA;EACF,SAAK9xC,KAAKkxC,KAAV;EACE38B,WAAK6W,MAAL;EACA;EACF,SAAKprB,KAAKixC,MAAV;EACE18B,WAAK,EAAE8W,SAASymB,MAAX,CAAL;EACA;EACF,SAAK9xC,KAAKgxC,MAAV;EACEz8B,WAAK8W,SAASymB,MAAd;EACA;EAZJ;;EAeA;EACA,MAAIqK,EAAJ,EAAQC,EAAR;EACAD,OAAK5nC,IAAI,KAAKwnC,EAAT,GAAcznC,IAAI,KAAK0nC,EAA5B;EACAI,OAAK,KAAKD,KAAK,KAAKD,EAAV,GAAe,KAAKzW,EAApB,GAAyB,KAAKwW,EAAnC,CAAL;EACA3nC,MAAI,CAACA,IAAI,KAAKynC,EAAT,GAAcxnC,IAAI,KAAKynC,EAAxB,IAA8B,KAAKC,EAAnC,GAAwCG,EAA5C;EACA7nC,MAAI4nC,KAAKC,EAAT;;EAEA35B,IAAEnO,CAAF,GAAMA,IAAI,KAAK7E,CAAf;EACAgT,IAAElO,CAAF,GAAMA,IAAI,KAAK9E,CAAf;EACA,SAAOgT,CAAP;EACD;;AAED,EAAO,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EACzBA,IAAEnO,CAAF,IAAO,KAAK7E,CAAZ;EACAgT,IAAElO,CAAF,IAAO,KAAK9E,CAAZ;EACA,MAAI/E,IAAI,EAAE4J,GAAGmO,EAAEnO,CAAP,EAAUC,GAAGkO,EAAElO,CAAf,EAAR;;EAEA;EACA,MAAI8nC,EAAJ,EAAQC,EAAR,EAAYH,EAAZ;EACAA,OAAK,KAAK,KAAKR,GAAL,GAAWl5B,EAAElO,CAAF,GAAM,KAAK2nC,EAA3B,CAAL;EACAG,OAAK,KAAKV,GAAL,GAAWl5B,EAAEnO,CAAb,GAAiB6nC,EAAtB;EACAG,OAAK,KAAKX,GAAL,GAAWl5B,EAAElO,CAAb,GAAiB,KAAK0nC,EAAtB,GAA2BE,EAAhC;EACA15B,IAAEnO,CAAF,GAAM+nC,KAAK,KAAKN,EAAV,GAAeO,KAAK,KAAKN,EAA/B;EACAv5B,IAAElO,CAAF,GAAM+nC,KAAK,KAAKP,EAAV,GAAeM,KAAK,KAAKL,EAA/B;;EAEA,MAAIpS,KAAKvE,MAAM5iB,EAAEnO,CAAR,EAAWmO,EAAElO,CAAb,CAAT;EACA,MAAIY,KAAKC,GAAL,CAASw0B,EAAT,IAAehpB,KAAnB,EAA0B;EACxBlW,MAAE4J,CAAF,GAAM,CAAN;EACA5J,MAAE6J,CAAF,GAAMkO,EAAElO,CAAR;EACD,GAHD,MAGO;EACL,QAAI+9B,IAAJ,EAAUC,IAAV;EACAA,WAAO,IAAI3I,KAAKA,EAAL,GAAU,KAAKiS,KAA1B;EACAtJ,WAAO,CAAC,KAAK9vB,CAAL,GAAStN,KAAKoW,IAAL,CAAUgnB,IAAV,CAAV,KAA8B,KAAKoJ,GAAL,GAAW/R,EAAX,GAAgBA,KAAK,KAAK+R,GAAxD,CAAP;EACArJ,WAAOn9B,KAAKoW,IAAL,CAAU,IAAIgnB,OAAOA,IAArB,CAAP;EACA,YAAQ,KAAKvyC,IAAb;EACE,WAAKA,KAAKmxC,KAAV;EACEzmC,UAAE6J,CAAF,GAAMY,KAAK2vB,IAAL,CAAUwN,OAAO,KAAK1G,MAAZ,GAAqBnpB,EAAElO,CAAF,GAAMg+B,IAAN,GAAa,KAAK9G,MAAlB,GAA2B7B,EAA1D,CAAN;EACAnnB,UAAElO,CAAF,GAAM,CAAC+9B,OAAO,KAAK1G,MAAL,GAAcz2B,KAAKE,GAAL,CAAS3K,EAAE6J,CAAX,CAAtB,IAAuCq1B,EAA7C;EACAnnB,UAAEnO,CAAF,IAAOi+B,OAAO,KAAK9G,MAAnB;EACA;EACF,WAAKzrC,KAAKkxC,KAAV;EACExmC,UAAE6J,CAAF,GAAMY,KAAK2vB,IAAL,CAAUriB,EAAElO,CAAF,GAAMg+B,IAAN,GAAa3I,EAAvB,CAAN;EACAnnB,UAAElO,CAAF,GAAM+9B,OAAO1I,EAAb;EACAnnB,UAAEnO,CAAF,IAAOi+B,IAAP;EACA;EACF,WAAKvyC,KAAKixC,MAAV;EACEvmC,UAAE6J,CAAF,GAAMY,KAAK2vB,IAAL,CAAUwN,IAAV,CAAN;EACA7vB,UAAElO,CAAF,GAAM,CAACkO,EAAElO,CAAT;EACA;EACF,WAAKvU,KAAKgxC,MAAV;EACEtmC,UAAE6J,CAAF,GAAM,CAACY,KAAK2vB,IAAL,CAAUwN,IAAV,CAAP;EACA;EAjBJ;EAmBA5nC,MAAE4J,CAAF,GAAMa,KAAK2iB,KAAL,CAAWrV,EAAEnO,CAAb,EAAgBmO,EAAElO,CAAlB,CAAN;EACD;;EAEDkO,IAAEnO,CAAF,GAAM5J,EAAE4J,CAAF,GAAM,KAAKiP,KAAjB;EACAd,IAAElO,CAAF,GAAM7J,EAAE6J,CAAR;EACA,SAAOkO,CAAP;EACD;;AAED,EAAO,IAAIiK,WAAQ,CAAC,oBAAD,EAAuB,OAAvB,CAAZ;AACP,cAAe;EACbjrB,QAAMA,OADO;EAEb0qB,WAASA,UAFI;EAGbI,WAASA,UAHI;EAIbG,SAAOA;EAJM,CAAf;;ECjKO,SAASjrB,OAAT,GAAgB;EACnB,SAAK86C,SAAL,GAAkB,KAAKC,KAAL,KAAe,GAAf,GAAqB,CAArB,GAAyB,CAA3C;EACA,SAAK3X,CAAL,GAASlhC,OAAO,KAAKkhC,CAAZ,CAAT;EACA,SAAK4X,UAAL,GAAkB,KAAK5X,CAAL,GAAS,KAAKp1B,CAAhC;;EAEA,QAAI,KAAKgtC,UAAL,IAAmB,CAAnB,IAAwB,KAAKA,UAAL,GAAkB,IAA9C,EAAoD;EAChD,cAAM,IAAI59C,KAAJ,EAAN;EACH;;EAED,SAAK69C,QAAL,GAAgB,MAAM,KAAKD,UAA3B;EACA,SAAK9d,CAAL,GAAS,KAAK+d,QAAL,GAAgB,KAAKA,QAArB,GAAgC,GAAzC;;EAEA,QAAI,KAAK1wB,EAAL,KAAY,GAAhB,EAAqB;EACjB,YAAI0gB,SAAS,MAAM,KAAK1gB,EAAxB;EACA,YAAI2wB,UAAU,IAAIjQ,MAAlB;;EAEA,aAAKkQ,QAAL,GAAgBznC,KAAKoW,IAAL,CAAUmhB,MAAV,CAAhB;EACA,aAAKmQ,SAAL,GAAiBnQ,MAAjB;EACA,aAAKoQ,aAAL,GAAqBH,OAArB;;EAEA,aAAKI,KAAL,GAAa,SAAb,CARiB;EASpB,KATD,MASO;EACH,aAAKH,QAAL,GAAgB,GAAhB;EACA,aAAKC,SAAL,GAAiB,GAAjB;EACA,aAAKC,aAAL,GAAqB,GAArB;;EAEA,aAAKC,KAAL,GAAa,QAAb,CALG;EAMN;;EAED,QAAI,CAAC,KAAK1mC,KAAV,EAAiB;EACb,aAAKA,KAAL,GAAa,8BAAb;EACH;EACJ;;EAED,SAAS8V,UAAT,CAAiB1J,CAAjB,EAAoB;EAChB,QAAI2J,MAAM3J,EAAEnO,CAAZ;EACA,QAAIvG,MAAM0U,EAAElO,CAAZ;EACA,QAAImzB,GAAJ,EAASsV,GAAT,EAAcC,GAAd,EAAmBC,GAAnB;EACA9wB,UAAMA,MAAM,KAAK7I,KAAjB;;EAEA,QAAI,KAAKw5B,KAAL,KAAe,SAAnB,EAA8B;EAC1BhvC,cAAMoH,KAAK4W,IAAL,CAAU,KAAK8wB,SAAL,GAAiB1nC,KAAKwW,GAAL,CAAS5d,GAAT,CAA3B,CAAN;EACA,YAAIrD,IAAI,KAAKkyC,QAAL,GAAgBvX,MAAM,KAAKuX,QAAL,GAAgBznC,KAAK8W,GAAL,CAASle,GAAT,CAAtB,EAAqCoH,KAAKE,GAAL,CAAStH,GAAT,CAArC,CAAxB;;EAEAivC,cAAMtyC,IAAIyK,KAAK8W,GAAL,CAASG,GAAT,CAAJ,GAAoBjX,KAAK8W,GAAL,CAASle,GAAT,CAA1B;EACAkvC,cAAMvyC,IAAIyK,KAAKE,GAAL,CAAS+W,GAAT,CAAJ,GAAoBjX,KAAK8W,GAAL,CAASle,GAAT,CAA1B;EACAmvC,cAAMxyC,IAAIyK,KAAKE,GAAL,CAAStH,GAAT,CAAV;;EAEA,YAAK,CAAC,KAAK2uC,QAAL,GAAgBM,GAAjB,IAAwBA,GAAxB,GAA8BC,MAAMA,GAApC,GAA0CC,MAAMA,GAAN,GAAY,KAAKJ,aAA5D,GAA6E,GAAjF,EAAsF;EAClFr6B,cAAEnO,CAAF,GAAM3Q,OAAO01B,GAAb;EACA5W,cAAElO,CAAF,GAAM5Q,OAAO01B,GAAb;EACA,mBAAO5W,CAAP;EACH;;EAEDilB,cAAM,KAAKgV,QAAL,GAAgBM,GAAtB;EACA,YAAI,KAAKT,SAAT,EAAoB;EAChB95B,cAAEnO,CAAF,GAAM,KAAKmoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUkxB,MAAM5X,MAAM6X,GAAN,EAAWxV,GAAX,CAAhB,CAAxB;EACAjlB,cAAElO,CAAF,GAAM,KAAKkoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUmxB,MAAMxV,GAAhB,CAAxB;EACH,SAHD,MAGO;EACHjlB,cAAEnO,CAAF,GAAM,KAAKmoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUkxB,MAAMvV,GAAhB,CAAxB;EACAjlB,cAAElO,CAAF,GAAM,KAAKkoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUmxB,MAAM7X,MAAM4X,GAAN,EAAWvV,GAAX,CAAhB,CAAxB;EACH;EACJ,KAtBD,MAsBO,IAAI,KAAKqV,KAAL,KAAe,QAAnB,EAA6B;EAChCrV,cAAMvyB,KAAK8W,GAAL,CAASle,GAAT,CAAN;EACAivC,cAAM7nC,KAAK8W,GAAL,CAASG,GAAT,IAAgBsb,GAAtB;EACAuV,cAAM9nC,KAAKE,GAAL,CAAS+W,GAAT,IAAgBsb,GAAtB;EACAwV,cAAM/nC,KAAKE,GAAL,CAAStH,GAAT,CAAN;EACA25B,cAAM,KAAKgV,QAAL,GAAgBM,GAAtB;;EAEA,YAAI,KAAKT,SAAT,EAAoB;EAChB95B,cAAEnO,CAAF,GAAM,KAAKmoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUkxB,MAAM5X,MAAM6X,GAAN,EAAWxV,GAAX,CAAhB,CAAxB;EACAjlB,cAAElO,CAAF,GAAM,KAAKkoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUmxB,MAAMxV,GAAhB,CAAxB;EACH,SAHD,MAGO;EACHjlB,cAAEnO,CAAF,GAAM,KAAKmoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUkxB,MAAMvV,GAAhB,CAAxB;EACAjlB,cAAElO,CAAF,GAAM,KAAKkoC,UAAL,GAAkBtnC,KAAK4W,IAAL,CAAUmxB,MAAM7X,MAAM4X,GAAN,EAAWvV,GAAX,CAAhB,CAAxB;EACH;EACJ;EACDjlB,MAAEnO,CAAF,GAAMmO,EAAEnO,CAAF,GAAM,KAAK7E,CAAjB;EACAgT,MAAElO,CAAF,GAAMkO,EAAElO,CAAF,GAAM,KAAK9E,CAAjB;EACA,WAAOgT,CAAP;EACH;;EAED,SAAS8J,UAAT,CAAiB9J,CAAjB,EAAoB;EAChB,QAAIu6B,MAAM,CAAC,GAAX;EACA,QAAIC,MAAM,GAAV;EACA,QAAIC,MAAM,GAAV;EACA,QAAIztC,CAAJ,EAAO+U,CAAP,EAAU24B,GAAV,EAAe54B,CAAf;;EAEA9B,MAAEnO,CAAF,GAAMmO,EAAEnO,CAAF,GAAM,KAAK7E,CAAjB;EACAgT,MAAElO,CAAF,GAAMkO,EAAElO,CAAF,GAAM,KAAK9E,CAAjB;;EAEA,QAAI,KAAKstC,KAAL,KAAe,SAAnB,EAA8B;EAC1B,YAAI,KAAKR,SAAT,EAAoB;EAChBW,kBAAM/nC,KAAKwW,GAAL,CAASlJ,EAAElO,CAAF,GAAM,KAAKkoC,UAApB,CAAN;EACAQ,kBAAM9nC,KAAKwW,GAAL,CAASlJ,EAAEnO,CAAF,GAAM,KAAKmoC,UAApB,IAAkCpX,MAAM,GAAN,EAAW6X,GAAX,CAAxC;EACH,SAHD,MAGO;EACHD,kBAAM9nC,KAAKwW,GAAL,CAASlJ,EAAEnO,CAAF,GAAM,KAAKmoC,UAApB,CAAN;EACAS,kBAAM/nC,KAAKwW,GAAL,CAASlJ,EAAElO,CAAF,GAAM,KAAKkoC,UAApB,IAAkCpX,MAAM,GAAN,EAAW4X,GAAX,CAAxC;EACH;;EAED,YAAIG,OAAOF,MAAM,KAAKN,QAAtB;EACAntC,YAAIwtC,MAAMA,GAAN,GAAYG,OAAOA,IAAnB,GAA0BJ,MAAMA,GAApC;EACAx4B,YAAI,IAAI,KAAKk4B,QAAT,GAAoBM,GAAxB;EACAG,cAAO34B,IAAIA,CAAL,GAAU,IAAI/U,CAAJ,GAAQ,KAAKkvB,CAA7B;;EAEA,YAAIwe,MAAM,GAAV,EAAe;EACX16B,cAAEnO,CAAF,GAAM3Q,OAAO01B,GAAb;EACA5W,cAAElO,CAAF,GAAM5Q,OAAO01B,GAAb;EACA,mBAAO5W,CAAP;EACH;;EAED8B,YAAI,CAAC,CAACC,CAAD,GAAKrP,KAAKoW,IAAL,CAAU4xB,GAAV,CAAN,KAAyB,MAAM1tC,CAA/B,CAAJ;EACAutC,cAAM,KAAKN,QAAL,GAAgBn4B,IAAIy4B,GAA1B;EACAC,eAAO14B,CAAP;EACA24B,eAAO34B,CAAP;;EAEA9B,UAAEnO,CAAF,GAAMa,KAAK2iB,KAAL,CAAWmlB,GAAX,EAAgBD,GAAhB,CAAN;EACAv6B,UAAElO,CAAF,GAAMY,KAAK4W,IAAL,CAAUmxB,MAAM/nC,KAAK8W,GAAL,CAASxJ,EAAEnO,CAAX,CAAN,GAAsB0oC,GAAhC,CAAN;EACAv6B,UAAElO,CAAF,GAAMY,KAAK4W,IAAL,CAAU,KAAK+wB,aAAL,GAAqB3nC,KAAKwW,GAAL,CAASlJ,EAAElO,CAAX,CAA/B,CAAN;EACH,KA5BD,MA4BO,IAAI,KAAKwoC,KAAL,KAAe,QAAnB,EAA6B;EAChC,YAAI,KAAKR,SAAT,EAAoB;EAChBW,kBAAM/nC,KAAKwW,GAAL,CAASlJ,EAAElO,CAAF,GAAM,KAAKkoC,UAApB,CAAN;EACAQ,kBAAM9nC,KAAKwW,GAAL,CAASlJ,EAAEnO,CAAF,GAAM,KAAKmoC,UAApB,IAAkCtnC,KAAKoW,IAAL,CAAU,MAAM2xB,MAAMA,GAAtB,CAAxC;EACH,SAHD,MAGO;EACHD,kBAAM9nC,KAAKwW,GAAL,CAASlJ,EAAEnO,CAAF,GAAM,KAAKmoC,UAApB,CAAN;EACAS,kBAAM/nC,KAAKwW,GAAL,CAASlJ,EAAElO,CAAF,GAAM,KAAKkoC,UAApB,IAAkCtnC,KAAKoW,IAAL,CAAU,MAAM0xB,MAAMA,GAAtB,CAAxC;EACH;;EAEDxtC,YAAIwtC,MAAMA,GAAN,GAAYC,MAAMA,GAAlB,GAAwBF,MAAMA,GAAlC;EACAx4B,YAAI,IAAI,KAAKk4B,QAAT,GAAoBM,GAAxB;EACAG,cAAO34B,IAAIA,CAAL,GAAU,IAAI/U,CAAJ,GAAQ,KAAKkvB,CAA7B;EACA,YAAIwe,MAAM,GAAV,EAAe;EACX16B,cAAEnO,CAAF,GAAM3Q,OAAO01B,GAAb;EACA5W,cAAElO,CAAF,GAAM5Q,OAAO01B,GAAb;EACA,mBAAO5W,CAAP;EACH;;EAED8B,YAAI,CAAC,CAACC,CAAD,GAAKrP,KAAKoW,IAAL,CAAU4xB,GAAV,CAAN,KAAyB,MAAM1tC,CAA/B,CAAJ;EACAutC,cAAM,KAAKN,QAAL,GAAgBn4B,IAAIy4B,GAA1B;EACAC,eAAO14B,CAAP;EACA24B,eAAO34B,CAAP;;EAEA9B,UAAEnO,CAAF,GAAMa,KAAK2iB,KAAL,CAAWmlB,GAAX,EAAgBD,GAAhB,CAAN;EACAv6B,UAAElO,CAAF,GAAMY,KAAK4W,IAAL,CAAUmxB,MAAM/nC,KAAK8W,GAAL,CAASxJ,EAAEnO,CAAX,CAAN,GAAsB0oC,GAAhC,CAAN;EACH;EACDv6B,MAAEnO,CAAF,GAAMmO,EAAEnO,CAAF,GAAM,KAAKiP,KAAjB;EACA,WAAOd,CAAP;EACH;;AAED,EAAO,IAAIiK,WAAQ,CAAC,8BAAD,EAAiC,yBAAjC,EAA4D,MAA5D,CAAZ;AACP,aAAe;EACXjrB,UAAMA,OADK;EAEX0qB,aAASA,UAFE;EAGXI,aAASA,UAHE;EAIXG,WAAOA;EAJI,CAAf;;EC3He,8BAASgQ,KAAT,EAAe;EAC5BA,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2Bu7B,KAA3B;EACA/J,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B48B,MAA3B;EACApL,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2Bs0B,GAA3B;EACA9C,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BoyC,MAA3B;EACA5gB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BqyC,KAA3B;EACA7gB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BsyC,MAA3B;EACA9gB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BuyC,KAA3B;EACA/gB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BwyC,GAA3B;EACAhhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2ByyC,MAA3B;EACAjhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B0yC,IAA3B;EACAlhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B2yC,IAA3B;EACAnhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B4yC,GAA3B;EACAphB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B6yC,IAA3B;EACArhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B8yC,GAA3B;EACAthB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B+yC,GAA3B;EACAvhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BgzC,IAA3B;EACAxhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BizC,IAA3B;EACAzhB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BkzC,IAA3B;EACA1hB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BmzC,IAA3B;EACA3hB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BozC,IAA3B;EACA5hB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BqzC,IAA3B;EACA7hB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BszC,KAA3B;EACA9hB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BuzC,IAA3B;EACA/hB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2BwzC,KAA3B;EACAhiB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2ByzC,GAA3B;EACAjiB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B0zC,KAA3B;EACAliB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B2zC,OAA3B;EACAniB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B4zC,KAA3B;EACApiB,QAAM2gB,IAAN,CAAW/nB,WAAX,CAAuBpqB,GAAvB,CAA2B6zC,IAA3B;EACD;;ECjDDriB,MAAMsiB,YAAN,GAAqB,OAArB;EACAtiB,MAAM2gB,IAAN,GAAaA,UAAb;EACA3gB,MAAM9c,KAAN,GAAc,IAAI8c,MAAM2gB,IAAV,CAAe,OAAf,CAAd;EACA3gB,MAAM1sB,KAAN,GAAcA,KAAd;EACA0sB,MAAMX,OAAN,GAAgBkjB,OAAhB;EACAviB,MAAM/c,IAAN,GAAaA,IAAb;EACA+c,MAAMjL,OAAN,GAAgBA,OAAhB;EACAiL,MAAMb,SAAN,GAAkBA,SAAlB;EACAa,MAAMe,IAAN,GAAaA,IAAb;EACAf,MAAMhsB,OAAN,GAAgB,aAAhB;EACAwuC,oBAAoBxiB,KAApB;;ECGA;EACA;EACA;EACA;;sEACA,iBAA0ByiB,KAA1B;EAAA;EAAA;EAAA;EAAA;EAAA;EACQtF,cADR,GACa;EACTvlC,iBAAG6qC,MAAM9nC,MAAN,CAAarJ,GADP;EAETuG,iBAAG4qC,MAAM9nC,MAAN,CAAatJ;EAFP,aADb;EAKMqxC,8BALN,GAK2B,KAL3B;;EAME,gBAAID,MAAM9hC,YAAN,IAAsB8hC,MAAM9hC,YAAN,CAAmBgiC,mBAA7C,EACED,qBAAqBD,MAAM9hC,YAAN,CAAmBgiC,mBAAxC;EACIv/C,eARR,GAQcw/C,iBACV,+EADU,EAEVzF,EAFU,CARd;EAAA;EAAA,mBAYe3iC,QAAMpX,GAAN,EAAWd,IAAX,CAAgB,eAAO;EAClC,kBAAIwoB,SAAS;EACXzI,6BAAawgC,kBAAkBC,GAAlB,EAAuBJ,kBAAvB,CADF;EAEX/nC,wBAAQ8nC,MAAM9nC;EAFH,eAAb;EAIA,qBAAOmQ,MAAP;EACD,aANY,CAZf;;EAAA;EAAA;;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;;oBAAei4B;;;;;;uEAqBf,kBAAiCz4C,IAAjC;EAAA;EAAA;EAAA;EAAA;EAAA;EACE;EACA;EACA;EACA;EACI04C,iCALN,GAK8B,EAL9B;;EAAA,kBAMM14C,KAAK+X,WAAL,KAAqB,IAN3B;EAAA;EAAA;EAAA;;EAAA;EAAA;EAAA,mBAQwB7H,QAAMlQ,KAAK+X,WAAL,CAAiB4gC,MAAjB,CAAwBjnD,IAAxB,CAA6BknD,IAAnC,CARxB;;EAAA;EAQYJ,eARZ;;EASME,oCAAwB;EACtBG,+BAAiBL,IAAIK,eAAJ,CAAoBC,QADf;EAEtBC,0BAAYP,IAAIO,UAFM;EAGtBC,0BAAYR,IAAIQ,UAHM;EAItBC,qCAAuBT,IAAIS,qBAJL;EAKtBC,wBAAUV,IAAIU,QALQ;EAMtBC,0BAAYX,IAAIW,UAAJ,CAAeL;EANL,aAAxB;EATN;EAAA;;EAAA;EAAA;EAAA;;EAkBM;EACAt0C,oBAAQI,GAAR,CAAY,QAAZ;EACAJ,oBAAQI,GAAR;EACA;;EArBN;EAAA;EAAA;;EAAA;EAwBI8zC,oCAAwB,IAAxB;;EAxBJ;EAAA,8CA0BS;EACLxoC,qBAAO;EACL5K,0BAAUtF,KAAKqQ,MAAL,CAAYtJ,GADjB;EAELxB,2BAAWvF,KAAKqQ,MAAL,CAAYrJ;EAFlB,eADF;EAKL0xC,qCAAuBA,qBALlB;EAMLr6C,sBAAQ,IANH;EAAA,aA1BT;;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;;oBAAe+6C;;;;;;uEA0Cf,kBAA+Bp5C,IAA/B;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA,mBACoBkQ,8DACoClQ,KAAKkQ,KAAL,CAAW5K,QAD/C,aAC+DtF,KAAKkQ,KAAL,CAAW3K,SAD1E,gBADpB;;EAAA;EACQizC,eADR;EAIMa,qBAJN,GAIkBC,oBAAoBd,IAAIrvC,QAAxB,EAAkC,gBAAlC,CAJlB;EAKMowC,oBALN,GAKiBD,oBAAoBd,IAAIrvC,QAAxB,EAAkC,0BAAlC,CALjB;EAMMqwC,yBANN,GAMsBF,oBAAoBd,IAAIrvC,QAAxB,EAAkC,oBAAlC,CANtB;;EAOE,gBAAIkwC,cAAc,IAAd,IAAsBE,aAAa,IAAnC,IAA2CC,kBAAkB,IAAjE,EAAuE;EACrEx5C,mBAAKy5C,aAAL,GAAqB;EACnBC,2BAAWL,cAAcrlD,SAAd,GAA0BqlD,UAAUM,OAApC,GAA8C,IADtC;EAEnBC,2BAAWP,cAAcrlD,SAAd,GAA0BqlD,UAAUQ,QAApC,GAA+C,IAFvC;EAGnBC,0BAAUP,aAAavlD,SAAb,GAAyBulD,SAASI,OAAlC,GAA4C,IAHnC;EAInBI,0BAAUR,aAAavlD,SAAb,GAAyBulD,SAASM,QAAlC,GAA6C,IAJpC;EAKnBG,+BAAeR,kBAAkBxlD,SAAlB,GAA8BwlD,cAAcG,OAA5C,GAAsD,IALlD;EAMnBM,+BAAeT,kBAAkBxlD,SAAlB,GAA8BwlD,cAAc5jC,IAA5C,GAAmD;EAN/C,eAArB;EAQD,aATD,MASO;EACL5V,mBAAKy5C,aAAL,GAAqB,IAArB;EACD;;EAlBH,8CAoBSz5C,IApBT;;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;;oBAAek6C;;;;;;uEA8Cf,kBAA+B/B,KAA/B;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA,mBAEyBM,WAAWN,KAAX,EAClBngD,IADkB,CACbohD,iBADa,EAElBphD,IAFkB,CAEbkiD,eAFa,CAFzB;;EAAA;EAEUpkD,kBAFV;EAAA,8CAKWA,MALX;;EAAA;EAAA;EAAA;EAAA;;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;;oBAAeqkD;;;;EArIf;EACAzkB,MAAM/c,IAAN,CACE,YADF,EAEE,uMAFF;EAIA,IAAMyhC,kBAAkB1kB,MACtBA,MAAM/c,IAAN,CAAW,WAAX,CADsB,EAEtB+c,MAAM/c,IAAN,CAAW,YAAX,CAFsB,CAAxB;;EAKA;EACA,SAASzI,OAAT,CAAepX,GAAf,EAAoB;EAClB,MAAM3C,UAAU,IAAIX,OAAJ,CAAY,UAACI,OAAD,EAAUH,MAAV,EAAqB;EAC/C9D,UAAMmH,GAAN,EACGd,IADH,CACQ;EAAA,aAAOpC,QAAQ4iD,IAAIrgD,IAAJ,EAAR,CAAP;EAAA,KADR,EAEGgY,KAFH,CAES;EAAA,aAAO1a,OAAOwK,GAAP,CAAP;EAAA,KAFT;EAGD,GAJe,CAAhB;EAKA,SAAO9J,OAAP;EACD;;EA+DD,SAASmjD,mBAAT,CAA6BnwC,QAA7B,EAAuCrR,IAAvC,EAA6C;EAC3C,MAAIuiD,UAAUlxC,SAASmxC,IAAT,CAAc;EAAA,WAAQC,KAAKC,UAAL,CAAgB1iD,IAAhB,KAAyBA,IAAjC;EAAA,GAAd,CAAd;EACA,MAAIuiD,YAAYrmD,SAAhB,EAA2B,OAAO,IAAP;EAC3B,SAAOqmD,QAAQG,UAAf;EACD;;EAyBD,SAASlC,gBAAT,CAA0BzqC,OAA1B,EAAmCglC,EAAnC,EAAuC;EACrC,MAAI4H,OAAOL,gBAAgBj1B,OAAhB,CAAwB0tB,EAAxB,CAAX;EACA,cAAUhlC,OAAV,GAAoB4sC,KAAKntC,CAAzB,SAA8BmtC,KAAKltC,CAAnC;EACD;;EAED,SAASgrC,iBAAT,CAA2BC,GAA3B,EAAgCkC,SAAhC,EAA2C;EACzC,MAAIC,iBAAJ;EACAD,cACEA,cAAc,KAAd,GAAsB,KAAtB,GAA8BA,cAAc1mD,SAAd,GAA0B,KAA1B,GAAkC0mD,SADlE,CAFyC;EAIzC,MAAIlC,IAAIoC,OAAR,EAAiB;EACfD,eACED,cAAc,KAAd,GACIlC,IAAIoC,OAAJ,CAAY16C,MAAZ,CAAmB;EAAA,aAAKoN,EAAEutC,YAAF,KAAmBH,SAAxB;EAAA,KAAnB,CADJ,GAEIlC,IAAIoC,OAAJ,CAAY16C,MAAZ,CAAmB;EAAA,aAAKoN,EAAEwtC,UAAF,KAAiB,YAAtB;EAAA,KAAnB,CAHN;EAID,GALD,MAKO;EACL,UAAM;EACJ9kD,aAAO,8CADH;EAEJoE,gBAAUo+C;EAFN,KAAN;EAID;EACD,SAAOmC,SAAS/jD,MAAT,GAAkB,CAAlB,GAAsB+jD,SAAS,CAAT,CAAtB,GAAoC,IAA3C;EACD;;;;;;;;;;;;;ECtID;;;;;;EAMC,YAAUI,MAAV,EAAkBC,OAAlB,EAA2B;EAC3B,EAA+DA,QAAQv5C,OAAR,CAA/D,AAAA;EAGA,EAJA,EAIClG,cAJD,EAIO,UAAUkG,OAAV,EAAmB;AAAE;;;;;EAM5B,MAAIw5C,qBAAqBj2C,EAAEi2C,kBAAF,GAAuBj2C,EAAEk2C,YAAF,CAAe1kC,MAAf,CAAsB;;EAErE3d,YAAS;EACRsiD,sBAAkB,EADV;EAERC,wBAAoB,IAFZ;EAGRC,iBAAar2C,EAAEoK,MAAF,CAAS3c,SAAT,CAAmBoG,OAAnB,CAA2ByiD,IAHhC;;EAKRC,yBAAqB,KALb;EAMRC,uBAAmB,IANX;EAORC,yBAAqB,IAPb;EAQRC,yBAAqB,IARb;EASRC,sBAAkB,KATV;;EAWRC,6BAAyB,IAXjB;;;;EAeRC,gCAA4B,IAfpB;;;;;EAoBRC,aAAS,IApBD;;;;EAwBRC,0BAAsB,KAxBd;;;EA2BRC,4BAAwB,IA3BhB;;;EA8BRC,gCAA4B,CA9BpB;;;EAiCRC,8BAA0B,EAAEC,QAAQ,GAAV,EAAevwC,OAAO,MAAtB,EAA8BJ,SAAS,GAAvC,EAjClB;;;EAoCR4wC,oBAAgB,KApCR;EAqCRC,mBAAe,GArCP;EAsCRC,gBAAY,EAtCJ;EAuCRC,mBAAe,IAvCP;;;EA0CRC,oBAAgB;EA1CR,IAF4D;;EA+CrE/lC,eAAY,oBAAU5d,OAAV,EAAmB;EAC9BmM,MAAE0R,IAAF,CAAOlE,UAAP,CAAkB,IAAlB,EAAwB3Z,OAAxB;EACA,QAAI,CAAC,KAAKA,OAAL,CAAauiD,kBAAlB,EAAsC;EACrC,UAAKviD,OAAL,CAAauiD,kBAAb,GAAkC,KAAKqB,0BAAvC;EACA;;EAED,SAAKC,aAAL,GAAqB13C,EAAE23C,YAAF,EAArB;EACA,SAAKD,aAAL,CAAmBE,cAAnB,CAAkC,IAAlC;;EAEA,SAAKC,cAAL,GAAsB73C,EAAE23C,YAAF,EAAtB;EACA,SAAKE,cAAL,CAAoBD,cAApB,CAAmC,IAAnC;;EAEA,SAAKE,gBAAL,GAAwB,CAAxB;EACA,SAAKC,gBAAL,GAAwB,EAAxB;EACA,SAAKC,cAAL,GAAsB,EAAtB,CAd8B;;EAgB9B,SAAKC,mBAAL,GAA2B,IAA3B;;EAEA,SAAKC,MAAL,GAAc,EAAd;;EAEA,SAAKC,yBAAL,GAAiC;EAChC,kBAAa,KAAKC,qBADc;EAEhC,aAAQ,KAAKC,iBAFmB;EAGhC,gBAAW,KAAKC;EAHgB,KAAjC;;;EAOA,QAAIxB,UAAU92C,EAAEwM,OAAF,CAAU+rC,UAAV,IAAwB,KAAK1kD,OAAL,CAAaijD,OAAnD;EACA92C,MAAEwR,MAAF,CAAS,IAAT,EAAeslC,UAAU,KAAK0B,cAAf,GAAgC,KAAKC,YAApD;;EAEA,SAAKC,cAAL,GAAsB5B,UAAU92C,EAAE24C,aAAZ,GAA4B34C,EAAE44C,wBAApD;EACA,IA9EoE;;EAgFrE5qC,aAAU,kBAAU3L,KAAV,EAAiB;;EAE1B,QAAIA,iBAAiBrC,EAAE64C,UAAvB,EAAmC;EAClC,YAAO,KAAKC,SAAL,CAAe,CAACz2C,KAAD,CAAf,CAAP;EACA;;;EAGD,QAAI,CAACA,MAAM02C,SAAX,EAAsB;EACrB,UAAKlB,cAAL,CAAoB7pC,QAApB,CAA6B3L,KAA7B;EACA,UAAK22C,IAAL,CAAU,UAAV,EAAsB,EAAE32C,OAAOA,KAAT,EAAtB;EACA,YAAO,IAAP;EACA;;EAED,QAAI,CAAC,KAAK42C,IAAV,EAAgB;EACf,UAAKlB,gBAAL,CAAsB7nD,IAAtB,CAA2BmS,KAA3B;EACA,UAAK22C,IAAL,CAAU,UAAV,EAAsB,EAAE32C,OAAOA,KAAT,EAAtB;EACA,YAAO,IAAP;EACA;;EAED,QAAI,KAAK62C,QAAL,CAAc72C,KAAd,CAAJ,EAA0B;EACzB,YAAO,IAAP;EACA;;;;EAKD,QAAI,KAAK82C,WAAT,EAAsB;EACrB,UAAKA,WAAL;EACA;;EAED,SAAKC,SAAL,CAAe/2C,KAAf,EAAsB,KAAKg3C,QAA3B;EACA,SAAKL,IAAL,CAAU,UAAV,EAAsB,EAAE32C,OAAOA,KAAT,EAAtB;;;EAGA,SAAKi3C,gBAAL,CAAsBC,kBAAtB;;EAEA,SAAKC,qBAAL;;;EAGA,QAAIC,eAAep3C,KAAnB;EAAA,QACIq3C,cAAc,KAAKC,KADvB;EAEA,QAAIt3C,MAAMu3C,QAAV,EAAoB;EACnB,YAAOH,aAAaG,QAAb,CAAsBD,KAAtB,IAA+BD,WAAtC,EAAmD;EAClDD,qBAAeA,aAAaG,QAA5B;EACA;EACD;;EAED,QAAI,KAAK3B,mBAAL,CAAyB4B,QAAzB,CAAkCJ,aAAaV,SAAb,EAAlC,CAAJ,EAAiE;EAChE,SAAI,KAAKllD,OAAL,CAAakjD,oBAAjB,EAAuC;EACtC,WAAK+C,kBAAL,CAAwBz3C,KAAxB,EAA+Bo3C,YAA/B;EACA,MAFD,MAEO;EACN,WAAKM,6BAAL,CAAmC13C,KAAnC,EAA0Co3C,YAA1C;EACA;EACD;EACD,WAAO,IAAP;EACA,IAvIoE;;EAyIrEO,gBAAa,qBAAU33C,KAAV,EAAiB;;EAE7B,QAAIA,iBAAiBrC,EAAE64C,UAAvB,EAAmC;EAClC,YAAO,KAAKoB,YAAL,CAAkB,CAAC53C,KAAD,CAAlB,CAAP;EACA;;;EAGD,QAAI,CAACA,MAAM02C,SAAX,EAAsB;EACrB,UAAKlB,cAAL,CAAoBmC,WAApB,CAAgC33C,KAAhC;EACA,UAAK22C,IAAL,CAAU,aAAV,EAAyB,EAAE32C,OAAOA,KAAT,EAAzB;EACA,YAAO,IAAP;EACA;;EAED,QAAI,CAAC,KAAK42C,IAAV,EAAgB;EACf,SAAI,CAAC,KAAKiB,YAAL,CAAkB,KAAKnC,gBAAvB,EAAyC11C,KAAzC,CAAD,IAAoD,KAAK62C,QAAL,CAAc72C,KAAd,CAAxD,EAA8E;EAC7E,WAAK21C,cAAL,CAAoB9nD,IAApB,CAAyB,EAAEmS,OAAOA,KAAT,EAAgBgJ,QAAQhJ,MAAM83C,OAA9B,EAAzB;EACA;EACD,UAAKnB,IAAL,CAAU,aAAV,EAAyB,EAAE32C,OAAOA,KAAT,EAAzB;EACA,YAAO,IAAP;EACA;;EAED,QAAI,CAACA,MAAMu3C,QAAX,EAAqB;EACpB,YAAO,IAAP;EACA;;EAED,QAAI,KAAKT,WAAT,EAAsB;EACrB,UAAKA,WAAL;EACA,UAAKiB,gBAAL,CAAsB/3C,KAAtB;EACA;;;EAGD,SAAKg4C,YAAL,CAAkBh4C,KAAlB,EAAyB,IAAzB;EACA,SAAK22C,IAAL,CAAU,aAAV,EAAyB,EAAE32C,OAAOA,KAAT,EAAzB;;;EAGA,SAAKi3C,gBAAL,CAAsBC,kBAAtB;;EAEA,SAAKC,qBAAL;;EAEAn3C,UAAM4M,GAAN,CAAU,KAAKkpC,yBAAf,EAA0C,IAA1C;;EAEA,QAAI,KAAKT,aAAL,CAAmBwB,QAAnB,CAA4B72C,KAA5B,CAAJ,EAAwC;EACvC,UAAKq1C,aAAL,CAAmBsC,WAAnB,CAA+B33C,KAA/B;EACA,SAAIA,MAAMi4C,WAAV,EAAuB;EACtBj4C,YAAMi4C,WAAN;EACA;EACD;;EAED,WAAO,IAAP;EACA,IA1LoE;;;EA6LrExB,cAAW,mBAAUyB,WAAV,EAAuBC,iBAAvB,EAA0C;EACpD,QAAI,CAACx6C,EAAE0R,IAAF,CAAOniB,OAAP,CAAegrD,WAAf,CAAL,EAAkC;EACjC,YAAO,KAAKvsC,QAAL,CAAcusC,WAAd,CAAP;EACA;;EAED,QAAIE,KAAK,KAAK/C,aAAd;EAAA,QACIgD,MAAM,KAAK7C,cADf;EAAA,QAEI8C,UAAU,KAAK9mD,OAAL,CAAaujD,cAF3B;EAAA,QAGIC,gBAAgB,KAAKxjD,OAAL,CAAawjD,aAHjC;EAAA,QAIIE,gBAAgB,KAAK1jD,OAAL,CAAa0jD,aAJjC;EAAA,QAKI7tC,IAAI6wC,YAAY3oD,MALpB;EAAA,QAMI6Z,SAAS,CANb;EAAA,QAOImvC,gBAAgB,IAPpB;EAAA,QAQInrB,CARJ;;EAUA,QAAI,KAAKwpB,IAAT,EAAe;EACd,SAAIp/C,UAAW,IAAIghD,IAAJ,EAAD,CAAaC,OAAb,EAAd;EACA,SAAIC,UAAU/6C,EAAE4S,IAAF,CAAO,YAAY;EAChC,UAAInN,QAAS,IAAIo1C,IAAJ,EAAD,CAAaC,OAAb,EAAZ;;;EAGA,UAAI,KAAK7B,IAAL,IAAa,KAAKE,WAAtB,EAAmC;EAClC,YAAKA,WAAL;EACA;;EAED,aAAO1tC,SAAS/B,CAAhB,EAAmB+B,QAAnB,EAA6B;EAC5B,WAAIkvC,WAAWlvC,SAAS,GAAT,KAAiB,CAAhC,EAAmC;;EAElC,YAAIuvC,UAAW,IAAIH,IAAJ,EAAD,CAAaC,OAAb,KAAyBr1C,KAAvC;EACA,YAAIu1C,UAAU3D,aAAd,EAA6B;EAC5B,eAD4B;EAE5B;EACD;;EAED5nB,WAAI8qB,YAAY9uC,MAAZ,CAAJ;;;;;;;;EAQA,WAAIgkB,aAAazvB,EAAE64C,UAAnB,EAA+B;EAC9B,YAAI+B,aAAJ,EAAmB;EAClBL,uBAAcA,YAAYtoD,KAAZ,EAAd;EACA2oD,yBAAgB,KAAhB;EACA;EACD,aAAKK,sBAAL,CAA4BxrB,CAA5B,EAA+B8qB,WAA/B;EACA7wC,YAAI6wC,YAAY3oD,MAAhB;EACA;EACA;;;EAGD,WAAI,CAAC69B,EAAEspB,SAAP,EAAkB;EACjB2B,YAAI1sC,QAAJ,CAAayhB,CAAb;EACA,YAAI,CAAC+qB,iBAAL,EAAwB;EACvB,cAAKxB,IAAL,CAAU,UAAV,EAAsB,EAAE32C,OAAOotB,CAAT,EAAtB;EACA;EACD;EACA;;EAED,WAAI,KAAKypB,QAAL,CAAczpB,CAAd,CAAJ,EAAsB;EACrB;EACA;;EAED,YAAK2pB,SAAL,CAAe3pB,CAAf,EAAkB,KAAK4pB,QAAvB;EACA,WAAI,CAACmB,iBAAL,EAAwB;EACvB,aAAKxB,IAAL,CAAU,UAAV,EAAsB,EAAE32C,OAAOotB,CAAT,EAAtB;EACA;;;EAGD,WAAIA,EAAEmqB,QAAN,EAAgB;EACf,YAAInqB,EAAEmqB,QAAF,CAAWsB,aAAX,OAA+B,CAAnC,EAAsC;EACrC,aAAInvC,UAAU0jB,EAAEmqB,QAAF,CAAWuB,kBAAX,EAAd;EAAA,aACIC,cAAcrvC,QAAQ,CAAR,MAAe0jB,CAAf,GAAmB1jB,QAAQ,CAAR,CAAnB,GAAgCA,QAAQ,CAAR,CADlD;EAEA0uC,YAAGT,WAAH,CAAeoB,WAAf;EACA;EACD;EACD;;EAED,UAAI7D,aAAJ,EAAmB;;EAElBA,qBAAc9rC,MAAd,EAAsB/B,CAAtB,EAA0B,IAAImxC,IAAJ,EAAD,CAAaC,OAAb,KAAyBjhD,OAAlD;EACA;;;EAGD,UAAI4R,WAAW/B,CAAf,EAAkB;;;EAGjB,YAAK4vC,gBAAL,CAAsBC,kBAAtB;;EAEA,YAAKC,qBAAL;;EAEA,YAAKF,gBAAL,CAAsB+B,4BAAtB,CAAmD,IAAnD,EAAyD,KAAK1B,KAA9D,EAAqE,KAAK1B,mBAA1E;EACA,OARD,MAQO;EACNn9C,kBAAWigD,OAAX,EAAoB,KAAKlnD,OAAL,CAAayjD,UAAjC;EACA;EACD,MAhFa,EAgFX,IAhFW,CAAd;;EAkFAyD;EACA,KArFD,MAqFO;EACN,SAAIO,kBAAkB,KAAKvD,gBAA3B;;EAEA,YAAOtsC,SAAS/B,CAAhB,EAAmB+B,QAAnB,EAA6B;EAC5BgkB,UAAI8qB,YAAY9uC,MAAZ,CAAJ;;;EAGA,UAAIgkB,aAAazvB,EAAE64C,UAAnB,EAA+B;EAC9B,WAAI+B,aAAJ,EAAmB;EAClBL,sBAAcA,YAAYtoD,KAAZ,EAAd;EACA2oD,wBAAgB,KAAhB;EACA;EACD,YAAKK,sBAAL,CAA4BxrB,CAA5B,EAA+B8qB,WAA/B;EACA7wC,WAAI6wC,YAAY3oD,MAAhB;EACA;EACA;;;EAGD,UAAI,CAAC69B,EAAEspB,SAAP,EAAkB;EACjB2B,WAAI1sC,QAAJ,CAAayhB,CAAb;EACA;EACA;;EAED,UAAI,KAAKypB,QAAL,CAAczpB,CAAd,CAAJ,EAAsB;EACrB;EACA;;EAED6rB,sBAAgBprD,IAAhB,CAAqBu/B,CAArB;EACA;EACD;EACD,WAAO,IAAP;EACA,IAhUoE;;;EAmUrEwqB,iBAAc,sBAAUM,WAAV,EAAuB;EACpC,QAAI1oD,CAAJ;EAAA,QAAO49B,CAAP;EAAA,QACI/lB,IAAI6wC,YAAY3oD,MADpB;EAAA,QAEI6oD,KAAK,KAAK/C,aAFd;EAAA,QAGIgD,MAAM,KAAK7C,cAHf;EAAA,QAII+C,gBAAgB,IAJpB;;EAMA,QAAI,CAAC,KAAK3B,IAAV,EAAgB;EACf,UAAKpnD,IAAI,CAAT,EAAYA,IAAI6X,CAAhB,EAAmB7X,GAAnB,EAAwB;EACvB49B,UAAI8qB,YAAY1oD,CAAZ,CAAJ;;;EAGA,UAAI49B,aAAazvB,EAAE64C,UAAnB,EAA+B;EAC9B,WAAI+B,aAAJ,EAAmB;EAClBL,sBAAcA,YAAYtoD,KAAZ,EAAd;EACA2oD,wBAAgB,KAAhB;EACA;EACD,YAAKK,sBAAL,CAA4BxrB,CAA5B,EAA+B8qB,WAA/B;EACA7wC,WAAI6wC,YAAY3oD,MAAhB;EACA;EACA;;EAED,WAAKsoD,YAAL,CAAkB,KAAKnC,gBAAvB,EAAyCtoB,CAAzC;EACAirB,UAAIV,WAAJ,CAAgBvqB,CAAhB;EACA,UAAI,KAAKypB,QAAL,CAAczpB,CAAd,CAAJ,EAAsB;EACrB,YAAKuoB,cAAL,CAAoB9nD,IAApB,CAAyB,EAAEmS,OAAOotB,CAAT,EAAYpkB,QAAQokB,EAAE0qB,OAAtB,EAAzB;EACA;EACD,WAAKnB,IAAL,CAAU,aAAV,EAAyB,EAAE32C,OAAOotB,CAAT,EAAzB;EACA;EACD,YAAO,IAAP;EACA;;EAED,QAAI,KAAK0pB,WAAT,EAAsB;EACrB,UAAKA,WAAL;;;EAGA,SAAIoC,eAAehB,YAAYtoD,KAAZ,EAAnB;EAAA,SACIupD,KAAK9xC,CADT;EAEA,UAAK7X,IAAI,CAAT,EAAYA,IAAI2pD,EAAhB,EAAoB3pD,GAApB,EAAyB;EACxB49B,UAAI8rB,aAAa1pD,CAAb,CAAJ;;;EAGA,UAAI49B,aAAazvB,EAAE64C,UAAnB,EAA+B;EAC9B,YAAKoC,sBAAL,CAA4BxrB,CAA5B,EAA+B8rB,YAA/B;EACAC,YAAKD,aAAa3pD,MAAlB;EACA;EACA;;EAED,WAAKwoD,gBAAL,CAAsB3qB,CAAtB;EACA;EACD;;EAED,SAAK59B,IAAI,CAAT,EAAYA,IAAI6X,CAAhB,EAAmB7X,GAAnB,EAAwB;EACvB49B,SAAI8qB,YAAY1oD,CAAZ,CAAJ;;;EAGA,SAAI49B,aAAazvB,EAAE64C,UAAnB,EAA+B;EAC9B,UAAI+B,aAAJ,EAAmB;EAClBL,qBAAcA,YAAYtoD,KAAZ,EAAd;EACA2oD,uBAAgB,KAAhB;EACA;EACD,WAAKK,sBAAL,CAA4BxrB,CAA5B,EAA+B8qB,WAA/B;EACA7wC,UAAI6wC,YAAY3oD,MAAhB;EACA;EACA;;EAED,SAAI,CAAC69B,EAAEmqB,QAAP,EAAiB;EAChBc,UAAIV,WAAJ,CAAgBvqB,CAAhB;EACA,WAAKupB,IAAL,CAAU,aAAV,EAAyB,EAAE32C,OAAOotB,CAAT,EAAzB;EACA;EACA;;EAED,UAAK4qB,YAAL,CAAkB5qB,CAAlB,EAAqB,IAArB,EAA2B,IAA3B;EACA,UAAKupB,IAAL,CAAU,aAAV,EAAyB,EAAE32C,OAAOotB,CAAT,EAAzB;;EAEA,SAAIgrB,GAAGvB,QAAH,CAAYzpB,CAAZ,CAAJ,EAAoB;EACnBgrB,SAAGT,WAAH,CAAevqB,CAAf;EACA,UAAIA,EAAE6qB,WAAN,EAAmB;EAClB7qB,SAAE6qB,WAAF;EACA;EACD;EACD;;;EAGD,SAAKhB,gBAAL,CAAsBC,kBAAtB;;EAEA,SAAKC,qBAAL;;;EAGA,SAAKF,gBAAL,CAAsB+B,4BAAtB,CAAmD,IAAnD,EAAyD,KAAK1B,KAA9D,EAAqE,KAAK1B,mBAA1E;;EAEA,WAAO,IAAP;EACA,IA/ZoE;;;EAkarEwD,gBAAa,uBAAY;;;;EAIxB,QAAI,CAAC,KAAKxC,IAAV,EAAgB;EACf,UAAKlB,gBAAL,GAAwB,EAAxB;EACA,UAAKC,cAAL,GAAsB,EAAtB;EACA,YAAO,KAAK0D,aAAZ;EACA,YAAO,KAAKC,gBAAZ;EACA;;EAED,QAAI,KAAKC,sBAAT,EAAiC;EAChC,UAAKA,sBAAL;EACA;;;EAGD,SAAKlE,aAAL,CAAmB+D,WAAnB;EACA,SAAK5D,cAAL,CAAoB4D,WAApB;;EAEA,SAAKI,SAAL,CAAe,UAAUr7C,MAAV,EAAkB;EAChCA,YAAOyO,GAAP,CAAW,KAAKkpC,yBAAhB,EAA2C,IAA3C;EACA,YAAO33C,OAAOo5C,QAAd;EACA,KAHD,EAGG,IAHH;;EAKA,QAAI,KAAKX,IAAT,EAAe;;EAEd,UAAK6C,wBAAL;EACA;;EAED,WAAO,IAAP;EACA,IAhcoE;;;EAmcrEx6C,cAAW,qBAAY;EACtB,QAAIy6C,SAAS,IAAI/7C,EAAEg8C,YAAN,EAAb;;EAEA,QAAI,KAAK1C,gBAAT,EAA2B;EAC1ByC,YAAOvqC,MAAP,CAAc,KAAK8nC,gBAAL,CAAsB2C,OAApC;EACA;;EAED,SAAK,IAAIpqD,IAAI,KAAKkmD,gBAAL,CAAsBnmD,MAAtB,GAA+B,CAA5C,EAA+CC,KAAK,CAApD,EAAuDA,GAAvD,EAA4D;EAC3DkqD,YAAOvqC,MAAP,CAAc,KAAKumC,gBAAL,CAAsBlmD,CAAtB,EAAyBknD,SAAzB,EAAd;EACA;;EAEDgD,WAAOvqC,MAAP,CAAc,KAAKqmC,cAAL,CAAoBv2C,SAApB,EAAd;;EAEA,WAAOy6C,MAAP;EACA,IAjdoE;;;EAodrEF,cAAW,mBAAUroD,MAAV,EAAkB0oD,OAAlB,EAA2B;EACrC,QAAInwC,UAAU,KAAKgsC,gBAAL,CAAsB9lD,KAAtB,EAAd;EAAA,QACCkqD,gBAAgB,KAAKnE,cADtB;EAAA,QAECoE,iBAFD;EAAA,QAEoBvqD,CAFpB;EAAA,QAEuBwJ,CAFvB;;EAIA,QAAI,KAAKi+C,gBAAT,EAA2B;EAC1B,UAAKA,gBAAL,CAAsB6B,kBAAtB,CAAyCpvC,OAAzC;EACA;;EAED,SAAKla,IAAIka,QAAQna,MAAR,GAAiB,CAA1B,EAA6BC,KAAK,CAAlC,EAAqCA,GAArC,EAA0C;EACzCuqD,yBAAoB,IAApB;;EAEA,UAAK/gD,IAAI8gD,cAAcvqD,MAAd,GAAuB,CAAhC,EAAmCyJ,KAAK,CAAxC,EAA2CA,GAA3C,EAAgD;EAC/C,UAAI8gD,cAAc9gD,CAAd,EAAiBgH,KAAjB,KAA2B0J,QAAQla,CAAR,CAA/B,EAA2C;EAC1CuqD,2BAAoB,KAApB;EACA;EACA;EACD;;EAED,SAAIA,iBAAJ,EAAuB;EACtB5oD,aAAOvF,IAAP,CAAYiuD,OAAZ,EAAqBnwC,QAAQla,CAAR,CAArB;EACA;EACD;;EAED,SAAKgmD,cAAL,CAAoBgE,SAApB,CAA8BroD,MAA9B,EAAsC0oD,OAAtC;EACA,IA7eoE;;;EAgfrEG,cAAW,qBAAY;EACtB,QAAIr/C,SAAS,EAAb;EACA,SAAK6+C,SAAL,CAAe,UAAUnyC,CAAV,EAAa;EAC3B1M,YAAO9M,IAAP,CAAYwZ,CAAZ;EACA,KAFD;EAGA,WAAO1M,MAAP;EACA,IAtfoE;;;EAyfrEs/C,aAAU,kBAAUp1C,EAAV,EAAc;EACvB,QAAIpW,SAAS,IAAb;;EAEAoW,SAAK0R,SAAS1R,EAAT,EAAa,EAAb,CAAL;;EAEA,SAAK20C,SAAL,CAAe,UAAUnyC,CAAV,EAAa;EAC3B,SAAI1J,EAAEu8C,KAAF,CAAQ7yC,CAAR,MAAexC,EAAnB,EAAuB;EACtBpW,eAAS4Y,CAAT;EACA;EACD,KAJD;;EAMA,WAAO5Y,MAAP;EACA,IArgBoE;;;EAwgBrEooD,aAAU,kBAAU72C,KAAV,EAAiB;EAC1B,QAAI,CAACA,KAAL,EAAY;EACX,YAAO,KAAP;EACA;;EAED,QAAIxQ,CAAJ;EAAA,QAAO2qD,UAAU,KAAKzE,gBAAtB;;EAEA,SAAKlmD,IAAI2qD,QAAQ5qD,MAAR,GAAiB,CAA1B,EAA6BC,KAAK,CAAlC,EAAqCA,GAArC,EAA0C;EACzC,SAAI2qD,QAAQ3qD,CAAR,MAAewQ,KAAnB,EAA0B;EACzB,aAAO,IAAP;EACA;EACD;;EAEDm6C,cAAU,KAAKxE,cAAf;EACA,SAAKnmD,IAAI2qD,QAAQ5qD,MAAR,GAAiB,CAA1B,EAA6BC,KAAK,CAAlC,EAAqCA,GAArC,EAA0C;EACzC,SAAI2qD,QAAQ3qD,CAAR,EAAWwQ,KAAX,KAAqBA,KAAzB,EAAgC;EAC/B,aAAO,KAAP;EACA;EACD;;EAED,WAAO,CAAC,EAAEA,MAAMu3C,QAAN,IAAkBv3C,MAAMu3C,QAAN,CAAe6C,MAAf,KAA0B,IAA9C,CAAD,IAAwD,KAAK5E,cAAL,CAAoBqB,QAApB,CAA6B72C,KAA7B,CAA/D;EACA,IA7hBoE;;;EAgiBrEq6C,oBAAiB,yBAAUr6C,KAAV,EAAiBtS,QAAjB,EAA2B;;EAE3C,QAAIZ,MAAM,KAAK8pD,IAAf;;EAEA,QAAI,OAAOlpD,QAAP,KAAoB,UAAxB,EAAoC;EACnCA,gBAAW,oBAAY,EAAvB;EACA;;EAED,QAAI4sD,aAAa,SAAbA,UAAa,GAAY;;;EAG5B,SAAI,CAACxtD,IAAI+pD,QAAJ,CAAa72C,KAAb,KAAuBlT,IAAI+pD,QAAJ,CAAa72C,MAAMu3C,QAAnB,CAAxB,KAAyD,CAAC,KAAK9B,gBAAnE,EAAqF;EACpF,WAAKmB,IAAL,CAAUhqC,GAAV,CAAc,SAAd,EAAyB0tC,UAAzB,EAAqC,IAArC;EACA,WAAK1tC,GAAL,CAAS,cAAT,EAAyB0tC,UAAzB,EAAqC,IAArC;;EAEA,UAAIxtD,IAAI+pD,QAAJ,CAAa72C,KAAb,CAAJ,EAAyB;EACxBtS;EACA,OAFD,MAEO,IAAIsS,MAAMu3C,QAAN,CAAegD,KAAnB,EAA0B;EAChC,YAAKC,IAAL,CAAU,YAAV,EAAwB9sD,QAAxB,EAAkC,IAAlC;EACAsS,aAAMu3C,QAAN,CAAekD,QAAf;EACA;EACD;EACD,KAdD;;EAgBA,QAAIz6C,MAAMu6C,KAAN,IAAe,KAAK3D,IAAL,CAAU33C,SAAV,GAAsBu4C,QAAtB,CAA+Bx3C,MAAM02C,SAAN,EAA/B,CAAnB,EAAsE;;EAErEhpD;EACA,KAHD,MAGO,IAAIsS,MAAMu3C,QAAN,CAAeD,KAAf,GAAuBxwC,KAAKqe,KAAL,CAAW,KAAKyxB,IAAL,CAAUU,KAArB,CAA3B,EAAwD;;EAE9D,UAAKV,IAAL,CAAUvzC,EAAV,CAAa,SAAb,EAAwBi3C,UAAxB,EAAoC,IAApC;EACA,UAAK1D,IAAL,CAAUhnC,KAAV,CAAgB5P,MAAM02C,SAAN,EAAhB;EACA,KAJM,MAIA;EACN,UAAKE,IAAL,CAAUvzC,EAAV,CAAa,SAAb,EAAwBi3C,UAAxB,EAAoC,IAApC;EACA,UAAKj3C,EAAL,CAAQ,cAAR,EAAwBi3C,UAAxB,EAAoC,IAApC;EACAt6C,WAAMu3C,QAAN,CAAemD,YAAf;EACA;EACD,IApkBoE;;;EAukBrE/qC,UAAO,eAAU7iB,GAAV,EAAe;EACrB,SAAK8pD,IAAL,GAAY9pD,GAAZ;EACA,QAAI0C,CAAJ,EAAO6X,CAAP,EAAUrH,KAAV;;EAEA,QAAI,CAACzK,SAAS,KAAKqhD,IAAL,CAAU+D,UAAV,EAAT,CAAL,EAAuC;EACtC,WAAM,8BAAN;EACA;;EAED,SAAKtF,aAAL,CAAmBpsC,KAAnB,CAAyBnc,GAAzB;EACA,SAAK0oD,cAAL,CAAoBvsC,KAApB,CAA0Bnc,GAA1B;;EAEA,QAAI,CAAC,KAAKusD,aAAV,EAAyB;EACxB,UAAKI,wBAAL;EACA;;EAED,SAAKmB,OAAL,GAAe9tD,IAAI0E,OAAJ,CAAYkK,GAAZ,CAAgBm/C,UAAhB,CAA2BC,YAA1C;;;EAGA,SAAKtrD,IAAI,CAAJ,EAAO6X,IAAI,KAAKsuC,cAAL,CAAoBpmD,MAApC,EAA4CC,IAAI6X,CAAhD,EAAmD7X,GAAnD,EAAwD;EACvDwQ,aAAQ,KAAK21C,cAAL,CAAoBnmD,CAApB,CAAR;EACAwQ,WAAM+6C,SAAN,GAAkB/6C,MAAMA,KAAN,CAAY83C,OAA9B;EACA93C,WAAMA,KAAN,CAAY83C,OAAZ,GAAsB93C,MAAMgJ,MAA5B;EACA;;EAED,SAAKxZ,IAAI,CAAJ,EAAO6X,IAAI,KAAKsuC,cAAL,CAAoBpmD,MAApC,EAA4CC,IAAI6X,CAAhD,EAAmD7X,GAAnD,EAAwD;EACvDwQ,aAAQ,KAAK21C,cAAL,CAAoBnmD,CAApB,CAAR;EACA,UAAKwoD,YAAL,CAAkBh4C,MAAMA,KAAxB,EAA+B,IAA/B;EACAA,WAAMA,KAAN,CAAY83C,OAAZ,GAAsB93C,MAAM+6C,SAA5B;EACA;EACD,SAAKpF,cAAL,GAAsB,EAAtB;;;EAGA,SAAK2B,KAAL,GAAaxwC,KAAKqe,KAAL,CAAW,KAAKyxB,IAAL,CAAUU,KAArB,CAAb;EACA,SAAK1B,mBAAL,GAA2B,KAAKoF,yBAAL,EAA3B;;EAEA,SAAKpE,IAAL,CAAUvzC,EAAV,CAAa,SAAb,EAAwB,KAAK43C,QAA7B,EAAuC,IAAvC;EACA,SAAKrE,IAAL,CAAUvzC,EAAV,CAAa,SAAb,EAAwB,KAAK63C,QAA7B,EAAuC,IAAvC;;EAEA,QAAI,KAAKC,gBAAT,EAA2B;;EAC1B,UAAKA,gBAAL;EACA;;EAED,SAAKC,WAAL;;;EAGA/zC,QAAI,KAAKquC,gBAAT;EACA,SAAKA,gBAAL,GAAwB,EAAxB;EACA,SAAKe,SAAL,CAAepvC,CAAf,EAAkB,IAAlB;EACA,IAvnBoE;;;EA0nBrE6I,aAAU,kBAAUpjB,GAAV,EAAe;EACxBA,QAAI8f,GAAJ,CAAQ,SAAR,EAAmB,KAAKquC,QAAxB,EAAkC,IAAlC;EACAnuD,QAAI8f,GAAJ,CAAQ,SAAR,EAAmB,KAAKsuC,QAAxB,EAAkC,IAAlC;;EAEA,SAAKG,aAAL;;;EAGA,SAAKzE,IAAL,CAAU0E,QAAV,CAAmBp4C,SAAnB,GAA+B,KAAK0zC,IAAL,CAAU0E,QAAV,CAAmBp4C,SAAnB,CAA6BhR,OAA7B,CAAqC,uBAArC,EAA8D,EAA9D,CAA/B;;EAEA,QAAI,KAAKqpD,mBAAT,EAA8B;;EAC7B,UAAKA,mBAAL;EACA;;EAED,WAAO,KAAKX,OAAZ;;;EAGA,SAAKY,aAAL;EACA,SAAKnG,aAAL,CAAmB57C,MAAnB;EACA,SAAK+7C,cAAL,CAAoB/7C,MAApB;;EAEA,SAAK47C,aAAL,CAAmB+D,WAAnB;;EAEA,SAAKxC,IAAL,GAAY,IAAZ;EACA,IAjpBoE;;EAmpBrE6E,qBAAkB,0BAAUt9C,MAAV,EAAkB;EACnC,QAAIu9C,UAAUv9C,MAAd;EACA,WAAOu9C,WAAW,CAACA,QAAQnB,KAA3B,EAAkC;EACjCmB,eAAUA,QAAQnE,QAAlB;EACA;EACD,WAAOmE,WAAW,IAAlB;EACA,IAzpBoE;;;EA4pBrE7D,iBAAc,sBAAUsC,OAAV,EAAmBjvD,GAAnB,EAAwB;EACrC,SAAK,IAAIsE,IAAI2qD,QAAQ5qD,MAAR,GAAiB,CAA9B,EAAiCC,KAAK,CAAtC,EAAyCA,GAAzC,EAA8C;EAC7C,SAAI2qD,QAAQ3qD,CAAR,MAAetE,GAAnB,EAAwB;EACvBivD,cAAQttC,MAAR,CAAerd,CAAf,EAAkB,CAAlB;EACA,aAAO,IAAP;EACA;EACD;EACD,IAnqBoE;;;;;;;;EA2qBrEmsD,+BAA4B,oCAAUx9C,MAAV,EAAkB4pB,CAAlB,EAAqB;EAChD,QAAIj7B,MAAM,KAAK8pD,IAAf;EAAA,QACIgF,kBAAkB,KAAKtC,gBAD3B;EAAA,QAEChzC,UAAUQ,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAFX;;EAIA,WAAO9zB,KAAKzhB,OAAZ,EAAqByhB,GAArB,EAA0B;EACzB,SAAI,CAAC6zB,gBAAgB7zB,CAAhB,EAAmB+zB,YAAnB,CAAgC39C,MAAhC,EAAwCrR,IAAIivD,OAAJ,CAAY59C,OAAOu4C,SAAP,EAAZ,EAAgC3uB,CAAhC,CAAxC,CAAL,EAAkF;EACjF;EACA;EACD;EACD,IArrBoE;;EAurBrEguB,0BAAuB,+BAAUlrD,CAAV,EAAa;EACnCA,MAAEmf,MAAF,CAASgyC,WAAT,GAAuBnxD,EAAEmf,MAAF,CAAS8tC,OAAhC;EACA,IAzrBoE;;EA2rBrE9B,sBAAmB,2BAAUnrD,CAAV,EAAa;EAC/B,QAAI,CAAC,KAAKoxD,WAAN,IAAqB,CAACpxD,EAAEmf,MAAF,CAASgyC,WAAnC,EAAgD;EAC/C,SAAIE,cAAcrxD,EAAEmf,MAAF,CAASmyC,MAAT,IAAmBtxD,EAAEmf,MAAF,CAASmyC,MAAT,CAAgBC,MAAhB,EAArC;;EAEA,UAAKC,UAAL,CAAgBxxD,EAAEmf,MAAlB,EAA0Bnf,EAAEyxD,SAA5B,EAAuCzxD,EAAEme,MAAzC;;EAEA,SAAIkzC,WAAJ,EAAiB;EAChBrxD,QAAEmf,MAAF,CAAST,SAAT;EACA;EACD;EACD,IArsBoE;;EAusBrE8yC,eAAY,oBAAUr8C,KAAV,EAAiBguB,IAAjB,EAAuBC,EAAvB,EAA2B;EACtCjuB,UAAM83C,OAAN,GAAgB9pB,IAAhB;EACA,SAAK2pB,WAAL,CAAiB33C,KAAjB;;EAEAA,UAAM83C,OAAN,GAAgB7pB,EAAhB;EACA,SAAKtiB,QAAL,CAAc3L,KAAd;EACA,IA7sBoE;;EA+sBrEi2C,wBAAqB,6BAAUprD,CAAV,EAAa;EACjC,QAAI0xD,YAAY1xD,EAAEmf,MAAF,CAASgyC,WAAzB;EACA,WAAOnxD,EAAEmf,MAAF,CAASgyC,WAAhB;EACA,QAAIO,SAAJ,EAAe;EACd,UAAKF,UAAL,CAAgBxxD,EAAEmf,MAAlB,EAA0BuyC,SAA1B,EAAqC1xD,EAAEmf,MAAF,CAAS8tC,OAA9C;EACA;EACD,IArtBoE;;;;EA0tBrEE,iBAAc,sBAAU75C,MAAV,EAAkBq+C,sBAAlB,EAA0CC,aAA1C,EAAyD;EACtE,QAAIC,eAAe,KAAKrD,aAAxB;EAAA,QACCuC,kBAAkB,KAAKtC,gBADxB;EAAA,QAEClB,KAAK,KAAK/C,aAFX;EAAA,QAGCvoD,MAAM,KAAK8pD,IAHZ;EAAA,QAICtwC,UAAUQ,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAJX;;;EAOA,QAAIW,sBAAJ,EAA4B;EAC3B,UAAKb,0BAAL,CAAgCx9C,MAAhC,EAAwC,KAAK64C,QAA7C;EACA;;;EAGD,QAAI2F,UAAUx+C,OAAOo5C,QAArB;EAAA,QACC7tC,UAAUizC,QAAQC,QADnB;EAAA,QAEC7D,WAFD;;;EAKA,SAAKlB,YAAL,CAAkBnuC,OAAlB,EAA2BvL,MAA3B;;EAEA,WAAOw+C,OAAP,EAAgB;EACfA,aAAQE,WAAR;EACAF,aAAQG,iBAAR,GAA4B,IAA5B;;EAEA,SAAIH,QAAQrF,KAAR,GAAgBhxC,OAApB,EAA6B;;EAE5B;EACA,MAHD,MAGO,IAAIk2C,0BAA0BG,QAAQE,WAAR,IAAuB,CAArD,EAAwD;;;EAE9D9D,oBAAc4D,QAAQC,QAAR,CAAiB,CAAjB,MAAwBz+C,MAAxB,GAAiCw+C,QAAQC,QAAR,CAAiB,CAAjB,CAAjC,GAAuDD,QAAQC,QAAR,CAAiB,CAAjB,CAArE;;;EAGAF,mBAAaC,QAAQrF,KAArB,EAA4BwE,YAA5B,CAAyCa,OAAzC,EAAkD7vD,IAAIivD,OAAJ,CAAYY,QAAQI,QAApB,EAA8BJ,QAAQrF,KAAtC,CAAlD;EACAsE,sBAAgBe,QAAQrF,KAAxB,EAA+B0F,SAA/B,CAAyCjE,WAAzC,EAAsDjsD,IAAIivD,OAAJ,CAAYhD,YAAYrC,SAAZ,EAAZ,EAAqCiG,QAAQrF,KAA7C,CAAtD;;;EAGA,WAAKO,YAAL,CAAkB8E,QAAQpF,QAAR,CAAiB0F,cAAnC,EAAmDN,OAAnD;EACAA,cAAQpF,QAAR,CAAiBqF,QAAjB,CAA0B/uD,IAA1B,CAA+BkrD,WAA/B;EACAA,kBAAYxB,QAAZ,GAAuBoF,QAAQpF,QAA/B;;EAEA,UAAIoF,QAAQpC,KAAZ,EAAmB;;EAElBnC,UAAGT,WAAH,CAAegF,OAAf;EACA,WAAI,CAACF,aAAL,EAAoB;EACnBrE,WAAGzsC,QAAH,CAAYotC,WAAZ;EACA;EACD;EACD,MApBM,MAoBA;EACN4D,cAAQO,gBAAR,GAA2B,IAA3B;EACA;;EAEDP,eAAUA,QAAQpF,QAAlB;EACA;;EAED,WAAOp5C,OAAOo5C,QAAd;EACA,IAjxBoE;;EAmxBrE4F,kBAAe,uBAAUnX,EAAV,EAAcoX,GAAd,EAAmB;EACjC,WAAOA,GAAP,EAAY;EACX,SAAIpX,OAAOoX,GAAX,EAAgB;EACf,aAAO,IAAP;EACA;EACDA,WAAMA,IAAIC,UAAV;EACA;EACD,WAAO,KAAP;EACA,IA3xBoE;;;EA8xBrE1G,SAAM,cAAUlmD,IAAV,EAAgBkI,IAAhB,EAAsB2kD,SAAtB,EAAiC;EACtC,QAAI3kD,QAAQA,KAAKqH,KAAL,YAAsBrC,EAAE24C,aAApC,EAAmD;;EAElD,SAAI39C,KAAK4kD,aAAL,IAAsB,KAAKJ,aAAL,CAAmBxkD,KAAKqH,KAAL,CAAWu6C,KAA9B,EAAqC5hD,KAAK4kD,aAAL,CAAmBC,aAAxD,CAA1B,EAAkG;EACjG;EACA;EACD/sD,YAAO,YAAYA,IAAnB;EACA;;EAEDkN,MAAEk2C,YAAF,CAAezoD,SAAf,CAAyBurD,IAAzB,CAA8B/qD,IAA9B,CAAmC,IAAnC,EAAyC6E,IAAzC,EAA+CkI,IAA/C,EAAqD2kD,SAArD;EACA,IAxyBoE;;;EA2yBrEG,YAAS,iBAAUhtD,IAAV,EAAgB6sD,SAAhB,EAA2B;EACnC,WAAO3/C,EAAEk2C,YAAF,CAAezoD,SAAf,CAAyBqyD,OAAzB,CAAiC7xD,IAAjC,CAAsC,IAAtC,EAA4C6E,IAA5C,EAAkD6sD,SAAlD,KAAgE3/C,EAAEk2C,YAAF,CAAezoD,SAAf,CAAyBqyD,OAAzB,CAAiC7xD,IAAjC,CAAsC,IAAtC,EAA4C,YAAY6E,IAAxD,EAA8D6sD,SAA9D,CAAvE;EACA,IA7yBoE;;;EAgzBrElI,+BAA4B,oCAAUuH,OAAV,EAAmB;EAC9C,QAAIe,aAAaf,QAAQ9D,aAAR,EAAjB;;EAEA,QAAIvxC,IAAI,kBAAR;EACA,QAAIo2C,aAAa,EAAjB,EAAqB;EACpBp2C,UAAK,OAAL;EACA,KAFD,MAEO,IAAIo2C,aAAa,GAAjB,EAAsB;EAC5Bp2C,UAAK,QAAL;EACA,KAFM,MAEA;EACNA,UAAK,OAAL;EACA;;EAED,WAAO,IAAI3J,EAAEggD,OAAN,CAAc,EAAEr9C,MAAM,gBAAgBo9C,UAAhB,GAA6B,eAArC,EAAsDx6C,WAAW,mBAAmBoE,CAApF,EAAuF/I,UAAU,IAAIZ,EAAEgE,KAAN,CAAY,EAAZ,EAAgB,EAAhB,CAAjG,EAAd,CAAP;EACA,IA7zBoE;;EA+zBrEy5C,gBAAa,uBAAY;EACxB,QAAItuD,MAAM,KAAK8pD,IAAf;EAAA,QACIzC,oBAAoB,KAAK3iD,OAAL,CAAa2iD,iBADrC;EAAA,QAEIC,sBAAsB,KAAK5iD,OAAL,CAAa4iD,mBAFvC;EAAA,QAGIC,sBAAsB,KAAK7iD,OAAL,CAAa6iD,mBAHvC;EAAA,QAIIH,sBAAsB,KAAK1iD,OAAL,CAAa0iD,mBAJvC;;;EAOA,QAAIC,qBAAqBE,mBAArB,IAA4CH,mBAAhD,EAAqE;EACpE,UAAK7wC,EAAL,CAAQ,8BAAR,EAAwC,KAAKu6C,eAA7C,EAA8D,IAA9D;EACA;;;EAGD,QAAIxJ,mBAAJ,EAAyB;EACxB,UAAK/wC,EAAL,CAAQ,kBAAR,EAA4B,KAAKw6C,aAAjC,EAAgD,IAAhD;EACA,UAAKx6C,EAAL,CAAQ,iBAAR,EAA2B,KAAKm4C,aAAhC,EAA+C,IAA/C;EACA1uD,SAAIuW,EAAJ,CAAO,SAAP,EAAkB,KAAKm4C,aAAvB,EAAsC,IAAtC;EACA;EACD,IAj1BoE;;EAm1BrEoC,oBAAiB,yBAAU/yD,CAAV,EAAa;EAC7B,QAAI8xD,UAAU9xD,EAAEmV,KAAhB;EAAA,QACI89C,gBAAgBnB,OADpB;;EAGA,QAAI9xD,EAAE4F,IAAF,KAAW,iBAAX,IAAgC5F,EAAE0yD,aAAlC,IAAmD1yD,EAAE0yD,aAAF,CAAgB/uC,OAAhB,KAA4B,EAAnF,EAAuF;EACtF;EACA;;EAED,WAAOsvC,cAAcb,cAAd,CAA6B1tD,MAA7B,KAAwC,CAA/C,EAAkD;EACjDuuD,qBAAgBA,cAAcb,cAAd,CAA6B,CAA7B,CAAhB;EACA;;EAED,QAAIa,cAAcxG,KAAd,KAAwB,KAAKN,QAA7B,IACH8G,cAAcjB,WAAd,KAA8BF,QAAQE,WADnC,IAEH,KAAKrrD,OAAL,CAAa2iD,iBAFd,EAEiC;;;EAGhCwI,aAAQlC,QAAR;EACA,KAND,MAMO,IAAI,KAAKjpD,OAAL,CAAa6iD,mBAAjB,EAAsC;EAC5CsI,aAAQjC,YAAR;EACA;;EAED,QAAI,KAAKlpD,OAAL,CAAa0iD,mBAAjB,EAAsC;EACrCyI,aAAQlC,QAAR;EACA;;;EAGD,QAAI5vD,EAAE0yD,aAAF,IAAmB1yD,EAAE0yD,aAAF,CAAgB/uC,OAAhB,KAA4B,EAAnD,EAAuD;EACtD,UAAKooC,IAAL,CAAUn5C,UAAV,CAAqBsgD,KAArB;EACA;EACD,IAj3BoE;;EAm3BrEF,kBAAe,uBAAUhzD,CAAV,EAAa;EAC3B,QAAIiC,MAAM,KAAK8pD,IAAf;EACA,QAAI,KAAKnB,gBAAT,EAA2B;EAC1B;EACA;EACD,QAAI,KAAKuI,aAAT,EAAwB;EACvBlxD,SAAI6qD,WAAJ,CAAgB,KAAKqG,aAArB;EACA;EACD,QAAInzD,EAAEmV,KAAF,CAAQ64C,aAAR,KAA0B,CAA1B,IAA+BhuD,EAAEmV,KAAF,KAAY,KAAKi+C,WAApD,EAAiE;EAChE,UAAKD,aAAL,GAAqB,IAAIrgD,EAAEugD,OAAN,CAAcrzD,EAAEmV,KAAF,CAAQm+C,aAAR,EAAd,EAAuC,KAAK3sD,OAAL,CAAa2jD,cAApD,CAArB;EACAroD,SAAI6e,QAAJ,CAAa,KAAKqyC,aAAlB;EACA;EACD,IA/3BoE;;EAi4BrExC,kBAAe,yBAAY;EAC1B,QAAI,KAAKwC,aAAT,EAAwB;EACvB,UAAKpH,IAAL,CAAUe,WAAV,CAAsB,KAAKqG,aAA3B;EACA,UAAKA,aAAL,GAAqB,IAArB;EACA;EACD,IAt4BoE;;EAw4BrE3C,kBAAe,yBAAY;EAC1B,QAAIlH,oBAAoB,KAAK3iD,OAAL,CAAa2iD,iBAArC;EAAA,QACCC,sBAAsB,KAAK5iD,OAAL,CAAa4iD,mBADpC;EAAA,QAECC,sBAAsB,KAAK7iD,OAAL,CAAa6iD,mBAFpC;EAAA,QAGCH,sBAAsB,KAAK1iD,OAAL,CAAa0iD,mBAHpC;EAAA,QAICpnD,MAAM,KAAK8pD,IAJZ;;EAMA,QAAIzC,qBAAqBE,mBAArB,IAA4CH,mBAAhD,EAAqE;EACpE,UAAKtnC,GAAL,CAAS,8BAAT,EAAyC,KAAKgxC,eAA9C,EAA+D,IAA/D;EACA;EACD,QAAIxJ,mBAAJ,EAAyB;EACxB,UAAKxnC,GAAL,CAAS,kBAAT,EAA6B,KAAKixC,aAAlC,EAAiD,IAAjD;EACA,UAAKjxC,GAAL,CAAS,iBAAT,EAA4B,KAAK4uC,aAAjC,EAAgD,IAAhD;EACA1uD,SAAI8f,GAAJ,CAAQ,SAAR,EAAmB,KAAK4uC,aAAxB,EAAuC,IAAvC;EACA;EACD,IAv5BoE;;EAy5BrEP,aAAU,oBAAY;EACrB,QAAI,CAAC,KAAKrE,IAAV,EAAgB;;EACf;EACA;EACD,SAAKwH,mBAAL;;EAEA,SAAK9G,KAAL,GAAaxwC,KAAKqe,KAAL,CAAW,KAAKyxB,IAAL,CAAUU,KAArB,CAAb;EACA,SAAK1B,mBAAL,GAA2B,KAAKoF,yBAAL,EAA3B;EACA,IAj6BoE;;EAm6BrEE,aAAU,oBAAY;EACrB,QAAI,KAAKzF,gBAAT,EAA2B;EAC1B;EACA;;EAED,QAAI4I,YAAY,KAAKrD,yBAAL,EAAhB;;EAEA,SAAK/D,gBAAL,CAAsBqH,iCAAtB,CAAwD,KAAK1I,mBAA7D,EAAkF9uC,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAAlF,EAAsH,KAAKvE,KAA3H,EAAkI+G,SAAlI;EACA,SAAKpH,gBAAL,CAAsB+B,4BAAtB,CAAmD,IAAnD,EAAyDlyC,KAAKqe,KAAL,CAAW,KAAKyxB,IAAL,CAAUU,KAArB,CAAzD,EAAsF+G,SAAtF;;EAEA,SAAKzI,mBAAL,GAA2ByI,SAA3B;EACA;EACA,IA/6BoE;;EAi7BrE5E,6BAA0B,oCAAY;EACrC,QAAIv6C,UAAU4H,KAAKy3C,IAAL,CAAU,KAAK3H,IAAL,CAAU+D,UAAV,EAAV,CAAd;EAAA,QACCr0C,UAAUQ,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CADX;EAAA,QAEC2C,SAAS,KAAKhtD,OAAL,CAAasiD,gBAFvB;EAAA,QAGC2K,WAAWD,MAHZ;;;;;EAQA,QAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;EACjCC,gBAAW,oBAAY;EAAE,aAAOD,MAAP;EAAgB,MAAzC;EACA;;EAED,QAAI,KAAKhtD,OAAL,CAAa+iD,uBAAb,KAAyC,IAA7C,EAAmD;EAClDr1C,eAAU,KAAK1N,OAAL,CAAa+iD,uBAAb,GAAuC,CAAjD;EACA;EACD,SAAKyC,QAAL,GAAgB93C,OAAhB;EACA,SAAKm6C,aAAL,GAAqB,EAArB;EACA,SAAKC,gBAAL,GAAwB,EAAxB;;;EAGA,SAAK,IAAIx2C,OAAO5D,OAAhB,EAAyB4D,QAAQwD,OAAjC,EAA0CxD,MAA1C,EAAkD;EACjD,UAAKu2C,aAAL,CAAmBv2C,IAAnB,IAA2B,IAAInF,EAAE+gD,YAAN,CAAmBD,SAAS37C,IAAT,CAAnB,CAA3B;EACA,UAAKw2C,gBAAL,CAAsBx2C,IAAtB,IAA8B,IAAInF,EAAE+gD,YAAN,CAAmBD,SAAS37C,IAAT,CAAnB,CAA9B;EACA;;;EAGD,SAAKm0C,gBAAL,GAAwB,IAAI,KAAKZ,cAAT,CAAwB,IAAxB,EAA8B/vC,UAAU,CAAxC,CAAxB;EACA,IA78BoE;;;EAg9BrEywC,cAAW,mBAAU/2C,KAAV,EAAiB8C,IAAjB,EAAuB;EACjC,QAAI45C,eAAe,KAAKrD,aAAxB;EAAA,QACIuC,kBAAkB,KAAKtC,gBAD3B;EAAA,QAEChzC,UAAUQ,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAFX;EAAA,QAGI8C,WAHJ;EAAA,QAGiB52B,CAHjB;;EAKA,QAAI,KAAKv2B,OAAL,CAAa8iD,gBAAjB,EAAmC;EAClC,UAAKsK,mBAAL,CAAyB5+C,KAAzB;EACA;;EAEDA,UAAMqD,EAAN,CAAS,KAAKyyC,yBAAd,EAAyC,IAAzC;;;EAGA,WAAOhzC,QAAQwD,OAAf,EAAwBxD,MAAxB,EAAgC;EAC/B67C,mBAAc,KAAK/H,IAAL,CAAUmF,OAAV,CAAkB/7C,MAAM02C,SAAN,EAAlB,EAAqC5zC,IAArC,CAAd,CAD+B;;;EAI/B,SAAI+7C,UAAUnC,aAAa55C,IAAb,EAAmBg8C,aAAnB,CAAiCH,WAAjC,CAAd;EACA,SAAIE,OAAJ,EAAa;EACZA,cAAQE,SAAR,CAAkB/+C,KAAlB;EACAA,YAAMu3C,QAAN,GAAiBsH,OAAjB;EACA;EACA;;;EAGDA,eAAUjD,gBAAgB94C,IAAhB,EAAsBg8C,aAAtB,CAAoCH,WAApC,CAAV;EACA,SAAIE,OAAJ,EAAa;EACZ,UAAIz4B,SAASy4B,QAAQtH,QAArB;EACA,UAAInxB,MAAJ,EAAY;EACX,YAAK4xB,YAAL,CAAkB6G,OAAlB,EAA2B,KAA3B;EACA;;;;EAID,UAAIG,aAAa,IAAI,KAAK3I,cAAT,CAAwB,IAAxB,EAA8BvzC,IAA9B,EAAoC+7C,OAApC,EAA6C7+C,KAA7C,CAAjB;EACA08C,mBAAa55C,IAAb,EAAmBk6C,SAAnB,CAA6BgC,UAA7B,EAAyC,KAAKpI,IAAL,CAAUmF,OAAV,CAAkBiD,WAAWjC,QAA7B,EAAuCj6C,IAAvC,CAAzC;EACA+7C,cAAQtH,QAAR,GAAmByH,UAAnB;EACAh/C,YAAMu3C,QAAN,GAAiByH,UAAjB;;;EAGA,UAAIC,aAAaD,UAAjB;EACA,WAAKj3B,IAAIjlB,OAAO,CAAhB,EAAmBilB,IAAI3B,OAAOkxB,KAA9B,EAAqCvvB,GAArC,EAA0C;EACzCk3B,oBAAa,IAAI,KAAK5I,cAAT,CAAwB,IAAxB,EAA8BtuB,CAA9B,EAAiCk3B,UAAjC,CAAb;EACAvC,oBAAa30B,CAAb,EAAgBi1B,SAAhB,CAA0BiC,UAA1B,EAAsC,KAAKrI,IAAL,CAAUmF,OAAV,CAAkB8C,QAAQnI,SAAR,EAAlB,EAAuC3uB,CAAvC,CAAtC;EACA;EACD3B,aAAO24B,SAAP,CAAiBE,UAAjB;;;EAGA,WAAKtD,0BAAL,CAAgCkD,OAAhC,EAAyC/7C,IAAzC;;EAEA;EACA;;;EAGD84C,qBAAgB94C,IAAhB,EAAsBk6C,SAAtB,CAAgCh9C,KAAhC,EAAuC2+C,WAAvC;EACA;;;EAGD,SAAK1H,gBAAL,CAAsB8H,SAAtB,CAAgC/+C,KAAhC;EACAA,UAAMu3C,QAAN,GAAiB,KAAKN,gBAAtB;EACA;EACA,IA7gCoE;;;;;;;EAohCrEE,0BAAuB,iCAAY;EAClC,SAAK9B,aAAL,CAAmBmE,SAAnB,CAA6B,UAAUlyC,CAAV,EAAa;EACzC,SAAIA,aAAa3J,EAAE24C,aAAf,IAAgChvC,EAAE41C,gBAAtC,EAAwD;EACvD51C,QAAE43C,WAAF;EACA;EACD,KAJD;EAKA,IA1hCoE;;;EA6hCrEC,aAAU,kBAAUC,EAAV,EAAc;EACvB,SAAKvJ,MAAL,CAAYhoD,IAAZ,CAAiBuxD,EAAjB;EACA,QAAI,CAAC,KAAKC,aAAV,EAAyB;EACxB,UAAKA,aAAL,GAAqB5mD,WAAWkF,EAAE4S,IAAF,CAAO,KAAK+uC,aAAZ,EAA2B,IAA3B,CAAX,EAA6C,GAA7C,CAArB;EACA;EACD,IAliCoE;EAmiCrEA,kBAAe,yBAAY;EAC1B,SAAK,IAAI9vD,IAAI,CAAb,EAAgBA,IAAI,KAAKqmD,MAAL,CAAYtmD,MAAhC,EAAwCC,GAAxC,EAA6C;EAC5C,UAAKqmD,MAAL,CAAYrmD,CAAZ,EAAe5D,IAAf,CAAoB,IAApB;EACA;EACD,SAAKiqD,MAAL,CAAYtmD,MAAZ,GAAqB,CAArB;EACAgwD,iBAAa,KAAKF,aAAlB;EACA,SAAKA,aAAL,GAAqB,IAArB;EACA,IA1iCoE;;;EA6iCrEjB,wBAAqB,+BAAY;EAChC,QAAIoB,UAAU14C,KAAKqe,KAAL,CAAW,KAAKyxB,IAAL,CAAUU,KAArB,CAAd;;;EAGA,SAAKgI,aAAL;;EAEA,QAAI,KAAKhI,KAAL,GAAakI,OAAb,IAAwB,KAAK5J,mBAAL,CAAyB6J,UAAzB,CAAoC,KAAKzE,yBAAL,EAApC,CAA5B,EAAmG;;EAClG,UAAK0E,eAAL;;EAEA,UAAKzI,gBAAL,CAAsBqH,iCAAtB,CAAwD,KAAK1I,mBAA7D,EAAkF9uC,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAAlF,EAAsH,KAAKvE,KAA3H,EAAkI,KAAK0D,yBAAL,EAAlI;;EAEA,UAAK2E,gBAAL,CAAsB,KAAKrI,KAA3B,EAAkCkI,OAAlC;EAEA,KAPD,MAOO,IAAI,KAAKlI,KAAL,GAAakI,OAAjB,EAA0B;;EAChC,UAAKE,eAAL;;EAEA,UAAKE,iBAAL,CAAuB,KAAKtI,KAA5B,EAAmCkI,OAAnC;EACA,KAJM,MAIA;EACN,UAAKtE,QAAL;EACA;EACD,IAjkCoE;;;EAokCrEF,8BAA2B,qCAAY;EACtC,QAAI,CAAC,KAAKxpD,OAAL,CAAagjD,0BAAlB,EAA8C;EAC7C,YAAO,KAAKqL,kBAAZ;EACA,KAFD,MAEO,IAAIliD,EAAEmiD,OAAF,CAAUC,MAAd,EAAsB;EAC5B,YAAO,KAAKC,kBAAL,CAAwB,KAAKpJ,IAAL,CAAU33C,SAAV,EAAxB,CAAP;EACA;;EAED,WAAO,KAAK+gD,kBAAL,CAAwB,KAAKpJ,IAAL,CAAU33C,SAAV,GAAsBghD,GAAtB,CAA0B,CAA1B,CAAxB,CAAP,CAPsC;EAQtC,IA5kCoE;;;;;;;;;;;;EAwlCrED,uBAAoB,4BAAUtG,MAAV,EAAkB;EACrC,QAAIwG,SAAS,KAAKtF,OAAlB;;EAEA,QAAIsF,WAAWvzD,SAAf,EAA0B;EACzB,SAAI+sD,OAAOyG,QAAP,MAAqBD,MAAzB,EAAiC;EAChCxG,aAAO0G,UAAP,CAAkB1gD,GAAlB,GAAwB0oB,QAAxB;EACA;EACD,SAAIsxB,OAAO2G,QAAP,MAAqB,CAACH,MAA1B,EAAkC;EACjCxG,aAAO4G,UAAP,CAAkB5gD,GAAlB,GAAwB,CAAC0oB,QAAzB;EACA;EACD;;EAED,WAAOsxB,MAAP;EACA,IArmCoE;;;EAwmCrEhC,kCAA+B,uCAAU13C,KAAV,EAAiBg/C,UAAjB,EAA6B;EAC3D,QAAIA,eAAeh/C,KAAnB,EAA0B;EACzB,UAAKq1C,aAAL,CAAmB1pC,QAAnB,CAA4B3L,KAA5B;EACA,KAFD,MAEO,IAAIg/C,WAAWnC,WAAX,KAA2B,CAA/B,EAAkC;EACxCmC,gBAAWuB,SAAX;;EAEA,SAAI72C,UAAUs1C,WAAWlG,kBAAX,EAAd;EACA,UAAKzD,aAAL,CAAmBsC,WAAnB,CAA+BjuC,QAAQ,CAAR,CAA/B;EACA,UAAK2rC,aAAL,CAAmBsC,WAAnB,CAA+BjuC,QAAQ,CAAR,CAA/B;EACA,KANM,MAMA;EACNs1C,gBAAWE,WAAX;EACA;EACD,IApnCoE;;;;;;;;;EA6nCrEtG,2BAAwB,gCAAU4H,KAAV,EAAiBrnC,MAAjB,EAAyB;EAChD,QAAIxe,SAAS6lD,MAAMxG,SAAN,EAAb;EAAA,QACIxqD,IAAI,CADR;EAAA,QAEIwQ,KAFJ;;EAIAmZ,aAASA,UAAU,EAAnB;;EAEA,WAAO3pB,IAAImL,OAAOpL,MAAlB,EAA0BC,GAA1B,EAA+B;EAC9BwQ,aAAQrF,OAAOnL,CAAP,CAAR;;EAEA,SAAIwQ,iBAAiBrC,EAAE64C,UAAvB,EAAmC;EAClC,WAAKoC,sBAAL,CAA4B54C,KAA5B,EAAmCmZ,MAAnC;EACA;EACA;;EAEDA,YAAOtrB,IAAP,CAAYmS,KAAZ;EACA;;EAED,WAAOmZ,MAAP;EACA,IAhpCoE;;;;;;;;EAwpCrEylC,wBAAqB,6BAAU5+C,KAAV,EAAiB;EACrC,QAAI3B,OAAO2B,MAAMxO,OAAN,CAAc6M,IAAd,GAAqB,KAAK7M,OAAL,CAAauiD,kBAAb,CAAgC;EAC/D8E,oBAAe,yBAAY;EAC1B,aAAO,CAAP;EACA,MAH8D;EAI/DC,yBAAoB,8BAAY;EAC/B,aAAO,CAAC94C,KAAD,CAAP;EACA;EAN8D,KAAhC,CAAhC;;EASA,WAAO3B,IAAP;EACA;EAnqCoE,GAAtB,CAAhD;;;EAuqCAV,IAAEi2C,kBAAF,CAAqB6M,OAArB,CAA6B;EAC5BZ,uBAAoB,IAAIliD,EAAEg8C,YAAN,CAAmB,IAAIh8C,EAAEmK,MAAN,CAAa,CAACsgB,QAAd,EAAwB,CAACA,QAAzB,CAAnB,EAAuD,IAAIzqB,EAAEmK,MAAN,CAAasgB,QAAb,EAAuBA,QAAvB,CAAvD;EADQ,GAA7B;;EAIAzqB,IAAEi2C,kBAAF,CAAqB6M,OAArB,CAA6B;EAC5BrK,iBAAc;;EAEbsJ,qBAAiB,2BAAY;;EAE5B,KAJY;EAKbC,sBAAkB,0BAAUe,iBAAV,EAA6BC,YAA7B,EAA2C;EAC5D,UAAK1J,gBAAL,CAAsBqH,iCAAtB,CAAwD,KAAK1I,mBAA7D,EAAkF9uC,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAAlF,EAAsH6E,iBAAtH;EACA,UAAKzJ,gBAAL,CAAsB+B,4BAAtB,CAAmD,IAAnD,EAAyD2H,YAAzD,EAAuE,KAAK3F,yBAAL,EAAvE;;;EAGA,UAAKrE,IAAL,CAAU,cAAV;EACA,KAXY;EAYbiJ,uBAAmB,2BAAUc,iBAAV,EAA6BC,YAA7B,EAA2C;EAC7D,UAAK1J,gBAAL,CAAsBqH,iCAAtB,CAAwD,KAAK1I,mBAA7D,EAAkF9uC,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAAlF,EAAsH6E,iBAAtH;EACA,UAAKzJ,gBAAL,CAAsB+B,4BAAtB,CAAmD,IAAnD,EAAyD2H,YAAzD,EAAuE,KAAK3F,yBAAL,EAAvE;;;EAGA,UAAKrE,IAAL,CAAU,cAAV;EACA,KAlBY;EAmBbc,wBAAoB,4BAAUz3C,KAAV,EAAiBg/C,UAAjB,EAA6B;EAChD,UAAKtH,6BAAL,CAAmC13C,KAAnC,EAA0Cg/C,UAA1C;EACA;EArBY,IADc;;EAyB5B7I,mBAAgB;;EAEfuJ,qBAAiB,2BAAY;EAC5B,UAAK9I,IAAL,CAAU0E,QAAV,CAAmBp4C,SAAnB,IAAgC,uBAAhC;EACA,UAAKuyC,gBAAL;EACA,KALc;;EAOfkK,sBAAkB,0BAAUe,iBAAV,EAA6BC,YAA7B,EAA2C;EAC5D,SAAIjH,SAAS,KAAKsB,yBAAL,EAAb;EAAA,SACI5C,KAAK,KAAK/C,aADd;EAAA,SAEC/uC,UAAUQ,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAFX;EAAA,SAGIrsD,CAHJ;;EAKA,UAAKysD,WAAL,GAAmB,IAAnB;;;EAGA,UAAKhF,gBAAL,CAAsB2J,YAAtB,CAAmClH,MAAnC,EAA2CgH,iBAA3C,EAA8Dp6C,OAA9D,EAAuE,UAAUgB,CAAV,EAAa;EACnF,UAAIu5C,WAAWv5C,EAAEwwC,OAAjB;EAAA,UACIpuC,UAAWpC,EAAEs1C,QADjB;EAAA,UAEIxvB,CAFJ;;EAIA,UAAI,CAACssB,OAAOlC,QAAP,CAAgBqJ,QAAhB,CAAL,EAAgC;EAC/BA,kBAAW,IAAX;EACA;;EAED,UAAIv5C,EAAEw5C,eAAF,MAAuBJ,oBAAoB,CAApB,KAA0BC,YAArD,EAAmE;;EAClEvI,UAAGT,WAAH,CAAerwC,CAAf;EACAA,SAAE0xC,4BAAF,CAA+B,IAA/B,EAAqC2H,YAArC,EAAmDjH,MAAnD;EACA,OAHD,MAGO;;EAENpyC,SAAEy5C,WAAF;EACAz5C,SAAE0xC,4BAAF,CAA+B6H,QAA/B,EAAyCF,YAAzC,EAAuDjH,MAAvD;EACA;;;;EAID,WAAKlqD,IAAIka,QAAQna,MAAR,GAAiB,CAA1B,EAA6BC,KAAK,CAAlC,EAAqCA,GAArC,EAA0C;EACzC49B,WAAI1jB,QAAQla,CAAR,CAAJ;EACA,WAAI,CAACkqD,OAAOlC,QAAP,CAAgBpqB,EAAE0qB,OAAlB,CAAL,EAAiC;EAChCM,WAAGT,WAAH,CAAevqB,CAAf;EACA;EACD;EAED,MA3BD;;EA6BA,UAAK4zB,YAAL;;;EAGA,UAAK/J,gBAAL,CAAsBgK,yBAAtB,CAAgDvH,MAAhD,EAAwDiH,YAAxD;;EAEAvI,QAAGoB,SAAH,CAAa,UAAUt4C,CAAV,EAAa;EACzB,UAAI,EAAEA,aAAavD,EAAE24C,aAAjB,KAAmCp1C,EAAEq5C,KAAzC,EAAgD;EAC/Cr5C,SAAE+2C,WAAF;EACA;EACD,MAJD;;;EAOA,UAAKhB,gBAAL,CAAsB2J,YAAtB,CAAmClH,MAAnC,EAA2CgH,iBAA3C,EAA8DC,YAA9D,EAA4E,UAAUr5C,CAAV,EAAa;EACxFA,QAAE45C,iCAAF,CAAoCP,YAApC;EACA,MAFD;;EAIA,UAAK1E,WAAL,GAAmB,KAAnB;;;EAGA,UAAKkD,QAAL,CAAc,YAAY;;EAEzB,WAAKlI,gBAAL,CAAsB2J,YAAtB,CAAmClH,MAAnC,EAA2CgH,iBAA3C,EAA8Dp6C,OAA9D,EAAuE,UAAUgB,CAAV,EAAa;EACnF8wC,UAAGT,WAAH,CAAerwC,CAAf;EACAA,SAAE2wC,WAAF;EACA,OAHD;;EAKA,WAAKkJ,aAAL;EACA,MARD;EASA,KAzEc;;EA2EfvB,uBAAmB,2BAAUc,iBAAV,EAA6BC,YAA7B,EAA2C;EAC7D,UAAKS,uBAAL,CAA6B,KAAKnK,gBAAlC,EAAoDyJ,oBAAoB,CAAxE,EAA2EC,YAA3E;;;EAGA,UAAK1J,gBAAL,CAAsB+B,4BAAtB,CAAmD,IAAnD,EAAyD2H,YAAzD,EAAuE,KAAK3F,yBAAL,EAAvE;;EAEA,UAAK/D,gBAAL,CAAsBqH,iCAAtB,CAAwD,KAAK1I,mBAA7D,EAAkF9uC,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CAAlF,EAAsH6E,iBAAtH,EAAyI,KAAK1F,yBAAL,EAAzI;EACA,KAlFc;;EAoFfvD,wBAAoB,4BAAUz3C,KAAV,EAAiBg/C,UAAjB,EAA6B;EAChD,SAAIqC,KAAK,IAAT;EAAA,SACIjJ,KAAK,KAAK/C,aADd;;EAGA+C,QAAGzsC,QAAH,CAAY3L,KAAZ;EACA,SAAIg/C,eAAeh/C,KAAnB,EAA0B;EACzB,UAAIg/C,WAAWnC,WAAX,GAAyB,CAA7B,EAAgC;;;EAE/BmC,kBAAWE,WAAX;EACA,YAAK8B,YAAL;EACA,YAAKtB,eAAL;;EAEA1/C,aAAMshD,OAAN,CAAc,KAAK1K,IAAL,CAAU2K,kBAAV,CAA6BvC,WAAWtI,SAAX,EAA7B,CAAd;EACA12C,aAAM+gD,WAAN;;EAEA,YAAK5B,QAAL,CAAc,YAAY;EACzB/G,WAAGT,WAAH,CAAe33C,KAAf;EACAA,cAAMi4C,WAAN;;EAEAoJ,WAAGF,aAAH;EACA,QALD;EAOA,OAhBD,MAgBO;;EACN,YAAKH,YAAL;;EAEAK,UAAG3B,eAAH;EACA2B,UAAGD,uBAAH,CAA2BpC,UAA3B,EAAuC,KAAKpI,IAAL,CAAU+D,UAAV,EAAvC,EAA+D,KAAKrD,KAApE;EACA;EACD;EACD;EAjHc,IAzBY;;;EA8I5B8J,4BAAyB,iCAAUzE,OAAV,EAAmB+D,iBAAnB,EAAsCC,YAAtC,EAAoD;EAC5E,QAAIjH,SAAS,KAAKsB,yBAAL,EAAb;EAAA,QACC10C,UAAUQ,KAAKslB,KAAL,CAAW,KAAKwqB,IAAL,CAAUiF,UAAV,EAAX,CADX;;;EAIAc,YAAQ6E,4CAAR,CAAqD9H,MAArD,EAA6DpzC,OAA7D,EAAsEo6C,oBAAoB,CAA1F,EAA6FC,YAA7F;;EAEA,QAAIU,KAAK,IAAT;;;EAGA,SAAKL,YAAL;EACArE,YAAQsE,yBAAR,CAAkCvH,MAAlC,EAA0CiH,YAA1C;;;;EAIA,SAAKxB,QAAL,CAAc,YAAY;;;EAGzB,SAAIxC,QAAQE,WAAR,KAAwB,CAA5B,EAA+B;EAC9B,UAAIzvB,IAAIuvB,QAAQC,QAAR,CAAiB,CAAjB,CAAR;;EAEA,WAAKX,WAAL,GAAmB,IAAnB;EACA7uB,QAAEq0B,SAAF,CAAYr0B,EAAEspB,SAAF,EAAZ;EACA,WAAKuF,WAAL,GAAmB,KAAnB;EACA,UAAI7uB,EAAE6qB,WAAN,EAAmB;EAClB7qB,SAAE6qB,WAAF;EACA;EACD,MATD,MASO;EACN0E,cAAQiE,YAAR,CAAqBlH,MAArB,EAA6BiH,YAA7B,EAA2Cr6C,OAA3C,EAAoD,UAAUgB,CAAV,EAAa;EAChEA,SAAEg3C,iCAAF,CAAoC5E,MAApC,EAA4CpzC,OAA5C,EAAqDo6C,oBAAoB,CAAzE;EACA,OAFD;EAGA;EACDW,QAAGF,aAAH;EACA,KAlBD;EAmBA,IAhL2B;;EAkL5BA,kBAAe,yBAAY;EAC1B,QAAI,KAAKvK,IAAT,EAAe;EACd,UAAKA,IAAL,CAAU0E,QAAV,CAAmBp4C,SAAnB,GAA+B,KAAK0zC,IAAL,CAAU0E,QAAV,CAAmBp4C,SAAnB,CAA6BhR,OAA7B,CAAqC,uBAArC,EAA8D,EAA9D,CAA/B;EACA;EACD,SAAKujD,gBAAL;EACA,SAAKkB,IAAL,CAAU,cAAV;EACA,IAxL2B;;;;EA4L5BqK,iBAAc,wBAAY;;;;EAIzBrjD,MAAE0R,IAAF,CAAOqyC,OAAP,CAAe1+C,SAAS/U,IAAT,CAAc0zD,WAA7B;EACA;EAjM2B,GAA7B;;EAoMAhkD,IAAEikD,kBAAF,GAAuB,UAAUpwD,OAAV,EAAmB;EACzC,UAAO,IAAImM,EAAEi2C,kBAAN,CAAyBpiD,OAAzB,CAAP;EACA,GAFD;;EAIA,MAAI8kD,gBAAgB34C,EAAE24C,aAAF,GAAkB34C,EAAEoK,MAAF,CAASoH,MAAT,CAAgB;EACrD3d,YAASmM,EAAEiD,IAAF,CAAOxV,SAAP,CAAiBoG,OAD2B;;EAGrD4d,eAAY,oBAAUoxC,KAAV,EAAiB19C,IAAjB,EAAuB1B,CAAvB,EAA0B+U,CAA1B,EAA6B;;EAExCxY,MAAEoK,MAAF,CAAS3c,SAAT,CAAmBgkB,UAAnB,CAA8BxjB,IAA9B,CAAmC,IAAnC,EAAyCwV,IAAKA,EAAE27C,QAAF,IAAc37C,EAAEs1C,SAAF,EAAnB,GAAoC,IAAI/4C,EAAEmK,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAA7E,EACU,EAAEzJ,MAAM,IAAR,EAAc41C,MAAMuM,MAAMhvD,OAAN,CAAcwiD,WAAlC,EADV;;EAGA,SAAKoG,MAAL,GAAcoG,KAAd;EACA,SAAKlJ,KAAL,GAAax0C,IAAb;;EAEA,SAAK85C,QAAL,GAAgB,EAAhB;EACA,SAAKK,cAAL,GAAsB,EAAtB;EACA,SAAKJ,WAAL,GAAmB,CAAnB;EACA,SAAKK,gBAAL,GAAwB,IAAxB;EACA,SAAKJ,iBAAL,GAAyB,IAAzB;;EAEA,SAAKlD,OAAL,GAAe,IAAIj8C,EAAEg8C,YAAN,EAAf;;EAEA,QAAIv4C,CAAJ,EAAO;EACN,UAAK29C,SAAL,CAAe39C,CAAf;EACA;EACD,QAAI+U,CAAJ,EAAO;EACN,UAAK4oC,SAAL,CAAe5oC,CAAf;EACA;EACD,IAzBoD;;;EA4BrD2iC,uBAAoB,4BAAU+I,YAAV,EAAwBC,mBAAxB,EAA6C;EAChED,mBAAeA,gBAAgB,EAA/B;;EAEA,SAAK,IAAIryD,IAAI,KAAKytD,cAAL,CAAoB1tD,MAApB,GAA6B,CAA1C,EAA6CC,KAAK,CAAlD,EAAqDA,GAArD,EAA0D;EACzD,UAAKytD,cAAL,CAAoBztD,CAApB,EAAuBspD,kBAAvB,CAA0C+I,YAA1C,EAAwDC,mBAAxD;EACA;;EAED,SAAK,IAAI9oD,IAAI,KAAK4jD,QAAL,CAAcrtD,MAAd,GAAuB,CAApC,EAAuCyJ,KAAK,CAA5C,EAA+CA,GAA/C,EAAoD;EACnD,SAAI8oD,uBAAuB,KAAKlF,QAAL,CAAc5jD,CAAd,EAAiBgjD,WAA5C,EAAyD;EACxD;EACA;EACD6F,kBAAah0D,IAAb,CAAkB,KAAK+uD,QAAL,CAAc5jD,CAAd,CAAlB;EACA;;EAED,WAAO6oD,YAAP;EACA,IA3CoD;;;EA8CrDhJ,kBAAe,yBAAY;EAC1B,WAAO,KAAKgE,WAAZ;EACA,IAhDoD;;;EAmDrDnC,iBAAc,sBAAUqH,gBAAV,EAA4B;EACzC,QAAIC,gBAAgB,KAAK/E,cAAL,CAAoBrtD,KAApB,EAApB;EAAA,QACC9C,MAAM,KAAKstD,MAAL,CAAYxD,IADnB;EAAA,QAECqL,aAAan1D,IAAIo1D,aAAJ,CAAkB,KAAKtI,OAAvB,CAFd;EAAA,QAGC92C,OAAO,KAAKw0C,KAAL,GAAa,CAHrB;EAAA,QAICkI,UAAU1yD,IAAI4V,OAAJ,EAJX;EAAA,QAKClT,CALD;;;EAQA,WAAOwyD,cAAczyD,MAAd,GAAuB,CAAvB,IAA4B0yD,aAAan/C,IAAhD,EAAsD;EACrDA;EACA,SAAIq/C,cAAc,EAAlB;EACA,UAAK3yD,IAAI,CAAT,EAAYA,IAAIwyD,cAAczyD,MAA9B,EAAsCC,GAAtC,EAA2C;EAC1C2yD,oBAAcA,YAAYvoD,MAAZ,CAAmBooD,cAAcxyD,CAAd,EAAiBytD,cAApC,CAAd;EACA;EACD+E,qBAAgBG,WAAhB;EACA;;EAED,QAAIF,aAAan/C,IAAjB,EAAuB;EACtB,UAAKs3C,MAAL,CAAYxD,IAAZ,CAAiB7zC,OAAjB,CAAyB,KAAK+0C,OAA9B,EAAuCh1C,IAAvC;EACA,KAFD,MAEO,IAAIm/C,cAAczC,OAAlB,EAA2B;;EACjC,UAAKpF,MAAL,CAAYxD,IAAZ,CAAiB7zC,OAAjB,CAAyB,KAAK+0C,OAA9B,EAAuC0H,UAAU,CAAjD;EACA,KAFM,MAEA;EACN,UAAKpF,MAAL,CAAYxD,IAAZ,CAAiB73C,SAAjB,CAA2B,KAAK66C,OAAhC,EAAyCmI,gBAAzC;EACA;EACD,IA5EoD;;EA8ErD9iD,cAAW,qBAAY;EACtB,QAAIy6C,SAAS,IAAI/7C,EAAEg8C,YAAN,EAAb;EACAD,WAAOvqC,MAAP,CAAc,KAAKyqC,OAAnB;EACA,WAAOF,MAAP;EACA,IAlFoD;;EAoFrDwF,gBAAa,uBAAY;EACxB,SAAKhC,gBAAL,GAAwB,IAAxB;EACA,QAAI,KAAK3C,KAAT,EAAgB;EACf,UAAK6H,OAAL,CAAa,IAAb;EACA;EACD,IAzFoD;;;EA4FrDC,eAAY,sBAAY;EACvB,QAAI,KAAKnF,gBAAT,EAA2B;EAC1B,UAAKoF,QAAL,GAAgB,KAAKlI,MAAL,CAAY5oD,OAAZ,CAAoBuiD,kBAApB,CAAuC,IAAvC,CAAhB;EACA,UAAKmJ,gBAAL,GAAwB,KAAxB;EACA;EACD,WAAO,KAAKoF,QAAL,CAAcD,UAAd,EAAP;EACA,IAlGoD;EAmGrDE,iBAAc,wBAAY;EACzB,WAAO,KAAKD,QAAL,CAAcC,YAAd,EAAP;EACA,IArGoD;;EAwGrDxD,cAAW,mBAAUyD,IAAV,EAAgBC,uBAAhB,EAAyC;;EAEnD,SAAKvF,gBAAL,GAAwB,IAAxB;;EAEA,SAAKJ,iBAAL,GAAyB,IAAzB;EACA,SAAK4F,iBAAL,CAAuBF,IAAvB;;EAEA,QAAIA,gBAAgB7kD,EAAE24C,aAAtB,EAAqC;EACpC,SAAI,CAACmM,uBAAL,EAA8B;EAC7B,WAAKxF,cAAL,CAAoBpvD,IAApB,CAAyB20D,IAAzB;EACAA,WAAKjL,QAAL,GAAgB,IAAhB;EACA;EACD,UAAKsF,WAAL,IAAoB2F,KAAK3F,WAAzB;EACA,KAND,MAMO;EACN,SAAI,CAAC4F,uBAAL,EAA8B;EAC7B,WAAK7F,QAAL,CAAc/uD,IAAd,CAAmB20D,IAAnB;EACA;EACD,UAAK3F,WAAL;EACA;;EAED,QAAI,KAAKtF,QAAT,EAAmB;EAClB,UAAKA,QAAL,CAAcwH,SAAd,CAAwByD,IAAxB,EAA8B,IAA9B;EACA;EACD,IA/HoD;;;;;;;EAsIrDE,sBAAmB,2BAAUC,KAAV,EAAiB;EACnC,QAAI,CAAC,KAAK5F,QAAV,EAAoB;;EAEnB,UAAKA,QAAL,GAAgB4F,MAAM5F,QAAN,IAAkB4F,MAAM7K,OAAxC;EACA;EACD,IA3IoD;;;;;;;;EAmJrD8K,iBAAc,wBAAY;EACzB,QAAIlJ,SAAS,KAAKE,OAAlB;;EAEA,QAAIF,OAAO4G,UAAX,EAAuB;EACtB5G,YAAO4G,UAAP,CAAkB5gD,GAAlB,GAAwB0oB,QAAxB;EACAsxB,YAAO4G,UAAP,CAAkB3gD,GAAlB,GAAwByoB,QAAxB;EACA;EACD,QAAIsxB,OAAO0G,UAAX,EAAuB;EACtB1G,YAAO0G,UAAP,CAAkB1gD,GAAlB,GAAwB,CAAC0oB,QAAzB;EACAsxB,YAAO0G,UAAP,CAAkBzgD,GAAlB,GAAwB,CAACyoB,QAAzB;EACA;EACD,IA9JoD;;EAgKrD8uB,uBAAoB,8BAAY;EAC/B,QAAIxtC,UAAU,KAAKkzC,QAAnB;EAAA,QACIoF,gBAAgB,KAAK/E,cADzB;EAAA,QAEI4F,SAAS,CAFb;EAAA,QAGIC,SAAS,CAHb;EAAA,QAIIC,aAAa,KAAKlG,WAJtB;EAAA,QAKIrtD,CALJ;EAAA,QAKOmzD,KALP;EAAA,QAKcK,WALd;EAAA,QAK2BtF,UAL3B;;;EAQA,QAAIqF,eAAe,CAAnB,EAAsB;EACrB;EACA;;;EAGD,SAAKH,YAAL;;;EAGA,SAAKpzD,IAAI,CAAT,EAAYA,IAAIka,QAAQna,MAAxB,EAAgCC,GAAhC,EAAqC;EACpCwzD,mBAAct5C,QAAQla,CAAR,EAAWsoD,OAAzB;;EAEA,UAAK8B,OAAL,CAAazqC,MAAb,CAAoB6zC,WAApB;;EAEAH,eAAUG,YAAYtjD,GAAtB;EACAojD,eAAUE,YAAYrjD,GAAtB;EACA;;;EAGD,SAAKnQ,IAAI,CAAT,EAAYA,IAAIwyD,cAAczyD,MAA9B,EAAsCC,GAAtC,EAA2C;EAC1CmzD,aAAQX,cAAcxyD,CAAd,CAAR;;;EAGA,SAAImzD,MAAM7F,iBAAV,EAA6B;EAC5B6F,YAAMzL,kBAAN;EACA;;EAED,UAAK0C,OAAL,CAAazqC,MAAb,CAAoBwzC,MAAM/I,OAA1B;;EAEAoJ,mBAAcL,MAAMM,QAApB;EACAvF,kBAAaiF,MAAM9F,WAAnB;;EAEAgG,eAAUG,YAAYtjD,GAAZ,GAAkBg+C,UAA5B;EACAoF,eAAUE,YAAYrjD,GAAZ,GAAkB+9C,UAA5B;EACA;;EAED,SAAK5F,OAAL,GAAe,KAAKmL,QAAL,GAAgB,IAAItlD,EAAEmK,MAAN,CAAa+6C,SAASE,UAAtB,EAAkCD,SAASC,UAA3C,CAA/B;;;EAGA,SAAKjG,iBAAL,GAAyB,KAAzB;EACA,IAhNoD;;;EAmNrDyD,cAAW,mBAAUM,QAAV,EAAoB;EAC9B,QAAIA,QAAJ,EAAc;EACb,UAAKqC,aAAL,GAAqB,KAAKpL,OAA1B;EACA,UAAK2J,SAAL,CAAeZ,QAAf;EACA;EACD,SAAKzG,MAAL,CAAY/E,aAAZ,CAA0B1pC,QAA1B,CAAmC,IAAnC;EACA,IAzNoD;;EA2NrDw3C,kCAA+B,uCAAUzJ,MAAV,EAAkB92C,MAAlB,EAA0B1D,OAA1B,EAAmC;EACjE,SAAK0hD,YAAL,CAAkBlH,MAAlB,EAA0B,KAAKU,MAAL,CAAYxD,IAAZ,CAAiBiF,UAAjB,EAA1B,EAAyD38C,UAAU,CAAnE,EACC,UAAUoI,CAAV,EAAa;EACZ,SAAIoC,UAAUpC,EAAEs1C,QAAhB;EAAA,SACCptD,CADD;EAAA,SACI49B,CADJ;EAEA,UAAK59B,IAAIka,QAAQna,MAAR,GAAiB,CAA1B,EAA6BC,KAAK,CAAlC,EAAqCA,GAArC,EAA0C;EACzC49B,UAAI1jB,QAAQla,CAAR,CAAJ;;;EAGA,UAAI49B,EAAEmtB,KAAN,EAAa;EACZntB,SAAEk0B,OAAF,CAAU1+C,MAAV;EACAwqB,SAAE2zB,WAAF;EACA;EACD;EACD,KAbF,EAcC,UAAUz5C,CAAV,EAAa;EACZ,SAAI06C,gBAAgB16C,EAAE21C,cAAtB;EAAA,SACCjkD,CADD;EAAA,SACIoqD,EADJ;EAEA,UAAKpqD,IAAIgpD,cAAczyD,MAAd,GAAuB,CAAhC,EAAmCyJ,KAAK,CAAxC,EAA2CA,GAA3C,EAAgD;EAC/CoqD,WAAKpB,cAAchpD,CAAd,CAAL;EACA,UAAIoqD,GAAG7I,KAAP,EAAc;EACb6I,UAAG9B,OAAH,CAAW1+C,MAAX;EACAwgD,UAAGrC,WAAH;EACA;EACD;EACD,KAxBF;EA0BA,IAtPoD;;EAwPrDS,iDAA8C,sDAAU9H,MAAV,EAAkB2J,UAAlB,EAA8B3C,iBAA9B,EAAiDC,YAAjD,EAA+D;EAC5G,SAAKC,YAAL,CAAkBlH,MAAlB,EAA0BiH,YAA1B,EAAwC0C,UAAxC,EACC,UAAU/7C,CAAV,EAAa;EACZA,OAAE67C,6BAAF,CAAgCzJ,MAAhC,EAAwCpyC,EAAE8yC,MAAF,CAASxD,IAAT,CAAc2K,kBAAd,CAAiCj6C,EAAEovC,SAAF,EAAjC,EAAgDvxB,KAAhD,EAAxC,EAAiGu7B,iBAAjG;;;;EAIA,SAAIp5C,EAAEw5C,eAAF,MAAuBJ,oBAAoB,CAApB,KAA0BC,YAArD,EAAmE;EAClEr5C,QAAE2wC,WAAF;EACA3wC,QAAEg3C,iCAAF,CAAoC5E,MAApC,EAA4C2J,UAA5C,EAAwD3C,iBAAxD,EAFkE;EAGlE,MAHD,MAGO;EACNp5C,QAAEy5C,WAAF;EACA;;EAEDz5C,OAAEi5C,SAAF;EACA,KAdF;EAgBA,IAzQoD;;EA2QrDU,8BAA2B,mCAAUvH,MAAV,EAAkB4J,SAAlB,EAA6B;EACvD,SAAK1C,YAAL,CAAkBlH,MAAlB,EAA0B,KAAKU,MAAL,CAAYxD,IAAZ,CAAiBiF,UAAjB,EAA1B,EAAyDyH,SAAzD,EAAoE,IAApE,EAA0E,UAAUh8C,CAAV,EAAa;EACtFA,OAAE2wC,WAAF;EACA,KAFD;EAGA,IA/QoD;;EAiRrDe,iCAA8B,sCAAU6H,QAAV,EAAoByC,SAApB,EAA+B5J,MAA/B,EAAuC;EACpE,SAAKkH,YAAL,CAAkBlH,MAAlB,EAA0B,KAAKU,MAAL,CAAYxD,IAAZ,CAAiBiF,UAAjB,KAAgC,CAA1D,EAA6DyH,SAA7D,EACC,UAAUh8C,CAAV,EAAa;EACZ,SAAIg8C,cAAch8C,EAAEgwC,KAApB,EAA2B;EAC1B;EACA;;;EAGD,UAAK,IAAI9nD,IAAI8X,EAAEs1C,QAAF,CAAWrtD,MAAX,GAAoB,CAAjC,EAAoCC,KAAK,CAAzC,EAA4CA,GAA5C,EAAiD;EAChD,UAAI+zD,KAAKj8C,EAAEs1C,QAAF,CAAWptD,CAAX,CAAT;;EAEA,UAAI,CAACkqD,OAAOlC,QAAP,CAAgB+L,GAAGzL,OAAnB,CAAL,EAAkC;EACjC;EACA;;EAED,UAAI+I,QAAJ,EAAc;EACb0C,UAAGL,aAAH,GAAmBK,GAAG7M,SAAH,EAAnB;;EAEA6M,UAAG9B,SAAH,CAAaZ,QAAb;EACA,WAAI0C,GAAGxC,WAAP,EAAoB;EACnBwC,WAAGxC,WAAH;EACA;EACD;;EAEDz5C,QAAE8yC,MAAF,CAAS/E,aAAT,CAAuB1pC,QAAvB,CAAgC43C,EAAhC;EACA;EACD,KAzBF,EA0BC,UAAUj8C,CAAV,EAAa;EACZA,OAAEi5C,SAAF,CAAYM,QAAZ;EACA,KA5BF;EA8BA,IAhToD;;EAkTrDK,sCAAmC,2CAAUoC,SAAV,EAAqB;;EAEvD,SAAK,IAAI9zD,IAAI,KAAKotD,QAAL,CAAcrtD,MAAd,GAAuB,CAApC,EAAuCC,KAAK,CAA5C,EAA+CA,GAA/C,EAAoD;EACnD,SAAI+zD,KAAK,KAAK3G,QAAL,CAAcptD,CAAd,CAAT;EACA,SAAI+zD,GAAGL,aAAP,EAAsB;EACrBK,SAAG9B,SAAH,CAAa8B,GAAGL,aAAhB;EACA,aAAOK,GAAGL,aAAV;EACA;EACD;;EAED,QAAII,YAAY,CAAZ,KAAkB,KAAKhM,KAA3B,EAAkC;;EAEjC,UAAK,IAAIt+C,IAAI,KAAKikD,cAAL,CAAoB1tD,MAApB,GAA6B,CAA1C,EAA6CyJ,KAAK,CAAlD,EAAqDA,GAArD,EAA0D;EACzD,WAAKikD,cAAL,CAAoBjkD,CAApB,EAAuBwqD,gBAAvB;EACA;EACD,KALD,MAKO;EACN,UAAK,IAAIttC,IAAI,KAAK+mC,cAAL,CAAoB1tD,MAApB,GAA6B,CAA1C,EAA6C2mB,KAAK,CAAlD,EAAqDA,GAArD,EAA0D;EACzD,WAAK+mC,cAAL,CAAoB/mC,CAApB,EAAuBgrC,iCAAvB,CAAyDoC,SAAzD;EACA;EACD;EACD,IAtUoD;;EAwUrDE,qBAAkB,4BAAY;EAC7B,QAAI,KAAKN,aAAT,EAAwB;EACvB,UAAKzB,SAAL,CAAe,KAAKyB,aAApB;EACA,YAAO,KAAKA,aAAZ;EACA;EACD,IA7UoD;;;EAgVrD5E,sCAAmC,2CAAUmF,cAAV,EAA0BJ,UAA1B,EAAsCC,SAAtC,EAAiDI,YAAjD,EAA+D;EACjG,QAAIt2B,CAAJ,EAAO59B,CAAP;EACA,SAAKoxD,YAAL,CAAkB6C,cAAlB,EAAkCJ,aAAa,CAA/C,EAAkDC,YAAY,CAA9D,EACC,UAAUh8C,CAAV,EAAa;;EAEZ,UAAK9X,IAAI8X,EAAEs1C,QAAF,CAAWrtD,MAAX,GAAoB,CAA7B,EAAgCC,KAAK,CAArC,EAAwCA,GAAxC,EAA6C;EAC5C49B,UAAI9lB,EAAEs1C,QAAF,CAAWptD,CAAX,CAAJ;EACA,UAAI,CAACk0D,YAAD,IAAiB,CAACA,aAAalM,QAAb,CAAsBpqB,EAAE0qB,OAAxB,CAAtB,EAAwD;EACvDxwC,SAAE8yC,MAAF,CAAS/E,aAAT,CAAuBsC,WAAvB,CAAmCvqB,CAAnC;EACA,WAAIA,EAAE6qB,WAAN,EAAmB;EAClB7qB,UAAE6qB,WAAF;EACA;EACD;EACD;EACD,KAZF,EAaC,UAAU3wC,CAAV,EAAa;;EAEZ,UAAK9X,IAAI8X,EAAE21C,cAAF,CAAiB1tD,MAAjB,GAA0B,CAAnC,EAAsCC,KAAK,CAA3C,EAA8CA,GAA9C,EAAmD;EAClD49B,UAAI9lB,EAAE21C,cAAF,CAAiBztD,CAAjB,CAAJ;EACA,UAAI,CAACk0D,YAAD,IAAiB,CAACA,aAAalM,QAAb,CAAsBpqB,EAAE0qB,OAAxB,CAAtB,EAAwD;EACvDxwC,SAAE8yC,MAAF,CAAS/E,aAAT,CAAuBsC,WAAvB,CAAmCvqB,CAAnC;EACA,WAAIA,EAAE6qB,WAAN,EAAmB;EAClB7qB,UAAE6qB,WAAF;EACA;EACD;EACD;EACD,KAxBF;EA0BA,IA5WoD;;;;;;;;EAoXrD2I,iBAAc,sBAAU+C,eAAV,EAA2BC,gBAA3B,EAA6CC,eAA7C,EAA8DC,eAA9D,EAA+EC,gBAA/E,EAAiG;EAC9G,QAAI/B,gBAAgB,KAAK/E,cAAzB;EAAA,QACIn6C,OAAO,KAAKw0C,KADhB;EAAA,QAEI9nD,CAFJ;EAAA,QAEO8X,CAFP;;EAIA,QAAIs8C,oBAAoB9gD,IAAxB,EAA8B;EAC7B,SAAIghD,eAAJ,EAAqB;EACpBA,sBAAgB,IAAhB;EACA;EACD,SAAIC,oBAAoBjhD,SAAS+gD,eAAjC,EAAkD;EACjDE,uBAAiB,IAAjB;EACA;EACD;;EAED,QAAIjhD,OAAO8gD,gBAAP,IAA2B9gD,OAAO+gD,eAAtC,EAAuD;EACtD,UAAKr0D,IAAIwyD,cAAczyD,MAAd,GAAuB,CAAhC,EAAmCC,KAAK,CAAxC,EAA2CA,GAA3C,EAAgD;EAC/C8X,UAAI06C,cAAcxyD,CAAd,CAAJ;EACA,UAAI8X,EAAEw1C,iBAAN,EAAyB;EACxBx1C,SAAE4vC,kBAAF;EACA;EACD,UAAIyM,gBAAgBlE,UAAhB,CAA2Bn4C,EAAEsyC,OAA7B,CAAJ,EAA2C;EAC1CtyC,SAAEs5C,YAAF,CAAe+C,eAAf,EAAgCC,gBAAhC,EAAkDC,eAAlD,EAAmEC,eAAnE,EAAoFC,gBAApF;EACA;EACD;EACD;EACD,IA7YoD;;;EAgZrDjD,oBAAiB,2BAAY;;EAE5B,WAAO,KAAK7D,cAAL,CAAoB1tD,MAApB,GAA6B,CAA7B,IAAkC,KAAK0tD,cAAL,CAAoB,CAApB,EAAuBJ,WAAvB,KAAuC,KAAKA,WAArF;EACA;EAnZoD,GAAhB,CAAtC;;;;;;;;;;EA8ZAl/C,IAAEoK,MAAF,CAAS04C,OAAT,CAAiB;EAChBM,gBAAa,uBAAY;EACxB,QAAIiD,SAAS,KAAKxyD,OAAL,CAAa2S,OAA1B;EACA,SAAKsD,UAAL,CAAgB,CAAhB;EACA,SAAKjW,OAAL,CAAa2S,OAAb,GAAuB6/C,MAAvB;EACA,WAAO,IAAP;EACA,IANe;;EAQhB/L,gBAAa,uBAAY;EACxB,WAAO,KAAKxwC,UAAL,CAAgB,KAAKjW,OAAL,CAAa2S,OAA7B,CAAP;EACA;EAVe,GAAjB;;EAaAxG,IAAE+gD,YAAF,GAAiB,UAAUuF,QAAV,EAAoB;EACpC,QAAKC,SAAL,GAAiBD,QAAjB;EACA,QAAKE,WAAL,GAAmBF,WAAWA,QAA9B;EACA,QAAKG,KAAL,GAAa,EAAb;EACA,QAAKC,YAAL,GAAoB,EAApB;EACA,GALD;;EAOA1mD,IAAE+gD,YAAF,CAAetzD,SAAf,GAA2B;;EAE1B4xD,cAAW,mBAAU9xD,GAAV,EAAeq/B,KAAf,EAAsB;EAChC,QAAItkB,IAAI,KAAKq+C,SAAL,CAAe/5B,MAAMtkB,CAArB,CAAR;EAAA,QACIC,IAAI,KAAKo+C,SAAL,CAAe/5B,MAAMrkB,CAArB,CADR;EAAA,QAEI4d,OAAO,KAAKsgC,KAFhB;EAAA,QAGI7xB,MAAMzO,KAAK5d,CAAL,IAAU4d,KAAK5d,CAAL,KAAW,EAH/B;EAAA,QAIIq+C,OAAOhyB,IAAItsB,CAAJ,IAASssB,IAAItsB,CAAJ,KAAU,EAJ9B;EAAA,QAKIi0C,QAAQv8C,EAAE0R,IAAF,CAAO6qC,KAAP,CAAahvD,GAAb,CALZ;;EAOA,SAAKm5D,YAAL,CAAkBnK,KAAlB,IAA2B3vB,KAA3B;;EAEAg6B,SAAK12D,IAAL,CAAU3C,GAAV;EACA,IAbyB;;EAe1Bs5D,iBAAc,sBAAUt5D,GAAV,EAAeq/B,KAAf,EAAsB;EACnC,SAAKuxB,YAAL,CAAkB5wD,GAAlB;EACA,SAAK8xD,SAAL,CAAe9xD,GAAf,EAAoBq/B,KAApB;EACA,IAlByB;;;EAqB1BuxB,iBAAc,sBAAU5wD,GAAV,EAAeq/B,KAAf,EAAsB;EACnC,QAAItkB,IAAI,KAAKq+C,SAAL,CAAe/5B,MAAMtkB,CAArB,CAAR;EAAA,QACIC,IAAI,KAAKo+C,SAAL,CAAe/5B,MAAMrkB,CAArB,CADR;EAAA,QAEI4d,OAAO,KAAKsgC,KAFhB;EAAA,QAGI7xB,MAAMzO,KAAK5d,CAAL,IAAU4d,KAAK5d,CAAL,KAAW,EAH/B;EAAA,QAIIq+C,OAAOhyB,IAAItsB,CAAJ,IAASssB,IAAItsB,CAAJ,KAAU,EAJ9B;EAAA,QAKIzW,CALJ;EAAA,QAKOovB,GALP;;EAOA,WAAO,KAAKylC,YAAL,CAAkB1mD,EAAE0R,IAAF,CAAO6qC,KAAP,CAAahvD,GAAb,CAAlB,CAAP;;EAEA,SAAKsE,IAAI,CAAJ,EAAOovB,MAAM2lC,KAAKh1D,MAAvB,EAA+BC,IAAIovB,GAAnC,EAAwCpvB,GAAxC,EAA6C;EAC5C,SAAI+0D,KAAK/0D,CAAL,MAAYtE,GAAhB,EAAqB;;EAEpBq5D,WAAK13C,MAAL,CAAYrd,CAAZ,EAAe,CAAf;;EAEA,UAAIovB,QAAQ,CAAZ,EAAe;EACd,cAAO2T,IAAItsB,CAAJ,CAAP;EACA;;EAED,aAAO,IAAP;EACA;EACD;EAED,IA5CyB;;EA8C1Bw+C,eAAY,oBAAUrF,EAAV,EAAcvF,OAAd,EAAuB;EAClC,QAAIrqD,CAAJ;EAAA,QAAOwJ,CAAP;EAAA,QAAUkd,CAAV;EAAA,QAAa0I,GAAb;EAAA,QAAkB2T,GAAlB;EAAA,QAAuBgyB,IAAvB;EAAA,QAA6BG,OAA7B;EAAA,QACI5gC,OAAO,KAAKsgC,KADhB;;EAGA,SAAK50D,CAAL,IAAUs0B,IAAV,EAAgB;EACfyO,WAAMzO,KAAKt0B,CAAL,CAAN;;EAEA,UAAKwJ,CAAL,IAAUu5B,GAAV,EAAe;EACdgyB,aAAOhyB,IAAIv5B,CAAJ,CAAP;;EAEA,WAAKkd,IAAI,CAAJ,EAAO0I,MAAM2lC,KAAKh1D,MAAvB,EAA+B2mB,IAAI0I,GAAnC,EAAwC1I,GAAxC,EAA6C;EAC5CwuC,iBAAUtF,GAAGxzD,IAAH,CAAQiuD,OAAR,EAAiB0K,KAAKruC,CAAL,CAAjB,CAAV;EACA,WAAIwuC,OAAJ,EAAa;EACZxuC;EACA0I;EACA;EACD;EACD;EACD;EACD,IAjEyB;;EAmE1BkgC,kBAAe,uBAAUv0B,KAAV,EAAiB;EAC/B,QAAItkB,IAAI,KAAKq+C,SAAL,CAAe/5B,MAAMtkB,CAArB,CAAR;EAAA,QACIC,IAAI,KAAKo+C,SAAL,CAAe/5B,MAAMrkB,CAArB,CADR;EAAA,QAEI1W,CAFJ;EAAA,QAEOwJ,CAFP;EAAA,QAEUkd,CAFV;EAAA,QAEaqc,GAFb;EAAA,QAEkBgyB,IAFlB;EAAA,QAEwB3lC,GAFxB;EAAA,QAE6B1zB,GAF7B;EAAA,QAEkCy5D,IAFlC;EAAA,QAGIC,cAAc,KAAKP,YAHvB;EAAA,QAIIQ,gBAAgB,KAAKV,WAJzB;EAAA,QAKItF,UAAU,IALd;;EAOA,SAAKrvD,IAAI0W,IAAI,CAAb,EAAgB1W,KAAK0W,IAAI,CAAzB,EAA4B1W,GAA5B,EAAiC;EAChC+iC,WAAM,KAAK6xB,KAAL,CAAW50D,CAAX,CAAN;EACA,SAAI+iC,GAAJ,EAAS;;EAER,WAAKv5B,IAAIiN,IAAI,CAAb,EAAgBjN,KAAKiN,IAAI,CAAzB,EAA4BjN,GAA5B,EAAiC;EAChCurD,cAAOhyB,IAAIv5B,CAAJ,CAAP;EACA,WAAIurD,IAAJ,EAAU;;EAET,aAAKruC,IAAI,CAAJ,EAAO0I,MAAM2lC,KAAKh1D,MAAvB,EAA+B2mB,IAAI0I,GAAnC,EAAwC1I,GAAxC,EAA6C;EAC5ChrB,eAAMq5D,KAAKruC,CAAL,CAAN;EACAyuC,gBAAO,KAAKG,OAAL,CAAaF,YAAYjnD,EAAE0R,IAAF,CAAO6qC,KAAP,CAAahvD,GAAb,CAAZ,CAAb,EAA6Cq/B,KAA7C,CAAP;EACA,aAAIo6B,OAAOE,aAAP,IACHF,QAAQE,aAAR,IAAyBhG,YAAY,IADtC,EAC4C;EAC3CgG,0BAAgBF,IAAhB;EACA9F,oBAAU3zD,GAAV;EACA;EACD;EACD;EACD;EACD;EACD;EACD,WAAO2zD,OAAP;EACA,IAjGyB;;EAmG1ByF,cAAW,mBAAUr+C,CAAV,EAAa;EACvB,QAAIuoB,QAAQ1nB,KAAKslB,KAAL,CAAWnmB,IAAI,KAAKi+C,SAApB,CAAZ;EACA,WAAO3uD,SAASi5B,KAAT,IAAkBA,KAAlB,GAA0BvoB,CAAjC;EACA,IAtGyB;;EAwG1B6+C,YAAS,iBAAU1wC,CAAV,EAAa2wC,EAAb,EAAiB;EACzB,QAAIC,KAAKD,GAAG9+C,CAAH,GAAOmO,EAAEnO,CAAlB;EAAA,QACIg/C,KAAKF,GAAG7+C,CAAH,GAAOkO,EAAElO,CADlB;EAEA,WAAO8+C,KAAKA,EAAL,GAAUC,KAAKA,EAAtB;EACA;EA5GyB,GAA3B;;;;;;;;;;;;;;;;;;;;;;;;EAyIC,eAAY;EACZtnD,KAAEunD,SAAF,GAAc;;;;;;;;EAQbC,gBAAY,oBAAUC,GAAV,EAAenf,EAAf,EAAmB;EAC9B,SAAIof,KAAKpf,GAAG,CAAH,EAAMvmC,GAAN,GAAYumC,GAAG,CAAH,EAAMvmC,GAA3B;EAAA,SACC4lD,KAAKrf,GAAG,CAAH,EAAMtmC,GAAN,GAAYsmC,GAAG,CAAH,EAAMtmC,GADxB;EAEA,YAAQ2lD,MAAMF,IAAI1lD,GAAJ,GAAUumC,GAAG,CAAH,EAAMvmC,GAAtB,IAA6B2lD,MAAMD,IAAIzlD,GAAJ,GAAUsmC,GAAG,CAAH,EAAMtmC,GAAtB,CAArC;EACA,KAZY;;;;;;;;;EAqBb4lD,sCAAkC,0CAAUC,QAAV,EAAoBC,OAApB,EAA6B;EAC9D,SAAIC,OAAO,CAAX;EAAA,SACCC,QAAQ,IADT;EAAA,SAECC,YAAY,EAFb;EAAA,SAGCp2D,CAHD;EAAA,SAGI+uB,EAHJ;EAAA,SAGQ/W,CAHR;;EAKA,UAAKhY,IAAIi2D,QAAQl2D,MAAR,GAAiB,CAA1B,EAA6BC,KAAK,CAAlC,EAAqCA,GAArC,EAA0C;EACzC+uB,WAAKknC,QAAQj2D,CAAR,CAAL;EACAgY,UAAI,KAAK29C,UAAL,CAAgB5mC,EAAhB,EAAoBinC,QAApB,CAAJ;;EAEA,UAAIh+C,IAAI,CAAR,EAAW;EACVo+C,iBAAU/3D,IAAV,CAAe0wB,EAAf;EACA,OAFD,MAEO;EACN;EACA;;EAED,UAAI/W,IAAIk+C,IAAR,EAAc;EACbA,cAAOl+C,CAAP;EACAm+C,eAAQpnC,EAAR;EACA;EACD;;EAED,YAAO,EAAEsnC,UAAUF,KAAZ,EAAmBC,WAAWA,SAA9B,EAAP;EACA,KA5CY;;;;;;;;;EAsDbE,qBAAiB,yBAAUN,QAAV,EAAoBC,OAApB,EAA6B;EAC7C,SAAIM,sBAAsB,EAA1B;EAAA,SACCnqD,IAAI,KAAK2pD,gCAAL,CAAsCC,QAAtC,EAAgDC,OAAhD,CADL;;EAGA,SAAI7pD,EAAEiqD,QAAN,EAAgB;;EACfE,4BACCA,oBAAoBnsD,MAApB,CACC,KAAKksD,eAAL,CAAqB,CAACN,SAAS,CAAT,CAAD,EAAc5pD,EAAEiqD,QAAhB,CAArB,EAAgDjqD,EAAEgqD,SAAlD,CADD,CADD;EAIAG,4BACCA,oBAAoBnsD,MAApB,CACC,KAAKksD,eAAL,CAAqB,CAAClqD,EAAEiqD,QAAH,EAAaL,SAAS,CAAT,CAAb,CAArB,EAAgD5pD,EAAEgqD,SAAlD,CADD,CADD;EAIA,aAAOG,mBAAP;EACA,MAVD,MAUO;;EACN,aAAO,CAACP,SAAS,CAAT,CAAD,CAAP;EACA;EACD,KAvEY;;;;;;;;;EAgFbrH,mBAAe,uBAAUsH,OAAV,EAAmB;;EAEjC,SAAIvF,SAAS,KAAb;EAAA,SAAoB8F,SAAS,KAA7B;EAAA,SACCC,SAAS,KADV;EAAA,SACiBC,SAAS,KAD1B;EAAA,SAECC,WAAW,IAFZ;EAAA,SAEkBC,WAAW,IAF7B;EAAA,SAGCC,WAAW,IAHZ;EAAA,SAGkBC,WAAW,IAH7B;EAAA,SAICX,QAAQ,IAJT;EAAA,SAIeY,QAAQ,IAJvB;EAAA,SAKC/2D,CALD;;EAOA,UAAKA,IAAIi2D,QAAQl2D,MAAR,GAAiB,CAA1B,EAA6BC,KAAK,CAAlC,EAAqCA,GAArC,EAA0C;EACzC,UAAI+uB,KAAKknC,QAAQj2D,CAAR,CAAT;EACA,UAAI0wD,WAAW,KAAX,IAAoB3hC,GAAG7e,GAAH,GAASwgD,MAAjC,EAAyC;EACxCiG,kBAAW5nC,EAAX;EACA2hC,gBAAS3hC,GAAG7e,GAAZ;EACA;EACD,UAAIsmD,WAAW,KAAX,IAAoBznC,GAAG7e,GAAH,GAASsmD,MAAjC,EAAyC;EACxCI,kBAAW7nC,EAAX;EACAynC,gBAASznC,GAAG7e,GAAZ;EACA;EACD,UAAIumD,WAAW,KAAX,IAAoB1nC,GAAG5e,GAAH,GAASsmD,MAAjC,EAAyC;EACxCI,kBAAW9nC,EAAX;EACA0nC,gBAAS1nC,GAAG5e,GAAZ;EACA;EACD,UAAIumD,WAAW,KAAX,IAAoB3nC,GAAG5e,GAAH,GAASumD,MAAjC,EAAyC;EACxCI,kBAAW/nC,EAAX;EACA2nC,gBAAS3nC,GAAG5e,GAAZ;EACA;EACD;;EAED,SAAIqmD,WAAW9F,MAAf,EAAuB;EACtBqG,cAAQH,QAAR;EACAT,cAAQQ,QAAR;EACA,MAHD,MAGO;EACNI,cAAQD,QAAR;EACAX,cAAQU,QAAR;EACA;;EAED,SAAIG,KAAK,GAAG5sD,MAAH,CAAU,KAAKksD,eAAL,CAAqB,CAACS,KAAD,EAAQZ,KAAR,CAArB,EAAqCF,OAArC,CAAV,EACJ,KAAKK,eAAL,CAAqB,CAACH,KAAD,EAAQY,KAAR,CAArB,EAAqCd,OAArC,CADI,CAAT;EAEA,YAAOe,EAAP;EACA;EAxHY,IAAd;EA0HA,GA3HA,GAAD;;EA6HA7oD,IAAE24C,aAAF,CAAgBmK,OAAhB,CAAwB;EACvBtC,kBAAe,yBAAY;EAC1B,QAAIsI,eAAe,KAAK3N,kBAAL,EAAnB;EAAA,QACC4N,SAAS,EADV;EAAA,QAECtyC,CAFD;EAAA,QAEI5kB,CAFJ;;EAIA,SAAKA,IAAIi3D,aAAal3D,MAAb,GAAsB,CAA/B,EAAkCC,KAAK,CAAvC,EAA0CA,GAA1C,EAA+C;EAC9C4kB,SAAIqyC,aAAaj3D,CAAb,EAAgBknD,SAAhB,EAAJ;EACAgQ,YAAO74D,IAAP,CAAYumB,CAAZ;EACA;;EAED,WAAOzW,EAAEunD,SAAF,CAAY/G,aAAZ,CAA0BuI,MAA1B,CAAP;EACA;EAZsB,GAAxB;;;;;EAkBA/oD,IAAE24C,aAAF,CAAgBmK,OAAhB,CAAwB;;EAEvBkG,SAAM7/C,KAAKqL,EAAL,GAAU,CAFO;EAGvBy0C,0BAAuB,EAHA;EAIvBC,sBAAmB,CAJI;;EAMvBC,0BAAwB,EAND;EAOvBC,uBAAoB,EAPG;EAQvBC,wBAAqB,CARE;;EAUvBC,4BAAyB,CAVF;;;EAavBxM,aAAU,oBAAY;EACrB,QAAI,KAAKL,MAAL,CAAY6D,WAAZ,KAA4B,IAA5B,IAAoC,KAAK7D,MAAL,CAAY3E,gBAApD,EAAsE;EACrE;EACA;;EAED,QAAIgR,eAAe,KAAK3N,kBAAL,CAAwB,IAAxB,EAA8B,IAA9B,CAAnB;EAAA,QACC0H,QAAQ,KAAKpG,MADd;EAAA,QAECttD,MAAM0zD,MAAM5J,IAFb;EAAA,QAGCh0C,SAAS9V,IAAIy0D,kBAAJ,CAAuB,KAAKzJ,OAA5B,CAHV;EAAA,QAICoP,SAJD;;EAMA,SAAK9M,MAAL,CAAYtD,WAAZ;EACA,SAAKsD,MAAL,CAAY6D,WAAZ,GAA0B,IAA1B;;;;EAIA,QAAI,KAAK7D,MAAL,CAAY5oD,OAAZ,CAAoBmjD,sBAAxB,EAAgD;EAC/CuS,iBAAY,KAAK9M,MAAL,CAAY5oD,OAAZ,CAAoBmjD,sBAApB,CAA2C8R,aAAal3D,MAAxD,EAAgEqT,MAAhE,CAAZ;EACA,KAFD,MAEO,IAAI6jD,aAAal3D,MAAb,IAAuB,KAAK03D,uBAAhC,EAAyD;EAC/DC,iBAAY,KAAKC,qBAAL,CAA2BV,aAAal3D,MAAxC,EAAgDqT,MAAhD,CAAZ;EACA,KAFM,MAEA;EACNA,YAAOsD,CAAP,IAAY,EAAZ,CADM;EAENghD,iBAAY,KAAKE,qBAAL,CAA2BX,aAAal3D,MAAxC,EAAgDqT,MAAhD,CAAZ;EACA;;EAED,SAAKykD,kBAAL,CAAwBZ,YAAxB,EAAsCS,SAAtC;EACA,IAvCsB;;EAyCvBI,eAAY,oBAAUC,WAAV,EAAuB;;EAElC,QAAI,KAAKnN,MAAL,CAAY3E,gBAAhB,EAAkC;EACjC;EACA;EACD,SAAK+R,oBAAL,CAA0BD,WAA1B;;EAEA,SAAKnN,MAAL,CAAY6D,WAAZ,GAA0B,IAA1B;EACA,IAjDsB;;EAmDvBmJ,0BAAuB,+BAAUthC,KAAV,EAAiB2hC,QAAjB,EAA2B;EACjD,QAAIC,gBAAgB,KAAKtN,MAAL,CAAY5oD,OAAZ,CAAoBojD,0BAApB,GAAiD,KAAKgS,qBAAtD,IAA+E,IAAI9gC,KAAnF,CAApB;EAAA,QACC6hC,YAAYD,gBAAgB,KAAKf,IADlC;EAAA;EAECiB,gBAAY,KAAKjB,IAAL,GAAY7gC,KAFzB;EAAA,QAGCqrB,MAAM,EAHP;EAAA,QAIC3hD,CAJD;EAAA,QAIIq4D,KAJJ;;EAMAF,gBAAY7gD,KAAK+vB,GAAL,CAAS8wB,SAAT,EAAoB,EAApB,CAAZ,CAPiD;;EASjDxW,QAAI5hD,MAAJ,GAAau2B,KAAb;;EAEA,SAAKt2B,IAAI,CAAT,EAAYA,IAAIs2B,KAAhB,EAAuBt2B,GAAvB,EAA4B;;EAC3Bq4D,aAAQ,KAAKhB,iBAAL,GAAyBr3D,IAAIo4D,SAArC;EACAzW,SAAI3hD,CAAJ,IAAS,IAAImO,EAAEgE,KAAN,CAAY8lD,SAASxhD,CAAT,GAAa0hD,YAAY7gD,KAAK8W,GAAL,CAASiqC,KAAT,CAArC,EAAsDJ,SAASvhD,CAAT,GAAayhD,YAAY7gD,KAAKE,GAAL,CAAS6gD,KAAT,CAA/E,EAAgGC,MAAhG,EAAT;EACA;;EAED,WAAO3W,GAAP;EACA,IApEsB;;EAsEvBgW,0BAAuB,+BAAUrhC,KAAV,EAAiB2hC,QAAjB,EAA2B;EACjD,QAAI7S,6BAA6B,KAAKwF,MAAL,CAAY5oD,OAAZ,CAAoBojD,0BAArD;EAAA,QACC+S,YAAY/S,6BAA6B,KAAKmS,kBAD/C;EAAA,QAECgB,aAAanT,6BAA6B,KAAKkS,qBAFhD;EAAA,QAGCkB,eAAepT,6BAA6B,KAAKoS,mBAAlC,GAAwD,KAAKL,IAH7E;EAAA,QAICkB,QAAQ,CAJT;EAAA,QAKC1W,MAAM,EALP;EAAA,QAMC3hD,CAND;;EAQA2hD,QAAI5hD,MAAJ,GAAau2B,KAAb;;;EAGA,SAAKt2B,IAAIs2B,KAAT,EAAgBt2B,KAAK,CAArB,EAAwBA,GAAxB,EAA6B;;;EAG5B,SAAIA,IAAIs2B,KAAR,EAAe;EACdqrB,UAAI3hD,CAAJ,IAAS,IAAImO,EAAEgE,KAAN,CAAY8lD,SAASxhD,CAAT,GAAa0hD,YAAY7gD,KAAK8W,GAAL,CAASiqC,KAAT,CAArC,EAAsDJ,SAASvhD,CAAT,GAAayhD,YAAY7gD,KAAKE,GAAL,CAAS6gD,KAAT,CAA/E,EAAgGC,MAAhG,EAAT;EACA;EACDD,cAASE,aAAaJ,SAAb,GAAyBn4D,IAAI,MAAtC;EACAm4D,kBAAaK,eAAeH,KAA5B;EACA;EACD,WAAO1W,GAAP;EACA,IA5FsB;;EA8FvBoI,2BAAwB,kCAAY;EACnC,QAAIiH,QAAQ,KAAKpG,MAAjB;EAAA,QACCttD,MAAM0zD,MAAM5J,IADb;EAAA,QAECwB,KAAKoI,MAAMnL,aAFZ;EAAA,QAGCoR,eAAe,KAAK3N,kBAAL,CAAwB,IAAxB,EAA8B,IAA9B,CAHhB;EAAA,QAIC1rB,CAJD;EAAA,QAII59B,CAJJ;;EAMAgxD,UAAMvE,WAAN,GAAoB,IAApB;;EAEA,SAAKx0C,UAAL,CAAgB,CAAhB;EACA,SAAKjY,IAAIi3D,aAAal3D,MAAb,GAAsB,CAA/B,EAAkCC,KAAK,CAAvC,EAA0CA,GAA1C,EAA+C;EAC9C49B,SAAIq5B,aAAaj3D,CAAb,CAAJ;;EAEA4oD,QAAGT,WAAH,CAAevqB,CAAf;;EAEA,SAAIA,EAAE66B,kBAAN,EAA0B;EACzB76B,QAAEq0B,SAAF,CAAYr0B,EAAE66B,kBAAd;EACA,aAAO76B,EAAE66B,kBAAT;EACA;EACD,SAAI76B,EAAE86B,eAAN,EAAuB;EACtB96B,QAAE86B,eAAF,CAAkB,CAAlB;EACA;;EAED,SAAI96B,EAAE+6B,UAAN,EAAkB;EACjBr7D,UAAI6qD,WAAJ,CAAgBvqB,EAAE+6B,UAAlB;EACA,aAAO/6B,EAAE+6B,UAAT;EACA;EACD;;EAED3H,UAAM7J,IAAN,CAAW,cAAX,EAA2B;EAC1BgG,cAAS,IADiB;EAE1BjzC,cAAS+8C;EAFiB,KAA3B;EAIAjG,UAAMvE,WAAN,GAAoB,KAApB;EACAuE,UAAMvC,WAAN,GAAoB,IAApB;EACA;EAjIsB,GAAxB;;;EAqIAtgD,IAAE44C,wBAAF,GAA6B54C,EAAE24C,aAAF,CAAgBnnC,MAAhB,CAAuB;EACnDk4C,uBAAoB,4BAAUZ,YAAV,EAAwBS,SAAxB,EAAmC;EACtD,QAAI1G,QAAQ,KAAKpG,MAAjB;EAAA,QACCttD,MAAM0zD,MAAM5J,IADb;EAAA,QAECwB,KAAKoI,MAAMnL,aAFZ;EAAA,QAGC+S,aAAa,KAAKhO,MAAL,CAAY5oD,OAAZ,CAAoBqjD,wBAHlC;EAAA,QAICrlD,CAJD;EAAA,QAII49B,CAJJ;EAAA,QAIOi7B,GAJP;EAAA,QAIYC,MAJZ;;EAMA9H,UAAMvE,WAAN,GAAoB,IAApB;;;;EAIA,SAAKzsD,IAAI,CAAT,EAAYA,IAAIi3D,aAAal3D,MAA7B,EAAqCC,GAArC,EAA0C;EACzC84D,cAASx7D,IAAIy7D,kBAAJ,CAAuBrB,UAAU13D,CAAV,CAAvB,CAAT;EACA49B,SAAIq5B,aAAaj3D,CAAb,CAAJ;;;EAGA64D,WAAM,IAAI1qD,EAAE6qD,QAAN,CAAe,CAAC,KAAK1Q,OAAN,EAAewQ,MAAf,CAAf,EAAuCF,UAAvC,CAAN;EACAt7D,SAAI6e,QAAJ,CAAa08C,GAAb;EACAj7B,OAAE+6B,UAAF,GAAeE,GAAf;;;EAGAj7B,OAAE66B,kBAAF,GAAuB76B,EAAE0qB,OAAzB;EACA1qB,OAAEq0B,SAAF,CAAY6G,MAAZ;EACA,SAAIl7B,EAAE86B,eAAN,EAAuB;EACtB96B,QAAE86B,eAAF,CAAkB,OAAlB,EADsB;EAEtB;;EAED9P,QAAGzsC,QAAH,CAAYyhB,CAAZ;EACA;EACD,SAAK3lB,UAAL,CAAgB,GAAhB;;EAEA+4C,UAAMvE,WAAN,GAAoB,KAApB;EACAuE,UAAM7J,IAAN,CAAW,YAAX,EAAyB;EACxBgG,cAAS,IADe;EAExBjzC,cAAS+8C;EAFe,KAAzB;EAIA,IArCkD;;EAuCnDe,yBAAsB,gCAAY;EACjC,SAAKjO,sBAAL;EACA;EAzCkD,GAAvB,CAA7B;;;EA6CA57C,IAAE24C,aAAF,CAAgBmK,OAAhB,CAAwB;;EAEvB4G,uBAAoB,4BAAUZ,YAAV,EAAwBS,SAAxB,EAAmC;EACtD,QAAI7F,KAAK,IAAT;EAAA,QACCb,QAAQ,KAAKpG,MADd;EAAA,QAECttD,MAAM0zD,MAAM5J,IAFb;EAAA,QAGCwB,KAAKoI,MAAMnL,aAHZ;EAAA,QAICoT,kBAAkB,KAAK3Q,OAJxB;EAAA,QAKC4Q,eAAe57D,IAAIy0D,kBAAJ,CAAuBkH,eAAvB,CALhB;EAAA,QAMCE,MAAMhrD,EAAEirD,IAAF,CAAOC,GANd;EAAA,QAOCT,aAAazqD,EAAEwR,MAAF,CAAS,EAAT,EAAa,KAAKirC,MAAL,CAAY5oD,OAAZ,CAAoBqjD,wBAAjC,CAPd;EAAA;EAQCiU,sBAAkBV,WAAWjkD,OAR9B;EAAA,QASC3U,CATD;EAAA,QASI49B,CATJ;EAAA,QASOi7B,GATP;EAAA,QASYU,OATZ;EAAA,QASqBpB,SATrB;EAAA,QASgCW,MAThC;;EAWA,QAAIQ,oBAAoBn8D,SAAxB,EAAmC;EAClCm8D,uBAAkBnrD,EAAEi2C,kBAAF,CAAqBxoD,SAArB,CAA+BoG,OAA/B,CAAuCqjD,wBAAvC,CAAgE1wC,OAAlF;EACA;;EAED,QAAIwkD,GAAJ,EAAS;;EAERP,gBAAWjkD,OAAX,GAAqB,CAArB;;;EAGAikD,gBAAWllD,SAAX,GAAuB,CAACklD,WAAWllD,SAAX,IAAwB,EAAzB,IAA+B,6BAAtD;EACA,KAND,MAMO;;EAENklD,gBAAWjkD,OAAX,GAAqB2kD,eAArB;EACA;;EAEDtI,UAAMvE,WAAN,GAAoB,IAApB;;;;;EAKA,SAAKzsD,IAAI,CAAT,EAAYA,IAAIi3D,aAAal3D,MAA7B,EAAqCC,GAArC,EAA0C;EACzC49B,SAAIq5B,aAAaj3D,CAAb,CAAJ;;EAEA84D,cAASx7D,IAAIy7D,kBAAJ,CAAuBrB,UAAU13D,CAAV,CAAvB,CAAT;;;EAGA64D,WAAM,IAAI1qD,EAAE6qD,QAAN,CAAe,CAACC,eAAD,EAAkBH,MAAlB,CAAf,EAA0CF,UAA1C,CAAN;EACAt7D,SAAI6e,QAAJ,CAAa08C,GAAb;EACAj7B,OAAE+6B,UAAF,GAAeE,GAAf;;;;EAIA,SAAIM,GAAJ,EAAS;EACRI,gBAAUV,IAAIW,KAAd;EACArB,kBAAYoB,QAAQE,cAAR,KAA2B,GAAvC,CAFQ;EAGRF,cAAQtoD,KAAR,CAAcyoD,eAAd,GAAgCvB,SAAhC,CAHQ;EAIRoB,cAAQtoD,KAAR,CAAc0oD,gBAAd,GAAiCxB,SAAjC;EACA;;;EAGD,SAAIv6B,EAAE86B,eAAN,EAAuB;EACtB96B,QAAE86B,eAAF,CAAkB,OAAlB,EADsB;EAEtB;EACD,SAAI96B,EAAE2zB,WAAN,EAAmB;EAClB3zB,QAAE2zB,WAAF;EACA;;;EAGD3I,QAAGzsC,QAAH,CAAYyhB,CAAZ;;EAEA,SAAIA,EAAEk0B,OAAN,EAAe;EACdl0B,QAAEk0B,OAAF,CAAUoH,YAAV;EACA;EACD;;EAEDlI,UAAMQ,YAAN;EACAR,UAAMd,eAAN;;;EAGA,SAAKlwD,IAAIi3D,aAAal3D,MAAb,GAAsB,CAA/B,EAAkCC,KAAK,CAAvC,EAA0CA,GAA1C,EAA+C;EAC9C84D,cAASx7D,IAAIy7D,kBAAJ,CAAuBrB,UAAU13D,CAAV,CAAvB,CAAT;EACA49B,SAAIq5B,aAAaj3D,CAAb,CAAJ;;;EAGA49B,OAAE66B,kBAAF,GAAuB76B,EAAE0qB,OAAzB;EACA1qB,OAAEq0B,SAAF,CAAY6G,MAAZ;;EAEA,SAAIl7B,EAAE6qB,WAAN,EAAmB;EAClB7qB,QAAE6qB,WAAF;EACA;;;EAGD,SAAI0Q,GAAJ,EAAS;EACRN,YAAMj7B,EAAE+6B,UAAR;EACAY,gBAAUV,IAAIW,KAAd;EACAD,cAAQtoD,KAAR,CAAc0oD,gBAAd,GAAiC,CAAjC;;EAEAd,UAAIzmD,QAAJ,CAAa,EAACuC,SAAS2kD,eAAV,EAAb;EACA;EACD;EACD,SAAKrhD,UAAL,CAAgB,GAAhB;;EAEA+4C,UAAMvE,WAAN,GAAoB,KAApB;;EAEAxjD,eAAW,YAAY;EACtB+nD,WAAMW,aAAN;EACAX,WAAM7J,IAAN,CAAW,YAAX,EAAyB;EACxBgG,eAAS0E,EADe;EAExB33C,eAAS+8C;EAFe,MAAzB;EAIA,KAND,EAMG,GANH;EAOA,IAzGsB;;EA2GvBe,yBAAsB,8BAAUD,WAAV,EAAuB;EAC5C,QAAIlG,KAAK,IAAT;EAAA,QACCb,QAAQ,KAAKpG,MADd;EAAA,QAECttD,MAAM0zD,MAAM5J,IAFb;EAAA,QAGCwB,KAAKoI,MAAMnL,aAHZ;EAAA,QAICqT,eAAenB,cAAcz6D,IAAIs8D,sBAAJ,CAA2B,KAAKtR,OAAhC,EAAyCyP,YAAYzkD,IAArD,EAA2DykD,YAAY3kD,MAAvE,CAAd,GAA+F9V,IAAIy0D,kBAAJ,CAAuB,KAAKzJ,OAA5B,CAJ/G;EAAA,QAKC2O,eAAe,KAAK3N,kBAAL,CAAwB,IAAxB,EAA8B,IAA9B,CALhB;EAAA,QAMC6P,MAAMhrD,EAAEirD,IAAF,CAAOC,GANd;EAAA,QAOCz7B,CAPD;EAAA,QAOI59B,CAPJ;EAAA,QAOO64D,GAPP;EAAA,QAOYU,OAPZ;EAAA,QAOqBpB,SAPrB;EAAA,QAOgC0B,aAPhC;;EASA7I,UAAMvE,WAAN,GAAoB,IAApB;EACAuE,UAAMd,eAAN;;;EAGA,SAAKj4C,UAAL,CAAgB,CAAhB;EACA,SAAKjY,IAAIi3D,aAAal3D,MAAb,GAAsB,CAA/B,EAAkCC,KAAK,CAAvC,EAA0CA,GAA1C,EAA+C;EAC9C49B,SAAIq5B,aAAaj3D,CAAb,CAAJ;;;EAGA,SAAI,CAAC49B,EAAE66B,kBAAP,EAA2B;EAC1B;EACA;;;EAGD76B,OAAEk8B,UAAF;;;EAGAl8B,OAAEq0B,SAAF,CAAYr0B,EAAE66B,kBAAd;EACA,YAAO76B,EAAE66B,kBAAT;;;EAGAoB,qBAAgB,IAAhB;EACA,SAAIj8B,EAAEk0B,OAAN,EAAe;EACdl0B,QAAEk0B,OAAF,CAAUoH,YAAV;EACAW,sBAAgB,KAAhB;EACA;EACD,SAAIj8B,EAAE2zB,WAAN,EAAmB;EAClB3zB,QAAE2zB,WAAF;EACAsI,sBAAgB,KAAhB;EACA;EACD,SAAIA,aAAJ,EAAmB;EAClBjR,SAAGT,WAAH,CAAevqB,CAAf;EACA;;;EAGD,SAAIu7B,GAAJ,EAAS;EACRN,YAAMj7B,EAAE+6B,UAAR;EACAY,gBAAUV,IAAIW,KAAd;EACArB,kBAAYoB,QAAQE,cAAR,KAA2B,GAAvC;EACAF,cAAQtoD,KAAR,CAAc0oD,gBAAd,GAAiCxB,SAAjC;EACAU,UAAIzmD,QAAJ,CAAa,EAACuC,SAAS,CAAV,EAAb;EACA;EACD;;EAEDq8C,UAAMvE,WAAN,GAAoB,KAApB;;EAEAxjD,eAAW,YAAY;;EAEtB,SAAI8wD,uBAAuB,CAA3B;EACA,UAAK/5D,IAAIi3D,aAAal3D,MAAb,GAAsB,CAA/B,EAAkCC,KAAK,CAAvC,EAA0CA,GAA1C,EAA+C;EAC9C49B,UAAIq5B,aAAaj3D,CAAb,CAAJ;EACA,UAAI49B,EAAE+6B,UAAN,EAAkB;EACjBoB;EACA;EACD;;EAGD,UAAK/5D,IAAIi3D,aAAal3D,MAAb,GAAsB,CAA/B,EAAkCC,KAAK,CAAvC,EAA0CA,GAA1C,EAA+C;EAC9C49B,UAAIq5B,aAAaj3D,CAAb,CAAJ;;EAEA,UAAI,CAAC49B,EAAE+6B,UAAP,EAAmB;;EAClB;EACA;;EAED,UAAI/6B,EAAE6qB,WAAN,EAAmB;EAClB7qB,SAAE6qB,WAAF;EACA;EACD,UAAI7qB,EAAE86B,eAAN,EAAuB;EACtB96B,SAAE86B,eAAF,CAAkB,CAAlB;EACA;;EAED,UAAIqB,uBAAuB,CAA3B,EAA8B;EAC7BnR,UAAGT,WAAH,CAAevqB,CAAf;EACA;;EAEDtgC,UAAI6qD,WAAJ,CAAgBvqB,EAAE+6B,UAAlB;EACA,aAAO/6B,EAAE+6B,UAAT;EACA;EACD3H,WAAMW,aAAN;EACAX,WAAM7J,IAAN,CAAW,cAAX,EAA2B;EAC1BgG,eAAS0E,EADiB;EAE1B33C,eAAS+8C;EAFiB,MAA3B;EAIA,KArCD,EAqCG,GArCH;EAsCA;EAzMsB,GAAxB;;EA6MA9oD,IAAEi2C,kBAAF,CAAqB6M,OAArB,CAA6B;;EAE5BxC,gBAAa,IAFe;;EAI5BqJ,eAAY,sBAAY;EACvB,SAAKxQ,WAAL,CAAiBhqC,KAAjB,CAAuB,IAAvB,EAA6BjN,SAA7B;EACA,IAN2B;;EAQ5Bs7C,qBAAkB,4BAAY;EAC7B,SAAKvE,IAAL,CAAUvzC,EAAV,CAAa,OAAb,EAAsB,KAAKmmD,kBAA3B,EAA+C,IAA/C;;EAEA,QAAI,KAAK5S,IAAL,CAAUplD,OAAV,CAAkBi4D,aAAtB,EAAqC;EACpC,UAAK7S,IAAL,CAAUvzC,EAAV,CAAa,WAAb,EAA0B,KAAKqmD,oBAA/B,EAAqD,IAArD;EACA;;EAED,SAAK9S,IAAL,CAAUvzC,EAAV,CAAa,SAAb,EAAwB,KAAKk2C,sBAA7B,EAAqD,IAArD;;EAEA,QAAI,CAAC57C,EAAEmiD,OAAF,CAAU6J,KAAf,EAAsB;EACrB,UAAK/S,IAAL,CAAUgT,WAAV,CAAsB,IAAtB;;;;EAIA;EACD,IAvB2B;;EAyB5BrO,wBAAqB,+BAAY;EAChC,SAAK3E,IAAL,CAAUhqC,GAAV,CAAc,OAAd,EAAuB,KAAK48C,kBAA5B,EAAgD,IAAhD;EACA,SAAK5S,IAAL,CAAUhqC,GAAV,CAAc,WAAd,EAA2B,KAAK88C,oBAAhC,EAAsD,IAAtD;EACA,SAAK9S,IAAL,CAAUhqC,GAAV,CAAc,UAAd,EAA0B,KAAKi9C,mBAA/B,EAAoD,IAApD;EACA,SAAKjT,IAAL,CAAUhqC,GAAV,CAAc,SAAd,EAAyB,KAAK2sC,sBAA9B,EAAsD,IAAtD;;;;EAIA,SAAKA,sBAAL;EACA,IAlC2B;;;;EAsC5BmQ,yBAAsB,gCAAY;EACjC,QAAI,CAAC,KAAK9S,IAAV,EAAgB;;EACf;EACA;;EAED,SAAKA,IAAL,CAAUvzC,EAAV,CAAa,UAAb,EAAyB,KAAKwmD,mBAA9B,EAAmD,IAAnD;EACA,IA5C2B;;EA8C5BA,wBAAqB,6BAAUtC,WAAV,EAAuB;;EAE3C,QAAI5pD,EAAEwM,OAAF,CAAU2/C,QAAV,CAAmB,KAAKlT,IAAL,CAAU0E,QAA7B,EAAuC,kBAAvC,CAAJ,EAAgE;EAC/D;EACA;;EAED,SAAK1E,IAAL,CAAUhqC,GAAV,CAAc,UAAd,EAA0B,KAAKi9C,mBAA/B,EAAoD,IAApD;EACA,SAAK/S,WAAL,CAAiByQ,WAAjB;EACA,IAtD2B;;EAwD5BiC,uBAAoB,8BAAY;;EAE/B,SAAK1S,WAAL;EACA,IA3D2B;;EA6D5BA,gBAAa,qBAAUyQ,WAAV,EAAuB;EACnC,QAAI,KAAKtJ,WAAT,EAAsB;EACrB,UAAKA,WAAL,CAAiBqJ,UAAjB,CAA4BC,WAA5B;EACA;EACD,IAjE2B;;EAmE5BhO,2BAAwB,kCAAY;EACnC,QAAI,KAAK0E,WAAT,EAAsB;EACrB,UAAKA,WAAL,CAAiB1E,sBAAjB;EACA;EACD,IAvE2B;;;EA0E5BxB,qBAAkB,0BAAU/3C,KAAV,EAAiB;EAClC,QAAIA,MAAMmoD,UAAV,EAAsB;EACrB,UAAK9S,aAAL,CAAmBsC,WAAnB,CAA+B33C,KAA/B;;EAEA,SAAIA,MAAMi4C,WAAV,EAAuB;EACtBj4C,YAAMi4C,WAAN;EACA;;EAED,SAAIj4C,MAAMkoD,eAAV,EAA2B;EAC1BloD,YAAMkoD,eAAN,CAAsB,CAAtB;EACA;;EAED,UAAKtR,IAAL,CAAUe,WAAV,CAAsB33C,MAAMmoD,UAA5B;EACA,YAAOnoD,MAAMmoD,UAAb;EACA;EACD;EAzF2B,GAA7B;;;;;;;;;EAoGAxqD,IAAEi2C,kBAAF,CAAqB6M,OAArB,CAA6B;;;;;;;;;EAS5BsJ,oBAAiB,yBAAUpvD,MAAV,EAAkB;EAClC,QAAI,CAACA,MAAL,EAAa;EACZA,cAAS,KAAKs8C,gBAAL,CAAsB6B,kBAAtB,EAAT;EACA,KAFD,MAEO,IAAIn+C,kBAAkBgD,EAAEi2C,kBAAxB,EAA4C;EAClDj5C,cAASA,OAAOs8C,gBAAP,CAAwB6B,kBAAxB,EAAT;EACA,KAFM,MAEA,IAAIn+C,kBAAkBgD,EAAE64C,UAAxB,EAAoC;EAC1C77C,cAASA,OAAOqvD,OAAhB;EACA,KAFM,MAEA,IAAIrvD,kBAAkBgD,EAAE24C,aAAxB,EAAuC;EAC7C37C,cAASA,OAAOm+C,kBAAP,EAAT;EACA,KAFM,MAEA,IAAIn+C,kBAAkBgD,EAAEoK,MAAxB,EAAgC;EACtCpN,cAAS,CAACA,MAAD,CAAT;EACA,KAXiC;EAYlC,SAAKsvD,2BAAL,CAAiCtvD,MAAjC;EACA,SAAKw8C,qBAAL;;;EAGA,QAAI,KAAK3lD,OAAL,CAAa8iD,gBAAjB,EAAmC;EAClC,UAAK4V,+BAAL,CAAqCvvD,MAArC;EACA;;EAED,WAAO,IAAP;EACA,IA9B2B;;;;;;;EAqC5BsvD,gCAA6B,qCAAUtvD,MAAV,EAAkB;EAC9C,QAAIkK,EAAJ,EAAQuhB,MAAR;;;EAGA,SAAKvhB,EAAL,IAAWlK,MAAX,EAAmB;;;;;;EAMlByrB,cAASzrB,OAAOkK,EAAP,EAAW0yC,QAApB;EACA,YAAOnxB,MAAP,EAAe;EACdA,aAAO82B,gBAAP,GAA0B,IAA1B;EACA92B,eAASA,OAAOmxB,QAAhB;EACA;EACD;EACD,IArD2B;;;;;;;;EA6D5B2S,oCAAiC,yCAAUvvD,MAAV,EAAkB;EAClD,QAAIkK,EAAJ,EAAQ7E,KAAR;;EAEA,SAAK6E,EAAL,IAAWlK,MAAX,EAAmB;EAClBqF,aAAQrF,OAAOkK,EAAP,CAAR;;;EAGA,SAAI,KAAKgyC,QAAL,CAAc72C,KAAd,CAAJ,EAA0B;;EAEzBA,YAAMoiD,OAAN,CAAc,KAAKxD,mBAAL,CAAyB5+C,KAAzB,CAAd;EACA;EACD;EACD;EAzE2B,GAA7B;;EA4EArC,IAAEoK,MAAF,CAAS04C,OAAT,CAAiB;;;;;;;;EAQhB0J,uBAAoB,4BAAU34D,OAAV,EAAmB44D,uBAAnB,EAA4C;EAC/D,QAAI/rD,OAAO,KAAK7M,OAAL,CAAa6M,IAAxB;;EAEAV,MAAEwN,UAAF,CAAa9M,IAAb,EAAmB7M,OAAnB;;EAEA,SAAK4wD,OAAL,CAAa/jD,IAAb;;;;;;EAMA,QAAI+rD,2BAA2B,KAAK7S,QAApC,EAA8C;EAC7C,UAAKA,QAAL,CAAc6C,MAAd,CAAqB2P,eAArB,CAAqC,IAArC;EACA;;EAED,WAAO,IAAP;EACA;EAxBe,GAAjB;;EA2BA3vD,UAAQw5C,kBAAR,GAA6BA,kBAA7B;EACAx5C,UAAQk8C,aAAR,GAAwBA,aAAxB;;EAEA5qD,SAAOqL,cAAP,CAAsBqD,OAAtB,EAA+B,YAA/B,EAA6C,EAAEhO,OAAO,IAAT,EAA7C;EAEA,EAtpFA,CAAD;EAupFA;;;;;;EC7pFA,MAAIi+D,YAAYC,cAAA,GAAiB,UAAS9wC,KAAT,EAAe;EAC9C,QAAI,CAACA,KAAL,EAAYA,QAAQ,EAAR;;EAEZA,UAAM/M,KAAN,GAAc,EAAd;EACA+M,UAAM9M,OAAN,GAAgB,KAAhB;EACA8M,UAAM7M,QAAN,GAAiB,EAAjB;;;;;;;EAOA6M,UAAMnW,EAAN,GAAW,UAASvX,IAAT,EAAey+D,EAAf,EAAkB;EAC3B/wC,YAAM/M,KAAN,CAAY3gB,IAAZ,IAAoB0tB,MAAM/M,KAAN,CAAY3gB,IAAZ,KAAqB,EAAzC;EACA0tB,YAAM/M,KAAN,CAAY3gB,IAAZ,EAAkB+B,IAAlB,CAAuB08D,EAAvB;EACD,KAHD;;;;;;;EAUA/wC,UAAM5M,GAAN,GAAY,UAAS9gB,IAAT,EAAey+D,EAAf,EAAkB;EAC5B,UAAI,CAAC/wC,MAAM/M,KAAN,CAAY3gB,IAAZ,CAAL,EAAwB;EACxB,WAAK,IAAI0D,CAAT,IAAcgqB,MAAM/M,KAAN,CAAY3gB,IAAZ,CAAd,EAAgC;EAC9B,YAAI0tB,MAAM/M,KAAN,CAAY3gB,IAAZ,EAAkB0D,CAAlB,MAAyB+6D,EAA7B,EAAgC;EAC9B/wC,gBAAM/M,KAAN,CAAY3gB,IAAZ,EAAkB+gB,MAAlB,CAAyBrd,CAAzB;EACA;EACD;EACF;EACF,KARD;;;;;;;EAeAgqB,UAAMnR,IAAN,GAAa,UAASvc,IAAT,EAAc;EACzB,UAAI,CAAC0tB,MAAM/M,KAAN,CAAY3gB,IAAZ,CAAL,EAAwB;;EAExB,UAAI6K,OAAO1J,MAAM7B,SAAN,CAAgBwE,KAAhB,CAAsBhE,IAAtB,CAA2BiU,SAA3B,EAAsC,CAAtC,CAAX;;EAEA,UAAI2Z,MAAM9M,OAAV,EAAmB;EACjB8M,cAAM7M,QAAN,CAAe7gB,IAAf,IAAuB0tB,MAAM7M,QAAN,CAAe7gB,IAAf,KAAwB,EAA/C;EACA0tB,cAAM7M,QAAN,CAAe7gB,IAAf,EAAqB+B,IAArB,CAA0B8I,IAA1B;EACA;EACD;;EAED,WAAK,IAAInH,CAAT,IAAcgqB,MAAM/M,KAAN,CAAY3gB,IAAZ,CAAd,EAAgC;EAC9B0tB,cAAM/M,KAAN,CAAY3gB,IAAZ,EAAkB0D,CAAlB,EAAqBsd,KAArB,CAA2B0M,KAA3B,EAAkC7iB,IAAlC;EACD;EACF,KAdD;;EAgBA6iB,UAAMlgB,KAAN,GAAc,YAAW;EACvBkgB,YAAM9M,OAAN,GAAgB,IAAhB;EACD,KAFD;;EAIA8M,UAAMjgB,MAAN,GAAe,YAAW;EACxBigB,YAAM9M,OAAN,GAAgB,KAAhB;;EAEA,WAAK,IAAI5gB,IAAT,IAAiB0tB,MAAM7M,QAAvB,EAAiC;EAC/B,aAAK,IAAInd,IAAI,CAAb,EAAgBA,IAAIgqB,MAAM7M,QAAN,CAAe7gB,IAAf,EAAqByD,MAAzC,EAAiDC,GAAjD,EAAsD;EACpDgqB,gBAAMnR,IAAN,CAAWvc,IAAX,EAAiB0tB,MAAM7M,QAAN,CAAe7gB,IAAf,EAAqB0D,CAArB,CAAjB;EACD;EACF;EACF,KARD;;EAUA,WAAOgqB,KAAP;EACD,GApED;;;;;;sECqFA;EAAA;EAAA;EAAA;EAAA;EAAA;EACQ1W,gBADR,GACe,KAAKhW,GAAL,CAAS4V,OAAT,EADf;EAEM/H,kBAFN,GAEe,KAAK6vD,aAAL,CAAmBxQ,SAAnB,EAFf;;EAAA,kBAGMl3C,OAAO,EAHb;EAAA;EAAA;EAAA;;EAIU42C,kBAJV,GAImB,KAAK5sD,GAAL,CAASmS,SAAT,EAJnB;EAAA;EAAA,mBAKuB3U,MAAMmgE,aAAa/Q,MAAb,CAAN,EAA4B/oD,IAA5B,CAAiC;EAAA,qBAAOwgD,IAAIrgD,IAAJ,EAAP;EAAA,aAAjC,CALvB;;EAAA;EAKU6H,gBALV;;EAMIgC,mBAAO5N,OAAP,CAAe;EAAA,qBAAO29D,IAAIjxD,MAAJ,EAAP;EAAA,aAAf;EACA,iBAAK+wD,aAAL,CAAmBpR,WAAnB;EACA,iBAAKoR,aAAL,CAAmBG,OAAnB,CAA2BhyD,IAA3B;EACAiyD,gBAAIC,SAAJ,CAAcC,YAAd;EATJ;EAAA;;EAAA;EAWInwD,mBAAO5N,OAAP,CAAe;EAAA,qBAAO29D,IAAIjxD,MAAJ,EAAP;EAAA,aAAf;EACA,iBAAK+wD,aAAL,CAAmBpR,WAAnB;;EAZJ;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;;oBAAe2R;;;;;;uEAgBf,kBAA0Cja,KAA1C,EAAiDkC,OAAjD;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA,mBACuBF,gBAAgBhC,KAAhB,EAAuB8Z,GAAvB,CADvB;;EAAA;EACQn8D,kBADR;;EAEEA,mBAAOuI,MAAP,GAAgBg8C,OAAhB;EAFF,8CAGSvkD,MAHT;;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;;oBAAeu8D;;;;EA/Ff;EACA,IAAMC,MAAM,mOAAZ;EACA,IAAML,MAAM,EAAZ;AACAp+C,cAAUo+C,GAAV;;EAGA,SAASM,aAAT,GAAyB;EACvB,MAAIV,gBAAgB7sD,EAAEwtD,OAAF,CAAU,IAAV,EAAgB;EAClC1qD,WAAO2qD,yBAD2B;EAElCC,mBAAeC;;EAFmB,GAAhB,CAApB;EAKA,SAAOd,aAAP;EACD;;EAED,IAAMY,4BAA4B;EAChC,WAAS,MADuB;EAEhC,YAAU,CAFsB;EAGhC,aAAW,CAHqB;EAIhC,iBAAe;EAJiB,CAAlC;;EAOA,IAAMG,0BAA0B;EAC9B,WAAS,MADqB;EAE9B,YAAU,CAFoB;EAG9B,aAAW,CAHmB;EAI9B,iBAAe,CAJe;EAK9B,eAAa;EALiB,CAAhC;;EAQA,IAAMC,wBAAwB;EAC5B,WAAS,SADmB;EAE5B,YAAU,CAFkB;EAG5B,aAAW,CAHiB;EAI5B,iBAAe,GAJa;EAK5B,eAAa;EALe,CAA9B;;EAQA,IAAMC,sBAAsB;EAC1B,WAAS,SADiB;EAE1B,YAAU,CAFgB;EAG1B,aAAW,CAHe;EAI1B,iBAAe,GAJW;EAK1B,eAAa;EALa,CAA5B;;EAQA,SAASC,cAAT,GAA0B;EACxB,MAAIb,YAAYltD,EAAEwtD,OAAF,CAAU,IAAV,EAAgB;EAC9B1qD,WAAO+qD,qBADuB;EAE9BH,mBAAeM;EAFe,GAAhB,CAAhB;EAIA,SAAOd,SAAP;EACD;;EAED,SAASc,aAAT,CAAuB3Y,OAAvB,EAAgChzC,KAAhC,EAAuC;EACrCA,QAAMqD,EAAN,CAAS,WAAT,EAAsB;EAAA,WAAMrD,MAAM4B,QAAN,CAAe6pD,mBAAf,CAAN;EAAA,GAAtB;EACAzrD,QAAMqD,EAAN,CAAS,UAAT,EAAqB;EAAA,WAAMrD,MAAM4B,QAAN,CAAe4pD,qBAAf,CAAN;EAAA,GAArB;EACAxrD,QAAMqD,EAAN,CAAS,OAAT,EAAkB,aAAK;EACrBxY,MAAE0yD,aAAF,CAAgB3uC,cAAhB;EACAg8C,QAAIgB,KAAJ,CAAUC,aAAV,CAAwB7Y,OAAxB,EAAiChzC,KAAjC;EACD,GAHD;EAID;;EAED,SAASsrD,iBAAT,CAA2BtY,OAA3B,EAAoChzC,KAApC,EAA2C;EACzCA,QAAMqD,EAAN,CAAS,WAAT,EAAsB;EAAA,WAAMrD,MAAM4B,QAAN,CAAe2pD,uBAAf,CAAN;EAAA,GAAtB;EACAvrD,QAAMqD,EAAN,CAAS,UAAT,EAAqB;EAAA,WAAMrD,MAAM4B,QAAN,CAAewpD,yBAAf,CAAN;EAAA,GAArB;EACAprD,QAAMqD,EAAN,CAAS,OAAT,EAAkB,aAAK;EACrBxY,MAAE0yD,aAAF,CAAgB3uC,cAAhB;EACAg8C,QAAIgB,KAAJ,CAAUE,UAAV,CAAqB9Y,OAArB,EAA8BnoD,CAA9B;EACD,GAHD;EAID;;EAED,SAAS4/D,YAAT,CAAsB/Q,MAAtB,EAA8B;EAC5B,MAAM/zB,KAAK,EAAC1f,GAAGyzC,OAAO4G,UAAP,CAAkB3gD,GAAtB,EAA2BuG,GAAGwzC,OAAO4G,UAAP,CAAkB5gD,GAAhD,EAAX;EACA,MAAMqsD,KAAK,EAAC9lD,GAAGyzC,OAAO0G,UAAP,CAAkBzgD,GAAtB,EAA2BuG,GAAGwzC,OAAO0G,UAAP,CAAkB1gD,GAAhD,EAAX;EACA,SAAUurD,GAAV,cAAsBtlC,GAAG1f,CAAzB,SAA8B0f,GAAGzf,CAAjC,SAAsC6lD,GAAG9lD,CAAzC,SAA8C8lD,GAAG7lD,CAAjD;EACD;;EA4BD0kD,IAAIgB,KAAJ,GAAY;EACVA,SAAO,EADG;EAEVl0D,SAAOqC;EAAA,uEAAM,kBAAOxB,GAAP,EAAY7L,IAAZ;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA,oBACP6L,IAAI9H,IAAJ,KAAa,KADN;EAAA;EAAA;EAAA;;EAETm6D,kBAAIC,SAAJ,CAAcF,OAAd,CAAsBpyD,IAAIy6C,OAA1B;EAFS;EAAA,qBAGYgY,2BAA2B,EAAChiD,QAAQzQ,IAAI1N,CAAJ,CAAMme,MAAf,EAA3B,EAAmDzQ,IAAIy6C,OAAvD,CAHZ;;EAAA;EAGHvkD,oBAHG;;EAITm8D,kBAAIgB,KAAJ,CAAUA,KAAV,CAAgB/9D,IAAhB,CAAqBY,MAArB;EACAm8D,kBAAIviD,IAAJ,CAAS,SAAT,EAAmB,EAACvG,UAAU8oD,IAAIgB,KAAJ,CAAUA,KAArB,EAA4Bn7D,MAAM,OAAlC,EAA2Cu7D,OAAOv9D,MAAlD,EAAnB;EACA/B,mBAAK,IAAL,EAAW,OAAX;EANS;EAAA;;EAAA;EAOJ,kBAAI6L,IAAI9H,IAAJ,KAAa,QAAjB,EAA2B;EAC1Bw7D,mBAD0B,GACpBrB,IAAIgB,KAAJ,CAAUA,KAAV,CAAgB/6C,SAAhB,CAA0B;EAAA,yBAAQ8I,KAAK3iB,MAAL,CAAY6N,EAAZ,KAAmBtM,IAAIy6C,OAAJ,CAAYG,UAAZ,CAAuBtuC,EAAlD;EAAA,iBAA1B,CADoB;EAE1B6/C,uBAF0B,GAEhBkG,IAAIgB,KAAJ,CAAUA,KAAV,CAAgBK,GAAhB,CAFgB;;EAGhCrB,oBAAIgB,KAAJ,CAAUA,KAAV,CAAgB/+C,MAAhB,CAAuBo/C,GAAvB,EAA4B,CAA5B;EACArB,oBAAIC,SAAJ,CAAclT,WAAd,CAA0Bp/C,IAAIyH,KAA9B;EACA4qD,oBAAIviD,IAAJ,CAAS,SAAT,EAAoB,EAACvG,UAAU8oD,IAAIgB,KAAJ,CAAUA,KAArB,EAA4Bn7D,MAAM,SAAlC,EAA6Ci0D,SAASA,OAAtD,EAApB;EACAh4D,qBAAK,IAAL,EAAW,SAAX;EACD;;EAdU;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA,KAAN;;EAAA;EAAA;EAAA;EAAA,MAFG;EAmBVo/D;EAAA,uEAAY,kBAAe9Y,OAAf,EAAwBnoD,CAAxB;EAAA;EAAA;EAAA;EAAA;EACV,mBAAK6M,KAAL,CAAW7J,IAAX,CAAgB,EAAC4C,MAAM,KAAP,EAAcuiD,SAASA,OAAvB,EAAgCnoD,GAAGA,CAAnC,EAAhB;;EADU;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA,KAAZ;;EAAA;EAAA;EAAA;;EAAA;EAAA,KAnBU;EAsBVghE,iBAAe,uBAAS7Y,OAAT,EAAkBhzC,KAAlB,EAAyB;EACtC,SAAKtI,KAAL,CAAW7J,IAAX,CAAgB,EAAC4C,MAAM,QAAP,EAAiBuiD,SAASA,OAA1B,EAAmChzC,OAAOA,KAA1C,EAAhB;EACD,GAxBS;EAyBVksD,YAAU,oBAAW;EACnB,WAAO,KAAKN,KAAZ;EACD;EA3BS,CAAZ;;EAgCAhB,IAAI55C,SAAJ;EAAA,qEAAgB,kBAAejE,MAAf;EAAA;;EAAA;EAAA;EAAA;EAAA;EAAA;EACVjgB,eADU,GACJ+e,OAAOmF,SAAP,CAAiBjE,MAAjB,CADI;;EAEd,iBAAKjgB,GAAL,GAAWA,GAAX;EACI09D,yBAHU,GAGMU,eAHN;;EAId,iBAAKV,aAAL,GAAqBA,aAArB;;EAEA;EACA19D,gBAAIuW,EAAJ,CAAO,UAAP,EAAmB0nD,SAAnB,EAA8B,IAA9B;EACAP,0BAAcvhD,KAAd,CAAoBnc,GAApB;EACAA,gBAAI8f,GAAJ,CAAQ,UAAR,EAAoBm+C,SAApB,EAA+B,IAA/B;;EAEAj+D,gBAAIuW,EAAJ,CAAO,SAAP,EAAkB0nD,SAAlB,EAA6B,IAA7B;;EAEAP,0BAAcnnD,EAAd,CAAiB,QAAjB,EAA2B,YAAM;EAC/BvW,kBAAI8f,GAAJ,CAAQ,SAAR,EAAmBm+C,SAAnB,EAA8B,MAA9B;EACD,aAFD;;EAIAH,gBAAIC,SAAJ,GAAgBa,gBAAhB;EACAd,gBAAIC,SAAJ,CAAc5hD,KAAd,CAAoBnc,GAApB;;EAEA,gBAAI,OAAOigB,OAAOo/C,UAAd,KAA6B,UAAjC,EAA6C;EAC3CvB,kBAAIvnD,EAAJ,CAAO,SAAP,EAAkB,gBAAQ;EACxB0J,uBAAOo/C,UAAP,CAAkBxzD,KAAKmJ,QAAvB;EACD,eAFD;EAGD,aAJD,MAIO,IAAI7U,MAAMC,OAAN,CAAc6f,OAAOo/C,UAArB,CAAJ,EAAsC;EAC3Cp/C,qBAAOo/C,UAAP,CAAkBp/D,OAAlB,CAA0B,UAAC+J,CAAD,EAAM;EAC9B,oBAAI,OAAOA,CAAP,KAAa,UAAjB,EAA6B;EAC3B8zD,sBAAIvnD,EAAJ,CAAO,SAAP,EAAkB,gBAAQ;EACxBvM,sBAAE6B,KAAKmJ,QAAP;EACD,mBAFD;EAGD;EACF,eAND;EAOD;;EAhCa,8CAkCPhV,GAlCO;;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA,GAAhB;;EAAA;EAAA;EAAA;EAAA;;EAqCA,IAAMs/D,cAAcxB,GAApB;;;;;;;;"}