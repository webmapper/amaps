{"version":3,"file":"pointquery.iife.js","sources":["../../node_modules/whatwg-fetch/fetch.js","../../nlmaps/dist/nlmaps.es.js","../../node_modules/proj4/lib/global.js","../../node_modules/proj4/lib/constants/values.js","../../node_modules/proj4/lib/constants/PrimeMeridian.js","../../node_modules/proj4/lib/constants/units.js","../../node_modules/proj4/lib/match.js","../../node_modules/proj4/lib/projString.js","../../node_modules/wkt-parser/parser.js","../../node_modules/wkt-parser/process.js","../../node_modules/wkt-parser/index.js","../../node_modules/proj4/lib/defs.js","../../node_modules/proj4/lib/parseCode.js","../../node_modules/proj4/lib/extend.js","../../node_modules/proj4/lib/common/msfnz.js","../../node_modules/proj4/lib/common/sign.js","../../node_modules/proj4/lib/common/adjust_lon.js","../../node_modules/proj4/lib/common/tsfnz.js","../../node_modules/proj4/lib/common/phi2z.js","../../node_modules/proj4/lib/projections/merc.js","../../node_modules/proj4/lib/projections/longlat.js","../../node_modules/proj4/lib/projections.js","../../node_modules/proj4/lib/constants/Ellipsoid.js","../../node_modules/proj4/lib/deriveConstants.js","../../node_modules/proj4/lib/constants/Datum.js","../../node_modules/proj4/lib/datum.js","../../node_modules/proj4/lib/nadgrid.js","../../node_modules/proj4/lib/Proj.js","../../node_modules/proj4/lib/datumUtils.js","../../node_modules/proj4/lib/datum_transform.js","../../node_modules/proj4/lib/adjust_axis.js","../../node_modules/proj4/lib/common/toPoint.js","../../node_modules/proj4/lib/checkSanity.js","../../node_modules/proj4/lib/transform.js","../../node_modules/proj4/lib/core.js","../../node_modules/mgrs/mgrs.js","../../node_modules/proj4/lib/Point.js","../../node_modules/proj4/lib/common/pj_enfn.js","../../node_modules/proj4/lib/common/pj_mlfn.js","../../node_modules/proj4/lib/common/pj_inv_mlfn.js","../../node_modules/proj4/lib/projections/tmerc.js","../../node_modules/proj4/lib/common/sinh.js","../../node_modules/proj4/lib/common/hypot.js","../../node_modules/proj4/lib/common/log1py.js","../../node_modules/proj4/lib/common/asinhy.js","../../node_modules/proj4/lib/common/gatg.js","../../node_modules/proj4/lib/common/clens.js","../../node_modules/proj4/lib/common/cosh.js","../../node_modules/proj4/lib/common/clens_cmplx.js","../../node_modules/proj4/lib/projections/etmerc.js","../../node_modules/proj4/lib/common/adjust_zone.js","../../node_modules/proj4/lib/projections/utm.js","../../node_modules/proj4/lib/common/srat.js","../../node_modules/proj4/lib/projections/gauss.js","../../node_modules/proj4/lib/projections/sterea.js","../../node_modules/proj4/lib/projections/stere.js","../../node_modules/proj4/lib/projections/somerc.js","../../node_modules/proj4/lib/projections/omerc.js","../../node_modules/proj4/lib/projections/lcc.js","../../node_modules/proj4/lib/projections/krovak.js","../../node_modules/proj4/lib/common/mlfn.js","../../node_modules/proj4/lib/common/e0fn.js","../../node_modules/proj4/lib/common/e1fn.js","../../node_modules/proj4/lib/common/e2fn.js","../../node_modules/proj4/lib/common/e3fn.js","../../node_modules/proj4/lib/common/gN.js","../../node_modules/proj4/lib/common/adjust_lat.js","../../node_modules/proj4/lib/common/imlfn.js","../../node_modules/proj4/lib/projections/cass.js","../../node_modules/proj4/lib/common/qsfnz.js","../../node_modules/proj4/lib/projections/laea.js","../../node_modules/proj4/lib/common/asinz.js","../../node_modules/proj4/lib/projections/aea.js","../../node_modules/proj4/lib/projections/gnom.js","../../node_modules/proj4/lib/common/iqsfnz.js","../../node_modules/proj4/lib/projections/cea.js","../../node_modules/proj4/lib/projections/eqc.js","../../node_modules/proj4/lib/projections/poly.js","../../node_modules/proj4/lib/projections/nzmg.js","../../node_modules/proj4/lib/projections/mill.js","../../node_modules/proj4/lib/projections/sinu.js","../../node_modules/proj4/lib/projections/moll.js","../../node_modules/proj4/lib/projections/eqdc.js","../../node_modules/proj4/lib/projections/vandg.js","../../node_modules/proj4/lib/projections/aeqd.js","../../node_modules/proj4/lib/projections/ortho.js","../../node_modules/proj4/lib/projections/qsc.js","../../node_modules/proj4/lib/projections/robin.js","../../node_modules/proj4/lib/projections/geocent.js","../../node_modules/proj4/lib/projections/tpers.js","../../node_modules/proj4/lib/projections/geos.js","../../node_modules/proj4/projs.js","../../node_modules/proj4/lib/index.js","../../src/lib.js","../../node_modules/leaflet.markercluster/dist/leaflet.markercluster-src.js","../../node_modules/emitonoff/index.js","../../src/pointquery.js"],"sourcesContent":["(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","function createCommonjsModule(e,o){return o={exports:{}},e(o,o.exports),o.exports}function err(e){throw e}function mergeConfig(e,o){return _extends({},e,o)}function parseBase(e){var o=mergeConfig(CONFIG.BASE_DEFAULTS,e.defaults);(!e.layers||e.layers.length<0)&&err(\"no basemap defined, please define a basemap in the configuration\"),e.layers.forEach(function(e){e.name&&void 0===CONFIG.BASEMAP_PROVIDERS[e.name]||err(\"basemap names need to be defined and unique: \"+e.name),CONFIG.BASEMAP_PROVIDERS[e.name]=formatBasemapUrl(mergeConfig(o,e))})}function parseWMS(e){var o=mergeConfig(CONFIG.WMS_DEFAULTS,e.defaults);e.layers&&e.layers.forEach(function(e){e.name&&void 0===CONFIG.WMS_PROVIDERS[e.name]||err(\"wms names need to be defined and unique: \"+e.name),CONFIG.WMS_PROVIDERS[e.name]=applyTemplate(mergeConfig(o,e))})}function parseGeocoder(e){CONFIG.GEOCODER.lookupUrl=e.lookupUrl,CONFIG.GEOCODER.suggestUrl=e.suggestUrl,CONFIG.GEOCODER.placeholder=e.placeholder}function parseMap(e){CONFIG.MAP=mergeConfig(CONFIG.MAP,e)}function formatBasemapUrl(e){switch(e.type){case\"wmts\":e.url=e.url+\"/\"+e.type+\"/\"+e.layerName+\"/\"+e.crs+\"/{z}/{x}/{y}.\"+e.format;break;case\"tms\":e.url=e.url+\"/\"+e.layerName+\"/{z}/{x}/{y}.\"+e.format;break;default:e.url=e.url+\"/\"+e.type+\"/\"+e.layerName+\"/\"+e.crs+\"/{z}/{x}/{y}.\"+e.format}return e}function applyTemplate(e){var o=e.url.indexOf(\"{\");if(o>-1){var t=e.url.indexOf(\"}\");\"workspacename\"===e.url.slice(o+1,t).toLowerCase()?e.url=e.url.slice(0,o)+e.workSpaceName+e.url.slice(t+1,-1):err(\"only workspacename templates are supported for now\")}return e}function parseFeatureQuery(e){CONFIG.FEATUREQUERYBASEURL=e}function parseClasses(e){CONFIG.CLASSNAMES=mergeConfig(CONFIG.CLASSNAMES,e)}function parseMarker(e){CONFIG.MARKER=e}function httpGetAsync(e){return new Promise(function(o,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&o(JSON.parse(r.responseText))},r.open(\"GET\",e,!0),r.send(null)})}function wktPointToGeoJson(e){if(!e.includes(\"POINT\"))throw TypeError(\"Provided WKT geometry is not a point.\");var o=e.split(\"(\")[1].split(\")\")[0];return{type:\"Point\",coordinates:[parseFloat(o.split(\" \")[0]),parseFloat(o.split(\" \")[1])]}}function parseClasses$1(e,o){o.forEach(function(o){e.classList.add(o)})}function getMarker(){return CONFIG.MARKER}function getExtent(){return CONFIG.MAP.extent}function getProvider(e){if(e in CONFIG.BASEMAP_PROVIDERS){var o=CONFIG.BASEMAP_PROVIDERS[e];return o.deprecated&&console&&console.warn&&console.warn(e+\" is a deprecated style; it will be redirected to its replacement. For performance improvements, please change your reference.\"),o}console.error(\"NL Maps error: You asked for a style which does not exist! Available styles: \"+Object.keys(PROVIDERS).join(\", \"))}function getWmsProvider(e,o){var t=void 0;return e in CONFIG.WMS_PROVIDERS?(t=CONFIG.WMS_PROVIDERS[e]).deprecated&&console&&console.warn&&console.warn(e+\" is a deprecated wms; it will be redirected to its replacement. For performance improvements, please change your reference.\"):(t=_extends({},CONFIG.WMS_DEFAULTS,o),console.log(\"NL Maps: You asked for a wms which does not exist! Available wmses: \"+Object.keys(CONFIG.WMS_PROVIDERS).join(\", \")+\". Provide an options object to make your own WMS.\")),t}function mapPointerStyle(e){e._container.classList.add(\"nlmaps-marker-cursor\")}function extentLeafletFormat(){var e=getExtent(),o=L.latLng(e[0],e[1]),t=L.latLng(e[2],e[3]);return L.latLngBounds(o,t)}function markerLayer(e){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L))){var o=void 0,t=void 0;if(void 0===e){var r=getMapCenter(map);o=r.latitude,t=r.longitude}else o=e.latitude,t=e.longitude;return new L.marker([o,t],{alt:\"marker\",icon:new L.icon({iconUrl:getMarker().url,iconSize:getMarker().iconSize,iconAnchor:getMarker().iconAnchor})})}}function bgLayer(e){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L)))return L.nlmapsBgLayer(e)}function overlayLayer(e,o){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L)))return L.nlmapsOverlayLayer(e,o)}function geoLocatorControl(e){if(\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L)))return L.geoLocatorControl(e)}function zoomTo(e,o){o.fitBounds(L.geoJSON(e).getBounds(),{maxZoom:18})}function geocoderControl(e,o){var t=geocoder.createControl(zoomTo,e,o);e.getContainer().parentElement.insertBefore(t,e.getContainer().parentElement[0])}function getMapCenter(e){var o=e.getCenter();return{latitude:o.lat,longitude:o.lng}}function bgLayer$1(){var e=getProvider(arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"standaard\");if(e.subdomains){var o=e.subdomains;e.url=e.url.replace(\"{s}\",\"{\"+o.slice(0,1)+\"-\"+o.slice(-1)+\"}\")}if(\"object\"===(\"undefined\"==typeof ol?\"undefined\":_typeof(ol)))return new ol.layer.Tile({source:new ol.source.XYZ({url:e.url,attributions:[new ol.Attribution({html:e.attribution})]})});throw\"openlayers is not defined\"}function markerLayer$1(e){var o=new ol.style.Style({image:new ol.style.Icon({anchor:[32,63],anchorXUnits:\"pixels\",anchorYUnits:\"pixels\",src:getMarker().url,scale:1})}),t=void 0,r=void 0;if(void 0===e){var n=getMapCenter$1(map);t=n.latitude,r=n.longitude}else t=e.latitude,r=e.longitude;var a=ol.proj.fromLonLat([r,t]),s=new ol.Feature({geometry:new ol.geom.Point(a),name:\"marker\"});s.setStyle(o);var i=new ol.source.Vector({features:[s]});return new ol.layer.Vector({source:i})}function overlayLayer$1(e,o){var t=getWmsProvider(e,o);if(\"object\"===(\"undefined\"==typeof ol?\"undefined\":_typeof(ol)))return new ol.layer.Tile({source:new ol.source.TileWMS({url:t.url,serverType:\"geoserver\",params:{LAYERS:t.layerName,VERSION:t.version,STYLES:t.styleName}})});throw\"openlayers is not defined\"}function geoLocatorControl$1(e,o){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,t=o.getView().getZoom(),r=new ol.View({center:ol.proj.fromLonLat([e.coords.longitude,e.coords.latitude]),zoom:t});o.setView(r)}var r=document.createElement(\"div\");return r.className=\"nlmaps-geolocator-control ol-control\",r.addEventListener(\"click\",function(){e.start()}),e.on(\"position\",function(e){t(e,o)}),new ol.control.Control({element:r})}function zoomTo$1(e,o){var t=ol.proj.fromLonLat(e.coordinates);o.getView().setCenter(t),o.getView().setZoom(18)}function getMapCenter$1(e){var o=e.getView().getCenter(),t=ol.proj.toLonLat(o);return{longitude:t[0],latitude:t[1]}}function geocoderControl$1(e){var o=geocoder.createControl(zoomTo$1,e);o=new ol.control.Control({element:o}),e.addControl(o)}function AttributionControl(e,o){if(\"object\"===(\"undefined\"==typeof google?\"undefined\":_typeof(google))&&\"object\"===_typeof(google.maps)){var t=document.createElement(\"div\");t.style.backgroundColor=\"#fff\",t.style.opacity=\"0.7\",t.style.border=\"2px solid #fff\",t.style.cursor=\"pointer\",e.appendChild(t);var r=document.createElement(\"div\");return r.style.color=\"rgb(25,25,25)\",r.style.fontFamily=\"Roboto,Arial,sans-serif\",r.style.fontSize=\"10px\",r.innerHTML=o,t.appendChild(r),e.index=1,e}throw\"google is not defined\"}function geoLocatorControl$2(e,o){var t=document.createElement(\"div\");return t.id=\"nlmaps-geolocator-control\",t.style.backgroundColor=\"#fff\",t.style.cursor=\"pointer\",t.style.boxShadow=\"0 1px 5px rgba(0, 0, 0, 0.65)\",t.style.height=\"26px\",t.style.width=\"26px\",t.style.borderRadius=\"26px 26px\",t.style.margin=\".5em\",t.addEventListener(\"click\",function(){e.start()},this),e.on(\"position\",function(e){o.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})}),t}function zoomTo$2(e,o){o.setCenter({lat:e.coordinates[1],lng:e.coordinates[0]}),o.setZoom(18)}function indexOfMapControl(e,o){return e.getArray().indexOf(o)}function toggleAttrControl(e,o){var t=o.getMapTypeId(),r=o.controls[google.maps.ControlPosition.BOTTOM_RIGHT],n=indexOfMapControl(r,e);\"roadmap\"===t||\"hybrid\"===t||\"sattelite\"===t?n>-1&&r.removeAt(n):-1===n&&r.push(e)}function makeGoogleAttrControl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=arguments[1],t=new AttributionControl(document.createElement(\"div\"),o);e.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(t),e.addListener(\"maptypeid_changed\",function(){return toggleAttrControl(t,e)})}function makeGoogleLayerOpts(e){return{getTileUrl:function(o,t){return e.bare_url+\"/\"+t+\"/\"+o.x+\"/\"+o.y+\".png\"},tileSize:new google.maps.Size(256,256),isPng:!0,name:e.name,maxZoom:e.maxZoom,minZoom:e.minZoom}}function getWmsTiledOptions(e){return{baseUrl:e.url,layers:e.layers,styles:e.styles,format:e.format,transparent:e.transparent,opacity:.7}}function bgLayer$2(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"standaard\";if(\"object\"===(\"undefined\"==typeof google?\"undefined\":_typeof(google))&&\"object\"===_typeof(google.maps)){var t=getProvider(o),r=makeGoogleLayerOpts(t),n=new google.maps.ImageMapType(r),a=e||this.map||\"undefined\";return void 0!==a&&makeGoogleAttrControl(a,t.attribution),n}throw\"google is not defined\"}function toMercator(e){var o=e.lat(),t=e.lng();if(!(Math.abs(t)>180||Math.abs(o)>90)){var r=.017453292519943295*o;return{x:6378137*(.017453292519943295*t),y:3189068.5*Math.log((1+Math.sin(r))/(1-Math.sin(r)))}}}function WMSTiled(e,o){var t={getTileUrl:function(t,r){var n=e.getProjection(),a=Math.pow(2,r),s=n.fromPointToLatLng(new google.maps.Point(256*t.x/a,256*t.y/a)),i=n.fromPointToLatLng(new google.maps.Point(256*(t.x+1)/a,256*(t.y+1)/a)),l=toMercator(s),c=toMercator(i),u=l.x+\",\"+c.y+\",\"+c.x+\",\"+l.y,d=o.baseUrl;return d+=\"SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&SRS=EPSG:3857\",d+=\"&WIDTH=256\",d+=\"&HEIGHT=256\",d+=\"&LAYERS=\"+o.layers,d+=\"&STYLES=\"+o.styles,d+=\"&BBOX=\"+u,d+=\"&FORMAT=\"+o.format,d+=\"&TRANSPARENT=\"+o.transparent},tileSize:new google.maps.Size(256,256),isPng:!0},r=new google.maps.ImageMapType(t);return r.setOpacity(o.opacity),e.overlayMapTypes.push(r)}function overlayLayer$2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=new WMSTiled(e,getWmsTiledOptions(getWmsProvider(arguments[1],arguments[2])));return o.name=\"wms\",o}function markerLayer$2(e){var o=void 0,t=void 0;if(void 0===e){var r=getMapCenter$2(map);o=r.latitude,t=r.longitude}else o=e.latitude,t=e.longitude;var n=new google.maps.LatLng(o,t);return new google.maps.Marker({title:\"marker\",position:n,icon:getMarker().url})}function getMapCenter$2(e){return{latitude:e.getCenter().lat(),longitude:e.getCenter().lng()}}function geocoderControl$2(e){var o=geocoder.createControl(zoomTo$2,e);e.getDiv().appendChild(o)}function positionHandler(e){this.emit(\"position\",e)}function positionErrorHandler(e){this.emit(\"error\",e)}function geoLocator(e){var o=\"undefined\"!=typeof window?window.navigator||{}:{};if(void 0!==o&&\"geolocation\"in o){var t=emitonoff$1(GeoLocator(e));return t.on(\"position\",function(){this.stop()}),t}throw\"geolocation is not available in your browser.\"}function query(e){return new Promise(function(o,t){fetch(e).then(function(e){return o(e.json())}).catch(function(e){return t(e)})})}function createAndAddMarker(e,o,t,r){var n=L.marker([o.latlng.lat,o.latlng.lng],{alt:\"marker\",icon:new L.icon({iconUrl:getMarker().url,iconSize:getMarker().iconSize,iconAnchor:getMarker().iconAnchor})});if(n.addTo(e),t){var a=t.call(markerStore,o,n),s=L.popup({offset:[0,-50]}).setContent(a);n.bindPopup(s).openPopup(),markerStore.addMarker(n)}else r?markerStore.addMarker(n):markerStore.addMarker(n,!0)}function singleMarker(e,o,t){return mapPointerStyle(e),function(t,r,n,a){1===t&&(markerStore.markers[0]&&markerStore.removeMarker(markerStore.markers[0]),createAndAddMarker(e,r,o,a))}}function multiMarker(e,o,t){return mapPointerStyle(e),function(r,n){1===r&&createAndAddMarker(e,n,o,t)}}function testWhichLib(){var e=[];return\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L))&&e.push(\"leaflet\"),\"object\"===(\"undefined\"==typeof google?\"undefined\":_typeof(google))&&\"object\"===_typeof(google.maps)&&e.push(\"googlemaps\"),\"object\"===(\"undefined\"==typeof ol?\"undefined\":_typeof(ol))&&e.push(\"openlayers\"),e.length>1?\"too many libs\":0===e.length?\"too few libs\":e[0]}function initMap(e,o){var t=void 0,r=void 0,n=void 0,a=void 0;switch(e){case\"leaflet\":(r=document.getElementById(o.target)).style.position=\"relative\",r.style.padding=\"0px\",r.style.margin=\"0px\",a={},o.attribution||(a.attributionControl=!1),(n=L.DomUtil.create(\"div\")).style.height=\"100%\",r.appendChild(n),a.maxBounds=extentLeafletFormat(),t=L.map(n,a).setView([o.center.latitude,o.center.longitude],o.zoom),o.attribution&&t.attributionControl.setPrefix(!1),t.zoomControl.setPosition(CONFIG.MAP.zoomposition);break;case\"googlemaps\":t=new google.maps.Map(document.getElementById(o.target),{center:{lat:o.center.latitude,lng:o.center.longitude},zoom:o.zoom,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},fullscreenControl:!1});break;case\"openlayers\":(t=new ol.Map({view:new ol.View({center:ol.proj.fromLonLat([o.center.longitude,o.center.latitude]),zoom:o.zoom}),target:n})).getTargetElement().getElementsByClassName(\"ol-zoom\")[0].style.cssText=\"left: 5px !important; bottom: 5px !important\",t.getTargetElement().getElementsByClassName(\"ol-zoom\")[0].classList.remove(\"ol-zoom\")}return t}function addGoogleLayer(e,o){if(\"marker\"===e.title)return void e.setMap(o);var t=[e.name,\"roadmap\"];if(\"wms\"===e.name)return void o.setOptions({mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:t,position:google.maps.ControlPosition.BOTTOM_LEFT}});o.setOptions({mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:t,position:google.maps.ControlPosition.BOTTOM_LEFT}}),o.mapTypes.set(e.name,e),o.setMapTypeId(e.name)}function addLayerToMap(e,o,t){switch(e){case\"leaflet\":t.addLayer(o);break;case\"googlemaps\":addGoogleLayer(o,t);break;case\"openlayers\":t.addLayer(o)}}function createBackgroundLayer(e,o,t){var r=void 0;switch(e){case\"leaflet\":r=nlmaps.leaflet.bgLayer(t);break;case\"googlemaps\":r=nlmaps.googlemaps.bgLayer(o,t);break;case\"openlayers\":r=nlmaps.openlayers.bgLayer(t)}return r}function createOverlayLayer(e,o,t){var r=void 0;switch(e){case\"leaflet\":r=nlmaps.leaflet.overlayLayer(t);break;case\"googlemaps\":r=nlmaps.googlemaps.overlayLayer(o,t);break;case\"openlayers\":r=nlmaps.openlayers.overlayLayer(t)}return r}function createMarkerLayer(e,o,t){var r=void 0;switch(e){case\"leaflet\":r=nlmaps.leaflet.markerLayer(t);break;case\"googlemaps\":r=nlmaps.googlemaps.markerLayer(t);break;case\"openlayers\":r=nlmaps.openlayers.markerLayer(t)}return r}function getMapCenter$3(e,o){var t=void 0;switch(e){case\"leaflet\":t=getMapCenter(o);break;case\"googlemaps\":t=getMapCenter$2(o);break;case\"openlayers\":t=getMapCenter$1(o)}return t}function mergeOpts(e,o){return _extends({},e,o)}function addGeoLocControlToMap(e,o,t){var r=void 0;switch(e){case\"leaflet\":nlmaps[e].geoLocatorControl(o).addTo(t);break;case\"googlemaps\":r=nlmaps[e].geoLocatorControl(o,t),t.controls[google.maps.ControlPosition.TOP_RIGHT].push(r);break;case\"openlayers\":r=nlmaps[e].geoLocatorControl(o,t),t.addControl(r)}}function addGeocoderControlToMap(e,o){nlmaps[e].geocoderControl(o,nlmaps)}var emitonoff=createCommonjsModule(function(e){e.exports=function(e){return e||(e={}),e._subs=[],e._paused=!1,e._pending=[],e.on=function(o,t){e._subs[o]=e._subs[o]||[],e._subs[o].push(t)},e.off=function(o,t){if(e._subs[o])for(var r in e._subs[o])if(e._subs[o][r]===t){e._subs[o].splice(r);break}},e.emit=function(o){if(e._subs[o]){var t=Array.prototype.slice.call(arguments,1);if(e._paused)return e._pending[o]=e._pending[o]||[],void e._pending[o].push(t);for(var r in e._subs[o])e._subs[o][r].apply(e,t)}},e.pause=function(){e._paused=!0},e.resume=function(){e._paused=!1;for(var o in e._pending)for(var t=0;t<e._pending[o].length;t++)e.emit(o,e._pending[o][t])},e}}),config={version:.2,basemaps:{defaults:{attribution:\"Kaartgegevens CC-BY-4.0 Gemeente Amsterdam\",minZoom:12,maxZoom:21,type:\"tms\",format:\"png\",url:\"https://t1.data.amsterdam.nl\"},layers:[{name:\"standaard\",layerName:\"topo_wm\"},{name:\"zwartwit\",layerName:\"topo_wm_zw\"},{name:\"licht\",layerName:\"topo_wm_light\"},{name:\"donker\",layerName:\"topo_wm\"}]},wms:{defaults:{url:\"https://map.data.amsterdam.nl/maps\",version:\"1.1.0\",transparent:!0,format:\"image/png\",minZoom:0,maxZoom:24,styleName:\"\"},layers:[{name:\"tram\",layerName:\"trm\",url:\"https://map.data.amsterdam.nl/maps/trm?\"}]},geocoder:{suggestUrl:\"https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?fq=gemeentenaam:amsterdam&fq=type:adres&\",lookupUrl:\"https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?fq=gemeentenaam:amsterdam&fq=type:adres&\",placeholder:\"Kies adres...\"},featureQuery:{baseUrl:\"https://api.data.amsterdam.nl/bag/v1.1/nummeraanduiding/?format=json&locatie=\"},marker:{url:\"/dist/images/svg/marker.svg\",iconSize:[40,40],iconAnchor:[20,39]},map:{style:\"standaard\",center:{latitude:52.37,longitude:4.8952},zoom:14,attribution:!0,extent:[52.25168,4.64034,52.50536,5.10737],zoomposition:\"bottomright\"},classnames:{geocoderContainer:[\"embed-search\"],geocoderSearch:[\"embed-search__form\"],geocoderButton:[\"primary\",\"action\",\"embed-search__button\"],geocoderResultList:[\"embed-search__auto-suggest\"],geocoderResultItem:[\"embed-search__auto-suggest__item\"],geocoderResultSelected:[\"embed-search__auto-suggest__item--active\"]}},_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},_extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},CONFIG={};CONFIG.BASE_DEFAULTS={crs:\"EPSG:3857\",attr:\"\",minZoom:0,maxZoom:19,type:\"wmts\",format:\"png\",url:\"\"},CONFIG.WMS_DEFAULTS={url:\"\",version:\"1.1.1\",transparent:!0,format:\"image/png\",minZoom:0,maxZoom:24,styleName:\"\"},CONFIG.BASEMAP_PROVIDERS={},CONFIG.WMS_PROVIDERS={},CONFIG.GEOCODER={},CONFIG.MAP={zoomposition:\"bottomleft\"},CONFIG.MARKER={},CONFIG.CLASSNAMES={geocoderContainer:[\"nlmaps-geocoder-control-container\"],geocoderSearch:[\"nlmaps-geocoder-control-search\"],geocoderButton:[\"nlmaps-geocoder-control-button\"],geocoderResultList:[\"nlmaps-geocoder-result-list\"],geocoderResultItem:[\"nlmaps-geocoder-result-item\"]},.2!==config.version&&err(\"unsupported config version\"),void 0!==config.featureQuery&&parseFeatureQuery(config.featureQuery.baseUrl),void 0!==config.map&&parseMap(config.map),parseBase(config.basemaps),void 0!==config.wms&&parseWMS(config.wms),void 0!==config.geocoder&&parseGeocoder(config.geocoder),void 0!==config.marker&&parseMarker(config.marker),void 0!==config.classnames&&parseClasses(config.classnames);var geocoder=CONFIG.GEOCODER;geocoder.resultList=[],geocoder.selectedResult=-1,geocoder.doSuggestRequest=function(e){return httpGetAsync(this.suggestUrl+\"q=\"+encodeURIComponent(e))},geocoder.doLookupRequest=function(e){return httpGetAsync(this.lookupUrl+\"id=\"+encodeURIComponent(e)).then(function(e){var o=e.response.docs[0];return o.centroide_ll=wktPointToGeoJson(o.centroide_ll),o.centroide_rd=wktPointToGeoJson(o.centroide_rd),o})},geocoder.createControl=function(e,o,t){var r=this;this.zoomTo=e,this.map=o,this.nlmaps=t;var n=document.createElement(\"div\"),a=document.createElement(\"form\"),s=document.createElement(\"input\"),i=document.createElement(\"button\"),l=document.createElement(\"div\");return parseClasses$1(n,CONFIG.CLASSNAMES.geocoderContainer),parseClasses$1(a,CONFIG.CLASSNAMES.geocoderSearch),n.addEventListener(\"click\",function(e){return e.stopPropagation()}),n.addEventListener(\"dblclick\",function(e){return e.stopPropagation()}),s.id=\"nlmaps-geocoder-control-input\",s.placeholder=geocoder.placeholder,s.setAttribute(\"aria-label\",geocoder.placeholder),s.setAttribute(\"type\",\"text\"),s.setAttribute(\"autocapitalize\",\"off\"),s.setAttribute(\"autocomplete\",\"off\"),s.setAttribute(\"autocorrect\",\"off\"),s.setAttribute(\"spellcheck\",\"false\"),s.addEventListener(\"keydown\",function(e){var o=r.resultList;r.resultList.length>0&&(\"ArrowDown\"!==e.code&&40!==e.keyCode||(r.selectedResult<r.resultList.length-1&&r.selectedResult++,r.showLookupResult(o[r.selectedResult])),\"ArrowUp\"!==e.code&&38!==e.keyCode||(r.selectedResult>0&&r.selectedResult--,r.showLookupResult(o[r.selectedResult])),\"Escape\"===e.code&&r.clearSuggestResults(!0))}),s.addEventListener(\"input\",function(e){r.suggest(e.target.value)}),s.addEventListener(\"focus\",function(e){r.suggest(e.target.value)}),i.setAttribute(\"type\",\"submit\"),a.addEventListener(\"submit\",function(e){e.preventDefault(),r.resultList.length>0&&r.lookup(r.resultList[r.selectedResult<0?0:r.selectedResult].id)}),i.setAttribute(\"aria-label\",geocoder.placeholder),parseClasses$1(i,CONFIG.CLASSNAMES.geocoderButton),l.id=\"nlmaps-geocoder-control-results\",parseClasses$1(l,CONFIG.CLASSNAMES.geocoderResultList),l.classList.add(\"nlmaps-hidden\"),n.appendChild(a),a.appendChild(s),a.appendChild(i),n.appendChild(l),n},geocoder.suggest=function(e){var o=this;if(e.length<3)return void this.clearSuggestResults();this.doSuggestRequest(e).then(function(e){o.resultList=e.response.docs,o.showSuggestResults(o.resultList)})},geocoder.lookup=function(e){var o=this;this.doLookupRequest(e).then(function(e){o.zoomTo(e.centroide_ll,o.map),o.nlmaps.emit(\"search-select\",{location:e.weergavenaam,latlng:e.centroide_ll,resultObject:e}),o.showLookupResult(e),o.clearSuggestResults()})},geocoder.clearSuggestResults=function(e){this.selectedResult=-1,e&&(document.getElementById(\"nlmaps-geocoder-control-input\").value=\"\"),document.getElementById(\"nlmaps-geocoder-control-results\").innerHTML=\"\",document.getElementById(\"nlmaps-geocoder-control-results\").classList.add(\"nlmaps-hidden\")},geocoder.showLookupResult=function(e){var o=document.getElementsByClassName(CONFIG.CLASSNAMES.geocoderResultItem);Array.prototype.map.call(o,function(e){return e.classList.remove(CONFIG.CLASSNAMES.geocoderResultSelected)});var t=document.getElementById(e.id);t&&t.classList.add(CONFIG.CLASSNAMES.geocoderResultSelected),document.getElementById(\"nlmaps-geocoder-control-input\").value=e.weergavenaam},geocoder.showSuggestResults=function(e){var o=this;if(this.clearSuggestResults(),e.length>0){var t=document.createElement(\"ul\");e.forEach(function(e){var r=document.createElement(\"li\"),n=document.createElement(\"a\");n.innerHTML=e.weergavenaam,n.id=e.id,parseClasses$1(n,CONFIG.CLASSNAMES.geocoderResultItem),n.setAttribute(\"href\",\"#\"),n.addEventListener(\"click\",function(e){e.preventDefault(),o.lookup(e.target.id)}),r.appendChild(n),t.appendChild(r)}),document.getElementById(\"nlmaps-geocoder-control-results\").classList.remove(\"nlmaps-hidden\"),document.getElementById(\"nlmaps-geocoder-control-results\").appendChild(t)}},\"undefined\"!=typeof L&&\"object\"===(\"undefined\"==typeof L?\"undefined\":_typeof(L))&&(L.NlmapsBgLayer=L.TileLayer.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"standaard\",o=arguments[1],t=getProvider(e),r=L.Util.extend({},o,{minZoom:t.minZoom,maxZoom:t.maxZoom,scheme:\"xyz\",attribution:t.attribution,subdomains:t.subdomains?t.subdomains:\"abc\",sa_id:e});L.TileLayer.prototype.initialize.call(this,t.url,r)}}),L.nlmapsBgLayer=function(e,o){return new L.NlmapsBgLayer(e,o)},L.NlmapsOverlayLayer=L.TileLayer.WMS.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",o=arguments[1],t=getWmsProvider(e,o),r=t.url;delete t.url;var n=L.Util.extend({},o,{layers:t.layerName,maxZoom:24,minZoom:1,styles:t.styleName,version:t.version,transparent:t.transparent,format:t.format});L.TileLayer.WMS.prototype.initialize.call(this,r,n)}}),L.nlmapsOverlayLayer=function(e,o){return new L.NlmapsOverlayLayer(e,o)},L.Control.GeoLocatorControl=L.Control.extend({options:{position:\"topright\"},initialize:function(e){for(var o in e)\"object\"===_typeof(this.options[o])?L.extend(this.options[o],e[o]):this.options[o]=e[o]},onAdd:function(e){function o(o){e.panTo([o.coords.latitude,o.coords.longitude])}var t=L.DomUtil.create(\"div\");t.id=\"nlmaps-geolocator-control\",t.className=\"nlmaps-geolocator-control\";var r=document.createElement(\"img\");return t.append(r),this.options.geolocator.isStarted()&&L.DomUtil.addClass(t,\"started\"),L.DomEvent.on(t,\"click\",function(){this.options.geolocator.start(),L.DomUtil.addClass(t,\"started\")},this),this.options.geolocator.on(\"position\",function(e){L.DomUtil.removeClass(t,\"started\"),L.DomUtil.addClass(t,\"has-position\"),o(e)}),t},onRemove:function(e){return e}}),L.geoLocatorControl=function(e){return new L.Control.GeoLocatorControl({geolocator:e})});var emitonoff$1=createCommonjsModule(function(e){e.exports=function(e){return e||(e={}),e._subs=[],e._paused=!1,e._pending=[],e.on=function(o,t){e._subs[o]=e._subs[o]||[],e._subs[o].push(t)},e.off=function(o,t){if(e._subs[o])for(var r in e._subs[o])if(e._subs[o][r]===t){e._subs[o].splice(r);break}},e.emit=function(o){if(e._subs[o]){var t=Array.prototype.slice.call(arguments,1);if(e._paused)return e._pending[o]=e._pending[o]||[],void e._pending[o].push(t);for(var r in e._subs[o])e._subs[o][r].apply(e,t)}},e.pause=function(){e._paused=!0},e.resume=function(){e._paused=!1;for(var o in e._pending)for(var t=0;t<e._pending[o].length;t++)e.emit(o,e._pending[o][t])},e}}),geoLocateDefaultOpts={follow:!1},GeoLocator=function(e){var o=_extends({},geoLocateDefaultOpts,e);return{start:function(){return o.started=!0,navigator.geolocation.getCurrentPosition(positionHandler.bind(this),positionErrorHandler.bind(this),{maximumAge:6e4}),this},stop:function(){return o.started=!1,this},isStarted:function(){return o.started},log:function(){return console.log(o),this}}},pointToQuery=function(e,o,t){return function(r){return function(n,a){0===n&&r(0,function(r,n){1===r?query(o(e,{x:n.latlng.lng,y:n.latlng.lat})).then(function(e){var o={queryResult:t(e),latlng:n.latlng};a(1,o)}):a(r,n)})}}},queryFeatures=function(e,o,t,r){var n=pointToQuery(o,t,r)(e);return n.subscribe=function(e){n(0,e)},n},markerStore={markers:[],removeMarker:function(e){var o=markerStore.markers.findIndex(function(o){return o===e});markerStore.markers[o].remove(),markerStore.markers.splice(o,1)},addMarker:function(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];markerStore.markers.push(e),o&&e.on(\"click\",function(){markerStore.removeMarker(e)})}},nlmaps={leaflet:{bgLayer:bgLayer,overlayLayer:overlayLayer,markerLayer:markerLayer,geocoderControl:geocoderControl,geoLocatorControl:geoLocatorControl},openlayers:{bgLayer:bgLayer$1,overlayLayer:overlayLayer$1,markerLayer:markerLayer$1,geocoderControl:geocoderControl$1,geoLocatorControl:geoLocatorControl$1},googlemaps:{bgLayer:bgLayer$2,overlayLayer:overlayLayer$2,markerLayer:markerLayer$2,geoLocatorControl:geoLocatorControl$2,geocoderControl:geocoderControl$2}};emitonoff(nlmaps);var geoLocateDefaultOpts$1={};nlmaps.lib=testWhichLib(),nlmaps.createMap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=mergeOpts(CONFIG.MAP,e);try{if(\"too many libs\"==nlmaps.lib||\"too few libs\"===nlmaps.lib)throw{message:\"one and only one map library can be defined. Please Refer to the documentation to see which map libraries are supported.\"}}catch(e){console.error(e.message)}var t=initMap(nlmaps.lib,o),r=createBackgroundLayer(nlmaps.lib,t,o.style);if(addLayerToMap(nlmaps.lib,r,t,o.style),o.search&&addGeocoderControlToMap(nlmaps.lib,t),o.marker){var n=o.marker;\"boolean\"==typeof o.marker&&(n=getMapCenter$3(nlmaps.lib,t));var a=createMarkerLayer(nlmaps.lib,t,n);markerStore.addMarker(a,!0),addLayerToMap(nlmaps.lib,a,t)}if(o.overlay&&\"false\"!==o.overlay){var s=createOverlayLayer(nlmaps.lib,t,o.overlay);addLayerToMap(nlmaps.lib,s,t)}return void 0!==t&&t.on(\"click\",function(e){nlmaps.emit(\"mapclick\",e)}),t},nlmaps.geoLocate=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=geoLocator(mergeOpts(geoLocateDefaultOpts$1,o));addGeoLocControlToMap(nlmaps.lib,t,e)},nlmaps.clickProvider=function(e){mapPointerStyle(e);var o=function(o,t){0===o&&(e.on(\"click\",function(e){t(1,e)}),t(0,function(e,o){}))};return o.subscribe=function(e){o(0,e)},o},nlmaps.queryFeatures=queryFeatures,nlmaps.singleMarker=singleMarker,nlmaps.multiMarker=multiMarker;export{nlmaps};\n//# sourceMappingURL=nlmaps.es.js.map\n","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_GRIDSHIFT = 3;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SRS_WGS84_SEMIMAJOR = 6378137.0;  // only used in grid shift transforms\nexport var SRS_WGS84_SEMIMINOR = 6356752.314;  // only used in grid shift transforms\nexport var SRS_WGS84_ESQUARED = 0.0066943799901413165; // only used in grid shift transforms\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    gamma: function(v) {\n      self.rectified_grid_angle = parseFloat(v);\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    },\n    approx: function() {\n      self.approx = true;\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84_]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n    obj[key].push(v);\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.AXIS) {\n    var axisOrder = '';\n    for (var i = 0, ii = wkt.AXIS.length; i < ii; ++i) {\n      var axis = [wkt.AXIS[i][0].toLowerCase(), wkt.AXIS[i][1].toLowerCase()];\n      if (axis[0].indexOf('north') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'north')) {\n        axisOrder += 'n';\n      } else if (axis[0].indexOf('south') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'south')) {\n        axisOrder += 's';\n      } else if (axis[0].indexOf('east') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'east')) {\n        axisOrder += 'e';\n      } else if (axis[0].indexOf('west') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'west')) {\n        axisOrder += 'w';\n      }\n    }\n    if (axisOrder.length === 2) {\n      axisOrder += 'u';\n    }\n    if (axisOrder.length === 3) {\n      wkt.axis = axisOrder;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984' || wkt.datumCode === 'world_geodetic_system_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_1', 'Latitude of 1st standard parallel'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['standard_parallel_2', 'Latitude of 2nd standard parallel'],\n    ['false_easting', 'False_Easting'],\n    ['false_easting', 'False easting'],\n    ['false-easting', 'Easting at false origin'],\n    ['false_northing', 'False_Northing'],\n    ['false_northing', 'False northing'],\n    ['false_northing', 'Northing at false origin'],\n    ['central_meridian', 'Central_Meridian'],\n    ['central_meridian', 'Longitude of natural origin'],\n    ['central_meridian', 'Longitude of false origin'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['latitude_of_origin', 'Latitude of natural origin'],\n    ['latitude_of_origin', 'Latitude of false origin'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  } else if (!wkt.lat_ts && wkt.lat0 && wkt.projName === 'Polar_Stereographic') {\n    wkt.lat_ts = wkt.lat0;\n    wkt.lat0 = d2r(wkt.lat0 > 0 ? 90 : -90);\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\nvar codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk80ign = {\n  a: 6378249.2,\n  b: 6356515,\n  rf: 293.4660213,\n  ellipseName: \"Clarke 1880 (IGN)\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"598.1,73.7,418.2,0.202,0.045,-2.455,6.7\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.militargeographische_institut = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Militar-Geographische Institut\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2, nadgrids) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  if (nadgrids) {\n    out.datum_type = PJD_GRIDSHIFT;\n    out.grids = nadgrids;\n  }\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","/**\n * Resources for details of NTv2 file formats:\n * - https://web.archive.org/web/20140127204822if_/http://www.mgs.gov.on.ca:80/stdprodconsume/groups/content/@mgs/@iandit/documents/resourcelist/stel02_047447.pdf\n * - http://mimaka.com/help/gs/html/004_NTV2%20Data%20Format.htm\n */\n\nvar loadedNadgrids = {};\n\n/**\n * Load a binary NTv2 file (.gsb) to a key that can be used in a proj string like +nadgrids=<key>. Pass the NTv2 file\n * as an ArrayBuffer.\n */\nexport default function nadgrid(key, data) {\n  var view = new DataView(data);\n  var isLittleEndian = detectLittleEndian(view);\n  var header = readHeader(view, isLittleEndian);\n  var subgrids = readSubgrids(view, header, isLittleEndian);\n  var nadgrid = {header: header, subgrids: subgrids};\n  loadedNadgrids[key] = nadgrid;\n  return nadgrid;\n}\n\n/**\n * Given a proj4 value for nadgrids, return an array of loaded grids\n */\nexport function getNadgrids(nadgrids) {\n  // Format details: http://proj.maptools.org/gen_parms.html\n  if (nadgrids === undefined) { return null; }\n  var grids = nadgrids.split(',');\n  return grids.map(parseNadgridString);\n}\n\nfunction parseNadgridString(value) {\n  if (value.length === 0) {\n    return null;\n  }\n  var optional = value[0] === '@';\n  if (optional) {\n    value = value.slice(1);\n  }\n  if (value === 'null') {\n    return {name: 'null', mandatory: !optional, grid: null, isNull: true};\n  }\n  return {\n    name: value,\n    mandatory: !optional,\n    grid: loadedNadgrids[value] || null,\n    isNull: false\n  };\n}\n\nfunction secondsToRadians(seconds) {\n  return (seconds / 3600) * Math.PI / 180;\n}\n\nfunction detectLittleEndian(view) {\n  var nFields = view.getInt32(8, false);\n  if (nFields === 11) {\n    return false;\n  }\n  nFields = view.getInt32(8, true);\n  if (nFields !== 11) {\n    console.warn('Failed to detect nadgrid endian-ness, defaulting to little-endian');\n  }\n  return true;\n}\n\nfunction readHeader(view, isLittleEndian) {\n  return {\n    nFields: view.getInt32(8, isLittleEndian),\n    nSubgridFields: view.getInt32(24, isLittleEndian),\n    nSubgrids: view.getInt32(40, isLittleEndian),\n    shiftType: decodeString(view, 56, 56 + 8).trim(),\n    fromSemiMajorAxis: view.getFloat64(120, isLittleEndian),\n    fromSemiMinorAxis: view.getFloat64(136, isLittleEndian),\n    toSemiMajorAxis: view.getFloat64(152, isLittleEndian),\n    toSemiMinorAxis: view.getFloat64(168, isLittleEndian),\n  };\n}\n\nfunction decodeString(view, start, end) {\n  return String.fromCharCode.apply(null, new Uint8Array(view.buffer.slice(start, end)));\n}\n\nfunction readSubgrids(view, header, isLittleEndian) {\n  var gridOffset = 176;\n  var grids = [];\n  for (var i = 0; i < header.nSubgrids; i++) {\n    var subHeader = readGridHeader(view, gridOffset, isLittleEndian);\n    var nodes = readGridNodes(view, gridOffset, subHeader, isLittleEndian);\n    var lngColumnCount = Math.round(\n      1 + (subHeader.upperLongitude - subHeader.lowerLongitude) / subHeader.longitudeInterval);\n    var latColumnCount = Math.round(\n      1 + (subHeader.upperLatitude - subHeader.lowerLatitude) / subHeader.latitudeInterval);\n    // Proj4 operates on radians whereas the coordinates are in seconds in the grid\n    grids.push({\n      ll: [secondsToRadians(subHeader.lowerLongitude), secondsToRadians(subHeader.lowerLatitude)],\n      del: [secondsToRadians(subHeader.longitudeInterval), secondsToRadians(subHeader.latitudeInterval)],\n      lim: [lngColumnCount, latColumnCount],\n      count: subHeader.gridNodeCount,\n      cvs: mapNodes(nodes)\n    });\n    gridOffset += 176 + subHeader.gridNodeCount * 16;\n  }\n  return grids;\n}\n\nfunction mapNodes(nodes) {\n  return nodes.map(function (r) {return [secondsToRadians(r.longitudeShift), secondsToRadians(r.latitudeShift)];});\n}\n\nfunction readGridHeader(view, offset, isLittleEndian) {\n  return {\n    name: decodeString(view, offset + 8, offset + 16).trim(),\n    parent: decodeString(view, offset + 24, offset + 24 + 8).trim(),\n    lowerLatitude: view.getFloat64(offset + 72, isLittleEndian),\n    upperLatitude: view.getFloat64(offset + 88, isLittleEndian),\n    lowerLongitude: view.getFloat64(offset + 104, isLittleEndian),\n    upperLongitude: view.getFloat64(offset + 120, isLittleEndian),\n    latitudeInterval: view.getFloat64(offset + 136, isLittleEndian),\n    longitudeInterval: view.getFloat64(offset + 152, isLittleEndian),\n    gridNodeCount: view.getInt32(offset + 168, isLittleEndian)\n  };\n}\n\nfunction readGridNodes(view, offset, gridHeader, isLittleEndian) {\n  var nodesOffset = offset + 176;\n  var gridRecordLength = 16;\n  var gridShiftRecords = [];\n  for (var i = 0; i < gridHeader.gridNodeCount; i++) {\n    var record = {\n      latitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength, isLittleEndian),\n      longitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength + 4, isLittleEndian),\n      latitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 8, isLittleEndian),\n      longitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 12, isLittleEndian),\n    };\n    gridShiftRecords.push(record);\n  }\n  return gridShiftRecords;\n}\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\nimport {getNadgrids} from \"./nadgrid\";\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = json.datum_params || (datumDef.towgs84 ? datumDef.towgs84.split(',') : null);\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  json.lat1 = json.lat1 || json.lat0; // Lambert_Conformal_Conic_1SP, for example, needs this\n\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var nadgrids = getNadgrids(json.nadgrids);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2,\n    nadgrids);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calculated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","import {\n  PJD_3PARAM,\n  PJD_7PARAM,\n  PJD_GRIDSHIFT,\n  PJD_NODATUM,\n  R2D,\n  SRS_WGS84_ESQUARED,\n  SRS_WGS84_SEMIMAJOR, SRS_WGS84_SEMIMINOR\n} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nimport adjust_lon from \"./common/adjust_lon\";\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n  var source_a = source.a;\n  var source_es = source.es;\n  if (source.datum_type === PJD_GRIDSHIFT) {\n    var gridShiftCode = applyGridShift(source, false, point);\n    if (gridShiftCode !== 0) {\n      return undefined;\n    }\n    source_a = SRS_WGS84_SEMIMAJOR;\n    source_es = SRS_WGS84_ESQUARED;\n  }\n\n  var dest_a = dest.a;\n  var dest_b = dest.b;\n  var dest_es = dest.es;\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    dest_a = SRS_WGS84_SEMIMAJOR;\n    dest_b = SRS_WGS84_SEMIMINOR;\n    dest_es = SRS_WGS84_ESQUARED;\n  }\n\n  // Do we need to go through geocentric coordinates?\n  if (source_es === dest_es && source_a === dest_a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source_es, source_a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  point = geocentricToGeodetic(point, dest_es, dest_a, dest_b);\n\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    var destGridShiftResult = applyGridShift(dest, true, point);\n    if (destGridShiftResult !== 0) {\n      return undefined;\n    }\n  }\n\n  return point;\n}\n\nexport function applyGridShift(source, inverse, point) {\n  if (source.grids === null || source.grids.length === 0) {\n    console.log('Grid shift grids not found');\n    return -1;\n  }\n  var input = {x: -point.x, y: point.y};\n  var output = {x: Number.NaN, y: Number.NaN};\n  var onlyMandatoryGrids = false;\n  var attemptedGrids = [];\n  outer:\n  for (var i = 0; i < source.grids.length; i++) {\n    var grid = source.grids[i];\n    attemptedGrids.push(grid.name);\n    if (grid.isNull) {\n      output = input;\n      break;\n    }\n    onlyMandatoryGrids = grid.mandatory;\n    if (grid.grid === null) {\n      if (grid.mandatory) {\n        console.log(\"Unable to find mandatory grid '\" + grid.name + \"'\");\n        return -1;\n      }\n      continue;\n    }\n    var subgrids = grid.grid.subgrids;\n    for (var j = 0, jj = subgrids.length; j < jj; j++) {\n      var subgrid = subgrids[j];\n      // skip tables that don't match our point at all\n      var epsilon = (Math.abs(subgrid.del[1]) + Math.abs(subgrid.del[0])) / 10000.0;\n      var minX = subgrid.ll[0] - epsilon;\n      var minY = subgrid.ll[1] - epsilon;\n      var maxX = subgrid.ll[0] + (subgrid.lim[0] - 1) * subgrid.del[0] + epsilon;\n      var maxY = subgrid.ll[1] + (subgrid.lim[1] - 1) * subgrid.del[1] + epsilon;\n      if (minY > input.y || minX > input.x || maxY < input.y || maxX < input.x ) {\n        continue;\n      }\n      output = applySubgridShift(input, inverse, subgrid);\n      if (!isNaN(output.x)) {\n        break outer;\n      }\n    }\n  }\n  if (isNaN(output.x)) {\n    console.log(\"Failed to find a grid shift table for location '\"+\n      -input.x * R2D + \" \" + input.y * R2D + \" tried: '\" + attemptedGrids + \"'\");\n    return -1;\n  }\n  point.x = -output.x;\n  point.y = output.y;\n  return 0;\n}\n\nfunction applySubgridShift(pin, inverse, ct) {\n  var val = {x: Number.NaN, y: Number.NaN};\n  if (isNaN(pin.x)) { return val; }\n  var tb = {x: pin.x, y: pin.y};\n  tb.x -= ct.ll[0];\n  tb.y -= ct.ll[1];\n  tb.x = adjust_lon(tb.x - Math.PI) + Math.PI;\n  var t = nadInterpolate(tb, ct);\n  if (inverse) {\n    if (isNaN(t.x)) {\n      return val;\n    }\n    t.x = tb.x - t.x;\n    t.y = tb.y - t.y;\n    var i = 9, tol = 1e-12;\n    var dif, del;\n    do {\n      del = nadInterpolate(t, ct);\n      if (isNaN(del.x)) {\n        console.log(\"Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.\");\n        break;\n      }\n      dif = {x: tb.x - (del.x + t.x), y: tb.y - (del.y + t.y)};\n      t.x += dif.x;\n      t.y += dif.y;\n    } while (i-- && Math.abs(dif.x) > tol && Math.abs(dif.y) > tol);\n    if (i < 0) {\n      console.log(\"Inverse grid shift iterator failed to converge.\");\n      return val;\n    }\n    val.x = adjust_lon(t.x + ct.ll[0]);\n    val.y = t.y + ct.ll[1];\n  } else {\n    if (!isNaN(t.x)) {\n      val.x = pin.x + t.x;\n      val.y = pin.y + t.y;\n    }\n  }\n  return val;\n}\n\nfunction nadInterpolate(pin, ct) {\n  var t = {x: pin.x / ct.del[0], y: pin.y / ct.del[1]};\n  var indx = {x: Math.floor(t.x), y: Math.floor(t.y)};\n  var frct = {x: t.x - 1.0 * indx.x, y: t.y - 1.0 * indx.y};\n  var val= {x: Number.NaN, y: Number.NaN};\n  var inx;\n  if (indx.x < 0 || indx.x >= ct.lim[0]) {\n    return val;\n  }\n  if (indx.y < 0 || indx.y >= ct.lim[1]) {\n    return val;\n  }\n  inx = (indx.y * ct.lim[0]) + indx.x;\n  var f00 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx++;\n  var f10= {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx += ct.lim[0];\n  var f11 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx--;\n  var f01 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  var m11 = frct.x * frct.y, m10 = frct.x * (1.0 - frct.y),\n    m00 = (1.0 - frct.x) * (1.0 - frct.y), m01 = (1.0 - frct.x) * frct.y;\n  val.x = (m00 * f00.x + m10 * f10.x + m01 * f01.x + m11 * f11.x);\n  val.y = (m00 * f00.y + m10 * f10.y + m01 * f01.y + m11 * f11.y);\n  return val;\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      if (\"ew\".indexOf(crs.axis[i]) !== -1) {\n        t = 'x';\n      } else {\n        t = 'y';\n      }\n\n    }\n    else if (i === 1) {\n      v = yin;\n      if (\"ns\".indexOf(crs.axis[i]) !== -1) {\n        t = 'y';\n      } else {\n        t = 'x';\n      }\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return (\n    (source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM || source.datum.datum_type === PJD_GRIDSHIFT) && dest.datumCode !== 'WGS84') ||\n    ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM || dest.datum.datum_type === PJD_GRIDSHIFT) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point, enforceAxis) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  } else {\n    // Clone the point object so inputs don't get modified\n    point = {\n      x: point.x,\n      y: point.y,\n      z: point.z,\n      m: point.m\n    };\n  }\n  var hasZ = point.z !== undefined;\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point, enforceAxis);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (enforceAxis && source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R,\n      z: point.z || 0\n    };\n  } else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter,\n        z: point.z || 0\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n    if (!point) {\n      return;\n    }\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n  if (!point) {\n    return;\n  }\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y,\n      z: point.z || 0\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D,\n      z: point.z || 0\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter,\n        z: point.z || 0\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (enforceAxis && dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  if (point && !hasZ) {\n    delete point.z;\n  }\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords, enforceAxis) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords, enforceAxis) || {x: NaN, y: NaN};\n    if (coords.length > 2) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (typeof transformedArray.z === 'number') {\n          return [transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.splice(3));\n        } else {\n          return [transformedArray.x, transformedArray.y, coords[2]].concat(coords.splice(3));\n        }\n      } else {\n        return [transformedArray.x, transformedArray.y].concat(coords.splice(2));\n      }\n    } else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  } else {\n    out = transform(from, to, coords, enforceAxis);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (key === 'x' || key === 'y' || key === 'z') {\n          return;\n        }\n      } else {\n        if (key === 'x' || key === 'y') {\n          return;\n        }\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\n\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  } else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  } else {\n    obj = {\n      forward: function (coords, enforceAxis) {\n        return transformer(fromProj, toProj, coords, enforceAxis);\n      },\n      inverse: function (coords, enforceAxis) {\n        return transformer(toProj, fromProj, coords, enforceAxis);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Fast_Transverse_Mercator\", \"Fast Transverse Mercator\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport tmerc from '../projections/tmerc';\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (!this.approx && (isNaN(this.es) || this.es <= 0)) {\n    throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION[\"Fast_Transverse_Mercator\"] in the WKT.');\n  }\n  if (this.approx) {\n    // When '+approx' is set, use tmerc instead\n    tmerc.init.apply(this);\n    this.forward = tmerc.forward;\n    this.inverse = tmerc.inverse;\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\", \"Transverse_Mercator\", \"Transverse Mercator\", \"Gauss Kruger\", \"Gauss_Kruger\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\nimport hypot from '../common/hypot';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = hypot(p.x, p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n\n  // setting default parameters\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN && Math.abs(Math.cos(this.lat_ts)) > EPSLN) {\n      // When k0 is 1 (default value) and lat_ts is a vaild number and lat0 is at a pole and lat_ts is not at a pole\n      // Recalculate k0 using formula 21-35 from p161 of Snyder, 1987\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\", \"Polar_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme  axe oblique et pour la transformation entre\n    des systmes de rfrence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { D2R, EPSLN, HALF_PI, TWO_PI, FORTPI } from '../constants/values';\n\nvar TOL = 1e-7;\n\nfunction isTypeA(P) {\n  var typeAProjections = ['Hotine_Oblique_Mercator','Hotine_Oblique_Mercator_Azimuth_Natural_Origin'];\n  var projectionName = typeof P.PROJECTION === \"object\" ? Object.keys(P.PROJECTION)[0] : P.PROJECTION;\n  \n  return 'no_uoff' in P || 'no_off' in P || typeAProjections.indexOf(projectionName) !== -1;\n}\n\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {  \n  var con, com, cosph0, D, F, H, L, sinph0, p, J, gamma = 0,\n    gamma0, lamc = 0, lam1 = 0, lam2 = 0, phi1 = 0, phi2 = 0, alpha_c = 0, AB;\n  \n  // only Type A uses the no_off or no_uoff property\n  // https://github.com/OSGeo/proj.4/issues/104\n  this.no_off = isTypeA(this);\n  this.no_rot = 'no_rot' in this;\n  \n  var alp = false;\n  if (\"alpha\" in this) {\n    alp = true;\n  }\n\n  var gam = false;\n  if (\"rectified_grid_angle\" in this) {\n    gam = true;\n  }\n\n  if (alp) {\n    alpha_c = this.alpha;\n  }\n  \n  if (gam) {\n    gamma = (this.rectified_grid_angle * D2R);\n  }\n  \n  if (alp || gam) {\n    lamc = this.longc;\n  } else {\n    lam1 = this.long1;\n    phi1 = this.lat1;\n    lam2 = this.long2;\n    phi2 = this.lat2;\n    \n    if (Math.abs(phi1 - phi2) <= TOL || (con = Math.abs(phi1)) <= TOL ||\n        Math.abs(con - HALF_PI) <= TOL || Math.abs(Math.abs(this.lat0) - HALF_PI) <= TOL ||\n        Math.abs(Math.abs(phi2) - HALF_PI) <= TOL) {\n      throw new Error();\n    }\n  }\n  \n  var one_es = 1.0 - this.es;\n  com = Math.sqrt(one_es);\n  \n  if (Math.abs(this.lat0) > EPSLN) {\n    sinph0 = Math.sin(this.lat0);\n    cosph0 = Math.cos(this.lat0);\n    con = 1 - this.es * sinph0 * sinph0;\n    this.B = cosph0 * cosph0;\n    this.B = Math.sqrt(1 + this.es * this.B * this.B / one_es);\n    this.A = this.B * this.k0 * com / con;\n    D = this.B * com / (cosph0 * Math.sqrt(con));\n    F = D * D -1;\n    \n    if (F <= 0) {\n      F = 0;\n    } else {\n      F = Math.sqrt(F);\n      if (this.lat0 < 0) {\n        F = -F;\n      }\n    }\n    \n    this.E = F += D;\n    this.E *= Math.pow(tsfnz(this.e, this.lat0, sinph0), this.B);\n  } else {\n    this.B = 1 / com;\n    this.A = this.k0;\n    this.E = D = F = 1;\n  }\n  \n  if (alp || gam) {\n    if (alp) {\n      gamma0 = Math.asin(Math.sin(alpha_c) / D);\n      if (!gam) {\n        gamma = alpha_c;\n      }\n    } else {\n      gamma0 = gamma;\n      alpha_c = Math.asin(D * Math.sin(gamma0));\n    }\n    this.lam0 = lamc - Math.asin(0.5 * (F - 1 / F) * Math.tan(gamma0)) / this.B;\n  } else {\n    H = Math.pow(tsfnz(this.e, phi1, Math.sin(phi1)), this.B);\n    L = Math.pow(tsfnz(this.e, phi2, Math.sin(phi2)), this.B);\n    F = this.E / H;\n    p = (L - H) / (L + H);\n    J = this.E * this.E;\n    J = (J - L * H) / (J + L * H);\n    con = lam1 - lam2;\n    \n    if (con < -Math.pi) {\n      lam2 -=TWO_PI;\n    } else if (con > Math.pi) {\n      lam2 += TWO_PI;\n    }\n    \n    this.lam0 = adjust_lon(0.5 * (lam1 + lam2) - Math.atan(J * Math.tan(0.5 * this.B * (lam1 - lam2)) / p) / this.B);\n    gamma0 = Math.atan(2 * Math.sin(this.B * adjust_lon(lam1 - this.lam0)) / (F - 1 / F));\n    gamma = alpha_c = Math.asin(D * Math.sin(gamma0));\n  }\n  \n  this.singam = Math.sin(gamma0);\n  this.cosgam = Math.cos(gamma0);\n  this.sinrot = Math.sin(gamma);\n  this.cosrot = Math.cos(gamma);\n  \n  this.rB = 1 / this.B;\n  this.ArB = this.A * this.rB;\n  this.BrA = 1 / this.ArB;\n  AB = this.A * this.B;\n  \n  if (this.no_off) {\n    this.u_0 = 0;\n  } else {\n    this.u_0 = Math.abs(this.ArB * Math.atan(Math.sqrt(D * D - 1) / Math.cos(alpha_c)));\n    \n    if (this.lat0 < 0) {\n      this.u_0 = - this.u_0;\n    }  \n  }\n    \n  F = 0.5 * gamma0;\n  this.v_pole_n = this.ArB * Math.log(Math.tan(FORTPI - F));\n  this.v_pole_s = this.ArB * Math.log(Math.tan(FORTPI + F));\n}\n\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var coords = {};\n  var S, T, U, V, W, temp, u, v;\n  p.x = p.x - this.lam0;\n  \n  if (Math.abs(Math.abs(p.y) - HALF_PI) > EPSLN) {\n    W = this.E / Math.pow(tsfnz(this.e, p.y, Math.sin(p.y)), this.B);\n    \n    temp = 1 / W;\n    S = 0.5 * (W - temp);\n    T = 0.5 * (W + temp);\n    V = Math.sin(this.B * p.x);\n    U = (S * this.singam - V * this.cosgam) / T;\n        \n    if (Math.abs(Math.abs(U) - 1.0) < EPSLN) {\n      throw new Error();\n    }\n    \n    v = 0.5 * this.ArB * Math.log((1 - U)/(1 + U));\n    temp = Math.cos(this.B * p.x);\n    \n    if (Math.abs(temp) < TOL) {\n      u = this.A * p.x;\n    } else {\n      u = this.ArB * Math.atan2((S * this.cosgam + V * this.singam), temp);\n    }    \n  } else {\n    v = p.y > 0 ? this.v_pole_n : this.v_pole_s;\n    u = this.ArB * p.y;\n  }\n     \n  if (this.no_rot) {\n    coords.x = u;\n    coords.y = v;\n  } else {\n    u -= this.u_0;\n    coords.x = v * this.cosrot + u * this.sinrot;\n    coords.y = u * this.cosrot - v * this.sinrot;\n  }\n  \n  coords.x = (this.a * coords.x + this.x0);\n  coords.y = (this.a * coords.y + this.y0);\n  \n  return coords;\n}\n\nexport function inverse(p) {\n  var u, v, Qp, Sp, Tp, Vp, Up;\n  var coords = {};\n  \n  p.x = (p.x - this.x0) * (1.0 / this.a);\n  p.y = (p.y - this.y0) * (1.0 / this.a);\n\n  if (this.no_rot) {\n    v = p.y;\n    u = p.x;\n  } else {\n    v = p.x * this.cosrot - p.y * this.sinrot;\n    u = p.y * this.cosrot + p.x * this.sinrot + this.u_0;\n  }\n  \n  Qp = Math.exp(-this.BrA * v);\n  Sp = 0.5 * (Qp - 1 / Qp);\n  Tp = 0.5 * (Qp + 1 / Qp);\n  Vp = Math.sin(this.BrA * u);\n  Up = (Vp * this.cosgam + Sp * this.singam) / Tp;\n  \n  if (Math.abs(Math.abs(Up) - 1) < EPSLN) {\n    coords.x = 0;\n    coords.y = Up < 0 ? -HALF_PI : HALF_PI;\n  } else {\n    coords.y = this.E / Math.sqrt((1 + Up) / (1 - Up));\n    coords.y = phi2z(this.e, Math.pow(coords.y, 1 / this.B));\n    \n    if (coords.y === Infinity) {\n      throw new Error();\n    }\n        \n    coords.x = -this.rB * Math.atan2((Sp * this.cosgam - Vp * this.singam), Math.cos(this.BrA * u));\n  }\n  \n  coords.x += this.lam0;\n  \n  return coords;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Two_Point_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"Oblique_Mercator\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n  \n  //double lat0;                    /* the reference latitude               */\n  //double long0;                   /* the reference longitude              */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n  \n  //the above value can be set with proj4.defs\n  //example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\n  \"Lambert Tangential Conformal Conic Projection\",\n  \"Lambert_Conformal_Conic\",\n  \"Lambert_Conformal_Conic_1SP\",\n  \"Lambert_Conformal_Conic_2SP\",\n  \"lcc\",\n  \"Lambert Conic Conformal (1SP)\",\n  \"Lambert Conic Conformal (2SP)\"\n];\n\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.lat0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.lat0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c ? c / Math.sin(c) : 1;\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F, sinpsi;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      sinpsi = Math.sin(psi);\n      lat = Math.atan2((sinpsi - this.es * F * this.sin_p12) * Math.tan(psi), sinpsi * (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {\n    geodeticToGeocentric,\n    geocentricToGeodetic\n} from '../datumUtils';\n\nexport function init() {\n    this.name = 'geocent';\n\n}\n\nexport function forward(p) {\n    var point = geodeticToGeocentric(p, this.es, this.a);\n    return point;\n}\n\nexport function inverse(p) {\n    var point = geocentricToGeodetic(p, this.es, this.a, this.b);\n    return point;\n}\n\nexport var names = [\"Geocentric\", 'geocentric', \"geocent\", \"Geocent\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names\n};","\nvar mode = {\n  N_POLE: 0,\n  S_POLE: 1,\n  EQUIT: 2,\n  OBLIQ: 3\n};\n\nimport { D2R, HALF_PI, EPSLN } from \"../constants/values\";\nimport hypot from \"../common/hypot\";\n\nvar params = {\n  h:     { def: 100000, num: true },           // default is Karman line, no default in PROJ.7\n  azi:   { def: 0, num: true, degrees: true }, // default is North\n  tilt:  { def: 0, num: true, degrees: true }, // default is Nadir\n  long0: { def: 0, num: true },                // default is Greenwich, conversion to rad is automatic\n  lat0:  { def: 0, num: true }                 // default is Equator, conversion to rad is automatic\n};\n\nexport function init() {\n  Object.keys(params).forEach(function (p) {\n    if (typeof this[p] === \"undefined\") {\n      this[p] = params[p].def;\n    } else if (params[p].num && isNaN(this[p])) {\n      throw new Error(\"Invalid parameter value, must be numeric \" + p + \" = \" + this[p]);\n    } else if (params[p].num) {\n      this[p] = parseFloat(this[p]);\n    }\n    if (params[p].degrees) {\n      this[p] = this[p] * D2R;\n    }\n  }.bind(this));\n\n  if (Math.abs((Math.abs(this.lat0) - HALF_PI)) < EPSLN) {\n    this.mode = this.lat0 < 0 ? mode.S_POLE : mode.N_POLE;\n  } else if (Math.abs(this.lat0) < EPSLN) {\n    this.mode = mode.EQUIT;\n  } else {\n    this.mode = mode.OBLIQ;\n    this.sinph0 = Math.sin(this.lat0);\n    this.cosph0 = Math.cos(this.lat0);\n  }\n\n  this.pn1 = this.h / this.a;  // Normalize relative to the Earth's radius\n\n  if (this.pn1 <= 0 || this.pn1 > 1e10) {\n    throw new Error(\"Invalid height\");\n  }\n  \n  this.p = 1 + this.pn1;\n  this.rp = 1 / this.p;\n  this.h1 = 1 / this.pn1;\n  this.pfact = (this.p + 1) * this.h1;\n  this.es = 0;\n\n  var omega = this.tilt;\n  var gamma = this.azi;\n  this.cg = Math.cos(gamma);\n  this.sg = Math.sin(gamma);\n  this.cw = Math.cos(omega);\n  this.sw = Math.sin(omega);\n}\n\nexport function forward(p) {\n  p.x -= this.long0;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var coslam = Math.cos(p.x);\n  var x, y;\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y = this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y = cosphi * coslam;\n      break;\n    case mode.S_POLE:\n      y = -sinphi;\n      break;\n    case mode.N_POLE:\n      y = sinphi;\n      break;\n  }\n  y = this.pn1 / (this.p - y);\n  x = y * cosphi * Math.sin(p.x);\n\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y *= this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y *= sinphi;\n      break;\n    case mode.N_POLE:\n      y *= -(cosphi * coslam);\n      break;\n    case mode.S_POLE:\n      y *= cosphi * coslam;\n      break;\n  }\n\n  // Tilt \n  var yt, ba;\n  yt = y * this.cg + x * this.sg;\n  ba = 1 / (yt * this.sw * this.h1 + this.cw);\n  x = (x * this.cg - y * this.sg) * this.cw * ba;\n  y = yt * ba;\n\n  p.x = x * this.a;\n  p.y = y * this.a;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x /= this.a;\n  p.y /= this.a;\n  var r = { x: p.x, y: p.y };\n\n  // Un-Tilt\n  var bm, bq, yt;\n  yt = 1 / (this.pn1 - p.y * this.sw);\n  bm = this.pn1 * p.x * yt;\n  bq = this.pn1 * p.y * this.cw * yt;\n  p.x = bm * this.cg + bq * this.sg;\n  p.y = bq * this.cg - bm * this.sg;\n\n  var rh = hypot(p.x, p.y);\n  if (Math.abs(rh) < EPSLN) {\n    r.x = 0;\n    r.y = p.y;\n  } else {\n    var cosz, sinz;\n    sinz = 1 - rh * rh * this.pfact;\n    sinz = (this.p - Math.sqrt(sinz)) / (this.pn1 / rh + rh / this.pn1);\n    cosz = Math.sqrt(1 - sinz * sinz);\n    switch (this.mode) {\n      case mode.OBLIQ:\n        r.y = Math.asin(cosz * this.sinph0 + p.y * sinz * this.cosph0 / rh);\n        p.y = (cosz - this.sinph0 * Math.sin(r.y)) * rh;\n        p.x *= sinz * this.cosph0;\n        break;\n      case mode.EQUIT:\n        r.y = Math.asin(p.y * sinz / rh);\n        p.y = cosz * rh;\n        p.x *= sinz;\n        break;\n      case mode.N_POLE:\n        r.y = Math.asin(cosz);\n        p.y = -p.y;\n        break;\n      case mode.S_POLE:\n        r.y = -Math.asin(cosz);\n        break;\n    }\n    r.x = Math.atan2(p.x, p.y);\n  }\n\n  p.x = r.x + this.long0;\n  p.y = r.y;\n  return p;\n}\n\nexport var names = [\"Tilted_Perspective\", \"tpers\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import hypot from '../common/hypot';\n\nexport function init() {\n    this.flip_axis = (this.sweep === 'x' ? 1 : 0);\n    this.h = Number(this.h);\n    this.radius_g_1 = this.h / this.a;\n\n    if (this.radius_g_1 <= 0 || this.radius_g_1 > 1e10) {\n        throw new Error();\n    }\n\n    this.radius_g = 1.0 + this.radius_g_1;\n    this.C = this.radius_g * this.radius_g - 1.0;\n\n    if (this.es !== 0.0) {\n        var one_es = 1.0 - this.es;\n        var rone_es = 1 / one_es;\n\n        this.radius_p = Math.sqrt(one_es);\n        this.radius_p2 = one_es;\n        this.radius_p_inv2 = rone_es;\n\n        this.shape = 'ellipse'; // Use as a condition in the forward and inverse functions.\n    } else {\n        this.radius_p = 1.0;\n        this.radius_p2 = 1.0;\n        this.radius_p_inv2 = 1.0;\n\n        this.shape = 'sphere';  // Use as a condition in the forward and inverse functions.\n    }\n\n    if (!this.title) {\n        this.title = \"Geostationary Satellite View\";\n    }\n}\n\nfunction forward(p) {\n    var lon = p.x;\n    var lat = p.y;\n    var tmp, v_x, v_y, v_z;\n    lon = lon - this.long0;\n\n    if (this.shape === 'ellipse') {\n        lat = Math.atan(this.radius_p2 * Math.tan(lat));\n        var r = this.radius_p / hypot(this.radius_p * Math.cos(lat), Math.sin(lat));\n\n        v_x = r * Math.cos(lon) * Math.cos(lat);\n        v_y = r * Math.sin(lon) * Math.cos(lat);\n        v_z = r * Math.sin(lat);\n\n        if (((this.radius_g - v_x) * v_x - v_y * v_y - v_z * v_z * this.radius_p_inv2) < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        tmp = this.radius_g - v_x;\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    } else if (this.shape === 'sphere') {\n        tmp = Math.cos(lat);\n        v_x = Math.cos(lon) * tmp;\n        v_y = Math.sin(lon) * tmp;\n        v_z = Math.sin(lat);\n        tmp = this.radius_g - v_x;\n\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    }\n    p.x = p.x * this.a;\n    p.y = p.y * this.a;\n    return p;\n}\n\nfunction inverse(p) {\n    var v_x = -1.0;\n    var v_y = 0.0;\n    var v_z = 0.0;\n    var a, b, det, k;\n\n    p.x = p.x / this.a;\n    p.y = p.y / this.a;\n\n    if (this.shape === 'ellipse') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * hypot(1.0, v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * hypot(1.0, v_y);\n        }\n\n        var v_zp = v_z / this.radius_p;\n        a = v_y * v_y + v_zp * v_zp + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n        p.y = Math.atan(this.radius_p_inv2 * Math.tan(p.y));\n    } else if (this.shape === 'sphere') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * Math.sqrt(1.0 + v_z * v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * Math.sqrt(1.0 + v_y * v_y);\n        }\n\n        a = v_y * v_y + v_z * v_z + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n    }\n    p.x = p.x + this.long0;\n    return p;\n}\n\nexport var names = [\"Geostationary Satellite View\", \"Geostationary_Satellite\", \"geos\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names,\n};\n\n","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nimport geocent from './lib/projections/geocent';\nimport tpers from './lib/projections/tpers';\nimport geos from './lib/projections/geos';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n  proj4.Proj.projections.add(geocent);\n  proj4.Proj.projections.add(tpers);\n  proj4.Proj.projections.add(geos);\n}","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport nadgrid from \"./nadgrid\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.nadgrid = nadgrid;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = '__VERSION__';\nincludedProjections(proj4);\nexport default proj4;\n","//helper functions shared between different amaps wrapper apps\n\nimport proj4 from \"proj4\";\n/* eslint-disable-next-line max-len */\nproj4.defs(\n  \"EPSG:28992\",\n  \"+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs\"\n);\nconst transformCoords = proj4(\n  proj4.defs(\"EPSG:4326\"),\n  proj4.defs(\"EPSG:28992\")\n);\n\n//utility function\nfunction query(url) {\n  const promise = new Promise((resolve, reject) => {\n    fetch(url)\n      .then(res => resolve(res.json()))\n      .catch(err => reject(err));\n  });\n  return promise;\n}\n\n//chain of API requests for single-click\n//1. get BAG information.\n//2. after that, we need to get the full object data.\n//3. get omgevingsinfo\nasync function getBagInfo(click) {\n  const xy = {\n    x: click.latlng.lng,\n    y: click.latlng.lat\n  };\n  let nummeraanduidingId = false;\n  if (click.resultObject && click.resultObject.nummeraanduiding_id)\n    nummeraanduidingId = click.resultObject.nummeraanduiding_id;\n  const url = requestFormatter(\n    \"https://api.data.amsterdam.nl/bag/v1.1/nummeraanduiding/?format=json&locatie=\",\n    xy\n  );\n  return await query(url).then(res => {\n    let output = {\n      queryResult: responseFormatter(res, nummeraanduidingId),\n      latlng: click.latlng\n    };\n    return output;\n  });\n}\n\nasync function getFullObjectData(data) {\n  //d: {\n  //  latlng: {},\n  //  queryResult: {},\n  //}\n  let dichtstbijzijnd_adres = {};\n  if (data.queryResult !== null) {\n    try {\n      const res = await query(data.queryResult._links.self.href);\n      dichtstbijzijnd_adres = {\n        openbare_ruimte: res.openbare_ruimte._display,\n        huisnummer: res.huisnummer,\n        huisletter: res.huisletter,\n        huisnummer_toevoeging: res.huisnummer_toevoeging,\n        postcode: res.postcode,\n        woonplaats: res.woonplaats._display\n      };\n    } catch (e) {\n      /* eslint-disable no-console */\n      console.log(\"error!\");\n      console.log(e);\n      /* eslint-enable no-console */\n    }\n  } else {\n    dichtstbijzijnd_adres = null;\n  }\n  return {\n    query: {\n      latitude: data.latlng.lat,\n      longitude: data.latlng.lng\n    },\n    dichtstbijzijnd_adres: dichtstbijzijnd_adres,\n    object: null //no object for an address search\n  };\n}\n\nfunction findOmgevingFeature(features, type) {\n  let feature = features.find(feat => feat.properties.type === type);\n  if (feature === undefined) return null;\n  return feature.properties;\n}\n\nasync function getOmgevingInfo(data) {\n  const res = await query(\n    `https://api.data.amsterdam.nl/geosearch/bag/?lat=${data.query.latitude}&lon=${data.query.longitude}&radius=50`\n  );\n  let buurtinfo = findOmgevingFeature(res.features, \"gebieden/buurt\");\n  let wijkinfo = findOmgevingFeature(res.features, \"gebieden/buurtcombinatie\");\n  let stadsdeelinfo = findOmgevingFeature(res.features, \"gebieden/stadsdeel\");\n  if (buurtinfo !== null && wijkinfo !== null && stadsdeelinfo !== null) {\n    data.omgevingsinfo = {\n      buurtnaam: buurtinfo !== undefined ? buurtinfo.display : null,\n      buurtcode: buurtinfo !== undefined ? buurtinfo.vollcode : null,\n      wijknaam: wijkinfo !== undefined ? wijkinfo.display : null,\n      wijkcode: wijkinfo !== undefined ? wijkinfo.vollcode : null,\n      stadsdeelnaam: stadsdeelinfo !== undefined ? stadsdeelinfo.display : null,\n      stadsdeelcode: stadsdeelinfo !== undefined ? stadsdeelinfo.code : null\n    };\n  } else {\n    data.omgevingsinfo = null;\n  }\n\n  return data;\n}\n\nfunction requestFormatter(baseUrl, xy) {\n  let xyRD = transformCoords.forward(xy);\n  return `${baseUrl}${xyRD.x},${xyRD.y},50`;\n}\n\nfunction responseFormatter(res, search_id) {\n  let filtered;\n  search_id =\n    search_id === false ? false : search_id === undefined ? false : search_id; //make sure that search_id is properly set to false\n  if (res.results) {\n    filtered =\n      search_id !== false\n        ? res.results.filter(x => x.landelijk_id === search_id)\n        : res.results.filter(x => x.type_adres === \"Hoofdadres\");\n  } else {\n    throw {\n      error: \"no results property found on query response.\",\n      response: res\n    };\n  }\n  return filtered.length > 0 ? filtered[0] : null;\n}\n\nasync function pointQueryChain(click) {\n  try {\n    const result = await getBagInfo(click)\n      .then(getFullObjectData)\n      .then(getOmgevingInfo);\n    return result;\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport {\n  pointQueryChain,\n  getBagInfo,\n  getFullObjectData,\n  getOmgevingInfo,\n  requestFormatter,\n  responseFormatter,\n  query\n};\n","/*\n * Leaflet.markercluster 1.5.3+master.e5124b2,\n * Provides Beautiful Animated Marker Clustering functionality for Leaflet, a JS library for interactive maps.\n * https://github.com/Leaflet/Leaflet.markercluster\n * (c) 2012-2017, Dave Leaver, smartrak\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(global = global || self, factory((global.Leaflet = global.Leaflet || {}, global.Leaflet.markercluster = {})));\n}(this, function (exports) { 'use strict';\n\n\t/*\n\t * L.MarkerClusterGroup extends L.FeatureGroup by clustering the markers contained within\n\t */\n\n\tvar MarkerClusterGroup = L.MarkerClusterGroup = L.FeatureGroup.extend({\n\n\t\toptions: {\n\t\t\tmaxClusterRadius: 80, //A cluster will cover at most this many pixels from its center\n\t\t\ticonCreateFunction: null,\n\t\t\tclusterPane: L.Marker.prototype.options.pane,\n\n\t\t\tspiderfyOnEveryZoom: false,\n\t\t\tspiderfyOnMaxZoom: true,\n\t\t\tshowCoverageOnHover: true,\n\t\t\tzoomToBoundsOnClick: true,\n\t\t\tsingleMarkerMode: false,\n\n\t\t\tdisableClusteringAtZoom: null,\n\n\t\t\t// Setting this to false prevents the removal of any clusters outside of the viewpoint, which\n\t\t\t// is the default behaviour for performance reasons.\n\t\t\tremoveOutsideVisibleBounds: true,\n\n\t\t\t// Set to false to disable all animations (zoom and spiderfy).\n\t\t\t// If false, option animateAddingMarkers below has no effect.\n\t\t\t// If L.DomUtil.TRANSITION is falsy, this option has no effect.\n\t\t\tanimate: true,\n\n\t\t\t//Whether to animate adding markers after adding the MarkerClusterGroup to the map\n\t\t\t// If you are adding individual markers set to true, if adding bulk markers leave false for massive performance gains.\n\t\t\tanimateAddingMarkers: false,\n\n\t\t\t// Make it possible to provide custom function to calculate spiderfy shape positions\n\t\t\tspiderfyShapePositions: null,\n\n\t\t\t//Increase to increase the distance away that spiderfied markers appear from the center\n\t\t\tspiderfyDistanceMultiplier: 1,\n\n\t\t\t// Make it possible to specify a polyline options on a spider leg\n\t\t\tspiderLegPolylineOptions: { weight: 1.5, color: '#222', opacity: 0.5 },\n\n\t\t\t// When bulk adding layers, adds markers in chunks. Means addLayers may not add all the layers in the call, others will be loaded during setTimeouts\n\t\t\tchunkedLoading: false,\n\t\t\tchunkInterval: 200, // process markers for a maximum of ~ n milliseconds (then trigger the chunkProgress callback)\n\t\t\tchunkDelay: 50, // at the end of each interval, give n milliseconds back to system/browser\n\t\t\tchunkProgress: null, // progress callback: function(processed, total, elapsed) (e.g. for a progress indicator)\n\n\t\t\t//Options to pass to the L.Polygon constructor\n\t\t\tpolygonOptions: {}\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tL.Util.setOptions(this, options);\n\t\t\tif (!this.options.iconCreateFunction) {\n\t\t\t\tthis.options.iconCreateFunction = this._defaultIconCreateFunction;\n\t\t\t}\n\n\t\t\tthis._featureGroup = L.featureGroup();\n\t\t\tthis._featureGroup.addEventParent(this);\n\n\t\t\tthis._nonPointGroup = L.featureGroup();\n\t\t\tthis._nonPointGroup.addEventParent(this);\n\n\t\t\tthis._inZoomAnimation = 0;\n\t\t\tthis._needsClustering = [];\n\t\t\tthis._needsRemoving = []; //Markers removed while we aren't on the map need to be kept track of\n\t\t\t//The bounds of the currently shown area (from _getExpandedVisibleBounds) Updated on zoom/move\n\t\t\tthis._currentShownBounds = null;\n\n\t\t\tthis._queue = [];\n\n\t\t\tthis._childMarkerEventHandlers = {\n\t\t\t\t'dragstart': this._childMarkerDragStart,\n\t\t\t\t'move': this._childMarkerMoved,\n\t\t\t\t'dragend': this._childMarkerDragEnd,\n\t\t\t};\n\n\t\t\t// Hook the appropriate animation methods.\n\t\t\tvar animate = L.DomUtil.TRANSITION && this.options.animate;\n\t\t\tL.extend(this, animate ? this._withAnimation : this._noAnimation);\n\t\t\t// Remember which MarkerCluster class to instantiate (animated or not).\n\t\t\tthis._markerCluster = animate ? L.MarkerCluster : L.MarkerClusterNonAnimated;\n\t\t},\n\n\t\taddLayer: function (layer) {\n\n\t\t\tif (layer instanceof L.LayerGroup) {\n\t\t\t\treturn this.addLayers([layer]);\n\t\t\t}\n\n\t\t\t//Don't cluster non point data\n\t\t\tif (!layer.getLatLng) {\n\t\t\t\tthis._nonPointGroup.addLayer(layer);\n\t\t\t\tthis.fire('layeradd', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!this._map) {\n\t\t\t\tthis._needsClustering.push(layer);\n\t\t\t\tthis.fire('layeradd', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (this.hasLayer(layer)) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\n\t\t\t//If we have already clustered we'll need to add this one to a cluster\n\n\t\t\tif (this._unspiderfy) {\n\t\t\t\tthis._unspiderfy();\n\t\t\t}\n\n\t\t\tthis._addLayer(layer, this._maxZoom);\n\t\t\tthis.fire('layeradd', { layer: layer });\n\n\t\t\t// Refresh bounds and weighted positions.\n\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\t//Work out what is visible\n\t\t\tvar visibleLayer = layer,\n\t\t\t    currentZoom = this._zoom;\n\t\t\tif (layer.__parent) {\n\t\t\t\twhile (visibleLayer.__parent._zoom >= currentZoom) {\n\t\t\t\t\tvisibleLayer = visibleLayer.__parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._currentShownBounds.contains(visibleLayer.getLatLng())) {\n\t\t\t\tif (this.options.animateAddingMarkers) {\n\t\t\t\t\tthis._animationAddLayer(layer, visibleLayer);\n\t\t\t\t} else {\n\t\t\t\t\tthis._animationAddLayerNonAnimated(layer, visibleLayer);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tremoveLayer: function (layer) {\n\n\t\t\tif (layer instanceof L.LayerGroup) {\n\t\t\t\treturn this.removeLayers([layer]);\n\t\t\t}\n\n\t\t\t//Non point layers\n\t\t\tif (!layer.getLatLng) {\n\t\t\t\tthis._nonPointGroup.removeLayer(layer);\n\t\t\t\tthis.fire('layerremove', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!this._map) {\n\t\t\t\tif (!this._arraySplice(this._needsClustering, layer) && this.hasLayer(layer)) {\n\t\t\t\t\tthis._needsRemoving.push({ layer: layer, latlng: layer._latlng });\n\t\t\t\t}\n\t\t\t\tthis.fire('layerremove', { layer: layer });\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (!layer.__parent) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (this._unspiderfy) {\n\t\t\t\tthis._unspiderfy();\n\t\t\t\tthis._unspiderfyLayer(layer);\n\t\t\t}\n\n\t\t\t//Remove the marker from clusters\n\t\t\tthis._removeLayer(layer, true);\n\t\t\tthis.fire('layerremove', { layer: layer });\n\n\t\t\t// Refresh bounds and weighted positions.\n\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\tlayer.off(this._childMarkerEventHandlers, this);\n\n\t\t\tif (this._featureGroup.hasLayer(layer)) {\n\t\t\t\tthis._featureGroup.removeLayer(layer);\n\t\t\t\tif (layer.clusterShow) {\n\t\t\t\t\tlayer.clusterShow();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t//Takes an array of markers and adds them in bulk\n\t\taddLayers: function (layersArray, skipLayerAddEvent) {\n\t\t\tif (!L.Util.isArray(layersArray)) {\n\t\t\t\treturn this.addLayer(layersArray);\n\t\t\t}\n\n\t\t\tvar fg = this._featureGroup,\n\t\t\t    npg = this._nonPointGroup,\n\t\t\t    chunked = this.options.chunkedLoading,\n\t\t\t    chunkInterval = this.options.chunkInterval,\n\t\t\t    chunkProgress = this.options.chunkProgress,\n\t\t\t    l = layersArray.length,\n\t\t\t    offset = 0,\n\t\t\t    originalArray = true,\n\t\t\t    m;\n\n\t\t\tif (this._map) {\n\t\t\t\tvar started = (new Date()).getTime();\n\t\t\t\tvar process = L.bind(function () {\n\t\t\t\t\tvar start = (new Date()).getTime();\n\n\t\t\t\t\t// Make sure to unspiderfy before starting to add some layers\n\t\t\t\t\tif (this._map && this._unspiderfy) {\n\t\t\t\t\t\tthis._unspiderfy();\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (; offset < l; offset++) {\n\t\t\t\t\t\tif (chunked && offset % 200 === 0) {\n\t\t\t\t\t\t\t// every couple hundred markers, instrument the time elapsed since processing started:\n\t\t\t\t\t\t\tvar elapsed = (new Date()).getTime() - start;\n\t\t\t\t\t\t\tif (elapsed > chunkInterval) {\n\t\t\t\t\t\t\t\tbreak; // been working too hard, time to take a break :-)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tm = layersArray[offset];\n\n\t\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\t\t// Side effects:\n\t\t\t\t\t\t// - Total increases, so chunkProgress ratio jumps backward.\n\t\t\t\t\t\t// - Groups are not included in this group, only their non-group child layers (hasLayer).\n\t\t\t\t\t\t// Changing array length while looping does not affect performance in current browsers:\n\t\t\t\t\t\t// http://jsperf.com/for-loop-changing-length/6\n\t\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Not point data, can't be clustered\n\t\t\t\t\t\tif (!m.getLatLng) {\n\t\t\t\t\t\t\tnpg.addLayer(m);\n\t\t\t\t\t\t\tif (!skipLayerAddEvent) {\n\t\t\t\t\t\t\t\tthis.fire('layeradd', { layer: m });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.hasLayer(m)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._addLayer(m, this._maxZoom);\n\t\t\t\t\t\tif (!skipLayerAddEvent) {\n\t\t\t\t\t\t\tthis.fire('layeradd', { layer: m });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//If we just made a cluster of size 2 then we need to remove the other marker from the map (if it is) or we never will\n\t\t\t\t\t\tif (m.__parent) {\n\t\t\t\t\t\t\tif (m.__parent.getChildCount() === 2) {\n\t\t\t\t\t\t\t\tvar markers = m.__parent.getAllChildMarkers(),\n\t\t\t\t\t\t\t\t    otherMarker = markers[0] === m ? markers[1] : markers[0];\n\t\t\t\t\t\t\t\tfg.removeLayer(otherMarker);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chunkProgress) {\n\t\t\t\t\t\t// report progress and time elapsed:\n\t\t\t\t\t\tchunkProgress(offset, l, (new Date()).getTime() - started);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Completed processing all markers.\n\t\t\t\t\tif (offset === l) {\n\n\t\t\t\t\t\t// Refresh bounds and weighted positions.\n\t\t\t\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\t\t\t\tthis._refreshClustersIcons();\n\n\t\t\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(process, this.options.chunkDelay);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tprocess();\n\t\t\t} else {\n\t\t\t\tvar needsClustering = this._needsClustering;\n\n\t\t\t\tfor (; offset < l; offset++) {\n\t\t\t\t\tm = layersArray[offset];\n\n\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t//Not point data, can't be clustered\n\t\t\t\t\tif (!m.getLatLng) {\n\t\t\t\t\t\tnpg.addLayer(m);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.hasLayer(m)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsClustering.push(m);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\t//Takes an array of markers and removes them in bulk\n\t\tremoveLayers: function (layersArray) {\n\t\t\tvar i, m,\n\t\t\t    l = layersArray.length,\n\t\t\t    fg = this._featureGroup,\n\t\t\t    npg = this._nonPointGroup,\n\t\t\t    originalArray = true;\n\n\t\t\tif (!this._map) {\n\t\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t\tm = layersArray[i];\n\n\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._arraySplice(this._needsClustering, m);\n\t\t\t\t\tnpg.removeLayer(m);\n\t\t\t\t\tif (this.hasLayer(m)) {\n\t\t\t\t\t\tthis._needsRemoving.push({ layer: m, latlng: m._latlng });\n\t\t\t\t\t}\n\t\t\t\t\tthis.fire('layerremove', { layer: m });\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif (this._unspiderfy) {\n\t\t\t\tthis._unspiderfy();\n\n\t\t\t\t// Work on a copy of the array, so that next loop is not affected.\n\t\t\t\tvar layersArray2 = layersArray.slice(),\n\t\t\t\t    l2 = l;\n\t\t\t\tfor (i = 0; i < l2; i++) {\n\t\t\t\t\tm = layersArray2[i];\n\n\t\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray2);\n\t\t\t\t\t\tl2 = layersArray2.length;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._unspiderfyLayer(m);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tm = layersArray[i];\n\n\t\t\t\t// Group of layers, append children to layersArray and skip.\n\t\t\t\tif (m instanceof L.LayerGroup) {\n\t\t\t\t\tif (originalArray) {\n\t\t\t\t\t\tlayersArray = layersArray.slice();\n\t\t\t\t\t\toriginalArray = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis._extractNonGroupLayers(m, layersArray);\n\t\t\t\t\tl = layersArray.length;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!m.__parent) {\n\t\t\t\t\tnpg.removeLayer(m);\n\t\t\t\t\tthis.fire('layerremove', { layer: m });\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis._removeLayer(m, true, true);\n\t\t\t\tthis.fire('layerremove', { layer: m });\n\n\t\t\t\tif (fg.hasLayer(m)) {\n\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Refresh bounds and weighted positions.\n\t\t\tthis._topClusterLevel._recalculateBounds();\n\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\t//Fix up the clusters and markers on the map\n\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);\n\n\t\t\treturn this;\n\t\t},\n\n\t\t//Removes all layers from the MarkerClusterGroup\n\t\tclearLayers: function () {\n\t\t\t//Need our own special implementation as the LayerGroup one doesn't work for us\n\n\t\t\t//If we aren't on the map (yet), blow away the markers we know of\n\t\t\tif (!this._map) {\n\t\t\t\tthis._needsClustering = [];\n\t\t\t\tthis._needsRemoving = [];\n\t\t\t\tdelete this._gridClusters;\n\t\t\t\tdelete this._gridUnclustered;\n\t\t\t}\n\n\t\t\tif (this._noanimationUnspiderfy) {\n\t\t\t\tthis._noanimationUnspiderfy();\n\t\t\t}\n\n\t\t\t//Remove all the visible layers\n\t\t\tthis._featureGroup.clearLayers();\n\t\t\tthis._nonPointGroup.clearLayers();\n\n\t\t\tthis.eachLayer(function (marker) {\n\t\t\t\tmarker.off(this._childMarkerEventHandlers, this);\n\t\t\t\tdelete marker.__parent;\n\t\t\t}, this);\n\n\t\t\tif (this._map) {\n\t\t\t\t//Reset _topClusterLevel and the DistanceGrids\n\t\t\t\tthis._generateInitialClusters();\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t//Override FeatureGroup.getBounds as it doesn't work\n\t\tgetBounds: function () {\n\t\t\tvar bounds = new L.LatLngBounds();\n\n\t\t\tif (this._topClusterLevel) {\n\t\t\t\tbounds.extend(this._topClusterLevel._bounds);\n\t\t\t}\n\n\t\t\tfor (var i = this._needsClustering.length - 1; i >= 0; i--) {\n\t\t\t\tbounds.extend(this._needsClustering[i].getLatLng());\n\t\t\t}\n\n\t\t\tbounds.extend(this._nonPointGroup.getBounds());\n\n\t\t\treturn bounds;\n\t\t},\n\n\t\t//Overrides LayerGroup.eachLayer\n\t\teachLayer: function (method, context) {\n\t\t\tvar markers = this._needsClustering.slice(),\n\t\t\t\tneedsRemoving = this._needsRemoving,\n\t\t\t\tthisNeedsRemoving, i, j;\n\n\t\t\tif (this._topClusterLevel) {\n\t\t\t\tthis._topClusterLevel.getAllChildMarkers(markers);\n\t\t\t}\n\n\t\t\tfor (i = markers.length - 1; i >= 0; i--) {\n\t\t\t\tthisNeedsRemoving = true;\n\n\t\t\t\tfor (j = needsRemoving.length - 1; j >= 0; j--) {\n\t\t\t\t\tif (needsRemoving[j].layer === markers[i]) {\n\t\t\t\t\t\tthisNeedsRemoving = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (thisNeedsRemoving) {\n\t\t\t\t\tmethod.call(context, markers[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._nonPointGroup.eachLayer(method, context);\n\t\t},\n\n\t\t//Overrides LayerGroup.getLayers\n\t\tgetLayers: function () {\n\t\t\tvar layers = [];\n\t\t\tthis.eachLayer(function (l) {\n\t\t\t\tlayers.push(l);\n\t\t\t});\n\t\t\treturn layers;\n\t\t},\n\n\t\t//Overrides LayerGroup.getLayer, WARNING: Really bad performance\n\t\tgetLayer: function (id) {\n\t\t\tvar result = null;\n\n\t\t\tid = parseInt(id, 10);\n\n\t\t\tthis.eachLayer(function (l) {\n\t\t\t\tif (L.stamp(l) === id) {\n\t\t\t\t\tresult = l;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\n\t\t//Returns true if the given layer is in this MarkerClusterGroup\n\t\thasLayer: function (layer) {\n\t\t\tif (!layer) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i, anArray = this._needsClustering;\n\n\t\t\tfor (i = anArray.length - 1; i >= 0; i--) {\n\t\t\t\tif (anArray[i] === layer) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tanArray = this._needsRemoving;\n\t\t\tfor (i = anArray.length - 1; i >= 0; i--) {\n\t\t\t\tif (anArray[i].layer === layer) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn !!(layer.__parent && layer.__parent._group === this) || this._nonPointGroup.hasLayer(layer);\n\t\t},\n\n\t\t//Zoom down to show the given layer (spiderfying if necessary) then calls the callback\n\t\tzoomToShowLayer: function (layer, callback) {\n\n\t\t\tvar map = this._map;\n\n\t\t\tif (typeof callback !== 'function') {\n\t\t\t\tcallback = function () {};\n\t\t\t}\n\n\t\t\tvar showMarker = function () {\n\t\t\t\t// Assumes that map.hasLayer checks for direct appearance on map, not recursively calling\n\t\t\t\t// hasLayer on Layer Groups that are on map (typically not calling this MarkerClusterGroup.hasLayer, which would always return true)\n\t\t\t\tif ((map.hasLayer(layer) || map.hasLayer(layer.__parent)) && !this._inZoomAnimation) {\n\t\t\t\t\tthis._map.off('moveend', showMarker, this);\n\t\t\t\t\tthis.off('animationend', showMarker, this);\n\n\t\t\t\t\tif (map.hasLayer(layer)) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t} else if (layer.__parent._icon) {\n\t\t\t\t\t\tthis.once('spiderfied', callback, this);\n\t\t\t\t\t\tlayer.__parent.spiderfy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (layer._icon && this._map.getBounds().contains(layer.getLatLng())) {\n\t\t\t\t//Layer is visible ond on screen, immediate return\n\t\t\t\tcallback();\n\t\t\t} else if (layer.__parent._zoom < Math.round(this._map._zoom)) {\n\t\t\t\t//Layer should be visible at this zoom level. It must not be on screen so just pan over to it\n\t\t\t\tthis._map.on('moveend', showMarker, this);\n\t\t\t\tthis._map.panTo(layer.getLatLng());\n\t\t\t} else {\n\t\t\t\tthis._map.on('moveend', showMarker, this);\n\t\t\t\tthis.on('animationend', showMarker, this);\n\t\t\t\tlayer.__parent.zoomToBounds();\n\t\t\t}\n\t\t},\n\n\t\t//Overrides FeatureGroup.onAdd\n\t\tonAdd: function (map) {\n\t\t\tthis._map = map;\n\t\t\tvar i, l, layer;\n\n\t\t\tif (!isFinite(this._map.getMaxZoom())) {\n\t\t\t\tthrow \"Map has no maxZoom specified\";\n\t\t\t}\n\n\t\t\tthis._featureGroup.addTo(map);\n\t\t\tthis._nonPointGroup.addTo(map);\n\n\t\t\tif (!this._gridClusters) {\n\t\t\t\tthis._generateInitialClusters();\n\t\t\t}\n\n\t\t\tthis._maxLat = map.options.crs.projection.MAX_LATITUDE;\n\n\t\t\t//Restore all the positions as they are in the MCG before removing them\n\t\t\tfor (i = 0, l = this._needsRemoving.length; i < l; i++) {\n\t\t\t\tlayer = this._needsRemoving[i];\n\t\t\t\tlayer.newlatlng = layer.layer._latlng;\n\t\t\t\tlayer.layer._latlng = layer.latlng;\n\t\t\t}\n\t\t\t//Remove them, then restore their new positions\n\t\t\tfor (i = 0, l = this._needsRemoving.length; i < l; i++) {\n\t\t\t\tlayer = this._needsRemoving[i];\n\t\t\t\tthis._removeLayer(layer.layer, true);\n\t\t\t\tlayer.layer._latlng = layer.newlatlng;\n\t\t\t}\n\t\t\tthis._needsRemoving = [];\n\n\t\t\t//Remember the current zoom level and bounds\n\t\t\tthis._zoom = Math.round(this._map._zoom);\n\t\t\tthis._currentShownBounds = this._getExpandedVisibleBounds();\n\n\t\t\tthis._map.on('zoomend', this._zoomEnd, this);\n\t\t\tthis._map.on('moveend', this._moveEnd, this);\n\n\t\t\tif (this._spiderfierOnAdd) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely\n\t\t\t\tthis._spiderfierOnAdd();\n\t\t\t}\n\n\t\t\tthis._bindEvents();\n\n\t\t\t//Actually add our markers to the map:\n\t\t\tl = this._needsClustering;\n\t\t\tthis._needsClustering = [];\n\t\t\tthis.addLayers(l, true);\n\t\t},\n\n\t\t//Overrides FeatureGroup.onRemove\n\t\tonRemove: function (map) {\n\t\t\tmap.off('zoomend', this._zoomEnd, this);\n\t\t\tmap.off('moveend', this._moveEnd, this);\n\n\t\t\tthis._unbindEvents();\n\n\t\t\t//In case we are in a cluster animation\n\t\t\tthis._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\n\n\t\t\tif (this._spiderfierOnRemove) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely\n\t\t\t\tthis._spiderfierOnRemove();\n\t\t\t}\n\n\t\t\tdelete this._maxLat;\n\n\t\t\t//Clean up all the layers we added to the map\n\t\t\tthis._hideCoverage();\n\t\t\tthis._featureGroup.remove();\n\t\t\tthis._nonPointGroup.remove();\n\n\t\t\tthis._featureGroup.clearLayers();\n\n\t\t\tthis._map = null;\n\t\t},\n\n\t\tgetVisibleParent: function (marker) {\n\t\t\tvar vMarker = marker;\n\t\t\twhile (vMarker && !vMarker._icon) {\n\t\t\t\tvMarker = vMarker.__parent;\n\t\t\t}\n\t\t\treturn vMarker || null;\n\t\t},\n\n\t\t//Remove the given object from the given array\n\t\t_arraySplice: function (anArray, obj) {\n\t\t\tfor (var i = anArray.length - 1; i >= 0; i--) {\n\t\t\t\tif (anArray[i] === obj) {\n\t\t\t\t\tanArray.splice(i, 1);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes a marker from all _gridUnclustered zoom levels, starting at the supplied zoom.\n\t\t * @param marker to be removed from _gridUnclustered.\n\t\t * @param z integer bottom start zoom level (included)\n\t\t * @private\n\t\t */\n\t\t_removeFromGridUnclustered: function (marker, z) {\n\t\t\tvar map = this._map,\n\t\t\t    gridUnclustered = this._gridUnclustered,\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom());\n\n\t\t\tfor (; z >= minZoom; z--) {\n\t\t\t\tif (!gridUnclustered[z].removeObject(marker, map.project(marker.getLatLng(), z))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_childMarkerDragStart: function (e) {\n\t\t\te.target.__dragStart = e.target._latlng;\n\t\t},\n\n\t\t_childMarkerMoved: function (e) {\n\t\t\tif (!this._ignoreMove && !e.target.__dragStart) {\n\t\t\t\tvar isPopupOpen = e.target._popup && e.target._popup.isOpen();\n\n\t\t\t\tthis._moveChild(e.target, e.oldLatLng, e.latlng);\n\n\t\t\t\tif (isPopupOpen) {\n\t\t\t\t\te.target.openPopup();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_moveChild: function (layer, from, to) {\n\t\t\tlayer._latlng = from;\n\t\t\tthis.removeLayer(layer);\n\n\t\t\tlayer._latlng = to;\n\t\t\tthis.addLayer(layer);\n\t\t},\n\n\t\t_childMarkerDragEnd: function (e) {\n\t\t\tvar dragStart = e.target.__dragStart;\n\t\t\tdelete e.target.__dragStart;\n\t\t\tif (dragStart) {\n\t\t\t\tthis._moveChild(e.target, dragStart, e.target._latlng);\n\t\t\t}\t\t\n\t\t},\n\n\n\t\t//Internal function for removing a marker from everything.\n\t\t//dontUpdateMap: set to true if you will handle updating the map manually (for bulk functions)\n\t\t_removeLayer: function (marker, removeFromDistanceGrid, dontUpdateMap) {\n\t\t\tvar gridClusters = this._gridClusters,\n\t\t\t\tgridUnclustered = this._gridUnclustered,\n\t\t\t\tfg = this._featureGroup,\n\t\t\t\tmap = this._map,\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom());\n\n\t\t\t//Remove the marker from distance clusters it might be in\n\t\t\tif (removeFromDistanceGrid) {\n\t\t\t\tthis._removeFromGridUnclustered(marker, this._maxZoom);\n\t\t\t}\n\n\t\t\t//Work our way up the clusters removing them as we go if required\n\t\t\tvar cluster = marker.__parent,\n\t\t\t\tmarkers = cluster._markers,\n\t\t\t\totherMarker;\n\n\t\t\t//Remove the marker from the immediate parents marker list\n\t\t\tthis._arraySplice(markers, marker);\n\n\t\t\twhile (cluster) {\n\t\t\t\tcluster._childCount--;\n\t\t\t\tcluster._boundsNeedUpdate = true;\n\n\t\t\t\tif (cluster._zoom < minZoom) {\n\t\t\t\t\t//Top level, do nothing\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (removeFromDistanceGrid && cluster._childCount <= 1) { //Cluster no longer required\n\t\t\t\t\t//We need to push the other marker up to the parent\n\t\t\t\t\totherMarker = cluster._markers[0] === marker ? cluster._markers[1] : cluster._markers[0];\n\n\t\t\t\t\t//Update distance grid\n\t\t\t\t\tgridClusters[cluster._zoom].removeObject(cluster, map.project(cluster._cLatLng, cluster._zoom));\n\t\t\t\t\tgridUnclustered[cluster._zoom].addObject(otherMarker, map.project(otherMarker.getLatLng(), cluster._zoom));\n\n\t\t\t\t\t//Move otherMarker up to parent\n\t\t\t\t\tthis._arraySplice(cluster.__parent._childClusters, cluster);\n\t\t\t\t\tcluster.__parent._markers.push(otherMarker);\n\t\t\t\t\totherMarker.__parent = cluster.__parent;\n\n\t\t\t\t\tif (cluster._icon) {\n\t\t\t\t\t\t//Cluster is currently on the map, need to put the marker on the map instead\n\t\t\t\t\t\tfg.removeLayer(cluster);\n\t\t\t\t\t\tif (!dontUpdateMap) {\n\t\t\t\t\t\t\tfg.addLayer(otherMarker);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcluster._iconNeedsUpdate = true;\n\t\t\t\t}\n\n\t\t\t\tcluster = cluster.__parent;\n\t\t\t}\n\n\t\t\tdelete marker.__parent;\n\t\t},\n\n\t\t_isOrIsParent: function (el, oel) {\n\t\t\twhile (oel) {\n\t\t\t\tif (el === oel) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\toel = oel.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t//Override L.Evented.fire\n\t\tfire: function (type, data, propagate) {\n\t\t\tif (data && data.layer instanceof L.MarkerCluster) {\n\t\t\t\t//Prevent multiple clustermouseover/off events if the icon is made up of stacked divs (Doesn't work in ie <= 8, no relatedTarget)\n\t\t\t\tif (data.originalEvent && this._isOrIsParent(data.layer._icon, data.originalEvent.relatedTarget)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttype = 'cluster' + type;\n\t\t\t}\n\n\t\t\tL.FeatureGroup.prototype.fire.call(this, type, data, propagate);\n\t\t},\n\n\t\t//Override L.Evented.listens\n\t\tlistens: function (type, propagate) {\n\t\t\treturn L.FeatureGroup.prototype.listens.call(this, type, propagate) || L.FeatureGroup.prototype.listens.call(this, 'cluster' + type, propagate);\n\t\t},\n\n\t\t//Default functionality\n\t\t_defaultIconCreateFunction: function (cluster) {\n\t\t\tvar childCount = cluster.getChildCount();\n\n\t\t\tvar c = ' marker-cluster-';\n\t\t\tif (childCount < 10) {\n\t\t\t\tc += 'small';\n\t\t\t} else if (childCount < 100) {\n\t\t\t\tc += 'medium';\n\t\t\t} else {\n\t\t\t\tc += 'large';\n\t\t\t}\n\n\t\t\treturn new L.DivIcon({ html: '<div><span>' + childCount + '</span></div>', className: 'marker-cluster' + c, iconSize: new L.Point(40, 40) });\n\t\t},\n\n\t\t_bindEvents: function () {\n\t\t\tvar map = this._map,\n\t\t\t    spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,\n\t\t\t    showCoverageOnHover = this.options.showCoverageOnHover,\n\t\t\t    zoomToBoundsOnClick = this.options.zoomToBoundsOnClick,\n\t\t\t    spiderfyOnEveryZoom = this.options.spiderfyOnEveryZoom;\n\n\t\t\t//Zoom on cluster click or spiderfy if we are at the lowest level\n\t\t\tif (spiderfyOnMaxZoom || zoomToBoundsOnClick || spiderfyOnEveryZoom) {\n\t\t\t\tthis.on('clusterclick clusterkeypress', this._zoomOrSpiderfy, this);\n\t\t\t}\n\n\t\t\t//Show convex hull (boundary) polygon on mouse over\n\t\t\tif (showCoverageOnHover) {\n\t\t\t\tthis.on('clustermouseover', this._showCoverage, this);\n\t\t\t\tthis.on('clustermouseout', this._hideCoverage, this);\n\t\t\t\tmap.on('zoomend', this._hideCoverage, this);\n\t\t\t}\n\t\t},\n\n\t\t_zoomOrSpiderfy: function (e) {\n\t\t\tvar cluster = e.layer,\n\t\t\t    bottomCluster = cluster;\n\n\t\t\tif (e.type === 'clusterkeypress' && e.originalEvent && e.originalEvent.keyCode !== 13) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twhile (bottomCluster._childClusters.length === 1) {\n\t\t\t\tbottomCluster = bottomCluster._childClusters[0];\n\t\t\t}\n\n\t\t\tif (bottomCluster._zoom === this._maxZoom &&\n\t\t\t\tbottomCluster._childCount === cluster._childCount &&\n\t\t\t\tthis.options.spiderfyOnMaxZoom) {\n\n\t\t\t\t// All child markers are contained in a single cluster from this._maxZoom to this cluster.\n\t\t\t\tcluster.spiderfy();\n\t\t\t} else if (this.options.zoomToBoundsOnClick) {\n\t\t\t\tcluster.zoomToBounds();\n\t\t\t}\n\n\t\t\tif (this.options.spiderfyOnEveryZoom) {\n\t\t\t\tcluster.spiderfy();\n\t\t\t}\n\n\t\t\t// Focus the map again for keyboard users.\n\t\t\tif (e.originalEvent && e.originalEvent.keyCode === 13) {\n\t\t\t\tthis._map._container.focus();\n\t\t\t}\n\t\t},\n\n\t\t_showCoverage: function (e) {\n\t\t\tvar map = this._map;\n\t\t\tif (this._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._shownPolygon) {\n\t\t\t\tmap.removeLayer(this._shownPolygon);\n\t\t\t}\n\t\t\tif (e.layer.getChildCount() > 2 && e.layer !== this._spiderfied) {\n\t\t\t\tthis._shownPolygon = new L.Polygon(e.layer.getConvexHull(), this.options.polygonOptions);\n\t\t\t\tmap.addLayer(this._shownPolygon);\n\t\t\t}\n\t\t},\n\n\t\t_hideCoverage: function () {\n\t\t\tif (this._shownPolygon) {\n\t\t\t\tthis._map.removeLayer(this._shownPolygon);\n\t\t\t\tthis._shownPolygon = null;\n\t\t\t}\n\t\t},\n\n\t\t_unbindEvents: function () {\n\t\t\tvar spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,\n\t\t\t\tshowCoverageOnHover = this.options.showCoverageOnHover,\n\t\t\t\tzoomToBoundsOnClick = this.options.zoomToBoundsOnClick,\n\t\t\t\tspiderfyOnEveryZoom = this.options.spiderfyOnEveryZoom,\n\t\t\t\tmap = this._map;\n\n\t\t\tif (spiderfyOnMaxZoom || zoomToBoundsOnClick || spiderfyOnEveryZoom) {\n\t\t\t\tthis.off('clusterclick clusterkeypress', this._zoomOrSpiderfy, this);\n\t\t\t}\n\t\t\tif (showCoverageOnHover) {\n\t\t\t\tthis.off('clustermouseover', this._showCoverage, this);\n\t\t\t\tthis.off('clustermouseout', this._hideCoverage, this);\n\t\t\t\tmap.off('zoomend', this._hideCoverage, this);\n\t\t\t}\n\t\t},\n\n\t\t_zoomEnd: function () {\n\t\t\tif (!this._map) { //May have been removed from the map by a zoomEnd handler\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._mergeSplitClusters();\n\n\t\t\tthis._zoom = Math.round(this._map._zoom);\n\t\t\tthis._currentShownBounds = this._getExpandedVisibleBounds();\n\t\t},\n\n\t\t_moveEnd: function () {\n\t\t\tif (this._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newBounds = this._getExpandedVisibleBounds();\n\n\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), this._zoom, newBounds);\n\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, Math.round(this._map._zoom), newBounds);\n\n\t\t\tthis._currentShownBounds = newBounds;\n\t\t\treturn;\n\t\t},\n\n\t\t_generateInitialClusters: function () {\n\t\t\tvar maxZoom = Math.ceil(this._map.getMaxZoom()),\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom()),\n\t\t\t\tradius = this.options.maxClusterRadius,\n\t\t\t\tradiusFn = radius;\n\n\t\t\t//If we just set maxClusterRadius to a single number, we need to create\n\t\t\t//a simple function to return that number. Otherwise, we just have to\n\t\t\t//use the function we've passed in.\n\t\t\tif (typeof radius !== \"function\") {\n\t\t\t\tradiusFn = function () { return radius; };\n\t\t\t}\n\n\t\t\tif (this.options.disableClusteringAtZoom !== null) {\n\t\t\t\tmaxZoom = this.options.disableClusteringAtZoom - 1;\n\t\t\t}\n\t\t\tthis._maxZoom = maxZoom;\n\t\t\tthis._gridClusters = {};\n\t\t\tthis._gridUnclustered = {};\n\n\t\t\t//Set up DistanceGrids for each zoom\n\t\t\tfor (var zoom = maxZoom; zoom >= minZoom; zoom--) {\n\t\t\t\tthis._gridClusters[zoom] = new L.DistanceGrid(radiusFn(zoom));\n\t\t\t\tthis._gridUnclustered[zoom] = new L.DistanceGrid(radiusFn(zoom));\n\t\t\t}\n\n\t\t\t// Instantiate the appropriate L.MarkerCluster class (animated or not).\n\t\t\tthis._topClusterLevel = new this._markerCluster(this, minZoom - 1);\n\t\t},\n\n\t\t//Zoom: Zoom to start adding at (Pass this._maxZoom to start at the bottom)\n\t\t_addLayer: function (layer, zoom) {\n\t\t\tvar gridClusters = this._gridClusters,\n\t\t\t    gridUnclustered = this._gridUnclustered,\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom()),\n\t\t\t    markerPoint, z;\n\n\t\t\tif (this.options.singleMarkerMode) {\n\t\t\t\tthis._overrideMarkerIcon(layer);\n\t\t\t}\n\n\t\t\tlayer.on(this._childMarkerEventHandlers, this);\n\n\t\t\t//Find the lowest zoom level to slot this one in\n\t\t\tfor (; zoom >= minZoom; zoom--) {\n\t\t\t\tmarkerPoint = this._map.project(layer.getLatLng(), zoom); // calculate pixel position\n\n\t\t\t\t//Try find a cluster close by\n\t\t\t\tvar closest = gridClusters[zoom].getNearObject(markerPoint);\n\t\t\t\tif (closest) {\n\t\t\t\t\tclosest._addChild(layer);\n\t\t\t\t\tlayer.__parent = closest;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//Try find a marker close by to form a new cluster with\n\t\t\t\tclosest = gridUnclustered[zoom].getNearObject(markerPoint);\n\t\t\t\tif (closest) {\n\t\t\t\t\tvar parent = closest.__parent;\n\t\t\t\t\tif (parent) {\n\t\t\t\t\t\tthis._removeLayer(closest, false);\n\t\t\t\t\t}\n\n\t\t\t\t\t//Create new cluster with these 2 in it\n\n\t\t\t\t\tvar newCluster = new this._markerCluster(this, zoom, closest, layer);\n\t\t\t\t\tgridClusters[zoom].addObject(newCluster, this._map.project(newCluster._cLatLng, zoom));\n\t\t\t\t\tclosest.__parent = newCluster;\n\t\t\t\t\tlayer.__parent = newCluster;\n\n\t\t\t\t\t//First create any new intermediate parent clusters that don't exist\n\t\t\t\t\tvar lastParent = newCluster;\n\t\t\t\t\tfor (z = zoom - 1; z > parent._zoom; z--) {\n\t\t\t\t\t\tlastParent = new this._markerCluster(this, z, lastParent);\n\t\t\t\t\t\tgridClusters[z].addObject(lastParent, this._map.project(closest.getLatLng(), z));\n\t\t\t\t\t}\n\t\t\t\t\tparent._addChild(lastParent);\n\n\t\t\t\t\t//Remove closest from this zoom level and any above that it is in, replace with newCluster\n\t\t\t\t\tthis._removeFromGridUnclustered(closest, zoom);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//Didn't manage to cluster in at this zoom, record us as a marker here and continue upwards\n\t\t\t\tgridUnclustered[zoom].addObject(layer, markerPoint);\n\t\t\t}\n\n\t\t\t//Didn't get in anything, add us to the top\n\t\t\tthis._topClusterLevel._addChild(layer);\n\t\t\tlayer.__parent = this._topClusterLevel;\n\t\t\treturn;\n\t\t},\n\n\t\t/**\n\t\t * Refreshes the icon of all \"dirty\" visible clusters.\n\t\t * Non-visible \"dirty\" clusters will be updated when they are added to the map.\n\t\t * @private\n\t\t */\n\t\t_refreshClustersIcons: function () {\n\t\t\tthis._featureGroup.eachLayer(function (c) {\n\t\t\t\tif (c instanceof L.MarkerCluster && c._iconNeedsUpdate) {\n\t\t\t\t\tc._updateIcon();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t//Enqueue code to fire after the marker expand/contract has happened\n\t\t_enqueue: function (fn) {\n\t\t\tthis._queue.push(fn);\n\t\t\tif (!this._queueTimeout) {\n\t\t\t\tthis._queueTimeout = setTimeout(L.bind(this._processQueue, this), 300);\n\t\t\t}\n\t\t},\n\t\t_processQueue: function () {\n\t\t\tfor (var i = 0; i < this._queue.length; i++) {\n\t\t\t\tthis._queue[i].call(this);\n\t\t\t}\n\t\t\tthis._queue.length = 0;\n\t\t\tclearTimeout(this._queueTimeout);\n\t\t\tthis._queueTimeout = null;\n\t\t},\n\n\t\t//Merge and split any existing clusters that are too big or small\n\t\t_mergeSplitClusters: function () {\n\t\t\tvar mapZoom = Math.round(this._map._zoom);\n\n\t\t\t//In case we are starting to split before the animation finished\n\t\t\tthis._processQueue();\n\n\t\t\tif (this._zoom < mapZoom && this._currentShownBounds.intersects(this._getExpandedVisibleBounds())) { //Zoom in, split\n\t\t\t\tthis._animationStart();\n\t\t\t\t//Remove clusters now off screen\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), this._zoom, this._getExpandedVisibleBounds());\n\n\t\t\t\tthis._animationZoomIn(this._zoom, mapZoom);\n\n\t\t\t} else if (this._zoom > mapZoom) { //Zoom out, merge\n\t\t\t\tthis._animationStart();\n\n\t\t\t\tthis._animationZoomOut(this._zoom, mapZoom);\n\t\t\t} else {\n\t\t\t\tthis._moveEnd();\n\t\t\t}\n\t\t},\n\n\t\t//Gets the maps visible bounds expanded in each direction by the size of the screen (so the user cannot see an area we do not cover in one pan)\n\t\t_getExpandedVisibleBounds: function () {\n\t\t\tif (!this.options.removeOutsideVisibleBounds) {\n\t\t\t\treturn this._mapBoundsInfinite;\n\t\t\t} else if (L.Browser.mobile) {\n\t\t\t\treturn this._checkBoundsMaxLat(this._map.getBounds());\n\t\t\t}\n\n\t\t\treturn this._checkBoundsMaxLat(this._map.getBounds().pad(1)); // Padding expands the bounds by its own dimensions but scaled with the given factor.\n\t\t},\n\n\t\t/**\n\t\t * Expands the latitude to Infinity (or -Infinity) if the input bounds reach the map projection maximum defined latitude\n\t\t * (in the case of Web/Spherical Mercator, it is 85.0511287798 / see https://en.wikipedia.org/wiki/Web_Mercator#Formulas).\n\t\t * Otherwise, the removeOutsideVisibleBounds option will remove markers beyond that limit, whereas the same markers without\n\t\t * this option (or outside MCG) will have their position floored (ceiled) by the projection and rendered at that limit,\n\t\t * making the user think that MCG \"eats\" them and never displays them again.\n\t\t * @param bounds L.LatLngBounds\n\t\t * @returns {L.LatLngBounds}\n\t\t * @private\n\t\t */\n\t\t_checkBoundsMaxLat: function (bounds) {\n\t\t\tvar maxLat = this._maxLat;\n\n\t\t\tif (maxLat !== undefined) {\n\t\t\t\tif (bounds.getNorth() >= maxLat) {\n\t\t\t\t\tbounds._northEast.lat = Infinity;\n\t\t\t\t}\n\t\t\t\tif (bounds.getSouth() <= -maxLat) {\n\t\t\t\t\tbounds._southWest.lat = -Infinity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn bounds;\n\t\t},\n\n\t\t//Shared animation code\n\t\t_animationAddLayerNonAnimated: function (layer, newCluster) {\n\t\t\tif (newCluster === layer) {\n\t\t\t\tthis._featureGroup.addLayer(layer);\n\t\t\t} else if (newCluster._childCount === 2) {\n\t\t\t\tnewCluster._addToMap();\n\n\t\t\t\tvar markers = newCluster.getAllChildMarkers();\n\t\t\t\tthis._featureGroup.removeLayer(markers[0]);\n\t\t\t\tthis._featureGroup.removeLayer(markers[1]);\n\t\t\t} else {\n\t\t\t\tnewCluster._updateIcon();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Extracts individual (i.e. non-group) layers from a Layer Group.\n\t\t * @param group to extract layers from.\n\t\t * @param output {Array} in which to store the extracted layers.\n\t\t * @returns {*|Array}\n\t\t * @private\n\t\t */\n\t\t_extractNonGroupLayers: function (group, output) {\n\t\t\tvar layers = group.getLayers(),\n\t\t\t    i = 0,\n\t\t\t    layer;\n\n\t\t\toutput = output || [];\n\n\t\t\tfor (; i < layers.length; i++) {\n\t\t\t\tlayer = layers[i];\n\n\t\t\t\tif (layer instanceof L.LayerGroup) {\n\t\t\t\t\tthis._extractNonGroupLayers(layer, output);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\toutput.push(layer);\n\t\t\t}\n\n\t\t\treturn output;\n\t\t},\n\n\t\t/**\n\t\t * Implements the singleMarkerMode option.\n\t\t * @param layer Marker to re-style using the Clusters iconCreateFunction.\n\t\t * @returns {L.Icon} The newly created icon.\n\t\t * @private\n\t\t */\n\t\t_overrideMarkerIcon: function (layer) {\n\t\t\tvar icon = layer.options.icon = this.options.iconCreateFunction({\n\t\t\t\tgetChildCount: function () {\n\t\t\t\t\treturn 1;\n\t\t\t\t},\n\t\t\t\tgetAllChildMarkers: function () {\n\t\t\t\t\treturn [layer];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn icon;\n\t\t}\n\t});\n\n\t// Constant bounds used in case option \"removeOutsideVisibleBounds\" is set to false.\n\tL.MarkerClusterGroup.include({\n\t\t_mapBoundsInfinite: new L.LatLngBounds(new L.LatLng(-Infinity, -Infinity), new L.LatLng(Infinity, Infinity))\n\t});\n\n\tL.MarkerClusterGroup.include({\n\t\t_noAnimation: {\n\t\t\t//Non Animated versions of everything\n\t\t\t_animationStart: function () {\n\t\t\t\t//Do nothing...\n\t\t\t},\n\t\t\t_animationZoomIn: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), previousZoomLevel);\n\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\n\t\t\t\t//We didn't actually animate, but we use this event to mean \"clustering animations have finished\"\n\t\t\t\tthis.fire('animationend');\n\t\t\t},\n\t\t\t_animationZoomOut: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), previousZoomLevel);\n\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\n\t\t\t\t//We didn't actually animate, but we use this event to mean \"clustering animations have finished\"\n\t\t\t\tthis.fire('animationend');\n\t\t\t},\n\t\t\t_animationAddLayer: function (layer, newCluster) {\n\t\t\t\tthis._animationAddLayerNonAnimated(layer, newCluster);\n\t\t\t}\n\t\t},\n\n\t\t_withAnimation: {\n\t\t\t//Animated versions here\n\t\t\t_animationStart: function () {\n\t\t\t\tthis._map._mapPane.className += ' leaflet-cluster-anim';\n\t\t\t\tthis._inZoomAnimation++;\n\t\t\t},\n\n\t\t\t_animationZoomIn: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tvar bounds = this._getExpandedVisibleBounds(),\n\t\t\t\t    fg = this._featureGroup,\n\t\t\t\t\tminZoom = Math.floor(this._map.getMinZoom()),\n\t\t\t\t    i;\n\n\t\t\t\tthis._ignoreMove = true;\n\n\t\t\t\t//Add all children of current clusters to map and remove those clusters from map\n\t\t\t\tthis._topClusterLevel._recursively(bounds, previousZoomLevel, minZoom, function (c) {\n\t\t\t\t\tvar startPos = c._latlng,\n\t\t\t\t\t    markers  = c._markers,\n\t\t\t\t\t    m;\n\n\t\t\t\t\tif (!bounds.contains(startPos)) {\n\t\t\t\t\t\tstartPos = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c._isSingleParent() && previousZoomLevel + 1 === newZoomLevel) { //Immediately add the new child and remove us\n\t\t\t\t\t\tfg.removeLayer(c);\n\t\t\t\t\t\tc._recursivelyAddChildrenToMap(null, newZoomLevel, bounds);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Fade out old cluster\n\t\t\t\t\t\tc.clusterHide();\n\t\t\t\t\t\tc._recursivelyAddChildrenToMap(startPos, newZoomLevel, bounds);\n\t\t\t\t\t}\n\n\t\t\t\t\t//Remove all markers that aren't visible any more\n\t\t\t\t\t//TODO: Do we actually need to do this on the higher levels too?\n\t\t\t\t\tfor (i = markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = markers[i];\n\t\t\t\t\t\tif (!bounds.contains(m._latlng)) {\n\t\t\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tthis._forceLayout();\n\n\t\t\t\t//Update opacities\n\t\t\t\tthis._topClusterLevel._recursivelyBecomeVisible(bounds, newZoomLevel);\n\t\t\t\t//TODO Maybe? Update markers in _recursivelyBecomeVisible\n\t\t\t\tfg.eachLayer(function (n) {\n\t\t\t\t\tif (!(n instanceof L.MarkerCluster) && n._icon) {\n\t\t\t\t\t\tn.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//update the positions of the just added clusters/markers\n\t\t\t\tthis._topClusterLevel._recursively(bounds, previousZoomLevel, newZoomLevel, function (c) {\n\t\t\t\t\tc._recursivelyRestoreChildPositions(newZoomLevel);\n\t\t\t\t});\n\n\t\t\t\tthis._ignoreMove = false;\n\n\t\t\t\t//Remove the old clusters and close the zoom animation\n\t\t\t\tthis._enqueue(function () {\n\t\t\t\t\t//update the positions of the just added clusters/markers\n\t\t\t\t\tthis._topClusterLevel._recursively(bounds, previousZoomLevel, minZoom, function (c) {\n\t\t\t\t\t\tfg.removeLayer(c);\n\t\t\t\t\t\tc.clusterShow();\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._animationEnd();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t_animationZoomOut: function (previousZoomLevel, newZoomLevel) {\n\t\t\t\tthis._animationZoomOutSingle(this._topClusterLevel, previousZoomLevel - 1, newZoomLevel);\n\n\t\t\t\t//Need to add markers for those that weren't on the map before but are now\n\t\t\t\tthis._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());\n\t\t\t\t//Remove markers that were on the map before but won't be now\n\t\t\t\tthis._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, Math.floor(this._map.getMinZoom()), previousZoomLevel, this._getExpandedVisibleBounds());\n\t\t\t},\n\n\t\t\t_animationAddLayer: function (layer, newCluster) {\n\t\t\t\tvar me = this,\n\t\t\t\t    fg = this._featureGroup;\n\n\t\t\t\tfg.addLayer(layer);\n\t\t\t\tif (newCluster !== layer) {\n\t\t\t\t\tif (newCluster._childCount > 2) { //Was already a cluster\n\n\t\t\t\t\t\tnewCluster._updateIcon();\n\t\t\t\t\t\tthis._forceLayout();\n\t\t\t\t\t\tthis._animationStart();\n\n\t\t\t\t\t\tlayer._setPos(this._map.latLngToLayerPoint(newCluster.getLatLng()));\n\t\t\t\t\t\tlayer.clusterHide();\n\n\t\t\t\t\t\tthis._enqueue(function () {\n\t\t\t\t\t\t\tfg.removeLayer(layer);\n\t\t\t\t\t\t\tlayer.clusterShow();\n\n\t\t\t\t\t\t\tme._animationEnd();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else { //Just became a cluster\n\t\t\t\t\t\tthis._forceLayout();\n\n\t\t\t\t\t\tme._animationStart();\n\t\t\t\t\t\tme._animationZoomOutSingle(newCluster, this._map.getMaxZoom(), this._zoom);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Private methods for animated versions.\n\t\t_animationZoomOutSingle: function (cluster, previousZoomLevel, newZoomLevel) {\n\t\t\tvar bounds = this._getExpandedVisibleBounds(),\n\t\t\t\tminZoom = Math.floor(this._map.getMinZoom());\n\n\t\t\t//Animate all of the markers in the clusters to move to their cluster center point\n\t\t\tcluster._recursivelyAnimateChildrenInAndAddSelfToMap(bounds, minZoom, previousZoomLevel + 1, newZoomLevel);\n\n\t\t\tvar me = this;\n\n\t\t\t//Update the opacity (If we immediately set it they won't animate)\n\t\t\tthis._forceLayout();\n\t\t\tcluster._recursivelyBecomeVisible(bounds, newZoomLevel);\n\n\t\t\t//TODO: Maybe use the transition timing stuff to make this more reliable\n\t\t\t//When the animations are done, tidy up\n\t\t\tthis._enqueue(function () {\n\n\t\t\t\t//This cluster stopped being a cluster before the timeout fired\n\t\t\t\tif (cluster._childCount === 1) {\n\t\t\t\t\tvar m = cluster._markers[0];\n\t\t\t\t\t//If we were in a cluster animation at the time then the opacity and position of our child could be wrong now, so fix it\n\t\t\t\t\tthis._ignoreMove = true;\n\t\t\t\t\tm.setLatLng(m.getLatLng());\n\t\t\t\t\tthis._ignoreMove = false;\n\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcluster._recursively(bounds, newZoomLevel, minZoom, function (c) {\n\t\t\t\t\t\tc._recursivelyRemoveChildrenFromMap(bounds, minZoom, previousZoomLevel + 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tme._animationEnd();\n\t\t\t});\n\t\t},\n\n\t\t_animationEnd: function () {\n\t\t\tif (this._map) {\n\t\t\t\tthis._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');\n\t\t\t}\n\t\t\tthis._inZoomAnimation--;\n\t\t\tthis.fire('animationend');\n\t\t},\n\n\t\t//Force a browser layout of stuff in the map\n\t\t// Should apply the current opacity and location to all elements so we can update them again for an animation\n\t\t_forceLayout: function () {\n\t\t\t//In my testing this works, infact offsetWidth of any element seems to work.\n\t\t\t//Could loop all this._layers and do this for each _icon if it stops working\n\n\t\t\tL.Util.falseFn(document.body.offsetWidth);\n\t\t}\n\t});\n\n\tL.markerClusterGroup = function (options) {\n\t\treturn new L.MarkerClusterGroup(options);\n\t};\n\n\tvar MarkerCluster = L.MarkerCluster = L.Marker.extend({\n\t\toptions: L.Icon.prototype.options,\n\n\t\tinitialize: function (group, zoom, a, b) {\n\n\t\t\tL.Marker.prototype.initialize.call(this, a ? (a._cLatLng || a.getLatLng()) : new L.LatLng(0, 0),\n\t            { icon: this, pane: group.options.clusterPane });\n\n\t\t\tthis._group = group;\n\t\t\tthis._zoom = zoom;\n\n\t\t\tthis._markers = [];\n\t\t\tthis._childClusters = [];\n\t\t\tthis._childCount = 0;\n\t\t\tthis._iconNeedsUpdate = true;\n\t\t\tthis._boundsNeedUpdate = true;\n\n\t\t\tthis._bounds = new L.LatLngBounds();\n\n\t\t\tif (a) {\n\t\t\t\tthis._addChild(a);\n\t\t\t}\n\t\t\tif (b) {\n\t\t\t\tthis._addChild(b);\n\t\t\t}\n\t\t},\n\n\t\t//Recursively retrieve all child markers of this cluster\n\t\tgetAllChildMarkers: function (storageArray, ignoreDraggedMarker) {\n\t\t\tstorageArray = storageArray || [];\n\n\t\t\tfor (var i = this._childClusters.length - 1; i >= 0; i--) {\n\t\t\t\tthis._childClusters[i].getAllChildMarkers(storageArray, ignoreDraggedMarker);\n\t\t\t}\n\n\t\t\tfor (var j = this._markers.length - 1; j >= 0; j--) {\n\t\t\t\tif (ignoreDraggedMarker && this._markers[j].__dragStart) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstorageArray.push(this._markers[j]);\n\t\t\t}\n\n\t\t\treturn storageArray;\n\t\t},\n\n\t\t//Returns the count of how many child markers we have\n\t\tgetChildCount: function () {\n\t\t\treturn this._childCount;\n\t\t},\n\n\t\t//Zoom to the minimum of showing all of the child markers, or the extents of this cluster\n\t\tzoomToBounds: function (fitBoundsOptions) {\n\t\t\tvar childClusters = this._childClusters.slice(),\n\t\t\t\tmap = this._group._map,\n\t\t\t\tboundsZoom = map.getBoundsZoom(this._bounds),\n\t\t\t\tzoom = this._zoom + 1,\n\t\t\t\tmapZoom = map.getZoom(),\n\t\t\t\ti;\n\n\t\t\t//calculate how far we need to zoom down to see all of the markers\n\t\t\twhile (childClusters.length > 0 && boundsZoom > zoom) {\n\t\t\t\tzoom++;\n\t\t\t\tvar newClusters = [];\n\t\t\t\tfor (i = 0; i < childClusters.length; i++) {\n\t\t\t\t\tnewClusters = newClusters.concat(childClusters[i]._childClusters);\n\t\t\t\t}\n\t\t\t\tchildClusters = newClusters;\n\t\t\t}\n\n\t\t\tif (boundsZoom > zoom) {\n\t\t\t\tthis._group._map.setView(this._latlng, zoom);\n\t\t\t} else if (boundsZoom <= mapZoom) { //If fitBounds wouldn't zoom us down, zoom us down instead\n\t\t\t\tthis._group._map.setView(this._latlng, mapZoom + 1);\n\t\t\t} else {\n\t\t\t\tthis._group._map.fitBounds(this._bounds, fitBoundsOptions);\n\t\t\t}\n\t\t},\n\n\t\tgetBounds: function () {\n\t\t\tvar bounds = new L.LatLngBounds();\n\t\t\tbounds.extend(this._bounds);\n\t\t\treturn bounds;\n\t\t},\n\n\t\t_updateIcon: function () {\n\t\t\tthis._iconNeedsUpdate = true;\n\t\t\tif (this._icon) {\n\t\t\t\tthis.setIcon(this);\n\t\t\t}\n\t\t},\n\n\t\t//Cludge for Icon, we pretend to be an icon for performance\n\t\tcreateIcon: function () {\n\t\t\tif (this._iconNeedsUpdate) {\n\t\t\t\tthis._iconObj = this._group.options.iconCreateFunction(this);\n\t\t\t\tthis._iconNeedsUpdate = false;\n\t\t\t}\n\t\t\treturn this._iconObj.createIcon();\n\t\t},\n\t\tcreateShadow: function () {\n\t\t\treturn this._iconObj.createShadow();\n\t\t},\n\n\n\t\t_addChild: function (new1, isNotificationFromChild) {\n\n\t\t\tthis._iconNeedsUpdate = true;\n\n\t\t\tthis._boundsNeedUpdate = true;\n\t\t\tthis._setClusterCenter(new1);\n\n\t\t\tif (new1 instanceof L.MarkerCluster) {\n\t\t\t\tif (!isNotificationFromChild) {\n\t\t\t\t\tthis._childClusters.push(new1);\n\t\t\t\t\tnew1.__parent = this;\n\t\t\t\t}\n\t\t\t\tthis._childCount += new1._childCount;\n\t\t\t} else {\n\t\t\t\tif (!isNotificationFromChild) {\n\t\t\t\t\tthis._markers.push(new1);\n\t\t\t\t}\n\t\t\t\tthis._childCount++;\n\t\t\t}\n\n\t\t\tif (this.__parent) {\n\t\t\t\tthis.__parent._addChild(new1, true);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Makes sure the cluster center is set. If not, uses the child center if it is a cluster, or the marker position.\n\t\t * @param child L.MarkerCluster|L.Marker that will be used as cluster center if not defined yet.\n\t\t * @private\n\t\t */\n\t\t_setClusterCenter: function (child) {\n\t\t\tif (!this._cLatLng) {\n\t\t\t\t// when clustering, take position of the first point as the cluster center\n\t\t\t\tthis._cLatLng = child._cLatLng || child._latlng;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Assigns impossible bounding values so that the next extend entirely determines the new bounds.\n\t\t * This method avoids having to trash the previous L.LatLngBounds object and to create a new one, which is much slower for this class.\n\t\t * As long as the bounds are not extended, most other methods would probably fail, as they would with bounds initialized but not extended.\n\t\t * @private\n\t\t */\n\t\t_resetBounds: function () {\n\t\t\tvar bounds = this._bounds;\n\n\t\t\tif (bounds._southWest) {\n\t\t\t\tbounds._southWest.lat = Infinity;\n\t\t\t\tbounds._southWest.lng = Infinity;\n\t\t\t}\n\t\t\tif (bounds._northEast) {\n\t\t\t\tbounds._northEast.lat = -Infinity;\n\t\t\t\tbounds._northEast.lng = -Infinity;\n\t\t\t}\n\t\t},\n\n\t\t_recalculateBounds: function () {\n\t\t\tvar markers = this._markers,\n\t\t\t    childClusters = this._childClusters,\n\t\t\t    latSum = 0,\n\t\t\t    lngSum = 0,\n\t\t\t    totalCount = this._childCount,\n\t\t\t    i, child, childLatLng, childCount;\n\n\t\t\t// Case where all markers are removed from the map and we are left with just an empty _topClusterLevel.\n\t\t\tif (totalCount === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Reset rather than creating a new object, for performance.\n\t\t\tthis._resetBounds();\n\n\t\t\t// Child markers.\n\t\t\tfor (i = 0; i < markers.length; i++) {\n\t\t\t\tchildLatLng = markers[i]._latlng;\n\n\t\t\t\tthis._bounds.extend(childLatLng);\n\n\t\t\t\tlatSum += childLatLng.lat;\n\t\t\t\tlngSum += childLatLng.lng;\n\t\t\t}\n\n\t\t\t// Child clusters.\n\t\t\tfor (i = 0; i < childClusters.length; i++) {\n\t\t\t\tchild = childClusters[i];\n\n\t\t\t\t// Re-compute child bounds and weighted position first if necessary.\n\t\t\t\tif (child._boundsNeedUpdate) {\n\t\t\t\t\tchild._recalculateBounds();\n\t\t\t\t}\n\n\t\t\t\tthis._bounds.extend(child._bounds);\n\n\t\t\t\tchildLatLng = child._wLatLng;\n\t\t\t\tchildCount = child._childCount;\n\n\t\t\t\tlatSum += childLatLng.lat * childCount;\n\t\t\t\tlngSum += childLatLng.lng * childCount;\n\t\t\t}\n\n\t\t\tthis._latlng = this._wLatLng = new L.LatLng(latSum / totalCount, lngSum / totalCount);\n\n\t\t\t// Reset dirty flag.\n\t\t\tthis._boundsNeedUpdate = false;\n\t\t},\n\n\t\t//Set our markers position as given and add it to the map\n\t\t_addToMap: function (startPos) {\n\t\t\tif (startPos) {\n\t\t\t\tthis._backupLatlng = this._latlng;\n\t\t\t\tthis.setLatLng(startPos);\n\t\t\t}\n\t\t\tthis._group._featureGroup.addLayer(this);\n\t\t},\n\n\t\t_recursivelyAnimateChildrenIn: function (bounds, center, maxZoom) {\n\t\t\tthis._recursively(bounds, this._group._map.getMinZoom(), maxZoom - 1,\n\t\t\t\tfunction (c) {\n\t\t\t\t\tvar markers = c._markers,\n\t\t\t\t\t\ti, m;\n\t\t\t\t\tfor (i = markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = markers[i];\n\n\t\t\t\t\t\t//Only do it if the icon is still on the map\n\t\t\t\t\t\tif (m._icon) {\n\t\t\t\t\t\t\tm._setPos(center);\n\t\t\t\t\t\t\tm.clusterHide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction (c) {\n\t\t\t\t\tvar childClusters = c._childClusters,\n\t\t\t\t\t\tj, cm;\n\t\t\t\t\tfor (j = childClusters.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tcm = childClusters[j];\n\t\t\t\t\t\tif (cm._icon) {\n\t\t\t\t\t\t\tcm._setPos(center);\n\t\t\t\t\t\t\tcm.clusterHide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t_recursivelyAnimateChildrenInAndAddSelfToMap: function (bounds, mapMinZoom, previousZoomLevel, newZoomLevel) {\n\t\t\tthis._recursively(bounds, newZoomLevel, mapMinZoom,\n\t\t\t\tfunction (c) {\n\t\t\t\t\tc._recursivelyAnimateChildrenIn(bounds, c._group._map.latLngToLayerPoint(c.getLatLng()).round(), previousZoomLevel);\n\n\t\t\t\t\t//TODO: depthToAnimateIn affects _isSingleParent, if there is a multizoom we may/may not be.\n\t\t\t\t\t//As a hack we only do a animation free zoom on a single level zoom, if someone does multiple levels then we always animate\n\t\t\t\t\tif (c._isSingleParent() && previousZoomLevel - 1 === newZoomLevel) {\n\t\t\t\t\t\tc.clusterShow();\n\t\t\t\t\t\tc._recursivelyRemoveChildrenFromMap(bounds, mapMinZoom, previousZoomLevel); //Immediately remove our children as we are replacing them. TODO previousBounds not bounds\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.clusterHide();\n\t\t\t\t\t}\n\n\t\t\t\t\tc._addToMap();\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t_recursivelyBecomeVisible: function (bounds, zoomLevel) {\n\t\t\tthis._recursively(bounds, this._group._map.getMinZoom(), zoomLevel, null, function (c) {\n\t\t\t\tc.clusterShow();\n\t\t\t});\n\t\t},\n\n\t\t_recursivelyAddChildrenToMap: function (startPos, zoomLevel, bounds) {\n\t\t\tthis._recursively(bounds, this._group._map.getMinZoom() - 1, zoomLevel,\n\t\t\t\tfunction (c) {\n\t\t\t\t\tif (zoomLevel === c._zoom) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//Add our child markers at startPos (so they can be animated out)\n\t\t\t\t\tfor (var i = c._markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar nm = c._markers[i];\n\n\t\t\t\t\t\tif (!bounds.contains(nm._latlng)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (startPos) {\n\t\t\t\t\t\t\tnm._backupLatlng = nm.getLatLng();\n\n\t\t\t\t\t\t\tnm.setLatLng(startPos);\n\t\t\t\t\t\t\tif (nm.clusterHide) {\n\t\t\t\t\t\t\t\tnm.clusterHide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tc._group._featureGroup.addLayer(nm);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction (c) {\n\t\t\t\t\tc._addToMap(startPos);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t_recursivelyRestoreChildPositions: function (zoomLevel) {\n\t\t\t//Fix positions of child markers\n\t\t\tfor (var i = this._markers.length - 1; i >= 0; i--) {\n\t\t\t\tvar nm = this._markers[i];\n\t\t\t\tif (nm._backupLatlng) {\n\t\t\t\t\tnm.setLatLng(nm._backupLatlng);\n\t\t\t\t\tdelete nm._backupLatlng;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (zoomLevel - 1 === this._zoom) {\n\t\t\t\t//Reposition child clusters\n\t\t\t\tfor (var j = this._childClusters.length - 1; j >= 0; j--) {\n\t\t\t\t\tthis._childClusters[j]._restorePosition();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var k = this._childClusters.length - 1; k >= 0; k--) {\n\t\t\t\t\tthis._childClusters[k]._recursivelyRestoreChildPositions(zoomLevel);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_restorePosition: function () {\n\t\t\tif (this._backupLatlng) {\n\t\t\t\tthis.setLatLng(this._backupLatlng);\n\t\t\t\tdelete this._backupLatlng;\n\t\t\t}\n\t\t},\n\n\t\t//exceptBounds: If set, don't remove any markers/clusters in it\n\t\t_recursivelyRemoveChildrenFromMap: function (previousBounds, mapMinZoom, zoomLevel, exceptBounds) {\n\t\t\tvar m, i;\n\t\t\tthis._recursively(previousBounds, mapMinZoom - 1, zoomLevel - 1,\n\t\t\t\tfunction (c) {\n\t\t\t\t\t//Remove markers at every level\n\t\t\t\t\tfor (i = c._markers.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = c._markers[i];\n\t\t\t\t\t\tif (!exceptBounds || !exceptBounds.contains(m._latlng)) {\n\t\t\t\t\t\t\tc._group._featureGroup.removeLayer(m);\n\t\t\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction (c) {\n\t\t\t\t\t//Remove child clusters at just the bottom level\n\t\t\t\t\tfor (i = c._childClusters.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tm = c._childClusters[i];\n\t\t\t\t\t\tif (!exceptBounds || !exceptBounds.contains(m._latlng)) {\n\t\t\t\t\t\t\tc._group._featureGroup.removeLayer(m);\n\t\t\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t//Run the given functions recursively to this and child clusters\n\t\t// boundsToApplyTo: a L.LatLngBounds representing the bounds of what clusters to recurse in to\n\t\t// zoomLevelToStart: zoom level to start running functions (inclusive)\n\t\t// zoomLevelToStop: zoom level to stop running functions (inclusive)\n\t\t// runAtEveryLevel: function that takes an L.MarkerCluster as an argument that should be applied on every level\n\t\t// runAtBottomLevel: function that takes an L.MarkerCluster as an argument that should be applied at only the bottom level\n\t\t_recursively: function (boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel) {\n\t\t\tvar childClusters = this._childClusters,\n\t\t\t    zoom = this._zoom,\n\t\t\t    i, c;\n\n\t\t\tif (zoomLevelToStart <= zoom) {\n\t\t\t\tif (runAtEveryLevel) {\n\t\t\t\t\trunAtEveryLevel(this);\n\t\t\t\t}\n\t\t\t\tif (runAtBottomLevel && zoom === zoomLevelToStop) {\n\t\t\t\t\trunAtBottomLevel(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (zoom < zoomLevelToStart || zoom < zoomLevelToStop) {\n\t\t\t\tfor (i = childClusters.length - 1; i >= 0; i--) {\n\t\t\t\t\tc = childClusters[i];\n\t\t\t\t\tif (c._boundsNeedUpdate) {\n\t\t\t\t\t\tc._recalculateBounds();\n\t\t\t\t\t}\n\t\t\t\t\tif (boundsToApplyTo.intersects(c._bounds)) {\n\t\t\t\t\t\tc._recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//Returns true if we are the parent of only one cluster and that cluster is the same as us\n\t\t_isSingleParent: function () {\n\t\t\t//Don't need to check this._markers as the rest won't work if there are any\n\t\t\treturn this._childClusters.length > 0 && this._childClusters[0]._childCount === this._childCount;\n\t\t}\n\t});\n\n\t/*\n\t* Extends L.Marker to include two extra methods: clusterHide and clusterShow.\n\t* \n\t* They work as setOpacity(0) and setOpacity(1) respectively, but\n\t* don't overwrite the options.opacity\n\t* \n\t*/\n\n\tL.Marker.include({\n\t\tclusterHide: function () {\n\t\t\tvar backup = this.options.opacity;\n\t\t\tthis.setOpacity(0);\n\t\t\tthis.options.opacity = backup;\n\t\t\treturn this;\n\t\t},\n\t\t\n\t\tclusterShow: function () {\n\t\t\treturn this.setOpacity(this.options.opacity);\n\t\t}\n\t});\n\n\tL.DistanceGrid = function (cellSize) {\n\t\tthis._cellSize = cellSize;\n\t\tthis._sqCellSize = cellSize * cellSize;\n\t\tthis._grid = {};\n\t\tthis._objectPoint = { };\n\t};\n\n\tL.DistanceGrid.prototype = {\n\n\t\taddObject: function (obj, point) {\n\t\t\tvar x = this._getCoord(point.x),\n\t\t\t    y = this._getCoord(point.y),\n\t\t\t    grid = this._grid,\n\t\t\t    row = grid[y] = grid[y] || {},\n\t\t\t    cell = row[x] = row[x] || [],\n\t\t\t    stamp = L.Util.stamp(obj);\n\n\t\t\tthis._objectPoint[stamp] = point;\n\n\t\t\tcell.push(obj);\n\t\t},\n\n\t\tupdateObject: function (obj, point) {\n\t\t\tthis.removeObject(obj);\n\t\t\tthis.addObject(obj, point);\n\t\t},\n\n\t\t//Returns true if the object was found\n\t\tremoveObject: function (obj, point) {\n\t\t\tvar x = this._getCoord(point.x),\n\t\t\t    y = this._getCoord(point.y),\n\t\t\t    grid = this._grid,\n\t\t\t    row = grid[y] = grid[y] || {},\n\t\t\t    cell = row[x] = row[x] || [],\n\t\t\t    i, len;\n\n\t\t\tdelete this._objectPoint[L.Util.stamp(obj)];\n\n\t\t\tfor (i = 0, len = cell.length; i < len; i++) {\n\t\t\t\tif (cell[i] === obj) {\n\n\t\t\t\t\tcell.splice(i, 1);\n\n\t\t\t\t\tif (len === 1) {\n\t\t\t\t\t\tdelete row[x];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\n\t\teachObject: function (fn, context) {\n\t\t\tvar i, j, k, len, row, cell, removed,\n\t\t\t    grid = this._grid;\n\n\t\t\tfor (i in grid) {\n\t\t\t\trow = grid[i];\n\n\t\t\t\tfor (j in row) {\n\t\t\t\t\tcell = row[j];\n\n\t\t\t\t\tfor (k = 0, len = cell.length; k < len; k++) {\n\t\t\t\t\t\tremoved = fn.call(context, cell[k]);\n\t\t\t\t\t\tif (removed) {\n\t\t\t\t\t\t\tk--;\n\t\t\t\t\t\t\tlen--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetNearObject: function (point) {\n\t\t\tvar x = this._getCoord(point.x),\n\t\t\t    y = this._getCoord(point.y),\n\t\t\t    i, j, k, row, cell, len, obj, dist,\n\t\t\t    objectPoint = this._objectPoint,\n\t\t\t    closestDistSq = this._sqCellSize,\n\t\t\t    closest = null;\n\n\t\t\tfor (i = y - 1; i <= y + 1; i++) {\n\t\t\t\trow = this._grid[i];\n\t\t\t\tif (row) {\n\n\t\t\t\t\tfor (j = x - 1; j <= x + 1; j++) {\n\t\t\t\t\t\tcell = row[j];\n\t\t\t\t\t\tif (cell) {\n\n\t\t\t\t\t\t\tfor (k = 0, len = cell.length; k < len; k++) {\n\t\t\t\t\t\t\t\tobj = cell[k];\n\t\t\t\t\t\t\t\tdist = this._sqDist(objectPoint[L.Util.stamp(obj)], point);\n\t\t\t\t\t\t\t\tif (dist < closestDistSq ||\n\t\t\t\t\t\t\t\t\tdist <= closestDistSq && closest === null) {\n\t\t\t\t\t\t\t\t\tclosestDistSq = dist;\n\t\t\t\t\t\t\t\t\tclosest = obj;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn closest;\n\t\t},\n\n\t\t_getCoord: function (x) {\n\t\t\tvar coord = Math.floor(x / this._cellSize);\n\t\t\treturn isFinite(coord) ? coord : x;\n\t\t},\n\n\t\t_sqDist: function (p, p2) {\n\t\t\tvar dx = p2.x - p.x,\n\t\t\t    dy = p2.y - p.y;\n\t\t\treturn dx * dx + dy * dy;\n\t\t}\n\t};\n\n\t/* Copyright (c) 2012 the authors listed at the following URL, and/or\n\tthe authors of referenced articles or incorporated external code:\n\thttp://en.literateprograms.org/Quickhull_(Javascript)?action=history&offset=20120410175256\n\n\tPermission is hereby granted, free of charge, to any person obtaining\n\ta copy of this software and associated documentation files (the\n\t\"Software\"), to deal in the Software without restriction, including\n\twithout limitation the rights to use, copy, modify, merge, publish,\n\tdistribute, sublicense, and/or sell copies of the Software, and to\n\tpermit persons to whom the Software is furnished to do so, subject to\n\tthe following conditions:\n\n\tThe above copyright notice and this permission notice shall be\n\tincluded in all copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\tEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\tMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n\tIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n\tCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n\tTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n\tSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\tRetrieved from: http://en.literateprograms.org/Quickhull_(Javascript)?oldid=18434\n\t*/\n\n\t(function () {\n\t\tL.QuickHull = {\n\n\t\t\t/*\n\t\t\t * @param {Object} cpt a point to be measured from the baseline\n\t\t\t * @param {Array} bl the baseline, as represented by a two-element\n\t\t\t *   array of latlng objects.\n\t\t\t * @returns {Number} an approximate distance measure\n\t\t\t */\n\t\t\tgetDistant: function (cpt, bl) {\n\t\t\t\tvar vY = bl[1].lat - bl[0].lat,\n\t\t\t\t\tvX = bl[0].lng - bl[1].lng;\n\t\t\t\treturn (vX * (cpt.lat - bl[0].lat) + vY * (cpt.lng - bl[0].lng));\n\t\t\t},\n\n\t\t\t/*\n\t\t\t * @param {Array} baseLine a two-element array of latlng objects\n\t\t\t *   representing the baseline to project from\n\t\t\t * @param {Array} latLngs an array of latlng objects\n\t\t\t * @returns {Object} the maximum point and all new points to stay\n\t\t\t *   in consideration for the hull.\n\t\t\t */\n\t\t\tfindMostDistantPointFromBaseLine: function (baseLine, latLngs) {\n\t\t\t\tvar maxD = 0,\n\t\t\t\t\tmaxPt = null,\n\t\t\t\t\tnewPoints = [],\n\t\t\t\t\ti, pt, d;\n\n\t\t\t\tfor (i = latLngs.length - 1; i >= 0; i--) {\n\t\t\t\t\tpt = latLngs[i];\n\t\t\t\t\td = this.getDistant(pt, baseLine);\n\n\t\t\t\t\tif (d > 0) {\n\t\t\t\t\t\tnewPoints.push(pt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (d > maxD) {\n\t\t\t\t\t\tmaxD = d;\n\t\t\t\t\t\tmaxPt = pt;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn { maxPoint: maxPt, newPoints: newPoints };\n\t\t\t},\n\n\n\t\t\t/*\n\t\t\t * Given a baseline, compute the convex hull of latLngs as an array\n\t\t\t * of latLngs.\n\t\t\t *\n\t\t\t * @param {Array} latLngs\n\t\t\t * @returns {Array}\n\t\t\t */\n\t\t\tbuildConvexHull: function (baseLine, latLngs) {\n\t\t\t\tvar convexHullBaseLines = [],\n\t\t\t\t\tt = this.findMostDistantPointFromBaseLine(baseLine, latLngs);\n\n\t\t\t\tif (t.maxPoint) { // if there is still a point \"outside\" the base line\n\t\t\t\t\tconvexHullBaseLines =\n\t\t\t\t\t\tconvexHullBaseLines.concat(\n\t\t\t\t\t\t\tthis.buildConvexHull([baseLine[0], t.maxPoint], t.newPoints)\n\t\t\t\t\t\t);\n\t\t\t\t\tconvexHullBaseLines =\n\t\t\t\t\t\tconvexHullBaseLines.concat(\n\t\t\t\t\t\t\tthis.buildConvexHull([t.maxPoint, baseLine[1]], t.newPoints)\n\t\t\t\t\t\t);\n\t\t\t\t\treturn convexHullBaseLines;\n\t\t\t\t} else {  // if there is no more point \"outside\" the base line, the current base line is part of the convex hull\n\t\t\t\t\treturn [baseLine[0]];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/*\n\t\t\t * Given an array of latlngs, compute a convex hull as an array\n\t\t\t * of latlngs\n\t\t\t *\n\t\t\t * @param {Array} latLngs\n\t\t\t * @returns {Array}\n\t\t\t */\n\t\t\tgetConvexHull: function (latLngs) {\n\t\t\t\t// find first baseline\n\t\t\t\tvar maxLat = false, minLat = false,\n\t\t\t\t\tmaxLng = false, minLng = false,\n\t\t\t\t\tmaxLatPt = null, minLatPt = null,\n\t\t\t\t\tmaxLngPt = null, minLngPt = null,\n\t\t\t\t\tmaxPt = null, minPt = null,\n\t\t\t\t\ti;\n\n\t\t\t\tfor (i = latLngs.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar pt = latLngs[i];\n\t\t\t\t\tif (maxLat === false || pt.lat > maxLat) {\n\t\t\t\t\t\tmaxLatPt = pt;\n\t\t\t\t\t\tmaxLat = pt.lat;\n\t\t\t\t\t}\n\t\t\t\t\tif (minLat === false || pt.lat < minLat) {\n\t\t\t\t\t\tminLatPt = pt;\n\t\t\t\t\t\tminLat = pt.lat;\n\t\t\t\t\t}\n\t\t\t\t\tif (maxLng === false || pt.lng > maxLng) {\n\t\t\t\t\t\tmaxLngPt = pt;\n\t\t\t\t\t\tmaxLng = pt.lng;\n\t\t\t\t\t}\n\t\t\t\t\tif (minLng === false || pt.lng < minLng) {\n\t\t\t\t\t\tminLngPt = pt;\n\t\t\t\t\t\tminLng = pt.lng;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (minLat !== maxLat) {\n\t\t\t\t\tminPt = minLatPt;\n\t\t\t\t\tmaxPt = maxLatPt;\n\t\t\t\t} else {\n\t\t\t\t\tminPt = minLngPt;\n\t\t\t\t\tmaxPt = maxLngPt;\n\t\t\t\t}\n\n\t\t\t\tvar ch = [].concat(this.buildConvexHull([minPt, maxPt], latLngs),\n\t\t\t\t\t\t\t\t\tthis.buildConvexHull([maxPt, minPt], latLngs));\n\t\t\t\treturn ch;\n\t\t\t}\n\t\t};\n\t}());\n\n\tL.MarkerCluster.include({\n\t\tgetConvexHull: function () {\n\t\t\tvar childMarkers = this.getAllChildMarkers(),\n\t\t\t\tpoints = [],\n\t\t\t\tp, i;\n\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tp = childMarkers[i].getLatLng();\n\t\t\t\tpoints.push(p);\n\t\t\t}\n\n\t\t\treturn L.QuickHull.getConvexHull(points);\n\t\t}\n\t});\n\n\t//This code is 100% based on https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet\n\t//Huge thanks to jawj for implementing it first to make my job easy :-)\n\n\tL.MarkerCluster.include({\n\n\t\t_2PI: Math.PI * 2,\n\t\t_circleFootSeparation: 25, //related to circumference of circle\n\t\t_circleStartAngle: 0,\n\n\t\t_spiralFootSeparation:  28, //related to size of spiral (experiment!)\n\t\t_spiralLengthStart: 11,\n\t\t_spiralLengthFactor: 5,\n\n\t\t_circleSpiralSwitchover: 9, //show spiral instead of circle from this marker count upwards.\n\t\t\t\t\t\t\t\t\t// 0 -> always spiral; Infinity -> always circle\n\n\t\tspiderfy: function () {\n\t\t\tif (this._group._spiderfied === this || this._group._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar childMarkers = this.getAllChildMarkers(null, true),\n\t\t\t\tgroup = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tcenter = map.latLngToLayerPoint(this._latlng),\n\t\t\t\tpositions;\n\n\t\t\tthis._group._unspiderfy();\n\t\t\tthis._group._spiderfied = this;\n\n\t\t\t//TODO Maybe: childMarkers order by distance to center\n\n\t\t\tif (this._group.options.spiderfyShapePositions) {\n\t\t\t\tpositions = this._group.options.spiderfyShapePositions(childMarkers.length, center);\n\t\t\t} else if (childMarkers.length >= this._circleSpiralSwitchover) {\n\t\t\t\tpositions = this._generatePointsSpiral(childMarkers.length, center);\n\t\t\t} else {\n\t\t\t\tcenter.y += 10; // Otherwise circles look wrong => hack for standard blue icon, renders differently for other icons.\n\t\t\t\tpositions = this._generatePointsCircle(childMarkers.length, center);\n\t\t\t}\n\n\t\t\tthis._animationSpiderfy(childMarkers, positions);\n\t\t},\n\n\t\tunspiderfy: function (zoomDetails) {\n\t\t\t/// <param Name=\"zoomDetails\">Argument from zoomanim if being called in a zoom animation or null otherwise</param>\n\t\t\tif (this._group._inZoomAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._animationUnspiderfy(zoomDetails);\n\n\t\t\tthis._group._spiderfied = null;\n\t\t},\n\n\t\t_generatePointsCircle: function (count, centerPt) {\n\t\t\tvar circumference = this._group.options.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),\n\t\t\t\tlegLength = circumference / this._2PI,  //radius from circumference\n\t\t\t\tangleStep = this._2PI / count,\n\t\t\t\tres = [],\n\t\t\t\ti, angle;\n\n\t\t\tlegLength = Math.max(legLength, 35); // Minimum distance to get outside the cluster icon.\n\n\t\t\tres.length = count;\n\n\t\t\tfor (i = 0; i < count; i++) { // Clockwise, like spiral.\n\t\t\t\tangle = this._circleStartAngle + i * angleStep;\n\t\t\t\tres[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\n\t\t\t}\n\n\t\t\treturn res;\n\t\t},\n\n\t\t_generatePointsSpiral: function (count, centerPt) {\n\t\t\tvar spiderfyDistanceMultiplier = this._group.options.spiderfyDistanceMultiplier,\n\t\t\t\tlegLength = spiderfyDistanceMultiplier * this._spiralLengthStart,\n\t\t\t\tseparation = spiderfyDistanceMultiplier * this._spiralFootSeparation,\n\t\t\t\tlengthFactor = spiderfyDistanceMultiplier * this._spiralLengthFactor * this._2PI,\n\t\t\t\tangle = 0,\n\t\t\t\tres = [],\n\t\t\t\ti;\n\n\t\t\tres.length = count;\n\n\t\t\t// Higher index, closer position to cluster center.\n\t\t\tfor (i = count; i >= 0; i--) {\n\t\t\t\t// Skip the first position, so that we are already farther from center and we avoid\n\t\t\t\t// being under the default cluster icon (especially important for Circle Markers).\n\t\t\t\tif (i < count) {\n\t\t\t\t\tres[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();\n\t\t\t\t}\n\t\t\t\tangle += separation / legLength + i * 0.0005;\n\t\t\t\tlegLength += lengthFactor / angle;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\n\t\t_noanimationUnspiderfy: function () {\n\t\t\tvar group = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tchildMarkers = this.getAllChildMarkers(null, true),\n\t\t\t\tm, i;\n\n\t\t\tgroup._ignoreMove = true;\n\n\t\t\tthis.setOpacity(1);\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\tfg.removeLayer(m);\n\n\t\t\t\tif (m._preSpiderfyLatlng) {\n\t\t\t\t\tm.setLatLng(m._preSpiderfyLatlng);\n\t\t\t\t\tdelete m._preSpiderfyLatlng;\n\t\t\t\t}\n\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\tm.setZIndexOffset(0);\n\t\t\t\t}\n\n\t\t\t\tif (m._spiderLeg) {\n\t\t\t\t\tmap.removeLayer(m._spiderLeg);\n\t\t\t\t\tdelete m._spiderLeg;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgroup.fire('unspiderfied', {\n\t\t\t\tcluster: this,\n\t\t\t\tmarkers: childMarkers\n\t\t\t});\n\t\t\tgroup._ignoreMove = false;\n\t\t\tgroup._spiderfied = null;\n\t\t}\n\t});\n\n\t//Non Animated versions of everything\n\tL.MarkerClusterNonAnimated = L.MarkerCluster.extend({\n\t\t_animationSpiderfy: function (childMarkers, positions) {\n\t\t\tvar group = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tlegOptions = this._group.options.spiderLegPolylineOptions,\n\t\t\t\ti, m, leg, newPos;\n\n\t\t\tgroup._ignoreMove = true;\n\n\t\t\t// Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.\n\t\t\t// The reverse order trick no longer improves performance on modern browsers.\n\t\t\tfor (i = 0; i < childMarkers.length; i++) {\n\t\t\t\tnewPos = map.layerPointToLatLng(positions[i]);\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t// Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.\n\t\t\t\tleg = new L.Polyline([this._latlng, newPos], legOptions);\n\t\t\t\tmap.addLayer(leg);\n\t\t\t\tm._spiderLeg = leg;\n\n\t\t\t\t// Now add the marker.\n\t\t\t\tm._preSpiderfyLatlng = m._latlng;\n\t\t\t\tm.setLatLng(newPos);\n\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\tm.setZIndexOffset(1000000); //Make these appear on top of EVERYTHING\n\t\t\t\t}\n\n\t\t\t\tfg.addLayer(m);\n\t\t\t}\n\t\t\tthis.setOpacity(0.3);\n\n\t\t\tgroup._ignoreMove = false;\n\t\t\tgroup.fire('spiderfied', {\n\t\t\t\tcluster: this,\n\t\t\t\tmarkers: childMarkers\n\t\t\t});\n\t\t},\n\n\t\t_animationUnspiderfy: function () {\n\t\t\tthis._noanimationUnspiderfy();\n\t\t}\n\t});\n\n\t//Animated versions here\n\tL.MarkerCluster.include({\n\n\t\t_animationSpiderfy: function (childMarkers, positions) {\n\t\t\tvar me = this,\n\t\t\t\tgroup = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tthisLayerLatLng = this._latlng,\n\t\t\t\tthisLayerPos = map.latLngToLayerPoint(thisLayerLatLng),\n\t\t\t\tsvg = L.Path.SVG,\n\t\t\t\tlegOptions = L.extend({}, this._group.options.spiderLegPolylineOptions), // Copy the options so that we can modify them for animation.\n\t\t\t\tfinalLegOpacity = legOptions.opacity,\n\t\t\t\ti, m, leg, legPath, legLength, newPos;\n\n\t\t\tif (finalLegOpacity === undefined) {\n\t\t\t\tfinalLegOpacity = L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity;\n\t\t\t}\n\n\t\t\tif (svg) {\n\t\t\t\t// If the initial opacity of the spider leg is not 0 then it appears before the animation starts.\n\t\t\t\tlegOptions.opacity = 0;\n\n\t\t\t\t// Add the class for CSS transitions.\n\t\t\t\tlegOptions.className = (legOptions.className || '') + ' leaflet-cluster-spider-leg';\n\t\t\t} else {\n\t\t\t\t// Make sure we have a defined opacity.\n\t\t\t\tlegOptions.opacity = finalLegOpacity;\n\t\t\t}\n\n\t\t\tgroup._ignoreMove = true;\n\n\t\t\t// Add markers and spider legs to map, hidden at our center point.\n\t\t\t// Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.\n\t\t\t// The reverse order trick no longer improves performance on modern browsers.\n\t\t\tfor (i = 0; i < childMarkers.length; i++) {\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\tnewPos = map.layerPointToLatLng(positions[i]);\n\n\t\t\t\t// Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.\n\t\t\t\tleg = new L.Polyline([thisLayerLatLng, newPos], legOptions);\n\t\t\t\tmap.addLayer(leg);\n\t\t\t\tm._spiderLeg = leg;\n\n\t\t\t\t// Explanations: https://jakearchibald.com/2013/animated-line-drawing-svg/\n\t\t\t\t// In our case the transition property is declared in the CSS file.\n\t\t\t\tif (svg) {\n\t\t\t\t\tlegPath = leg._path;\n\t\t\t\t\tlegLength = legPath.getTotalLength() + 0.1; // Need a small extra length to avoid remaining dot in Firefox.\n\t\t\t\t\tlegPath.style.strokeDasharray = legLength; // Just 1 length is enough, it will be duplicated.\n\t\t\t\t\tlegPath.style.strokeDashoffset = legLength;\n\t\t\t\t}\n\n\t\t\t\t// If it is a marker, add it now and we'll animate it out\n\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\tm.setZIndexOffset(1000000); // Make normal markers appear on top of EVERYTHING\n\t\t\t\t}\n\t\t\t\tif (m.clusterHide) {\n\t\t\t\t\tm.clusterHide();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Vectors just get immediately added\n\t\t\t\tfg.addLayer(m);\n\n\t\t\t\tif (m._setPos) {\n\t\t\t\t\tm._setPos(thisLayerPos);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgroup._forceLayout();\n\t\t\tgroup._animationStart();\n\n\t\t\t// Reveal markers and spider legs.\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tnewPos = map.layerPointToLatLng(positions[i]);\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t//Move marker to new position\n\t\t\t\tm._preSpiderfyLatlng = m._latlng;\n\t\t\t\tm.setLatLng(newPos);\n\t\t\t\t\n\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\tm.clusterShow();\n\t\t\t\t}\n\n\t\t\t\t// Animate leg (animation is actually delegated to CSS transition).\n\t\t\t\tif (svg) {\n\t\t\t\t\tleg = m._spiderLeg;\n\t\t\t\t\tlegPath = leg._path;\n\t\t\t\t\tlegPath.style.strokeDashoffset = 0;\n\t\t\t\t\t//legPath.style.strokeOpacity = finalLegOpacity;\n\t\t\t\t\tleg.setStyle({opacity: finalLegOpacity});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setOpacity(0.3);\n\n\t\t\tgroup._ignoreMove = false;\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tgroup._animationEnd();\n\t\t\t\tgroup.fire('spiderfied', {\n\t\t\t\t\tcluster: me,\n\t\t\t\t\tmarkers: childMarkers\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t},\n\n\t\t_animationUnspiderfy: function (zoomDetails) {\n\t\t\tvar me = this,\n\t\t\t\tgroup = this._group,\n\t\t\t\tmap = group._map,\n\t\t\t\tfg = group._featureGroup,\n\t\t\t\tthisLayerPos = zoomDetails ? map._latLngToNewLayerPoint(this._latlng, zoomDetails.zoom, zoomDetails.center) : map.latLngToLayerPoint(this._latlng),\n\t\t\t\tchildMarkers = this.getAllChildMarkers(null, true),\n\t\t\t\tsvg = L.Path.SVG,\n\t\t\t\tm, i, leg, legPath, legLength, nonAnimatable;\n\n\t\t\tgroup._ignoreMove = true;\n\t\t\tgroup._animationStart();\n\n\t\t\t//Make us visible and bring the child markers back in\n\t\t\tthis.setOpacity(1);\n\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t//Marker was added to us after we were spiderfied\n\t\t\t\tif (!m._preSpiderfyLatlng) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t//Close any popup on the marker first, otherwise setting the location of the marker will make the map scroll\n\t\t\t\tm.closePopup();\n\n\t\t\t\t//Fix up the location to the real one\n\t\t\t\tm.setLatLng(m._preSpiderfyLatlng);\n\t\t\t\tdelete m._preSpiderfyLatlng;\n\n\t\t\t\t//Hack override the location to be our center\n\t\t\t\tnonAnimatable = true;\n\t\t\t\tif (m._setPos) {\n\t\t\t\t\tm._setPos(thisLayerPos);\n\t\t\t\t\tnonAnimatable = false;\n\t\t\t\t}\n\t\t\t\tif (m.clusterHide) {\n\t\t\t\t\tm.clusterHide();\n\t\t\t\t\tnonAnimatable = false;\n\t\t\t\t}\n\t\t\t\tif (nonAnimatable) {\n\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t}\n\n\t\t\t\t// Animate the spider leg back in (animation is actually delegated to CSS transition).\n\t\t\t\tif (svg) {\n\t\t\t\t\tleg = m._spiderLeg;\n\t\t\t\t\tlegPath = leg._path;\n\t\t\t\t\tlegLength = legPath.getTotalLength() + 0.1;\n\t\t\t\t\tlegPath.style.strokeDashoffset = legLength;\n\t\t\t\t\tleg.setStyle({opacity: 0});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgroup._ignoreMove = false;\n\n\t\t\tsetTimeout(function () {\n\t\t\t\t//If we have only <= one child left then that marker will be shown on the map so don't remove it!\n\t\t\t\tvar stillThereChildCount = 0;\n\t\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\t\tm = childMarkers[i];\n\t\t\t\t\tif (m._spiderLeg) {\n\t\t\t\t\t\tstillThereChildCount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tfor (i = childMarkers.length - 1; i >= 0; i--) {\n\t\t\t\t\tm = childMarkers[i];\n\n\t\t\t\t\tif (!m._spiderLeg) { //Has already been unspiderfied\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (m.clusterShow) {\n\t\t\t\t\t\tm.clusterShow();\n\t\t\t\t\t}\n\t\t\t\t\tif (m.setZIndexOffset) {\n\t\t\t\t\t\tm.setZIndexOffset(0);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (stillThereChildCount > 1) {\n\t\t\t\t\t\tfg.removeLayer(m);\n\t\t\t\t\t}\n\n\t\t\t\t\tmap.removeLayer(m._spiderLeg);\n\t\t\t\t\tdelete m._spiderLeg;\n\t\t\t\t}\n\t\t\t\tgroup._animationEnd();\n\t\t\t\tgroup.fire('unspiderfied', {\n\t\t\t\t\tcluster: me,\n\t\t\t\t\tmarkers: childMarkers\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t}\n\t});\n\n\n\tL.MarkerClusterGroup.include({\n\t\t//The MarkerCluster currently spiderfied (if any)\n\t\t_spiderfied: null,\n\n\t\tunspiderfy: function () {\n\t\t\tthis._unspiderfy.apply(this, arguments);\n\t\t},\n\n\t\t_spiderfierOnAdd: function () {\n\t\t\tthis._map.on('click', this._unspiderfyWrapper, this);\n\n\t\t\tif (this._map.options.zoomAnimation) {\n\t\t\t\tthis._map.on('zoomstart', this._unspiderfyZoomStart, this);\n\t\t\t}\n\t\t\t//Browsers without zoomAnimation or a big zoom don't fire zoomstart\n\t\t\tthis._map.on('zoomend', this._noanimationUnspiderfy, this);\n\n\t\t\tif (!L.Browser.touch) {\n\t\t\t\tthis._map.getRenderer(this);\n\t\t\t\t//Needs to happen in the pageload, not after, or animations don't work in webkit\n\t\t\t\t//  http://stackoverflow.com/questions/8455200/svg-animate-with-dynamically-added-elements\n\t\t\t\t//Disable on touch browsers as the animation messes up on a touch zoom and isn't very noticable\n\t\t\t}\n\t\t},\n\n\t\t_spiderfierOnRemove: function () {\n\t\t\tthis._map.off('click', this._unspiderfyWrapper, this);\n\t\t\tthis._map.off('zoomstart', this._unspiderfyZoomStart, this);\n\t\t\tthis._map.off('zoomanim', this._unspiderfyZoomAnim, this);\n\t\t\tthis._map.off('zoomend', this._noanimationUnspiderfy, this);\n\n\t\t\t//Ensure that markers are back where they should be\n\t\t\t// Use no animation to avoid a sticky leaflet-cluster-anim class on mapPane\n\t\t\tthis._noanimationUnspiderfy();\n\t\t},\n\n\t\t//On zoom start we add a zoomanim handler so that we are guaranteed to be last (after markers are animated)\n\t\t//This means we can define the animation they do rather than Markers doing an animation to their actual location\n\t\t_unspiderfyZoomStart: function () {\n\t\t\tif (!this._map) { //May have been removed from the map by a zoomEnd handler\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._map.on('zoomanim', this._unspiderfyZoomAnim, this);\n\t\t},\n\n\t\t_unspiderfyZoomAnim: function (zoomDetails) {\n\t\t\t//Wait until the first zoomanim after the user has finished touch-zooming before running the animation\n\t\t\tif (L.DomUtil.hasClass(this._map._mapPane, 'leaflet-touching')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._map.off('zoomanim', this._unspiderfyZoomAnim, this);\n\t\t\tthis._unspiderfy(zoomDetails);\n\t\t},\n\n\t\t_unspiderfyWrapper: function () {\n\t\t\t/// <summary>_unspiderfy but passes no arguments</summary>\n\t\t\tthis._unspiderfy();\n\t\t},\n\n\t\t_unspiderfy: function (zoomDetails) {\n\t\t\tif (this._spiderfied) {\n\t\t\t\tthis._spiderfied.unspiderfy(zoomDetails);\n\t\t\t}\n\t\t},\n\n\t\t_noanimationUnspiderfy: function () {\n\t\t\tif (this._spiderfied) {\n\t\t\t\tthis._spiderfied._noanimationUnspiderfy();\n\t\t\t}\n\t\t},\n\n\t\t//If the given layer is currently being spiderfied then we unspiderfy it so it isn't on the map anymore etc\n\t\t_unspiderfyLayer: function (layer) {\n\t\t\tif (layer._spiderLeg) {\n\t\t\t\tthis._featureGroup.removeLayer(layer);\n\n\t\t\t\tif (layer.clusterShow) {\n\t\t\t\t\tlayer.clusterShow();\n\t\t\t\t}\n\t\t\t\t\t//Position will be fixed up immediately in _animationUnspiderfy\n\t\t\t\tif (layer.setZIndexOffset) {\n\t\t\t\t\tlayer.setZIndexOffset(0);\n\t\t\t\t}\n\n\t\t\t\tthis._map.removeLayer(layer._spiderLeg);\n\t\t\t\tdelete layer._spiderLeg;\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Adds 1 public method to MCG and 1 to L.Marker to facilitate changing\n\t * markers' icon options and refreshing their icon and their parent clusters\n\t * accordingly (case where their iconCreateFunction uses data of childMarkers\n\t * to make up the cluster icon).\n\t */\n\n\n\tL.MarkerClusterGroup.include({\n\t\t/**\n\t\t * Updates the icon of all clusters which are parents of the given marker(s).\n\t\t * In singleMarkerMode, also updates the given marker(s) icon.\n\t\t * @param layers L.MarkerClusterGroup|L.LayerGroup|Array(L.Marker)|Map(L.Marker)|\n\t\t * L.MarkerCluster|L.Marker (optional) list of markers (or single marker) whose parent\n\t\t * clusters need to be updated. If not provided, retrieves all child markers of this.\n\t\t * @returns {L.MarkerClusterGroup}\n\t\t */\n\t\trefreshClusters: function (layers) {\n\t\t\tif (!layers) {\n\t\t\t\tlayers = this._topClusterLevel.getAllChildMarkers();\n\t\t\t} else if (layers instanceof L.MarkerClusterGroup) {\n\t\t\t\tlayers = layers._topClusterLevel.getAllChildMarkers();\n\t\t\t} else if (layers instanceof L.LayerGroup) {\n\t\t\t\tlayers = layers._layers;\n\t\t\t} else if (layers instanceof L.MarkerCluster) {\n\t\t\t\tlayers = layers.getAllChildMarkers();\n\t\t\t} else if (layers instanceof L.Marker) {\n\t\t\t\tlayers = [layers];\n\t\t\t} // else: must be an Array(L.Marker)|Map(L.Marker)\n\t\t\tthis._flagParentsIconsNeedUpdate(layers);\n\t\t\tthis._refreshClustersIcons();\n\n\t\t\t// In case of singleMarkerMode, also re-draw the markers.\n\t\t\tif (this.options.singleMarkerMode) {\n\t\t\t\tthis._refreshSingleMarkerModeMarkers(layers);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Simply flags all parent clusters of the given markers as having a \"dirty\" icon.\n\t\t * @param layers Array(L.Marker)|Map(L.Marker) list of markers.\n\t\t * @private\n\t\t */\n\t\t_flagParentsIconsNeedUpdate: function (layers) {\n\t\t\tvar id, parent;\n\n\t\t\t// Assumes layers is an Array or an Object whose prototype is non-enumerable.\n\t\t\tfor (id in layers) {\n\t\t\t\t// Flag parent clusters' icon as \"dirty\", all the way up.\n\t\t\t\t// Dumb process that flags multiple times upper parents, but still\n\t\t\t\t// much more efficient than trying to be smart and make short lists,\n\t\t\t\t// at least in the case of a hierarchy following a power law:\n\t\t\t\t// http://jsperf.com/flag-nodes-in-power-hierarchy/2\n\t\t\t\tparent = layers[id].__parent;\n\t\t\t\twhile (parent) {\n\t\t\t\t\tparent._iconNeedsUpdate = true;\n\t\t\t\t\tparent = parent.__parent;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Re-draws the icon of the supplied markers.\n\t\t * To be used in singleMarkerMode only.\n\t\t * @param layers Array(L.Marker)|Map(L.Marker) list of markers.\n\t\t * @private\n\t\t */\n\t\t_refreshSingleMarkerModeMarkers: function (layers) {\n\t\t\tvar id, layer;\n\n\t\t\tfor (id in layers) {\n\t\t\t\tlayer = layers[id];\n\n\t\t\t\t// Make sure we do not override markers that do not belong to THIS group.\n\t\t\t\tif (this.hasLayer(layer)) {\n\t\t\t\t\t// Need to re-create the icon first, then re-draw the marker.\n\t\t\t\t\tlayer.setIcon(this._overrideMarkerIcon(layer));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tL.Marker.include({\n\t\t/**\n\t\t * Updates the given options in the marker's icon and refreshes the marker.\n\t\t * @param options map object of icon options.\n\t\t * @param directlyRefreshClusters boolean (optional) true to trigger\n\t\t * MCG.refreshClustersOf() right away with this single marker.\n\t\t * @returns {L.Marker}\n\t\t */\n\t\trefreshIconOptions: function (options, directlyRefreshClusters) {\n\t\t\tvar icon = this.options.icon;\n\n\t\t\tL.setOptions(icon, options);\n\n\t\t\tthis.setIcon(icon);\n\n\t\t\t// Shortcut to refresh the associated MCG clusters right away.\n\t\t\t// To be used when refreshing a single marker.\n\t\t\t// Otherwise, better use MCG.refreshClusters() once at the end with\n\t\t\t// the list of modified markers.\n\t\t\tif (directlyRefreshClusters && this.__parent) {\n\t\t\t\tthis.__parent._group.refreshClusters(this);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\t});\n\n\texports.MarkerClusterGroup = MarkerClusterGroup;\n\texports.MarkerCluster = MarkerCluster;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=leaflet.markercluster-src.js.map\n","var EmitOnOff = module.exports = function(thing){\n  if (!thing) thing = {};\n\n  thing._subs = [];\n  thing._paused = false;\n  thing._pending = [];\n\n  /**\n   * Sub of pubsub\n   * @param  {String}   name name of event\n   * @param  {Function} cb   your callback\n   */\n  thing.on = function(name, cb){\n    thing._subs[name] = thing._subs[name] || [];\n    thing._subs[name].push(cb);\n  };\n\n  /**\n   * remove sub of pubsub\n   * @param  {String}   name name of event\n   * @param  {Function} cb   your callback\n   */\n  thing.off = function(name, cb){\n    if (!thing._subs[name]) return;\n    for (var i in thing._subs[name]){\n      if (thing._subs[name][i] === cb){\n        thing._subs[name].splice(i);\n        break;\n      }\n    }\n  };\n\n  /**\n   * Pub of pubsub\n   * @param  {String}   name name of event\n   * @param  {Mixed}    data the data to publish\n   */\n  thing.emit = function(name){\n    if (!thing._subs[name]) return;\n\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    if (thing._paused) {\n      thing._pending[name] = thing._pending[name] || [];\n      thing._pending[name].push(args)\n      return\n    }\n\n    for (var i in thing._subs[name]){\n      thing._subs[name][i].apply(thing, args);\n    }\n  };\n\n  thing.pause = function() {\n    thing._paused = true;\n  };\n\n  thing.resume = function() {\n    thing._paused = false;\n\n    for (var name in thing._pending) {\n      for (var i = 0; i < thing._pending[name].length; i++) {\n        thing.emit(name, thing._pending[name][i])\n      }\n    }\n  };\n\n  return thing;\n};","import 'whatwg-fetch';\nimport { nlmaps } from '../nlmaps/dist/nlmaps.es.js';\nimport { pointQueryChain } from './lib.js';\nimport 'leaflet.markercluster';\nimport emitonoff from 'emitonoff';\nconst mora = {};\nemitonoff(mora);\n\nmora.createMap = async function(config) {\n  //create map\n  let map = nlmaps.createMap(config);\n  //subscribe chain of API calls to the nlmaps click event\n  nlmaps.on(\"mapclick\", async function(click) {\n    const result = await pointQueryChain(click);\n    mora.emit(\"query-results\", result);\n  });\n\n  mora.on(\"query-results\", function(res) {\n    if (res.dichtstbijzijnd_adres !== null) {\n      let adres = res.dichtstbijzijnd_adres;\n      let display_string = `${adres.openbare_ruimte} ${adres.huisnummer}\n${adres.huisletter ? adres.huisletter : \"\"}\n${adres.huisnummer_toevoeging ? \"-\" + adres.huisnummer_toevoeging : \"\"}\n, ${adres.postcode} ${adres.woonplaats}`;\n      document.getElementById(\n        \"nlmaps-geocoder-control-input\"\n      ).value = display_string;\n    } else {\n      document.getElementById(\"nlmaps-geocoder-control-input\").value = \"\";\n    }\n  });\n\n  nlmaps.on(\"search-select\", async function(e) {\n    let point = {\n      latlng: { lat: e.latlng.coordinates[1], lng: e.latlng.coordinates[0] },\n      resultObject: e.resultObject\n    };\n    const result = await pointQueryChain(point);\n    mora.emit(\"query-results\", result);\n    //emit mapclick so we can place a marker\n    nlmaps.emit(\"mapclick\", point);\n  });\n\n  //attach user-supplied event handlers\n  if (typeof config.clickHandlers === \"function\") {\n    nlmaps.on(\"mapclick\", config.clickHandlers);\n  } else if (Array.isArray(config.clickHandlers)) {\n    config.clickHandlers.forEach(f => {\n      if (typeof f === \"function\") {\n        nlmaps.on(\"mapclick\", f);\n      }\n    });\n  }\n  if (typeof config.onQueryResult === \"function\") {\n    mora.on(\"query-results\", config.onQueryResult);\n  } else if (Array.isArray(config.onQueryResult)) {\n    config.onQueryResult.forEach(f => {\n      if (typeof f === \"function\") {\n        mora.on(\"query-results\", f);\n      }\n    });\n  }\n  //this is the only private subscription we do here, since it belongs to the map viewport.\n  //setup click and feature handlers\n  //let clicks = nlmaps.clickProvider(map);\n  let singleMarker = nlmaps.singleMarker(map);\n  //clicks.subscribe(singleMarker);\n\n  //partially apply singleMarker for search results listener\n  function markerFromSearch(click) {\n    singleMarker(1, click, false, true);\n  }\n\n  nlmaps.on(\"mapclick\", markerFromSearch);\n  return map;\n};\n\nconst pointquery = mora;\nexport default pointquery;\n"],"names":["self","fetch","support","searchParams","iterable","Symbol","blob","Blob","e","formData","arrayBuffer","viewClasses","isDataView","obj","DataView","prototype","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","indexOf","Object","toString","call","normalizeName","name","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","map","forEach","append","Array","isArray","header","getOwnPropertyNames","oldValue","get","has","hasOwnProperty","set","callback","thisArg","keys","push","values","entries","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","length","i","fromCharCode","join","bufferClone","slice","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","Error","type","rejected","then","text","decode","json","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","options","url","credentials","mode","referrer","clone","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","response","redirectStatuses","redirect","RangeError","location","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill","this","createCommonjsModule","o","exports","err","mergeConfig","_extends","parseBase","CONFIG","BASE_DEFAULTS","defaults","layers","BASEMAP_PROVIDERS","formatBasemapUrl","parseWMS","WMS_DEFAULTS","WMS_PROVIDERS","applyTemplate","parseGeocoder","GEOCODER","lookupUrl","suggestUrl","placeholder","parseMap","MAP","layerName","crs","format","t","workSpaceName","parseFeatureQuery","FEATUREQUERYBASEURL","parseClasses","CLASSNAMES","parseMarker","MARKER","httpGetAsync","r","onreadystatechange","readyState","wktPointToGeoJson","includes","coordinates","parseFloat","parseClasses$1","classList","add","getMarker","getExtent","extent","getProvider","deprecated","console","warn","PROVIDERS","getWmsProvider","log","mapPointerStyle","_container","extentLeafletFormat","L","latLng","latLngBounds","markerLayer","_typeof","getMapCenter","latitude","longitude","marker","alt","icon","iconUrl","iconSize","iconAnchor","bgLayer","nlmapsBgLayer","overlayLayer","nlmapsOverlayLayer","geoLocatorControl","zoomTo","fitBounds","geoJSON","getBounds","maxZoom","geocoderControl","geocoder","createControl","getContainer","parentElement","insertBefore","getCenter","lat","lng","bgLayer$1","arguments","subdomains","ol","layer","Tile","source","XYZ","attributions","Attribution","html","attribution","markerLayer$1","style","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","src","scale","n","getMapCenter$1","a","proj","fromLonLat","s","Feature","geometry","geom","Point","setStyle","Vector","features","overlayLayer$1","TileWMS","serverType","params","LAYERS","VERSION","version","STYLES","styleName","geoLocatorControl$1","getView","getZoom","View","center","coords","zoom","setView","document","createElement","className","addEventListener","start","on","control","Control","element","zoomTo$1","setCenter","setZoom","toLonLat","geocoderControl$1","addControl","AttributionControl","google","maps","backgroundColor","opacity","border","cursor","appendChild","color","fontFamily","fontSize","innerHTML","index","geoLocatorControl$2","id","boxShadow","height","width","borderRadius","margin","zoomTo$2","indexOfMapControl","getArray","toggleAttrControl","getMapTypeId","controls","ControlPosition","BOTTOM_RIGHT","removeAt","makeGoogleAttrControl","addListener","makeGoogleLayerOpts","getTileUrl","bare_url","x","y","tileSize","Size","isPng","minZoom","getWmsTiledOptions","baseUrl","styles","transparent","bgLayer$2","ImageMapType","toMercator","Math","abs","sin","WMSTiled","getProjection","pow","fromPointToLatLng","l","c","u","d","setOpacity","overlayMapTypes","overlayLayer$2","markerLayer$2","getMapCenter$2","LatLng","Marker","title","position","geocoderControl$2","getDiv","positionHandler","emit","positionErrorHandler","geoLocator","window","navigator","emitonoff$1","GeoLocator","stop","query","catch","createAndAddMarker","latlng","addTo","markerStore","popup","offset","setContent","bindPopup","openPopup","addMarker","singleMarker","markers","removeMarker","multiMarker","testWhichLib","initMap","getElementById","target","padding","attributionControl","DomUtil","create","maxBounds","setPrefix","zoomControl","setPosition","zoomposition","Map","zoomControlOptions","LEFT_BOTTOM","fullscreenControl","getTargetElement","getElementsByClassName","cssText","remove","addGoogleLayer","setMap","setOptions","mapTypeControl","mapTypeControlOptions","mapTypeIds","BOTTOM_LEFT","mapTypes","setMapTypeId","addLayerToMap","addLayer","createBackgroundLayer","nlmaps","leaflet","googlemaps","openlayers","createOverlayLayer","createMarkerLayer","getMapCenter$3","mergeOpts","addGeoLocControlToMap","TOP_RIGHT","addGeocoderControlToMap","emitonoff","_subs","_paused","_pending","off","splice","apply","pause","resume","config","basemaps","wms","featureQuery","classnames","geocoderContainer","geocoderSearch","geocoderButton","geocoderResultList","geocoderResultItem","geocoderResultSelected","constructor","assign","attr","resultList","selectedResult","doSuggestRequest","encodeURIComponent","doLookupRequest","docs","centroide_ll","centroide_rd","stopPropagation","setAttribute","code","keyCode","showLookupResult","clearSuggestResults","suggest","preventDefault","lookup","showSuggestResults","weergavenaam","resultObject","NlmapsBgLayer","TileLayer","extend","initialize","Util","scheme","sa_id","NlmapsOverlayLayer","WMS","GeoLocatorControl","onAdd","panTo","geolocator","isStarted","addClass","DomEvent","removeClass","onRemove","geoLocateDefaultOpts","follow","started","geolocation","getCurrentPosition","bind","maximumAge","pointToQuery","queryResult","queryFeatures","subscribe","findIndex","geoLocateDefaultOpts$1","lib","createMap","message","search","overlay","geoLocate","clickProvider","defs","WGS84","GOOGLE","PJD_3PARAM","PJD_7PARAM","PJD_GRIDSHIFT","PJD_WGS84","PJD_NODATUM","SRS_WGS84_SEMIMAJOR","SRS_WGS84_SEMIMINOR","SRS_WGS84_ESQUARED","SEC_TO_RAD","HALF_PI","PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","greenwich","lisbon","paris","bogota","madrid","rome","bern","jakarta","ferro","brussels","stockholm","athens","oslo","ft","to_meter","ignoredChar","match","lkey","testkey","processedKey","defData","paramObj","v","filter","reduce","p","paramName","paramVal","paramOutname","datum","rf","lat_0","lat0","lat_1","lat1","lat_2","lat2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","alpha","gamma","rectified_grid_angle","lonc","longc","x_0","x0","y_0","y0","k_0","k0","k","b","r_a","R_A","zone","parseInt","south","utmSouth","towgs84","datum_params","units","unit","from_greenwich","pm","PrimeMeridian","nadgrids","datumCode","axis","legalAxis","substr","approx","NEUTRAL","KEYWORD","NUMBER","QUOTED","AFTERQUOTE","ENDED","whitespace","latin","keyword","endThings","digets","Parser","level","place","root","stack","currentObject","state","readCharicter","char","neutral","quoted","afterquote","number","word","afterItem","pop","newObjects","output","parseString","txt","parser","mapit","unshift","thing","out","newObj","item","sExpr","convert","rename","outName","inName","d2r","cleanWKT","wkt","projName","local","babelHelpers.typeof","PROJECTION","AXIS","axisOrder","ii","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","sphere","ellps","TOWGS84","isFinite","toMeter","ratio","renamer","list","lisp","that","def","charAt","parseProj","EPSG","ESRI","IAU2000","globals","testObj","testDef","codeWords","testWKT","some","codes","checkMercator","auth","checkProjStr","ext","testProj","maybeProjStr","projStr","destination","property","eccent","sinphi","cosphi","con","sqrt","sign","phi","com","tan","ts","eccnth","dphi","atan","es","cos","msfnz","forward","lon","adjust_lon","tsfnz","inverse","exp","phi2z","names","identity","pt","projs","merc","longlat","projStore","len","MERIT","ellipseName","SGS85","GRS80","IAU76","airy","APL4","NWL9D","mod_airy","andrae","aust_SA","GRS67","bessel","bess_nam","clrk66","clrk80","clrk80ign","clrk58","CPM","delmbr","engelis","evrst30","evrst48","evrst56","evrst69","evrstSS","fschr60","fschr60m","fschr68","helmert","hough","intl","kaula","lerch","mprts","new_intl","plessis","krass","SEasia","walbeck","WGS60","WGS66","WGS7","eccentricity","a2","b2","ep2","ellipse","Ellipsoid","wgs84","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","militargeographische_institut","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","datum_type","grids","loadedNadgrids","nadgrid","data","isLittleEndian","detectLittleEndian","readHeader","subgrids","readSubgrids","getNadgrids","parseNadgridString","optional","mandatory","grid","isNull","secondsToRadians","seconds","nFields","getInt32","nSubgridFields","nSubgrids","shiftType","decodeString","fromSemiMajorAxis","getFloat64","fromSemiMinorAxis","toSemiMajorAxis","toSemiMinorAxis","end","gridOffset","subHeader","readGridHeader","nodes","readGridNodes","lngColumnCount","round","upperLongitude","lowerLongitude","longitudeInterval","latColumnCount","upperLatitude","lowerLatitude","latitudeInterval","ll","del","lim","count","gridNodeCount","cvs","mapNodes","longitudeShift","latitudeShift","parent","gridHeader","nodesOffset","gridRecordLength","gridShiftRecords","record","getFloat32","latitudeAccuracy","longitudeAccuracy","Projection","srsCode","parseCode","ourProj","projections","datumDef","Datum","sphere_","dc_sphere","ecc","dc_eccentricity","datumObj","compareDatums","dest","geodeticToGeocentric","Longitude","Latitude","Height","z","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Infinity","geocentricToGeodetic","genau","genau2","maxiter","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","atan2","geocentricToWgs84","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricFromWgs84","x_tmp","y_tmp","z_tmp","checkParams","point","source_a","source_es","gridShiftCode","applyGridShift","dest_a","dest_b","dest_es","destGridShiftResult","Number","NaN","onlyMandatoryGrids","attemptedGrids","outer","j","jj","subgrid","epsilon","minX","minY","maxX","maxY","applySubgridShift","isNaN","pin","ct","val","tb","nadInterpolate","tol","dif","indx","floor","frct","inx","f00","f10","f11","f01","m11","m10","m00","m01","denorm","xin","yin","zin","array","m","checkCoord","num","checkNotWGS","transform","enforceAxis","toPoint","hasZ","checkSanity","adjust_axis","datum_transform","transformer","from","to","transformedArray","concat","checkProj","oProj","proj4","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","A","I","O","V","accuracy","encode","LLtoUTM","mgrs","bbox","UTMtoLL","left","bottom","right","top","degToRad","deg","radToDeg","rad","Lat","Long","eccSquared","LongOrigin","eccPrimeSquared","N","T","C","M","LatRad","LongRad","LongOriginRad","ZoneNumber","UTMEasting","UTMNorthing","northing","easting","zoneNumber","zoneLetter","getLetterDesignator","utm","e1","N1","T1","C1","R1","D","mu","phi1Rad","topRight","LetterDesignator","seasting","snorthing","get100kID","setParm","get100kSetForZone","setColumn","setRow","getLetter100kID","column","row","parm","colOrigin","charCodeAt","rowOrigin","colInt","rowInt","rollover","twoLetter","mgrsString","hunK","sb","testChar","substring","east100k","getEastingFromChar","north100k","getNorthingFromChar","getMinNorthing","remainder","sep","sepEasting","sepNorthing","accuracyBonus","sepEastingString","sepNorthingString","curCol","eastingValue","rewindMarker","curRow","northingValue","fromMGRS","mgrsStr","toMGRS","C00","C02","C04","C06","C08","C22","C44","C46","C48","C66","C68","C88","en","sphi","cphi","MAX_ITER","arg","pj_mlfn","pj_enfn","ml0","delta_lon","sin_phi","cos_phi","acos","al","als","cs","tq","ml","f","g","temp","h","asin","pj_inv_mlfn","tan_phi","ds","max","min","log1py","hypot","pp","B","cos_2B","h1","h2","arg_r","hr1","hr2","hr","arg_i","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","cosh_arg_i","cosh","hi1","hi","hi2","tmerc","cgb","cbg","utg","gtu","np","Qn","gatg","Zb","clens","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","asinhy","tmp","clens_cmplx","dependsOn","adjust_zone","etmerc","esinp","rc","phic0","ratexp","K","srat","DEL_TOL","gauss","sinc0","cosc0","R2","sinc","cosc","cosl","rho","ssfn_","phit","eccen","coslat0","sinlat0","cons","ms1","X0","cosX0","sinX0","sinlat","coslat","sinX","cosX","rh","dlon","ce","Chi","phy0","lambda0","sinPhy0","semiMajorAxis","invF","flattening","e2","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","TOL","isTypeA","typeAProjections","projectionName","cosph0","F","H","sinph0","J","gamma0","lamc","lam1","lam2","phi1","phi2","alpha_c","AB","no_off","no_rot","alp","gam","one_es","E","lam0","pi","singam","cosgam","sinrot","cosrot","rB","ArB","BrA","u_0","v_pole_n","v_pole_s","U","W","Qp","Sp","Tp","Vp","Up","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","ns","f0","rh1","theta","s45","s90","fi0","alfa","uq","u0","n0","s0","ro0","ad","gfi","deltav","eps","ro","czech","fi1","e0","e3","e0fn","e1fn","e2fn","e3fn","mlfn","lam","nl","gN","tl","asq","cl","dd","ml1","imlfn","nl1","rl1","tl1","dl","dsq","adjust_lat","S_POLE","N_POLE","EQUIT","OBLIQ","qp","qsfnz","mmf","apa","authset","rq","xmf","ymf","sinb1","cosb1","coslam","sinlam","q","sinb","cosb","cCe","sCe","ab","cosz","sinz","authlat","P00","P01","P02","P10","P11","P20","APA","beta","sin_po","cos_po","t1","qs1","t2","qs2","t3","qs0","ns0","qs","phi1z","asinz","eccnts","sin_p14","cos_p14","infinity_dist","coslon","ksp","iqsfnz","dlat","el","bl","tanphi","mln","mlnp","ma","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_re","th_im","th_n_re","th_n_im","th_n_re1","th_n_im1","z_re","z_im","delta_x","delta_y","z_n_re","z_n_im","z_n_re1","z_n_im1","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","C_y","C_x","delta_theta","ml2","sinth","costh","gsq","msq","xx","yy","xys","c1","c2","c3","a1","m1","th1","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","GH","Hs","kp","cos_c","s2","s3","s4","s5","cosAz","Ee","sinpsi","FACE_ENUM","FRONT","RIGHT","BACK","LEFT","TOP","BOTTOM","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","face","one_minus_f","one_minus_f_squared","xy","area","sinlon","qsc_shift_lon_origin","qsc_fwd_equat_face_theta","lp","nu","cosmu","tannu","tantheta","invert_sign","xa","slon","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","poly3_der","newton_rapshon","f_df","max_err","iters","upd","azi","degrees","tilt","pn1","rp","pfact","omega","cg","sg","cw","sw","yt","ba","bm","bq","flip_axis","sweep","radius_g_1","radius_g","rone_es","radius_p","radius_p2","radius_p_inv2","shape","v_x","v_y","v_z","det","v_zp","Proj","sterea","stere","somerc","omerc","lcc","krovak","cass","laea","aea","gnom","cea","eqc","poly","nzmg","mill","sinu","moll","eqdc","vandg","aeqd","ortho","qsc","robin","geocent","tpers","geos","defaultDatum","common","includedProjections","click","nummeraanduidingId","nummeraanduiding_id","requestFormatter","responseFormatter","res","getBagInfo","dichtstbijzijnd_adres","_links","href","openbare_ruimte","_display","huisnummer","huisletter","huisnummer_toevoeging","postcode","woonplaats","object","getFullObjectData","buurtinfo","findOmgevingFeature","wijkinfo","stadsdeelinfo","omgevingsinfo","buurtnaam","display","buurtcode","vollcode","wijknaam","wijkcode","stadsdeelnaam","stadsdeelcode","getOmgevingInfo","pointQueryChain","transformCoords","feature","find","feat","properties","xyRD","search_id","filtered","results","landelijk_id","type_adres","global","factory","MarkerClusterGroup","FeatureGroup","maxClusterRadius","iconCreateFunction","clusterPane","pane","spiderfyOnEveryZoom","spiderfyOnMaxZoom","showCoverageOnHover","zoomToBoundsOnClick","singleMarkerMode","disableClusteringAtZoom","removeOutsideVisibleBounds","animate","animateAddingMarkers","spiderfyShapePositions","spiderfyDistanceMultiplier","spiderLegPolylineOptions","weight","chunkedLoading","chunkInterval","chunkDelay","chunkProgress","polygonOptions","_defaultIconCreateFunction","_featureGroup","featureGroup","addEventParent","_nonPointGroup","_inZoomAnimation","_needsClustering","_needsRemoving","_currentShownBounds","_queue","_childMarkerEventHandlers","_childMarkerDragStart","_childMarkerMoved","_childMarkerDragEnd","TRANSITION","_withAnimation","_noAnimation","_markerCluster","MarkerCluster","MarkerClusterNonAnimated","LayerGroup","addLayers","getLatLng","fire","_map","hasLayer","_unspiderfy","_addLayer","_maxZoom","_topClusterLevel","_recalculateBounds","_refreshClustersIcons","visibleLayer","currentZoom","_zoom","__parent","contains","_animationAddLayer","_animationAddLayerNonAnimated","removeLayer","removeLayers","_arraySplice","_latlng","_unspiderfyLayer","_removeLayer","clusterShow","layersArray","skipLayerAddEvent","fg","npg","chunked","originalArray","Date","getTime","process","elapsed","_extractNonGroupLayers","getChildCount","getAllChildMarkers","otherMarker","_recursivelyAddChildrenToMap","setTimeout","needsClustering","layersArray2","l2","clearLayers","_gridClusters","_gridUnclustered","_noanimationUnspiderfy","eachLayer","_generateInitialClusters","bounds","LatLngBounds","_bounds","context","needsRemoving","thisNeedsRemoving","getLayers","getLayer","stamp","anArray","_group","zoomToShowLayer","showMarker","_icon","once","spiderfy","zoomToBounds","getMaxZoom","_maxLat","projection","MAX_LATITUDE","newlatlng","_getExpandedVisibleBounds","_zoomEnd","_moveEnd","_spiderfierOnAdd","_bindEvents","_unbindEvents","_mapPane","_spiderfierOnRemove","_hideCoverage","getVisibleParent","vMarker","_removeFromGridUnclustered","gridUnclustered","getMinZoom","removeObject","project","__dragStart","_ignoreMove","isPopupOpen","_popup","isOpen","_moveChild","oldLatLng","dragStart","removeFromDistanceGrid","dontUpdateMap","gridClusters","cluster","_markers","_childCount","_boundsNeedUpdate","_cLatLng","addObject","_childClusters","_iconNeedsUpdate","_isOrIsParent","oel","parentNode","propagate","originalEvent","relatedTarget","listens","childCount","DivIcon","_zoomOrSpiderfy","_showCoverage","bottomCluster","focus","_shownPolygon","_spiderfied","Polygon","getConvexHull","_mergeSplitClusters","newBounds","_recursivelyRemoveChildrenFromMap","ceil","radius","radiusFn","DistanceGrid","markerPoint","_overrideMarkerIcon","closest","getNearObject","_addChild","newCluster","lastParent","_updateIcon","_enqueue","fn","_queueTimeout","_processQueue","clearTimeout","mapZoom","intersects","_animationStart","_animationZoomIn","_animationZoomOut","_mapBoundsInfinite","Browser","mobile","_checkBoundsMaxLat","pad","maxLat","getNorth","_northEast","getSouth","_southWest","_addToMap","group","include","previousZoomLevel","newZoomLevel","_recursively","startPos","_isSingleParent","clusterHide","_forceLayout","_recursivelyBecomeVisible","_recursivelyRestoreChildPositions","_animationEnd","_animationZoomOutSingle","me","_setPos","latLngToLayerPoint","_recursivelyAnimateChildrenInAndAddSelfToMap","setLatLng","falseFn","offsetWidth","markerClusterGroup","storageArray","ignoreDraggedMarker","fitBoundsOptions","childClusters","boundsZoom","getBoundsZoom","newClusters","setIcon","createIcon","_iconObj","createShadow","new1","isNotificationFromChild","_setClusterCenter","child","_resetBounds","latSum","lngSum","totalCount","childLatLng","_wLatLng","_backupLatlng","_recursivelyAnimateChildrenIn","cm","mapMinZoom","zoomLevel","nm","_restorePosition","previousBounds","exceptBounds","boundsToApplyTo","zoomLevelToStart","zoomLevelToStop","runAtEveryLevel","runAtBottomLevel","backup","cellSize","_cellSize","_sqCellSize","_grid","_objectPoint","_getCoord","cell","updateObject","eachObject","removed","dist","objectPoint","closestDistSq","_sqDist","p2","dx","dy","QuickHull","getDistant","cpt","vY","vX","findMostDistantPointFromBaseLine","baseLine","latLngs","maxD","maxPt","newPoints","maxPoint","buildConvexHull","convexHullBaseLines","minLat","maxLng","minLng","maxLatPt","minLatPt","maxLngPt","minLngPt","minPt","ch","childMarkers","points","_2PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_circleSpiralSwitchover","positions","_generatePointsSpiral","_generatePointsCircle","_animationSpiderfy","unspiderfy","zoomDetails","_animationUnspiderfy","centerPt","circumference","legLength","angleStep","angle","_round","separation","lengthFactor","_preSpiderfyLatlng","setZIndexOffset","_spiderLeg","legOptions","leg","newPos","layerPointToLatLng","Polyline","thisLayerLatLng","thisLayerPos","svg","Path","SVG","finalLegOpacity","legPath","_path","getTotalLength","strokeDasharray","strokeDashoffset","_latLngToNewLayerPoint","nonAnimatable","closePopup","stillThereChildCount","_unspiderfyWrapper","zoomAnimation","_unspiderfyZoomStart","touch","getRenderer","_unspiderfyZoomAnim","hasClass","refreshClusters","_layers","_flagParentsIconsNeedUpdate","_refreshSingleMarkerModeMarkers","refreshIconOptions","directlyRefreshClusters","defineProperty","EmitOnOff","module","cb","args","mora","markerFromSearch","adres","display_string","clickHandlers","onQueryResult","pointquery"],"mappings":"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"}